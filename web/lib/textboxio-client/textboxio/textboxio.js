/*
 Textbox.io JavaScript Library
 Copyright (c) 2013-2017 Ephox Corp. All rights reserved.
 This software is provided "AS IS," without a warranty of any kind.

 Version: 2.3.0.46
 Client Build: 2.3.0.46
*/
(function(){var xa,sa={},l=function(c,e,d){if("string"!==typeof c)throw"module id must be a string";if(void 0===e)throw"no dependencies for "+c;if(void 0===d)throw"no definition function for "+c;sa[c]={deps:e,defn:d,instance:void 0}},pa=function(c){var e=sa[c];if(void 0===e)throw"module ["+c+"] was undefined";if(void 0===e.instance){for(var d=sa[c],a=d.deps,b=d.defn,g=a.length,f=Array(g),h=0;h<g;++h)f[h]=pa(a[h]);a=b.apply(null,f);if(void 0===a)throw"module ["+c+"] returned undefined";d.instance=
a}return e.instance};xa={define:l,require:function(c,e){for(var d=c.length,a=Array(d),b=0;b<d;++b)a.push(pa(c[b]));e.apply(null,e)},demand:pa};var Aa=pa,$=function(c,e){l(c,[],function(){return e})};l("1",[],function(){return Function("return this;")()});l("8",[],function(){return function(){return{major:"2",minor:"3",full:"2.3.0.46"}}});$("r",Array);$("n",Error);l("9",["r","n"],function(c,e){var d=function(a){return function(){return a}},a=d(!1),b=d(!0);return{noop:function(){},compose:function(a,
b){return function(){return a(b.apply(null,arguments))}},constant:d,identity:function(a){return a},tripleEquals:function(a,b){return a===b},curry:function(a){for(var b=new c(arguments.length-1),d=1;d<arguments.length;d++)b[d-1]=arguments[d];return function(){for(var d=new c(arguments.length),h=0;h<d.length;h++)d[h]=arguments[h];d=b.concat(d);return a.apply(null,d)}},not:function(a){return function(){return!a.apply(null,arguments)}},die:function(a){return function(){throw new e(a);}},apply:function(a){return a()},
call:function(a){a()},never:a,always:b}});l("7",["9"],function(c){return c});l("2",["8","7"],function(c,e){return function(d){d=e.die(d);return{replace:d,replaceAll:d,inline:d,inlineAll:d,get:d,getActiveEditor:d,definePlugin:d,version:c,isSupported:e.constant(!1)}}});$("x",String);l("a",["r","x"],function(c,e){var d=function(a){return function(b){if(null===b)b="null";else{var d=typeof b;b="object"===d&&c.prototype.isPrototypeOf(b)?"array":"object"===d&&e.prototype.isPrototypeOf(b)?"string":d}return b===
a}};return{isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")}});l("b",["r","x"],function(c,e){var d=function(a){return function(b){return a===b}},a=function(){var a=c.prototype.indexOf,b=function(b,c){return a.call(b,c)},f=function(a,b){return n(a,d(b))};return void 0===a?f:b}(),b=function(b,c){return-1<a(b,c)},g=function(a,b){for(var d=a.length,f=new c(d),g=0;g<d;g++)f[g]=b(a[g],
g,a);return f},f=function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c,a)},h=function(a,b){for(var c=[],d=0,f=a.length;d<f;d++){var g=a[d];b(g,d,a)&&c.push(g)}return c},k=function(a,b,c){f(a,function(a){c=b(c,a)});return c},m=function(a,b){for(var c=0,d=a.length;c<d;c++){var f=a[c];if(b(f,c,a))return f}},n=function(a,b){for(var c=b||q,d=0,f=a.length;d<f;++d)if(!0===c(a[d]))return d;return-1},p=c.prototype.push,r=function(a){for(var b=[],c=0,d=a.length;c<d;++c)p.apply(b,a[c]);return b},q=d(!0),s=function(a,
b){for(var c=b||q,d=0,f=a.length;d<f;++d)if(!0!==c(a[d],d))return!1;return!0},t=c.prototype.slice,u=function(a){a=t.call(a,0);a.reverse();return a};return{map:g,each:f,partition:function(a,b){for(var c=[],d=[],f=0,g=a.length;f<g;f++){var h=a[f];(b(h,f,a)?c:d).push(h)}return{pass:c,fail:d}},filter:h,groupBy:function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],f=[],g=0,h=a.length;g<h;g++){var e=a[g],k=b(e);k!==c&&(d.push(f),f=[]);c=k;f.push(e)}0!==f.length&&d.push(f);return d},indexOf:a,foldr:function(a,
b,c){return k(u(a),b,c)},foldl:k,find:m,findIndex:n,findOr:function(a,b,c){a=m(a,b);return void 0!==a?a:c},findOrDie:function(a,b,c){b=m(a,b);if(void 0===b)throw c||"Could not find element in array: "+e(a);return b},flatten:r,bind:function(a,b){var c=g(a,b);return r(c)},forall:s,exists:function(a,b){return-1<n(a,b)},contains:b,equal:function(a,b){return a.length===b.length&&s(a,function(a,c){return a===b[c]})},reverse:u,chunk:function(a,b){for(var c=[],d=0;d<a.length;d+=b){var f=a.slice(d,d+b);c.push(f)}return c},
difference:function(a,c){return h(a,function(a){return!b(c,a)})},mapToObject:function(a,b){for(var c={},d=0,f=a.length;d<f;d++){var g=a[d];c[e(g)]=b(g,d)}return c},pure:function(a){return[a]}}});l("y",["7"],function(c){return function(e,d,a){var b=e.isiOS()&&!0===/ipad/i.test(a),g=e.isiOS()&&!b,f=e.isAndroid()&&3===e.version.major,h=e.isAndroid()&&4===e.version.major,f=b||f||h&&!0===/mobile/i.test(a),k=(h=e.isiOS()||e.isAndroid())&&!f;d=d.isSafari()&&e.isiOS()&&!1===/safari/i.test(a);return{isiPad:c.constant(b),
isiPhone:c.constant(g),isTablet:c.constant(f),isPhone:c.constant(k),isTouch:c.constant(h),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:c.constant(d)}}});l("z",[],function(){return{create:function(c,e,d){return{browser:{current:c,version:e},os:{current:d}}}}});l("1t",[],function(){var c=function(c){return function(){return c}};return{getter:c,attachGetters:function(e,d,a){for(var b=0;b<a.length;b++)e["is"+a[b].name]=c(a[b].name===d)}}});l("10",["1t"],function(c){return{create:function(e,d,a){var b=
c.attachGetters,g={};g.current=d;g.version=a;b(g,g.current,e);return g}}});$("1u",Math);$("1v",isFinite);$("1w",isNaN);$("1x",parseFloat);l("1m",["1u","1v","1w","1x"],function(c,e,d,a){var b=function(a){return function(b,c){var d=typeof c;if(d!==a)throw b+" was not a "+a+". Was: "+c+" ("+d+")";}},g=b("string"),f=b("number"),h=function(a,b){f(a,b);if(b!==c.abs(b))throw a+" was not an integer. Was: "+b;};return{vString:g,vChar:function(a,b){g(a,b);if(1!==b.length)throw a+" was not a single char. Was: "+
b;},vInt:h,vNat:function(a,b){h(a,b);if(0>b)throw a+" was not a natural number. Was: "+b;},pNum:function(b){return!d(a(b))&&e(b)}}});l("w",["1m"],function(c){var e=function(a,b,c){return""===b?!0:a.length<b.length?!1:a.substr(c,c+b.length)===b},d=function(a){var b=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(b(a[d]));return c};return function(){var c=b(arguments,function(a){return"string"===typeof a?a.toLowerCase():a});return a.apply(this,c)}},a=function(a,b){return e(a,b,0)},b=d(a),g=function(a,
b){return e(a,b,a.length-b.length)},f=d(g),h=function(a,b){return a.substr(0,b)},k=function(a,b){return a.substr(a.length-b,a.length)},m=function(a,b){return function(c,d){return a(c,d)?b(c,c.length-d.length):c}},n=m(a,k),m=m(g,h),p=function(a,b){return function(c,d){return a(c,d)?c:b(c,d)}},r=p(a,function(a,b){return b+a}),p=p(g,function(a,b){return a+b}),q=function(a,b){return-1!=a.indexOf(b)},s=d(q),t=function(a,b){return a===b},d=d(t),u=function(a){if(""===a)throw"head on empty string";return a.substr(0,
1)},v=function(a){if(""===a)throw"tail on empty string";return a.substr(1,a.length-1)},w=function(a,b){c.vString("str",a);c.vNat("num",b);for(var d="",f=0;f<b;f++)d+=a;return d},z=function(a){return function(b,d,f){c.vString("str",b);c.vChar("c",d);c.vNat("width",f);var g=b.length;return g>=f?b:a(b,w(d,f-g))}},x=z(function(a,b){return b+a}),z=z(function(a,b){return a+b});return{supplant:function(a,b){return a.replace(/\${([^{}]*)}/g,function(a,c){var d=b[c],f=typeof d;return"string"===f||"number"===
f?d:a})},startsWith:a,startsWithIgnoringCase:b,endsWith:g,endsWithIgnoringCase:f,first:h,last:k,removeLeading:n,removeTrailing:m,ensureLeading:r,ensureTrailing:p,trim:function(a){return a.replace(/^\s+|\s+$/g,"")},lTrim:function(a){return a.replace(/^\s+/g,"")},rTrim:function(a){return a.replace(/\s+$/g,"")},contains:q,containsIgnoringCase:s,htmlEncodeDoubleQuotes:function(a){return a.replace(/\"/gm,"&quot;")},equals:t,equalsIgnoringCase:d,head:u,repead:w,padLeft:x,padRight:z,toe:function(a){if(""===
a)throw"toe on empty string";return a.substr(a.length-1,a.length)},tail:v,torso:function(a){if(""===a)throw"torso on empty string";return a.substr(0,a.length-1)},capitalize:function(a){return""===a?a:u(a).toUpperCase()+v(a)}}});l("11",["w"],function(c){var e=c.contains,d=function(a){return function(c){return e(c,a)}},a=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/;return{create:function(b){var c=[{name:"Spartan",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return e(a,"edge/")&&e(a,
"chrome")&&e(a,"safari")&&e(a,"applewebkit")}},{name:"ChromeFrame",versionRegexes:[/.*?chromeframe\/([0-9]+)\.([0-9]+).*/,a],search:function(a){return e(a,"chromeframe")?b():!1}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,a],search:function(a){return e(a,"chrome")&&!e(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){var c=e(a,"msie")||e(a,"trident");return e(a,"chromeframe")?c&&!b():c}},{name:"Opera",
versionRegexes:[a,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:d("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:d("firefox")},{name:"Safari",versionRegexes:[a,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(e(a,"safari")||e(a,"mobile/"))&&e(a,"applewebkit")}},{name:"Envjs",versionRegexes:[/.*?envjs\/\ ?([0-9]+)\.([0-9]+).*/],search:d("envjs")}],f=[{name:"Windows",search:d("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return e(a,
"iphone")||e(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:d("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:d("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:d("linux")},{name:"Solaris",search:d("sunos")},{name:"FreeBSD",search:d("freebsd")}];return{browsers:c,oses:f}},chromeFrameChecker:function(){try{return!!new ActiveXObject("ChromeTab.ChromeFrame")}catch(a){return!1}}}});
l("12",[],function(){return{meetsSpec:function(c,e){var d=typeof c;if("boolean"===d)return!!c;if("object"===d)return d=c.minimum,e.major>d.major||e.major===d.major&&e.minor>=d.minor;throw"invalid spec";}}});l("1y",[],function(){return{findOneInArrayOr:function(c,e,d){for(var a=0;a<c.length;a++){var b=c[a];if(d(b,a,c))return b}return e}}});l("13",["1y"],function(c){return{detect:function(e,d){var a=c.findOneInArrayOr,b=String(d).toLowerCase();return a(e,{name:void 0},function(a){return a.search(b)})}}});
l("14",[],function(){return{detectVersion:function(c,e){var d=String(e).toLowerCase(),a=c.versionRegexes;if(a){a:{for(var b=0;b<a.length;b++){var g=a[b];if(g.test(d)){a=g;break a}}a=void 0}d=a?{major:Number(d.replace(a,"$1")),minor:Number(d.replace(a,"$2"))}:{major:0,minor:0}}else d={major:0,minor:0};return d}}});l("c","y z 10 11 12 13 14".split(" "),function(c,e,d,a,b,g,f){var h=f.detectVersion,k=d.create,m=b.meetsSpec,n=g.detect,p=function(a,b,c,d){return a[b]?a[b][c]?m(a[b][c],d):!!a[b].All:!1},
r=function(b,d){var f=a.create(d),g=f.browsers,f=f.oses,e=n(f,b),m=e.name,e=h(e,b),r=n(g,b),x=r.name,y=h(r,b),f=k(f,m,e),g=k(g,x,y),e=c(f,g,b);return{browser:g,os:f,deviceType:e,isSupported:function(a){return p(a,m,x,y)}}};return{Platform:e,detect:function(){return r(navigator.userAgent,a.chromeFrameChecker)},doDetect:r,isSupported:p,isSupportedPlatform:function(a,b){var c=b.browser;return p(a,b.os.current,c.current,c.version)}}});$("1a",Object);l("t",["7","1a"],function(c,e){var d=c.constant(!1),
a=c.constant(!0),b=function(){return g},g=function(){var f=function(a){return a.isNone()},g=function(a){return a()},m=function(a){return a},f={fold:function(a,b){return a()},is:d,isSome:d,isNone:a,getOr:m,getOrThunk:g,getOrDie:function(a){throw a||"error: getOrDie called on none.";},or:m,orThunk:g,map:b,ap:b,each:b,bind:b,flatten:b,exists:d,forall:a,filter:b,equals:f,equals_:f,toArray:function(){return[]},toString:c.constant("none()")};e.freeze&&e.freeze(f);return f}(),f=function(c){var e=function(){return c},
m=function(){return r},n=function(a){return f(a(c))},p=function(a){return a(c)},r={fold:function(a,b){return b(c)},is:function(a){return c===a},isSome:a,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,or:m,orThunk:m,map:n,ap:function(a){return a.fold(b,function(a){return f(a(c))})},each:n,bind:p,flatten:e,exists:p,forall:p,filter:function(a){return a(c)?r:g},equals:function(a){return a.is(c)},equals_:function(a,b){return a.fold(d,function(a){return b(c,a)})},toArray:function(){return[c]},toString:function(){return"some("+
c+")"}};return r};return{some:f,none:b,from:function(a){return null===a||void 0===a?g:f(a)},equals:function(a,b){return a.equals(b)},equals_:function(a,b,c){return a.equals_(b,c)}}});l("15",["7","t"],function(c,e){return function(){var d=e.none(),a=function(a){d=e.some(a.api)};return{add:function(b){var g=c.curry(a,b);d.isNone()&&a(b);b.api.events.focus.addListener(g)},get:function(){return d},remove:function(a){d.is(a.api)&&(d=e.none())}}}});l("1q",["1a"],function(c){var e=function(){var a=c.keys,
b=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?b:a}(),d=function(a,b){for(var c=e(a),d=0,g=c.length;d<g;d++){var p=c[d];b(a[p],p,a)}},a=function(a,b){var c={};d(a,function(d,g){var e=b(d,g,a);c[e.k]=e.v});return c},b=function(a,b){var c=[];d(a,function(a,d){c.push(b(a,d))});return c},g=function(a){return b(a,function(a){return a})};return{bifilter:function(a,b){var c={},g={};d(a,function(a,d){(b(a,d)?c:g)[d]=a});return{t:c,f:g}},each:d,map:function(b,
c){return a(b,function(a,b,d){return{k:b,v:c(a,b,d)}})},mapToArray:b,tupleMap:a,find:function(a,b){for(var c=e(a),d=0,g=c.length;d<g;d++){var p=c[d],r=a[p];if(b(r,p,a))return r}},keys:e,values:g,size:function(a){return g(a).length}}});l("2i",["1"],function(c){var e=function(d,a){for(var b=a||c,g=0;g<d.length&&void 0!==b&&null!==b;++g)b=b[d[g]];return b};return{path:e,resolve:function(c,a){var b=c.split(".");return e(b,a)}}});l("2j",["2i"],function(c){return{getOrDie:function(e,d){var a=c.resolve(e,
d);if(void 0===a)throw e+" not available on this browser";return a}}});l("1r",["2i","2j"],function(c,e){return{isPrototypeOf:function(d){var a=c.resolve("ownerDocument.defaultView",d);return e.getOrDie("HTMLElement",a).prototype.isPrototypeOf(d)}}});l("i",["a","b","1r","7","n"],function(c,e,d,a,b){var g=function(c,d,f,g,e,h){return{name:a.constant(c),output:a.constant(h||c),required:a.constant(g),validate:function(a){if(!f(a))throw a=e(c,d),new b(a);}}},f=function(a,b){return'value of "'+a+'" is not a '+
b},h=function(a,b){return'value of "'+a+'" is not an '+b},k=function(a,b,c){return function(d,f){return g(d,a,b,!0,c,f)}},m=function(a){return d.isPrototypeOf(a)},n=function(a){return c.isString(a)||c.isArray(a)||c.isObject(a)},p=k("array",c.isArray,h),r=k("boolean",c.isBoolean,f),q=k("function",c.isFunction,f),s=k("number",c.isNumber,f),t=k("object",c.isObject,h),u=k("string",c.isString,f),f=k("DOM element",m,f),v=k("string or an array",function(a){return c.isString(a)||c.isArray(a)},h),k=k("string or a DOM element",
function(a){return c.isString(a)||m(a)},h);return{arrayOfStrings:function(a){return g(a,"array of strings",function(b){p(a).validate(b);return e.forall(b,c.isString)},!0,h)},arrayOfObjects:function(a){return g(a,"array of objects",function(b){p(a).validate(b);return e.forall(b,c.isObject)},!0,h)},arrayOfToolbarGroups:function(a){return g(a,"array of toolbar groups",function(b){p(a).validate(b);return e.forall(b,n)},!0,h)},bool:r,domElement:f,func:q,number:s,object:t,string:u,stringOrArray:v,stringOrDom:k,
param:g}});l("2h",["i"],function(c){return{paramList:function(){return[c.object("aria"),c.func("fetch"),c.func("menuComplete"),c.func("menuExtra"),c.func("menuHover"),c.string("hoverSelector"),c.func("hover")]},encodeWithEditorApi:function(){return["menuComplete"]}}});l("6",["a","r"],function(c,e){var d=function(a){return function(){for(var c=new e(arguments.length),d=0;d<c.length;d++)c[d]=arguments[d];if(0===c.length)throw"Can't merge zero objects";for(var d={},h=0;h<c.length;h++){var k=c[h],m;for(m in k)k.hasOwnProperty(m)&&
(d[m]=a(d[m],k[m]))}return d}},a=d(function(b,d){return c.isObject(b)&&c.isObject(d)?a(b,d):d}),d=d(function(a,c){return c});return{deepMerge:a,merge:d}});l("1z","a b 1q 2h 6 7".split(" "),function(c,e,d,a,b,g){var f=function(a,b,c){return e.map(a,function(a){return b(a,c)})},h=function(a,d){if(c.isString(a))return a;if(c.isArray(a))return f(a,h,d);if(c.isObject(a)&&void 0!==a.action){var e=g.compose(a.action,d);return b.merge(a,{action:e})}e=f(a.items,h,d);return b.deepMerge(a,{items:e})};return{mentions:function(b,
c){var f=a.encodeWithEditorApi();return d.map(b,function(a,b){return e.contains(f,b)?function(b){return a(c(),b)}:a})},toolbar:function(a,b){return void 0===a.items?a:{items:f(a.items,h,b)}}}});l("p",["7","t"],function(c,e){var d=function(a){return b(function(b,c){return c(a)})},a=function(a){return b(function(b,c){return b(a)})},b=function(b){var f=function(){return b(c.constant(!1),c.constant(!0))},h=c.not(f),k=function(a){return m(function(b){return d(a(b))})},m=function(c){return b(a,c)};return{is:function(a){return b(c.constant(!1),
function(b){return b===a})},isValue:f,isError:h,getOr:function(a){return b(c.constant(a),c.identity)},getOrThunk:function(a){return b(a,c.identity)},getOrDie:function(){return b(function(a){c.die(a)()},c.identity)},or:function(a){return b(c.constant(a),d)},orThunk:function(a){return b(a,d)},fold:b,map:k,each:k,bind:m,exists:function(a){return b(c.constant(!1),a)},forall:function(a){return b(c.constant(!0),a)},toOption:function(){return b(e.none,e.some)}}};return{value:d,error:a}});$("20",Date);l("16",
"1z 6 t p 20 x".split(" "),function(c,e,d,a,b,g){var f=function(){var a=(new b).getTime();return g(a).slice(-6)};return function(b,g,m){var n=d.from(b.ui.editorName).map(a.error);m=m.map(a.value);n=n.or(m).getOrThunk(function(){return a.value(f())});m=c.toolbar(b.platform.toolbar,g);g=c.mentions(b.mentions,g);return e.deepMerge(b,{ui:{editorName:n},platform:{toolbar:m},mentions:g})}});l("1s",[],function(){return{ATTRIBUTE:2,CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,
ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});l("o",[],function(){"undefined"===typeof console&&(console={log:function(){}});return console});$("q",document);l("l",["7","n","o","q"],function(c,e,d,a){var b=function(a){if(null===a||void 0===a)throw new e("Node cannot be null or undefined");return{dom:c.constant(a)}};return{fromHtml:function(c,f){var e=(f||a).createElement("div");e.innerHTML=c;if(!e.hasChildNodes()||1<e.childNodes.length)throw d.error("HTML does not have a single root node",
c),"HTML must have a single root node";return b(e.childNodes[0])},fromTag:function(c,d){var e=(d||a).createElement(c);return b(e)},fromText:function(c,d){var e=(d||a).createTextNode(c);return b(e)},fromDom:b}});l("m","1s b t l n q".split(" "),function(c,e,d,a,b,g){var f=function(){var a=g.createElement("span");return void 0!==a.matches?0:void 0!==a.msMatchesSelector?1:void 0!==a.webkitMatchesSelector?2:void 0!==a.mozMatchesSelector?3:-1}(),h=c.ELEMENT,k=c.DOCUMENT;return{all:function(b,c){var d=void 0===
c?g:c.dom();return d.nodeType!==h&&d.nodeType!==k||0===d.childElementCount?[]:e.map(d.querySelectorAll(b),a.fromDom)},is:function(a,c){var d=a.dom();if(d.nodeType!==h)return!1;if(0===f)return d.matches(c);if(1===f)return d.msMatchesSelector(c);if(2===f)return d.webkitMatchesSelector(c);if(3===f)return d.mozMatchesSelector(c);throw new b("Browser lacks native selectors");},one:function(b,c){var f=void 0===c?g:c.dom();return f.nodeType!==h&&f.nodeType!==k||0===f.childElementCount?d.none():d.from(f.querySelector(b)).map(a.fromDom)}}});
l("17",["b","t","m"],function(c,e,d){return function(){var a=[];return{get:function(b){return e.from(c.find(a,function(a){return a.is(b)}))},findAll:function(b){var g=d.all(b);return c.filter(a,function(a){return c.exists(g,a.is)})},add:function(b){a.push(b)},remove:function(b){b=c.indexOf(a,b);a.splice(b,1)}}}});l("21",["1s"],function(c){var e=function(a){return a.dom().nodeName.toLowerCase()},d=function(a){return a.dom().nodeType},a=function(a){return function(b){return d(b)===a}},b=a(c.ELEMENT),
g=a(c.TEXT),a=a(c.DOCUMENT);return{name:e,type:d,value:function(a){return a.dom().nodeValue},isElement:b,isText:g,isDocument:a,isComment:function(a){return d(a)===c.COMMENT||"#comment"===e(a)}}});l("18",["t","21"],function(c,e){return{one:function(d,a,b){var g=e.name(d);return c.from(a[g]).map(function(a){return a.replace(d,b)})}}});l("1b","a b 1q 21 n o".split(" "),function(c,e,d,a,b,g){var f=function(a,d,f){if(c.isString(f)||c.isBoolean(f)||c.isNumber(f))a.setAttribute(d,f+"");else throw g.error("Invalid call to Attr.set. Key ",
d,":: Value ",f,":: Element ",a),new b("Attribute value was not simple");},h=function(a,b,c){f(a.dom(),b,c)},k=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},m=function(a,b){var c=a.dom();return c&&c.hasAttribute?c.hasAttribute(b):!1};return{clone:function(a){return e.foldl(a.dom().attributes,function(a,b){a[b.name]=b.value;return a},{})},set:h,setAll:function(a,b){var c=a.dom();d.each(b,function(a,b){f(c,b,a)})},get:k,has:m,remove:function(a,b){a.dom().removeAttribute(b)},
hasNone:function(a){a=a.dom().attributes;return void 0===a||null===a||0===a.length},transfer:function(b,c,d){a.isElement(b)&&a.isElement(c)&&e.each(d,function(a){m(b,a)&&!m(c,a)&&h(c,a,k(b,a))})}}});l("1f",[],function(){return{cached:function(c){var e=!1,d;return function(){e||(e=!0,d=c.apply(null,arguments));return d}}}});l("s",["1f"],function(c){return c});l("2n",["s","l","21","q"],function(c,e,d,a){var b=function(a){a=a.dom().body;if(null===a||void 0===a)throw"Body is not available yet";return e.fromDom(a)};
return{body:c.cached(function(){return b(e.fromDom(a))}),getBody:b,inBody:function(a){a=d.isText(a)?a.dom().parentNode:a.dom();return void 0!==a&&null!==a&&a.ownerDocument.body.contains(a)}}});l("35",[],function(){return{isSupported:function(c){return void 0!==c.style}}});$("36",window);l("2p","a b 1q t 1b 2n l 21 35 w n o 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var q=function(a,b,d){if(!c.isString(d))throw p.error("Invalid call to CSS.set. Property ",b,":: Value ",d,":: Element ",a),new n("CSS value must be a string: "+
d);k.isSupported(a)&&a.style.setProperty(b,d)},s=function(a,b,c){a=a.dom();q(a,b,c)},t=function(a,b){return k.isSupported(a)?a.style.getPropertyValue(b):""},u=function(b,c){var d=b.dom(),d=t(d,c);return a.from(d).filter(function(a){return 0<a.length})},v=function(a,b,c){u(a,c).each(function(a){u(b,c).isNone()&&s(b,c,a)})};return{copy:function(a,b){var c=a.dom(),d=b.dom();k.isSupported(c)&&k.isSupported(d)&&(d.style.cssText=c.style.cssText)},set:s,preserve:function(a,c){var d=b.get(a,"style"),f=c(a);
(void 0===d?b.remove:b.set)(a,"style",d);return f},setAll:function(a,b){var c=a.dom();d.each(b,function(a,b){q(c,b,a)})},setOptions:function(a,b){var c=a.dom();d.each(b,function(a,b){a.fold(function(){k.isSupported(c)&&c.style.removeProperty(b)},function(a){q(c,b,a)})})},remove:function(a,c){var d=a.dom();k.isSupported(d)&&d.style.removeProperty(c);b.has(a,"style")&&""===m.trim(b.get(a,"style"))&&b.remove(a,"style")},get:function(a,b){var c=a.dom(),d=r.getComputedStyle(c).getPropertyValue(b),c=""!==
d||g.inBody(a)?d:t(c,b);return null===c?void 0:c},getRaw:u,isValidValue:function(a,b,c){a=f.fromTag(a);s(a,b,c);return u(a,b).isSome()},reflow:function(a){return a.dom().offsetWidth},transfer:function(a,b,c){h.isElement(a)&&h.isElement(b)&&e.each(c,function(c){v(a,b,c)})}}});l("2c",["2j"],function(c){return{documentPositionPreceding:function(e,d){var a=c.getOrDie("Node").DOCUMENT_POSITION_PRECEDING;return 0!==(e.compareDocumentPosition(d)&a)},documentPositionContainedBy:function(e,d){var a=c.getOrDie("Node").DOCUMENT_POSITION_CONTAINED_BY;
return 0!==(e.compareDocumentPosition(d)&a)}}});l("1c",["b","c","2c","7","m"],function(c,e,d,a,b){var g=function(a,b){return a.dom()===b.dom()},f=function(a,b){var c=a.dom(),d=b.dom();return c===d?!1:c.contains(d)},h=function(a,b){return d.documentPositionContainedBy(a.dom(),b.dom())};e=e.detect().browser.isIE()?h:f;return{eq:g,isEqualNode:function(a,b){return a.dom().isEqualNode(b.dom())},member:function(b,d){return c.exists(d,a.curry(g,b))},contains:e,is:b.is}});l("4i",["a","t"],function(c,e){return function(d,
a,b,g,f){return d(b,g)?e.some(b):c.isFunction(f)&&f(b)?e.none():a(b,g,f)}});l("4j","a b 7 t 2n 1c l 4i".split(" "),function(c,e,d,a,b,g,f,h){var k=function(b,e,g){b=b.dom();for(g=c.isFunction(g)?g:d.constant(!1);b.parentNode;){b=b.parentNode;var h=f.fromDom(b);if(e(h))return a.some(h);if(g(h))break}return a.none()},m=function(b,c){var g=e.find(b.dom().childNodes,d.compose(c,f.fromDom));return a.from(g).map(f.fromDom)},n=function(b,c){var d=function(b){for(var e=0;e<b.childNodes.length;e++){if(c(f.fromDom(b.childNodes[e])))return a.some(f.fromDom(b.childNodes[e]));
var g=d(b.childNodes[e]);if(g.isSome())return g}return a.none()};return d(b.dom())};return{first:function(a){return n(b.body(),a)},ancestor:k,closest:function(a,b,c){return h(function(a){return b(a)},k,a,b,c)},sibling:function(b,c){var d=b.dom();return d.parentNode?m(f.fromDom(d.parentNode),function(a){return!g.eq(b,a)&&c(a)}):a.none()},child:m,descendant:n}});l("37",["4j"],function(c){return{any:function(e){return c.first(e).isSome()},ancestor:function(e,d,a){return c.ancestor(e,d,a).isSome()},closest:function(e,
d,a){return c.closest(e,d,a).isSome()},sibling:function(e,d){return c.sibling(e,d).isSome()},child:function(e,d){return c.child(e,d).isSome()},descendant:function(e,d){return c.descendant(e,d).isSome()}}});l("39",["b","1q","7","r"],function(c,e,d,a){return{product:function(b,g){return{nu:function(){for(var f=new a(arguments.length),e=0;e<f.length;e++)f[e]=arguments[e];if(b.length!==f.length)throw'Wrong number of arguments to struct. Expected "['+b.length+']", got '+f.length+" arguments";var g={};
c.each(b,function(a,b){g[a]=d.constant(f[b])});return g},eq:function(a,c){for(var e=0;e<b.length;e++){var m=b[e];if(!(g&&g[e]||d.tripleEquals)(a[m](),c[m]()))return!1}return!0},evaluate:function(a){return e.map(a,function(a){return a()})}}}}});l("38",["39"],function(c){return function(){return c.product(arguments).nu}});l("4k",["a","b"],function(c,e){var d=function(a){return a.slice(0).sort()};return{sort:d,reqMessage:function(a,b){throw"All required keys ("+d(a).join(", ")+") were not specified. Specified keys were: "+
d(b).join(", ")+".";},unsuppMessage:function(a){throw"Unsupported keys for object: "+d(a).join(", ");},validateStrArr:function(a,b){if(!c.isArray(b))throw"The "+a+" fields must be an array. Was: "+b+".";e.each(b,function(b){if(!c.isString(b))throw"The value "+b+" in the "+a+" fields was not a string.";})},invalidTypeMessage:function(a,b){throw"All values need to be of type: "+b+". Keys ("+d(a).join(", ")+") were not.";},checkDupes:function(a){var b=d(a);a=e.find(b,function(a,c){return c<b.length-
1&&a===b[c+1]});if(void 0!==a&&null!==a)throw"The field: "+a+" occurs more than once in the combined fields: ["+b.join(", ")+"].";}}});l("3a","b 1q 7 t 4k 1a".split(" "),function(c,e,d,a,b,g){return function(f,h){var k=f.concat(h);if(0===k.length)throw"You must specify at least one required or optional field.";b.validateStrArr("required",f);b.validateStrArr("optional",h);b.checkDupes(k);return function(m){var n=e.keys(m);c.forall(f,function(a){return c.contains(n,a)})||b.reqMessage(f,n);var p=c.filter(n,
function(a){return!c.contains(k,a)});0<p.length&&b.unsuppMessage(p);var r={};c.each(f,function(a){r[a]=d.constant(m[a])});c.each(h,function(b){r[b]=d.constant(g.prototype.hasOwnProperty.call(m,b)?a.some(m[b]):a.none())});return r}}});l("2w",["38","39","3a"],function(c,e,d){return{immutable:c,immutable2:e,immutableBag:d}});l("3b",[],function(){return{toArray:function(c,e){var d=[],a=function(a){d.push(a);return e(a)},b=e(c);do b=b.bind(a);while(b.isSome());return d}}});l("2b","a b 7 t 2w 3b 1c l".split(" "),
function(c,e,d,a,b,g,f,h){var k=function(a){return h.fromDom(a.dom().ownerDocument)},m=function(b){b=b.dom();return a.from(b.parentNode).map(h.fromDom)},n=function(b){b=b.dom();return a.from(b.previousSibling).map(h.fromDom)},p=function(b){b=b.dom();return a.from(b.nextSibling).map(h.fromDom)},r=function(a){a=a.dom();return e.map(a.childNodes,h.fromDom)},q=function(b,c){var d=b.dom().childNodes;return a.from(d[c]).map(h.fromDom)},s=b.immutable("element","offset");return{owner:k,defaultView:function(a){a=
a.dom().ownerDocument.defaultView;return h.fromDom(a)},documentElement:function(a){a=k(a);return h.fromDom(a.dom().documentElement)},parent:m,findIndex:function(b){return m(b).bind(function(c){c=r(c);c=e.findIndex(c,function(a){return f.eq(b,a)});return-1<c?a.some(c):a.none()})},parents:function(a,b){for(var f=c.isFunction(b)?b:d.constant(!1),e=a.dom(),g=[];null!==e.parentNode&&void 0!==e.parentNode;){var e=e.parentNode,k=h.fromDom(e);g.push(k);if(!0===f(k))break}return g},siblings:function(a){return m(a).map(r).map(function(b){return e.filter(b,
function(b){return!f.eq(a,b)})}).getOr([])},prevSibling:n,offsetParent:function(b){b=b.dom();return a.from(b.offsetParent).map(h.fromDom)},prevSiblings:function(a){return e.reverse(g.toArray(a,n))},nextSibling:p,nextSiblings:function(a){return g.toArray(a,p)},children:r,child:q,firstChild:function(a){return q(a,0)},lastChild:function(a){return q(a,a.dom().childNodes.length-1)},childNodesCount:function(a,b){return a.dom().childNodes.length},leaf:function(a,b){var c=r(a);return 0<c.length&&b<c.length?
s(c[b],0):s(a,b)}}});l("30","7 t 1c l 37 2b q".split(" "),function(c,e,d,a,b,g,f){var h=function(a){a.dom().focus()},k=function(b){b=void 0!==b?b.dom():f;return e.from(b.activeElement).map(a.fromDom)};return{hasFocus:function(a){var b=g.owner(a).dom();return a.dom()===b.activeElement},focus:h,blur:function(a){a.dom().blur()},active:k,search:function(a){return k(g.owner(a)).filter(function(b){return a.dom().contains(b.dom())})},focusInside:function(a){var f=g.owner(a);k(f).filter(function(f){return b.closest(f,
c.curry(d.eq,a))}).fold(function(){h(a)},c.noop)}}});l("2q",["2b"],function(c){var e=function(a,b){c.parent(a).each(function(c){c.dom().insertBefore(b.dom(),a.dom())})},d=function(a,b){a.dom().appendChild(b.dom())};return{before:e,after:function(a,b){c.nextSibling(a).fold(function(){c.parent(a).each(function(a){d(a,b)})},function(a){e(a,b)})},prepend:function(a,b){c.firstChild(a).fold(function(){d(a,b)},function(c){a.dom().insertBefore(b.dom(),c.dom())})},append:d,appendAt:function(a,b,g){c.child(a,
g).fold(function(){d(a,b)},function(a){e(a,b)})},wrap:function(a,b){e(a,b);d(b,a)}}});l("3c",["b","2q"],function(c,e){return{before:function(d,a){c.each(a,function(a){e.before(d,a)})},after:function(d,a){c.each(a,function(b,c){e.after(0===c?d:a[c-1],b)})},prepend:function(d,a){c.each(a.slice().reverse(),function(a){e.prepend(d,a)})},append:function(d,a){c.each(a,function(a){e.append(d,a)})}}});l("2s",["b","3c","2b"],function(c,e,d){var a=function(a){a=a.dom();null!==a.parentNode&&a.parentNode.removeChild(a)};
return{empty:function(b){b.dom().textContent="";c.each(d.children(b),function(b){a(b)})},remove:a,unwrap:function(b){var c=d.children(b);0<c.length&&e.before(b,c);a(b)}}});l("22","2p l 30 2q 2s q 36".split(" "),function(c,e,d,a,b,g,f){return{blur:function(){var f=e.fromHtml('<input type="text" />');c.setAll(f,{"z-index":"-666",background:"transparent",border:"0px",height:"50px",position:"absolute",top:"25%",left:"50%"});a.append(e.fromDom(g.body),f);d.focus(f);b.remove(f)}}});l("j",["b","n"],function(c,
e){return function(d,a){c.each(a,function(a,c){if(c>d.length-1){if(a.required())throw new e('missing parameter "'+a.name()+'"');}else a.validate(d[c])})}});l("3d",["b","1q","i","j"],function(c,e,d,a){var b=function(a){return[e.map(a,function(a){return a()})]};return{create:function(){var e=[];return{eventRegistry:{addListener:function(b){a(arguments,[d.func("handler")]);e.push(b)},removeListener:function(a){a=c.indexOf(e,a);-1!==a&&e.splice(a,1)}},eventTrigger:function(a){c.each(e,function(c){var d=
b(a);c.apply(null,d)})}}}}});l("4l",["b","7"],function(c,e){return function(){var d=[],a=[],b=function(a){return a.slice(0)},g=function(a){return-1!==c.indexOf(d,a)};return{get:function(b){return a[c.indexOf(d,b)]},put:function(b,c){if(void 0===b||null===b)throw"Invalid key, no undefined or null.";if(g(b))throw"Invalid key, key already exists.";d.push(b);a.push(c)},contains:g,remove:function(b,e){var g=c.indexOf(d,b);if(-1===g)throw"Invalid key, does not exist.";d.splice(g,1);return a.splice(g,1)[0]},
each:function(b){c.each(d,function(c,d){b(a[d],c,d)})},keys:e.curry(b,d),values:e.curry(b,a),reset:function(){d.splice(0,d.length);a.splice(0,a.length)}}}});l("3e",["4l"],function(c){return{create:function(){var e=c();return{bind:function(c,a){e.put(c,a);c.bind(a)},unbind:function(c){var a=e.remove(c);c.unbind(a)},unbindAll:function(){e.each(function(c,a){a.unbind(c)});e.reset()}}}}});l("23",["1q","3d","3e"],function(c,e,d){return function(a){var b=d.create(),g=c.map(a,function(a){var c=e.create();
b.bind(a,c.eventTrigger);return c});a=c.map(g,function(a){return a.eventRegistry});g=c.map(g,function(a){return a.eventTrigger});return{registry:a,trigger:g,destroy:function(){b.unbindAll()}}}});l("f",["a","1q","1a"],function(c,e,d){var a=function(b){d.freeze(b);e.each(b,function(b){c.isObject(b)&&a(b)});return b};return{makeReadOnly:a}});l("4y",["r"],function(c){return{bounce:function(e){return function(){var d=c.prototype.slice.call(arguments),a=this;setTimeout(function(){e.apply(a,d)},0)}}}});
l("3t",[],function(){return function(c,e){return{get:e,map:function(d){return c(function(a){e(function(b){b=d(b);a(b)})})},bind:function(d){return c(function(a){e(function(b){d(b).get(a)})})},anonBind:function(d){return c(function(a){e(function(b){d.get(a)})})}}}});l("3u",["b"],function(c){return function(e){var d=function(a){return e(function(b){var d=[],f=0,e=function(c){return function(e){d[c]=e;f++;f>=a.length&&b(d)}};0===a.length?b([]):c.each(a,function(a,b){a.get(e(b))})})};return{nu:e,pure:function(a){return e(function(b){b(a)})},
par:d,mapM:function(a,b){return d(c.map(a,b))},lift2:function(a,b,c){return e(function(d){var e=!1,k=!1,m=void 0,n=void 0,p=function(){if(e&&k){var a=c(m,n);d(a)}};a.get(function(a){m=a;e=!0;p()});b.get(function(a){n=a;k=!0;p()})})},compose:function(a,b){return function(c){return b(c).bind(a)}}}}});l("3v",["4y","3t","3u"],function(c,e,d){var a=function(b){return e(a,function(a){b(c.bounce(a))})};return d(a)});l("3q",["1q","3v"],function(c,e){return function(){var d={};return{getOrSetIndexed:function(a,
b){if(void 0!==d[a])return d[a];var c=b();return d[a]=c},waitForLoad:function(){var a=c.values(d);return e.par(a)}}}});$("3w",setTimeout);l("2m","b 6 3t 3u 3v t 3w".split(" "),function(c,e,d,a,b,g,f){var h=function(a){var m=g.none(),n=[],p=function(){return m.isSome()},r=function(a){m.each(function(b){f(function(){a(b)},0)})};b.nu(a).get(function(a){m=g.some(a);c.each(n,r);n=[]});a=d(h,function(a){p()?r(a):n.push(a)});return e.merge(a,{isSet:p})};return a(h)});l("6p",["1"],function(c){return{namespace:function(e,
d){for(var a=d||c,b=e.split("."),g=0;g<b.length;++g){var f=b[g];if(void 0===a[f]||null===a[f])a[f]={};a=a[f]}return a}}});l("4z",["6p"],function(c){return{install:function(e){var d=c.namespace(e);d.callbacks={};var a=0,b=function(){var b="callback_"+a;a++;return b},g=function(a,c){var g=b();d.callbacks[g]=function(){c||f(g);a.apply(null,arguments)};return e+".callbacks."+g},f=function(a){a=a.substring(a.lastIndexOf(".")+1);void 0!==d.callbacks[a]&&delete d.callbacks[a]};d.ephemeral=function(a){return g(a,
!1)};d.permanent=function(a){return g(a,!0)};d.unregister=f;return d}}});l("50",["7","l"],function(c,e){var d=function(a,b,d,e,g,p,r){return{target:c.constant(a),x:c.constant(b),y:c.constant(d),stop:e,prevent:g,kill:p,raw:c.constant(r)}},a=function(a,b){return function(g){if(a(g)){var m=e.fromDom(g.target),n=function(){g.stopPropagation()},p=function(){g.preventDefault()},r=c.compose(p,n),m=d(m,g.clientX,g.clientY,n,p,r,g);b(m)}}},b=function(b,d,e,m,n){e=a(e,m);b.dom().addEventListener(d,e,n);return{unbind:c.curry(g,
b,d,e,n)}},g=function(a,b,c,d){a.dom().removeEventListener(b,c,d)};return{bind:function(a,c,d,e){return b(a,c,d,e,!1)},capture:function(a,c,d,e){return b(a,c,d,e,!0)}}});l("3y",["7","50"],function(c,e){var d=c.constant(!0);return{bind:function(a,b,c){return e.bind(a,b,d,c)},capture:function(a,b,c){return e.capture(a,b,d,c)}}});l("3r","2m 4z p 1b 3y l 2q q".split(" "),function(c,e,d,a,b,g,f,h){var k=e.install("ephox.henchman.features");return{download:function(e){return c.nu(function(c){var p=function(){q.unbind();
s.unbind()},r=g.fromTag("script");a.set(r,"src",e);a.set(r,"type","text/javascript");a.set(r,"async","async");a.set(r,"data-main",k.ephemeral(function(a){c(d.value(a))}));var q=b.bind(r,"error",function(){p();c(d.error("Error loading external script tag "+e))}),s=b.bind(r,"load",p);f.append(g.fromDom(h.head),r)})}}});l("51",["1b","l","2q","q"],function(c,e,d,a){return{addStylesheet:function(b,g){var f=g||e.fromDom(a),h=e.fromTag("link",f.dom());c.setAll(h,{rel:"stylesheet",type:"text/css",href:b});
f=e.fromDom(f.dom().head);d.append(f,h);return h}}});l("3s","a b 2m 7 p 3y 51".split(" "),function(c,e,d,a,b,g,f){return{download:function(h,k){return d.nu(function(d){var n=function(a){e.each(r,function(a){a.unbind()});d(a.orThunk(function(a){return b.error(a+'Unable to download editor stylesheets from "'+h+'"')}))},p=f.addStylesheet(h),r=[g.bind(p,"load",function(a){var d;a:{try{var e=a.target().dom().sheet.cssRules;d=c.isObject(e)&&0===e.length;break a}catch(f){}d=!1}d?n(b.error("")):k(n)}),g.bind(p,
"error",a.curry(n,b.error("")))]})}}});l("2k",["3q","3r","3s","7"],function(c,e,d,a){return function(){var b=c(),g=function(){return b.waitForLoad()};return{preload:function(){g().get(a.identity)},addStylesheet:function(a,c){return b.getOrSetIndexed(a,function(){return d.download(a,c)})},addScript:function(a,c){return b.getOrSetIndexed(a,function(){return e.download(a).map(c)})},waitForLoad:g}}});l("4m",["2k"],function(c){var e=c();return{addStylesheet:function(c,a){return e.addStylesheet(c,a)},addScript:function(c,
a){return e.addScript(c,a)}}});l("1l",["b","7","t","2w"],function(c,e,d,a){var b=a.immutable("str","replace"),g=function(a,b){return"2.3.0"!==a?d.some(b+(void 0===a?"":" version "+a)+" appears to be cached, as it does not match editor version 2.3.0."):d.none()};return{aboutTags:function(a,d){var e=[b("@@FULL_VERSION@@","2.3.0.46"),b("@@CLIENT_VERSION@@","2.3.0.46")],g=a?[b("@@INTEGRATION_TYPE@@",d.type),b("@@INTEGRATION_VERSION@@",d.version)]:[];return c.flatten([e,g])},strictMatch:g,weakMatch:function(a,
b){return g(a,b).map(function(a){return a+" This may produce unexpected results."})},resourceParam:e.constant("version=2.3.0"),fullParam:e.constant("version=2.3.0.46")}});l("4n",[],function(){var c=function(e){var d=e;return{get:function(){return d},set:function(a){d=a},clone:function(){return c(d)}}};return c});l("3g",["4m","1l","4n","o","q"],function(c,e,d,a,b){var g=function(b){b.each(function(b){e.weakMatch(b.version,"Code view").each(function(b){a.warn(b)});f.set(b.codemirror());h.set(b.jsbeautify())});
return b},f=d(null),h=d(null);return{use:{codemirror:f.get,jsbeautify:h.get},load:{codeview:function(a){a=a+"/codeview.js?"+e.resourceParam();return c.addScript(a,g)}}}});l("3f",["3g"],function(c){return{beautify:function(e){return c.use.jsbeautify().html(e,{indent_size:"2",indent_char:" ",max_preserve_newlines:"5",preserve_newlines:!0,keep_array_indentation:!1,break_chained_methods:!1,indent_scripts:"normal",brace_style:"collapse",space_before_conditional:!0,unescape_strings:!1,jslint_happy:!1,end_with_newline:!1,
wrap_line_length:0,indent_inner_html:!1,comma_first:!1,e4x:!1})}}});l("24",["i","j","3f","3g","n"],function(c,e,d,a,b){var g=function(a){return a.map(function(a){return a.dom()}).getOr(null)};return{documentElement:function(a){if(a.content().isInline())throw new b("documentElement called on inline mode");return g(a.content().doc())},insertHtmlAtCursor:function(a,b){e(arguments,[c.object("polish"),c.string("html")]);a.content().focus();a.insertHtmlAtCursor(b)},uploadImages:function(a,b){e(arguments,
[c.object("polish"),c.func("callback")]);return a.uploadImages(b)},get:function(b){var c=null!==a.use.jsbeautify()&&b.isPrettyPrinting();b=b.getContent();return c?d.beautify(b):b},set:function(a,b){e(arguments,[c.object("polish"),c.string("html")]);a.setContent(b)},isDirty:function(a){e(arguments,[c.object("polish")]);return a.isDirty()},setDirty:function(a,b){e(arguments,[c.object("polish"),c.bool("state")]);a.setDirty(b)}}});l("4o",["a","b","1q","r"],function(c,e,d,a){return{generate:function(b){if(!c.isArray(b))throw"cases must be an array";
if(0===b.length)throw"there must be at least one case";var g={};e.each(b,function(e,h){var k=d.keys(e);if(1!==k.length)throw"one and only one name per case";var m=k[0],n=e[m];if(void 0!==g[m])throw"duplicate key detected:"+m;if("cata"===m)throw"cannot have a case named cata (sorry)";if(!c.isArray(n))throw"case arguments must be an array";g[m]=function(){var c=arguments.length;if(c!==n.length)throw"Wrong number of arguments to case "+m+". Expected "+n.length+" ("+n+"), got "+c;for(var d=new a(c),c=
0;c<d.length;c++)d[c]=arguments[c];return{fold:function(){if(arguments.length!==b.length)throw"Wrong number of arguments to fold. Expected "+b.length+", got "+arguments.length;return arguments[h].apply(null,d)}}}});return g}}});l("3h",["6","4o"],function(c,e){var d=e.generate([{inputSelector:["selector","callback"]},{outputSelector:["selector","callback"]},{inputPredicate:["predicate","callback"]},{outputPredicate:["predicate","callback"]}]);return c.merge(d,{cata:function(a,b,c,d,e){return a.fold(b,
c,d,e)}})});l("25",["b","i","j","7","3h"],function(c,e,d,a,b){var g=function(a){return function(b){b=c.map(b,function(a){return a.dom()});a(b)}},f=function(a){return function(b){return a(b.dom())}};return function(c){var k=function(a,b,f){d(arguments,[e.func("filter"),e.string("selector"),e.func("callback")]);var k=a(b,g(f));c.filter().customFilters().addFilter(k)},m=function(a,b,k){d(arguments,[e.func("filter"),e.func("predicate"),e.func("callback")]);var m=a(f(b),g(k));c.filter().customFilters().addFilter(m)};
return{selector:{addInput:a.curry(k,b.inputSelector),addOutput:a.curry(k,b.outputSelector)},predicate:{addInput:a.curry(m,b.inputPredicate),addOutput:a.curry(m,b.outputPredicate)}}}});l("87",[],function(){return{zeroWidth:function(){return"\ufeff"}}});l("ca",["87","7"],function(c,e){var d="\\w'\\-\\u0100-\\u017F\\u00C0-\\u00FF"+c.zeroWidth()+"\\u2018\\u2019",a="[^"+d+"]",b="["+d+"]";return{chars:e.constant(d),wordbreak:e.constant(a),wordchar:e.constant(b)}});$("6r",RegExp);l("cb",["6r"],function(c){return function(e,
d,a,b){return{term:function(){return new c(e,b.getOr("g"))},prefix:d,suffix:a}}});l("cd",["7","t","ca","cb"],function(c,e,d,a){return{token:function(b){return a(b,c.constant(0),c.constant(0),e.none())},word:function(b){b="((?:^'?)|(?:"+d.wordbreak()+"+'?))"+b+"((?:'?$)|(?:'?"+d.wordbreak()+"+))";return a(b,function(a){return 1<a.length?a[1].length:0},function(a){return 2<a.length?a[2].length:0},e.none())}}});l("cc",["cd"],function(c){var e=function(c){return c.replace(/[-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")};return{sanitise:e,word:function(d){d=e(d);return c.word(d)},token:function(d){d=e(d);return c.token(d)}}});l("6q",["ca","cb","cc","cd"],function(c,e,d,a){return{safeword:function(a){return d.word(a)},safetoken:function(a){return d.token(a)},custom:function(a,c,d,h){return e(a,c,d,h)},unsafeword:function(b){return a.word(b)},unsafetoken:function(b){return a.token(b)},sanitise:function(a){return d.sanitise(a)},chars:function(){return c.chars()},wordbreak:function(){return c.wordbreak()},wordchar:function(){return c.wordchar()}}});
l("4p",["7","6q","6r"],function(c,e,d){return function(a,b,g){var f=e.sanitise(a),h=e.sanitise(b);return{patterns:function(){return[new d(f+"(.*?)"+h,"gi")]},useCursor:c.constant(!0),generate:function(a,b){return g.generate(a,b.key(),b.value())},derive:function(a){var b=a[1];return g.get(b).map(function(d){return{startIndex:c.constant(a.index),finishIndex:c.constant(a.index+a[0].length),key:c.constant(b),value:c.constant(d)}})}}}});l("56",["a","b","1q","7","4k"],function(c,e,d,a,b){var g=function(a,
b){return f(a,b,{validate:c.isFunction,label:"function"})},f=function(a,c,f){if(0===c.length)throw"You must specify at least one required field.";b.validateStrArr("required",c);b.checkDupes(c);return function(g){var h=d.keys(g);e.forall(c,function(a){return e.contains(h,a)})||b.reqMessage(c,h);a(c,h);var q=e.filter(c,function(a){return!f.validate(g[a],a)});0<q.length&&b.invalidTypeMessage(q,f.label);return g}},h=a.noop;return{exactly:a.curry(g,function(a,c){var d=e.filter(c,function(b){return!e.contains(a,
b)});0<d.length&&b.unsuppMessage(d)}),ensure:a.curry(g,h),ensureWith:a.curry(f,h)}});l("4q",["56"],function(c){var e=c.ensure(["elements","cursor","dictation","notify"]);c=c.ensure(["elements","cursor","dictation","range","notify"]);return{species:e,applicator:c}});l("3l",["b","l","2b","q"],function(c,e,d,a){return{fromHtml:function(b,c){var f=(c||a).createElement("div");f.innerHTML=b;return d.children(e.fromDom(f))},fromTags:function(a,d){return c.map(a,function(a){return e.fromTag(a,d)})},fromText:function(a,
d){return c.map(a,function(a){return e.fromText(a,d)})},fromDom:function(a){return c.map(a,e.fromDom)}}});l("3i",["4p","4q","7","t","3l"],function(c,e,d,a,b){return function(g,f,h){return c(g,f,{get:function(b){b=h(b);return a.some(b)},generate:function(c,f,g){c=b.fromHtml(g,c.dom());return e.species({elements:d.constant(c),cursor:a.none,dictation:a.none,notify:a.none})}})}});l("26",["i","j","3i"],function(c,e,d){return{addSimpleMacro:function(a,b,g,f){e(arguments,[c.object("polish"),c.string("startString"),
c.string("endString"),c.func("callback")]);var h=d(b,g,f);return a.macros().customMacros().add(h)},removeMacro:function(a,b){a.macros().customMacros().remove(b)}}});l("27",["b","i","j"],function(c,e,d){var a=["error","info","warning"];return{message:function(b,g,f,h){if(!c.contains(a,g))throw'Message level: "'+g+'" is not supported. Supported levels are: ['+a.join(", ")+"].";d(arguments,[e.object("polish"),e.string("level"),e.number("timeout"),e.string("msg")]);var k=b.ui().showMessage(g,f,h);return{hide:function(){k()}}}}});
l("3j",["7"],function(c){var e=c.constant("pencil"),d=c.constant("code"),a=c.constant("spin");c=c.constant("none");return{pencil:e,code:d,wait:a,none:c}});l("28",["i","j","3j","n"],function(c,e,d,a){return{get:function(a){return a.getMode()===d.pencil()?"design":"code"},set:function(b,g){e(arguments,[c.object("polish"),c.string("mode")]);var f=g.toLowerCase();if("code"!==f&&"design"!==f)throw new a('Editor mode "'+g+'" not supported. Must be either design or code.');b.setMode("design"===f?d.pencil():
d.code())}}});l("ce",[],function(){return"body p div article aside figcaption figure footer header nav section ol ul li table thead tbody tfoot caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" ")});l("6o",["b","2n","2b"],function(c,e,d){var a=function(b,e){var f=[];c.each(d.children(b),function(b){e(b)&&(f=f.concat([b]));f=f.concat(a(b,e))});return f};return{all:function(b){return a(e.body(),b)},ancestors:function(a,e,f){return c.filter(d.parents(a,f),e)},siblings:function(a,e){return c.filter(d.siblings(a),
e)},children:function(a,e){return c.filter(d.children(a),e)},descendants:a}});l("4h",["6o","m"],function(c,e){return{all:function(c){return e.all(c)},ancestors:function(d,a,b){return c.ancestors(d,function(b){return e.is(b,a)},b)},siblings:function(d,a){return c.siblings(d,function(b){return e.is(b,a)})},children:function(d,a){return c.children(d,function(b){return e.is(b,a)})},descendants:function(c,a){return e.all(a,c)}}});l("33",["t","4h","m","4i"],function(c,e,d,a){var b=function(a,b,d){return c.from(e.ancestors(a,
b,d)[0])};return{first:function(a){return c.from(e.all(a)[0])},ancestor:b,sibling:function(a,b){return c.from(e.siblings(a,b)[0])},child:function(a,b){return c.from(e.children(a,b)[0])},descendant:function(a,b){return c.from(e.descendants(a,b)[0])},closest:function(c,e,h){return a(d.is,b,c,e,h)}}});l("cf",["c","t","n"],function(c,e,d){return function(a,b){var g=function(a){try{return f(a)}catch(b){return e.none()}},f=function(b){return a(b)?e.from(b.dom().nodeValue):e.none()},h=c.detect().browser,
k=h.isIE()&&10===h.version.major?g:f;return{get:function(c){if(!a(c))throw new d("Can only get "+b+" value of a "+b+" node");return k(c).getOr("")},getOption:k,set:function(c,e){if(!a(c))throw new d("Can only set raw "+b+" value of a "+b+" node");c.dom().nodeValue=e}}}});l("b3",["21","cf"],function(c,e){var d=e(c.isText,"text");return{get:function(a){return d.get(a)},getOption:function(a){return d.getOption(a)},set:function(a,b){d.set(a,b)}}});l("6s","ce b 7 1b 1c 2p l 2q 3c 21 6o 4j 2s 4h 33 b3 2b".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){return function(){return{up:d.constant({selector:s.ancestor,closest:s.closest,predicate:p.ancestor,all:u.parents}),down:d.constant({selector:q.descendants,predicate:n.descendants}),styles:d.constant({get:g.get,getRaw:g.getRaw,set:g.set,remove:g.remove}),attrs:d.constant({get:a.get,set:a.set,remove:a.remove,copyTo:function(b,c){var d=a.clone(b);a.setAll(c,d)}}),insert:d.constant({before:h.before,after:h.after,afterAll:k.after,append:h.append,appendAll:k.append,
prepend:h.prepend,wrap:h.wrap}),remove:d.constant({unwrap:r.unwrap,remove:r.remove}),create:d.constant({nu:f.fromTag,clone:function(a){return f.fromDom(a.dom().cloneNode(!1))},text:f.fromText}),query:d.constant({comparePosition:function(a,b){return a.dom().compareDocumentPosition(b.dom())},prevSibling:u.prevSibling,nextSibling:u.nextSibling}),property:d.constant({children:u.children,name:m.name,parent:u.parent,isText:m.isText,isComment:m.isComment,isElement:m.isElement,getText:t.get,setText:t.set,
isBoundary:function(a){return m.isElement(a)?"body"===m.name(a)?!0:e.contains(c,m.name(a)):!1},isEmptyTag:function(a){return m.isElement(a)?e.contains(["br","img","hr","input"],m.name(a)):!1}}),eq:b.eq,is:b.is}}});l("fg",["2w"],function(c){var e=c.immutable("element","offset"),d=c.immutable("element","deltaOffset"),a=c.immutable("element","start","finish"),b=c.immutable("begin","end");c=c.immutable("element","text");return{point:e,delta:d,range:a,points:b,text:c}});l("kg",["7","t"],function(c,e){var d=
c.constant(!1),a=c.constant(!0),b=function(b){return{isBoundary:function(){return b(a,d,d)},fold:b,toText:function(){return b(e.none,e.none,function(a,b){return e.some(a)})},is:function(a){return b(d,d,function(b,c){return c.eq(b,a)})},len:function(){return b(c.constant(0),c.constant(1),function(a,b){return b.property().getText(a).length})}}};return{text:function(a,c){return b(function(b,d,e){return e(a,c)})},boundary:function(a,c){return b(function(b,d,e){return b(a,c)})},empty:function(a,c){return b(function(b,
d,e){return d(a,c)})},cata:function(a,b,c,d){return a.fold(b,c,d)}}});l("z2",["b","7"],function(c,e){return{boundAt:function(d,a,b,g){a=c.findIndex(d,e.curry(g,a));a=-1<a?a:0;b=c.findIndex(d,e.curry(g,b));return d.slice(a,-1<b?b+1:d.length)}}});l("z3",["b"],function(c){return{sliceby:function(e,d){var a=c.findIndex(e,d);return e.slice(0,a)}}});l("12q",["4o"],function(c){c=c.generate([{include:["item"]},{excludeWith:["item"]},{excludeWithout:["item"]}]);return{include:c.include,excludeWith:c.excludeWith,
excludeWithout:c.excludeWithout,cata:function(c,d,a,b){return c.fold(d,a,b)}}});l("z4",["b","12q"],function(c,e){var d=function(a,b){var d=[],f=[];c.each(a,function(a){var c=b(a);e.cata(c,function(){f.push(a)},function(){0<f.length&&d.push(f);d.push([a]);f=[]},function(){0<f.length&&d.push(f);f=[]})});0<f.length&&d.push(f);return d};return{splitby:function(a,b){return d(a,function(a){return b(a)?e.excludeWithout(a):e.include(a)})},splitbyAdv:d}});l("sr",["z2","z3","z4"],function(c,e,d){return{splitby:function(a,
b){return d.splitby(a,b)},splitbyAdv:function(a,b){return d.splitbyAdv(a,b)},sliceby:function(a,b){return e.sliceby(a,b)},boundAt:function(a,b,d,e){return c.boundAt(a,b,d,e)}}});l("kh",["b","7","t","fg","sr"],function(c,e,d,a,b){return{count:function(a){return c.foldr(a,function(a,b){return b.len()+a},0)},dropUntil:function(a,c){return b.sliceby(a,function(a){return a.is(c)})},gen:function(b,c){return b.fold(d.none,function(b){return d.some(a.range(b,c,c+1))},function(e){return d.some(a.range(e,c,
c+b.len()))})},justText:function(a){return c.bind(a,function(a){return a.fold(e.constant([]),e.constant([]),function(a){return[a]})})}}});l("cg",["b","fg","kg","kh"],function(c,e,d,a){var b=function(a,e,g){if(a.property().isText(e))return[d.text(e,a)];if(a.property().isEmptyTag(e))return[d.empty(e,a)];if(a.property().isElement(e)){var m=a.property().children(e),n=a.property().isBoundary(e)?[d.boundary(e,a)]:[];e=void 0!==g&&g(e)?[]:c.bind(m,function(c){return b(a,c,g)});return n.concat(e).concat(n)}return[]},
g=function(c,d,g,m,n){c=b(c,m,n);d=a.dropUntil(c,d);d=a.count(d);return e.point(m,d+g)};return{typed:b,items:function(a,d,e){a=b(a,d,e);var g=function(a,b){return a};return c.map(a,function(a){return a.fold(g,g,g)})},extractTo:function(a,b,c,d,n){return a.up().predicate(b,d).fold(function(){return e.point(b,c)},function(d){return g(a,b,c,d,n)})},extract:function(a,b,c,d){return a.property().parent(b).fold(function(){return e.point(b,c)},function(e){return g(a,b,c,e,d)})}}});l("ch",["b","7","cg"],
function(c,e,d){var a=function(a,c){return"img"===c.property().name(a)?" ":"\n"};return{from:function(b,g,f){g=d.typed(b,g,f);return c.map(g,function(c){return c.fold(e.constant("\n"),a,b.property().getText)}).join("")}}});l("ki",["b","7"],function(c,e){return{make:function(d,a,b){return c.foldl(d,function(b,c){return a(c,b.len).fold(e.constant(b),function(a){return{len:a.finish(),list:b.list.concat([a])}})},{len:void 0!==b?b:0,list:[]}).list}}});l("kj",["b","t"],function(c,e){var d=function(a,c){return c>=
a.start()&&c<=a.finish()},a=function(a,d){return c.findIndex(a,function(a){return a.start()===d})};return{get:function(a,g){var f=c.find(a,function(a){return d(a,g)});return e.from(f)},find:function(a,d){return e.from(c.find(a,d))},inUnit:d,sublist:function(b,c,d){c=a(b,c);var e=a(b,d);d=-1<e?e:b[b.length-1]&&b[b.length-1].finish()===d?b.length+1:-1;return-1<c&&-1<d?b.slice(c,d):[]}}});l("kl",["b","6","7"],function(c,e,d){return{translate:function(a,b){return c.map(a,function(a){return e.merge(a,
{start:d.constant(a.start()+b),finish:d.constant(a.finish()+b)})})}}});l("kk",["b","kj","kl"],function(c,e,d){var a=function(a,c,e){c=e(a,c);return d.translate(c,a.start())};return{splits:function(b,d,f){return 0===d.length?b:c.bind(b,function(b){var k=c.bind(d,function(a){return e.inUnit(b,a)?[a-b.start()]:[]});return 0<k.length?a(b,k,f):[b]})}}});l("i4",["ki","kj","kk","kl"],function(c,e,d,a){return{generate:function(a,d,e){return c.make(a,d,e)},get:function(a,c){return e.get(a,c)},find:function(a,
c){return e.find(a,c)},splits:function(a,c,e){return d.splits(a,c,e)},translate:function(b,c){return a.translate(b,c)},sublist:function(a,c,d){return e.sublist(a,c,d)}}});l("ci",["fg","cg","kh","i4"],function(c,e,d,a){return{find:function(b,g,f,h){b=e.typed(b,g,h);b=a.generate(b,d.gen);return a.get(b,f).map(function(a){return c.point(a.element(),f-a.start())})}}});l("6t",["cg","ch","ci"],function(c,e,d){return{extract:function(a,b,d,e){return c.extract(a,b,d,e)},extractTo:function(a,b,d,e,h){return c.extractTo(a,
b,d,e,h)},all:function(a,b,d){return c.items(a,b,d)},from:function(a,b,d){return c.typed(a,b,d)},find:function(a,b,c,e){return d.find(a,b,c,e)},toText:function(a,b,c){return e.from(a,b,c)}}});l("4r",["6s","6t"],function(c,e){var d=c();return{extract:function(a,b,c){return e.extract(d,a,b,c)},extractTo:function(a,b,c,f){return e.extractTo(d,a,b,c,f)},all:function(a,b){return e.all(d,a,b)},from:function(a,b){return e.from(d,a,b)},find:function(a,b,c){return e.find(d,a,b,c)},toText:function(a,b){return e.toText(d,
a,b)}}});l("2g","l 3l 2q 3c 2s 2b".split(" "),function(c,e,d,a,b,g){var f=function(a){return a.dom().innerHTML};return{get:f,set:function(f,k){var m=g.owner(f).dom(),n=c.fromDom(m.createDocumentFragment()),m=e.fromHtml(k,m);a.append(n,m);b.empty(f);d.append(f,n)},getOuter:function(a){var b=c.fromTag("div");a=c.fromDom(a.dom().cloneNode(!0));d.append(b,a);return f(b)}}});l("3k",["b","7","4r","2g"],function(c,e,d,a){return{toText:function(a){return c.map(a,function(a){return d.toText(a,e.constant(!1))}).join("").trim()},
toHtml:function(b){return c.map(b,a.getOuter).join("")}}});l("3m",[],function(){return{get:function(c){return c.dom().textContent},set:function(c,e){c.dom().textContent=e}}});l("29","a 1q f i j 3k 1b 3l 2g 3m n".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(r,q){return d.makeReadOnly({getAttributes:function(){return d.makeReadOnly(r.getFilteredAttributes(q))},setAttributes:function(d){b(arguments,[a.object("attributes")]);e.each(d,function(a,b){if(!c.isString(a))throw new n("attribute key "+
b+" does not have a string value: "+a);});f.setAll(q,d);r.domChanged();r.undoChanged()},getText:function(){return g.toText([q])},setText:function(c){b(arguments,[a.string("text")]);m.set(q,c)},getHtml:function(){return r.getFilteredContents(q)},setHtml:function(c){b(arguments,[a.string("html")]);k.set(q,c)},replaceElement:function(c){b(arguments,[a.string("html")]);var d=h.fromHtml(c);if(1!==d.length)throw new n("replacement html must be a single node");d=d[0];r.replaceElement(q,d);return p(r,d)}})};
return{getText:function(a){return a.content().getSelectedText().getOr("")},getHtml:function(a){return a.content().getSelectedHtml().getOr("")},findTagAtCursor:function(a,b){var c=a.content();return c.findTagAtCursor(b).map(function(a){return p(c,a)}).getOr(null)}}});l("g",["t","o"],function(c,e){var d=function(a){try{var b=Aa(a);return c.some(b)}catch(d){return c.none()}};return{get:d,register:function(a,b){return l(a,[],function(){return b})},hookup:function(a,b){d(b).fold(function(){e&&e.error&&
e.error('textbox.io Could not find plugin "'+b+'". Have you declared it?')},function(b){a.events.loaded.addListener(function(){b.initialize(a)})})}}});l("3n",["7"],function(c){var e=function(d,a){return{left:c.constant(d),top:c.constant(a),translate:function(b,c){return e(d+b,a+c)}}};return e});l("4s","7 1c l 21 4j q".split(" "),function(c,e,d,a,b,g){return{attached:function(a,h){var k=h||d.fromDom(g.documentElement);return b.ancestor(a,c.curry(e.eq,k)).isSome()},windowOf:function(b){var c=b.dom();
return c===c.window?b:a.isDocument(b)?c.defaultView||c.parentWindow:null}}});l("3o",["3n","4s","l"],function(c,e,d){var a=function(a,b){return void 0!==a?a:void 0!==b?b:0},b=function(a){var b=a.dom(),h=b.ownerDocument,k=h.body,h=d.fromDom(h.documentElement);if(k===b)return c(k.offsetLeft,k.offsetTop);if(!e.attached(a,h))return c(0,0);a=b.getBoundingClientRect();return c(a.left,a.top)};return{absolute:function(c){var f=c.dom().ownerDocument,h=f.body,k=e.windowOf(d.fromDom(f)),m=f.documentElement,f=
a(k.pageYOffset,m.scrollTop),k=a(k.pageXOffset,m.scrollLeft),n=a(m.clientTop,h.clientTop),h=a(m.clientLeft,h.clientLeft);return b(c).translate(k-h,f-n)},relative:function(a){a=a.dom();return c(a.offsetLeft,a.offsetTop)},viewport:b}});l("2a",["a","c","3n","3o","q"],function(c,e,d,a,b){var g=e.detect().browser.isSafari(),f=function(a,b){g&&c.isFunction(a.dom().scrollIntoViewIfNeeded)?a.dom().scrollIntoViewIfNeeded(!1):a.dom().scrollIntoView(b)};return{get:function(a){a=void 0!==a?a.dom():b;return d(a.body.scrollLeft||
a.documentElement.scrollLeft,a.body.scrollTop||a.documentElement.scrollTop)},intoView:f,intoViewIfNeeded:function(a,b){var c=b.dom().getBoundingClientRect(),d=a.dom().getBoundingClientRect();d.top<c.top?f(a,!0):d.bottom>c.bottom&&f(a,!1)},setToElement:function(b,c){var d=a.absolute(c);b.scrollTo(d.left(),d.top())}}});l("19","b 22 23 f 24 25 26 27 28 29 g 7 s 2a 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return function(t,u,v){var w=d({loaded:t.events.loaded,focus:t.events.focus,change:t.events.change,
dirty:t.events.dirty,internal:t.events.internal}),z=function(a,b){var c=s.owner(a),d=s.defaultView(a),c=q.get(c),e=b();d.dom().scrollTo(c.left(),c.top());return e},x=p.curry(m.getText,t),y=a.makeReadOnly({content:{documentElement:p.curry(b.documentElement,t),insertHtmlAtCursor:p.curry(b.insertHtmlAtCursor,t),uploadImages:p.curry(b.uploadImages,t),get:p.curry(b.get,t),set:p.curry(b.set,t),isDirty:p.curry(b.isDirty,t),setDirty:p.curry(b.setDirty,t),selection:{findTagAtCursor:p.curry(m.findTagAtCursor,
t),getText:x,getHtml:p.curry(m.getHtml,t)},getSelectedText:x},mode:{set:p.curry(k.set,t),get:p.curry(k.get,t)},filters:g(t),macros:{addSimpleMacro:p.curry(f.addSimpleMacro,t),removeMacro:p.curry(f.removeMacro,t)},message:p.curry(h.message,t),events:w.registry,element:function(){return t.element().dom()},focus:t.focus,restore:r.cached(function(){return z(t.element(),function(){e.blur();var a=b.get(t);w.destroy();t.destroy();return v.restore(a)})})});c.each(u,function(a){n.hookup(y,a)});return y}});
l("d","b 15 16 17 18 19 t 1b 1c".split(" "),function(c,e,d,a,b,g,f,h,k){return function(){var m=e(),n=a(),p=function(a){return a.api},r=function(a,c){var e=d(c.options(),function(){return p.getOrDie("Internal Error")},f.from(h.get(a,"id"))),p=b.one(a,c.constructors(),e).map(function(b){var c=g(b.polish,e&&e.plugins?e.plugins:[],{restore:function(a){n.remove(d);m.remove(d);return b.restore(a).dom()}}),d={is:function(b){return k.eq(a,b)},api:c};n.add(d);m.add(d);return c});return p};return{getOrCreate:function(a,
b){return n.get(a).map(p).orThunk(function(){return r(a,b)})},get:function(a){a=n.findAll(a);return c.map(a,p)},getActiveEditor:m.get}}});l("2d",["6","1b"],function(c,e){return{withOptions:function(d,a){return e.has(d,"tabindex")?c.deepMerge(a,{content:{tabindex:e.get(d,"tabindex")}}):a}}});l("2e",["1q","c","7","t","2p"],function(c,e,d,a,b){e=e.detect();var g=e.browser.isIE()&&10===e.browser.version.major,f=function(a,c){var d=b.getRaw(a,c).getOrThunk(function(){return b.get(a,c)});return g&&"0px"===
d?"auto":d},h=function(b,c,d){b=f(b,c);return void 0===b?d:a.some(b)},k=function(b){return{width:h(b,"width",a.none()),"max-width":h(b,"max-width",a.some("none")),"min-width":h(b,"min-width",a.some("none")),"max-height":h(b,"max-height",a.some("none")),"min-height":h(b,"min-height",a.some("none"))}},m=function(a,d,e){var g=b.getRaw(d,"display"),h=f(d,"height");b.set(d,"display","none");var m=f(d,"height"),u=k(d);g.fold(function(){b.remove(d,"display")},function(a){b.set(d,"display",a)});!0===a?b.set(e,
"height","auto"):(a="auto"===m?h:m,void 0!==a&&b.set(e,"height",a));c.each(u,function(a,c){a.each(function(a){b.set(e,c,a)})})};return{copyFrom:d.curry(m,!1),copyFromAutoresize:d.curry(m,!0),explicit:function(a){m(!1,a,a)},explicitAutoresize:function(a){m(!0,a,a)}}});l("6u",["b"],function(c){var e=function(c){return c.replace(/\./g,"-")};return{create:function(d){var a=e(d);return{resolve:function(b){b=b.split(" ");return c.map(b,function(b){return a+"-"+b}).join(" ")}}},cssNamespace:e,cssClass:function(c,
a){return c+"-"+a}}});l("4w",["6u","7"],function(c,e){var d=c.create("ephox-elder");return{resolve:d.resolve,scrollable:e.curry(d.resolve,"scrollable")}});l("2z",[],function(){return function(c,e,d){var a=d||!1,b=function(){e();a=!0},g=function(){c();a=!1};return{on:b,off:g,toggle:function(){(a?g:b)()},isOn:function(){return a}}}});l("4x",["b","1b"],function(c,e){var d=function(a,b){var c=e.get(a,b);return void 0===c||""===c?[]:c.split(" ")};return{read:d,add:function(a,b,c){c=d(a,b).concat([c]);
e.set(a,b,c.join(" "))},remove:function(a,b,g){var f=c.filter(d(a,b),function(a){return a!==g});0<f.length?e.set(a,b,f.join(" ")):e.remove(a,b)}}});l("3x",["b","4x"],function(c,e){var d=function(a){return e.read(a,"class")},a=function(a,b){return e.add(a,"class",b)},b=function(a,b){return e.remove(a,"class",b)};return{get:d,add:a,remove:b,toggle:function(e,f){c.contains(d(e),f)?b(e,f):a(e,f)},supports:function(a){return void 0!==a.dom().classList}}});l("2o",["2z","1b","3x"],function(c,e,d){var a=
function(a,c){return d.supports(a)&&a.dom().classList.contains(c)};return{add:function(a,c){d.supports(a)?a.dom().classList.add(c):d.add(a,c)},remove:function(a,c){d.supports(a)?a.dom().classList.remove(c):d.remove(a,c);0===(d.supports(a)?a.dom().classList:d.get(a)).length&&e.remove(a,"class")},toggle:function(a,c){return d.supports(a)?a.dom().classList.toggle(c):d.toggle(a,c)},toggler:function(b,e){var f=d.supports(b),h=b.dom().classList;return c(function(){f?h.remove(e):d.remove(b,e)},function(){f?
h.add(e):d.add(b,e)},a(b,e))},has:a}});l("4e",["b","2o","3x","r"],function(c,e,d,a){return{add:function(a,d){c.each(d,function(c){e.add(a,c)})},remove:function(a,d){c.each(d,function(c){e.remove(a,c)})},toggle:function(a,d){c.each(d,function(c){e.toggle(a,c)})},hasAll:function(a,d){return c.forall(d,function(c){return e.has(a,c)})},hasAny:function(a,d){return c.exists(d,function(c){return e.has(a,c)})},get:function(b){if(d.supports(b)){b=b.dom().classList;for(var c=new a(b.length),e=0;e<b.length;e++)c[e]=
b.item(e);b=c}else b=d.get(b);return b}}});l("6v",["2o","4e"],function(c,e){return{addClass:function(d){return function(a){c.add(a,d)}},removeClass:function(d){return function(a){c.remove(a,d)}},removeClasses:function(c){return function(a){e.remove(a,c)}},hasClass:function(d){return function(a){return c.has(a,d)}}}});l("4t","b 4w 7 t 3y l 6v 2a 3w 36".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=a.none();e=e.resolve("modal-scroll-lock");var p=function(a,b){c.each(b,function(b){a(b)})};return{block:function(){if(n.isNone()){var c=
h.get(),d=b.bind(g.fromDom(m),"scroll",function(a){a=h.get();a.left()===c.left()&&a.top()===c.top()||m.scrollTo(c.left(),c.top())});n=a.some(d)}},unblock:function(){n.each(function(b){n=a.none();k(function(){b.unbind()},250)})},lock:d.curry(p,f.addClass(e)),unlock:d.curry(p,f.removeClass(e))}});$("6e",clearTimeout);l("6w",["6e","3w"],function(c,e){return function(d,a){var b=null;return{cancel:function(){null!==b&&(c(b),b=null)},schedule:function(){var c=arguments;b=e(function(){d.apply(null,c);b=
null},a)}}}});l("58",["b","2w"],function(c,e){return function(d){var a=e.immutable.apply(null,d),b=[];return{bind:function(a){if(void 0===a)throw"Event bind error: undefined handler";b.push(a)},unbind:function(a){b=c.filter(b,function(b){return b!==a})},trigger:function(){var d=a.apply(null,arguments);c.each(b,function(a){a(d)})}}}});l("4a",["1q"],function(c){return{create:function(e){var d=c.map(e,function(a){return{bind:a.bind,unbind:a.unbind}});e=c.map(e,function(a){return a.trigger});return{registry:d,
trigger:e}}}});l("4u",["6w","58","4a","3y"],function(c,e,d,a){return function(b){var g=!1,f=d.create({started:e([]),stopped:e([])}),h=c(function(){!0===g&&(g=!1,f.trigger.stopped())},250),k=a.bind(b,"scroll",function(){h.cancel();!1===g&&f.trigger.started();g=!0;h.schedule()});return{events:f.registry,destroy:function(){k.unbind()},isScrolling:function(){return g}}}});l("4v",["t","2a"],function(c,e){return{capture:function(d,a){var b=c.none();return{save:function(){b=c.some(e.get(d))},restore:function(){b.each(function(b){a.scrollTo(b.left(),
b.top())})}}},preserve:function(c,a){var b=e.get(c);a();var g=e.get(c);b.top()===g.top()&&b.left()===g.left()||c.dom().defaultView.scrollTo(b.left(),b.top())}}});l("3p",["4t","4u","4v","4w","2o"],function(c,e,d,a,b){return{register:function(c){b.add(c,a.scrollable())},deregister:function(c){b.remove(c,a.scrollable())},scrollable:a.scrollable,preserve:d.preserve,capture:d.capture,block:c.block,unblock:c.unblock,lock:c.lock,unlock:c.unlock,event:e}});l("1g",["2k"],function(c){var e=c();return{preload:function(){e.preload()},
addStylesheet:function(c,a){return e.addStylesheet(c,a)},addScript:function(c,a){return e.addScript(c,a)},waitForLoad:function(){return e.waitForLoad()}}});l("2l",["b","w"],function(c,e){var d=function(){return{zh_hk:"zh_tw",iw:"he",no:"nb",nn:"nb",en:"en",ar:"ar",ca:"ca",cs:"cs",da:"da",de:"de",el:"el",es:"es",fa:"fa",fi:"fi",fr:"fr",he:"he",hr:"hr",hu:"hu",it:"it",ja:"ja",kk:"kk",ko:"ko",nl:"nl",nb:"nb",pl:"pl",pt:"pt",pt_pt:"pt_pt",ro:"ro",ru:"ru",sl:"sl",sk:"sk",sv:"sv",th:"th",tr:"tr",uk:"uk",
zh:"zh",zh_tw:"zh_tw"}},a=function(a){a=a.toLowerCase().replace("-","_");var b=a.indexOf(";");a=-1<b?a.substring(0,b):a;a=e.trim(a);b=a.indexOf("_");b=-1<b?a.substring(0,b):a;return{full:a,languageCode:b}},b=function(b,d){var e=b.split(","),e=c.map(e,function(b){b=a(b);return d[b.full]||d[b.languageCode]||""});return c.find(e,function(a){return""!==a})};return{extract:a,determine:function(a){var c=d();return b(a,c)},determineFrom:b,localeList:d}});l("k",["t"],function(c){return{cat:function(c){for(var d=
[],a=function(a){d.push(a)},b=0;b<c.length;b++)c[b].each(a);return d},findMap:function(e,d){for(var a=0;a<e.length;a++){var b=d(e[a],a);if(b.isSome())return b}return c.none()},liftN:function(e,d){for(var a=[],b=0;b<e.length;b++){var g=e[b];if(g.isSome())a.push(g.getOrDie());else return c.none()}return c.some(d.apply(null,a))}}});l("1h","2i 2l 7 t k o".split(" "),function(c,e,d,a,b,g){var f=function(){var a=c.resolve("navigator")||{};return a.userLanguage||a.language||"en"}(),h=a.none();return{determine:function(c){var h=
void 0!==c?[c,f]:[f];return b.findMap(h,function(b){return a.from(e.determine(b))}).fold(function(){g.warn("WARNING: locales not supported: "+h.join(", "));return"en"},d.identity)},get:function(){return h.getOrDie("locale used before it has been set")},set:function(b){h=a.from(b)}}});l("1i","a 1q 2i 7 1h n o".split(" "),function(c,e,d,a,b,g,f){var h={font:{arial:"Arial",courier:"Courier New",comicsans:"Comic Sans MS",consolas:"Consolas",georgia:"Georgia",impact:"Impact",tahoma:"Tahoma",timesnr:"Times New Roman",
trebuchet:"Trebuchet MS",verdana:"Verdana"},error:{duplicate:{code:"That snippet code is already taken.",uuid:"That snippet uuid is already taken."},unknown:{uuid:"The snippet uuid cannot be found"},code:{duplicate:"That snippet code is already taken."}},cog:{login:"Log in",logout:"Log out","not-logged-in":"Not logged in",user:"User: {0}"},banner:{"logged-in":"Logged in as: {0}"}},k={},m="",n={},p=function(a){return d.resolve(a,n)||d.resolve(a,k)||d.resolve(a,h)};return{loadEnglish:function(a){k=
a},load:function(a,c){m=a;n=c;b.set(a)},isLoaded:function(a){return m===a&&0<e.keys(n).length},get:function(a){var b=p(a);if(c.isString(b))return b;throw new g("key "+a+" does not exist");},has:function(b){if(!c.isString(b))throw b.fold?f.error("object details were",b.fold(a.identity,a.identity,a.identity)):f.error("object key was",b),"key was an object";return c.isString(p(b))}}});l("1j",["t","o"],function(c,e){var d=c.none();return{set:function(a){d.fold(function(){d=c.some(a)},function(b){b!==
a&&e.error('Only one base URL supported per page. Requested value "'+a+'", already using "'+b+'"')})},get:function(){return d.getOrDie("Must begin loading with a base URL")}}});l("2r",["3y","l","q"],function(c,e,d){return{execute:function(a){if("complete"===d.readyState||"interactive"===d.readyState)a();else var b=c.bind(e.fromDom(d),"DOMContentLoaded",function(){a();b.unbind()})}}});l("3z",["a","b","2p","35"],function(c,e,d,a){return function(b,g){var f=function(a){var c=g(a);return 0>=c||null===
c?(a=d.get(a,b),parseFloat(a)||0):c},h=function(a,b){return e.foldl(b,function(b,c){var e=d.get(a,c),e=void 0===e?0:parseInt(e,10);return isNaN(e)?b:b+e},0)};return{set:function(d,e){if(!c.isNumber(e)&&!e.match(/^[0-9]+$/))throw b+".set accepts only positive integer values. Value was "+e;var f=d.dom();a.isSupported(f)&&(f.style[b]=e+"px")},get:f,getOuter:f,aggregate:h,max:function(a,b,c){a=h(a,c);return b>a?b-a:0}}}});l("2t",["2p","3z"],function(c,e){var d=e("width",function(a){return a.dom().offsetWidth});
return{set:function(a,b){d.set(a,b)},get:function(a){return d.get(a)},getOuter:function(a){return d.getOuter(a)},setMax:function(a,b){var e=d.max(a,b,"margin-left border-left-width padding-left padding-right border-right-width margin-right".split(" "));c.set(a,"max-width",e+"px")}}});$("2u",clearInterval);$("2v",setInterval);l("1k","2m s 2n 2o 2p l 2q 2r 2s 2t w 2u 2v".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var q=function(){var c=g.fromTag("div");a.add(c,"ephox-textbox-font");var e=g.fromTag("span");
a.add(e,"ephox-chameleon-icon");f.append(c,e);f.append(d.body(),c);var h=m.get(e),e=b.get(e,"font-family");k.remove(c);return 0<h&&void 0!==e&&n.contains(e,"Textbox Icons")},s=function(a){var b=0,c=r(function(){b+=250;q()?(p(c),a(!0)):2E3<b&&(p(c),a(!1))},250)};return{wait:e.cached(function(){return c.nu(function(a){h.execute(function(){q()?a(!0):s(a)})})})}});l("u","b 1g 7 p 1h 1i 1j 1k 1l o".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(b){h.wait().get(function(c){b(c?a.value(!0):a.error("Stylesheet loaded, but did not contain Textbox.io styles"))})},
p=function(b,c){var d=b+"/i18n/tbio_"+c+".js?"+k.resourceParam();return e.addScript(d,function(b){return b.bind(function(b){return k.strictMatch(b.version,"Language strings").fold(function(){return a.value(b.strings())},a.error)})})},r=function(a){var b="/textboxio.css?"+k.fullParam();e.addStylesheet(a+b,n)};return{load:function(a){f.set(a);a=f.get();r(a+"/css");p(a,"en").get(function(a){a.each(g.loadEnglish)});return a},devLoad:r,setLanguage:function(a){var c=b.determine(a);g.isLoaded(c)||(a=f.get(),
p(a,c).get(function(a){a.each(function(a){g.load(c,a)})}))},waitForLoad:function(){return e.waitForLoad()},getFailures:function(a){return c.bind(a,function(a){return a.fold(function(a){return[a]},d.constant([]))})}}});l("52",["1b","l"],function(c,e){return{span:function(d){d=e.fromTag("span",d);c.set(d,"role","presentation");return d},div:function(d){d=e.fromTag("div",d);c.set(d,"role","presentation");return d},tag:function(d,a){var b=e.fromTag(d,a);c.set(b,"role","presentation");return b}}});l("59",
["6u"],function(c){return{resolve:c.create("ephox-polish").resolve}});l("6x",["33"],function(c){return{any:function(e){return c.first(e).isSome()},ancestor:function(e,d,a){return c.ancestor(e,d,a).isSome()},sibling:function(e,d){return c.sibling(e,d).isSome()},child:function(e,d){return c.child(e,d).isSome()},descendant:function(e,d){return c.descendant(e,d).isSome()},closest:function(e,d,a){return c.closest(e,d,a).isSome()}}});l("53","c 7 59 1b 2o 2p l 2q 2s 6x q".split(" "),function(c,e,d,a,b,g,
f,h,k,m,n){var p=d.resolve("highcontrast-mode"),r=function(a){var c=f.fromTag("div");b.add(c,d.resolve("highcontrast-detect"));h.append(a,c);g.reflow(c);(!0===("none"===g.get(c,"background-image")?!0:!1)?b.add:b.remove)(a,p);k.remove(c)},q=function(c){var d=f.fromDom(n.documentElement);(!0===(a.has(d,"hc")&&a.has(d,"hcx"))?b.add:b.remove)(c,p)},s=e.noop;return{detect:function(a){var b=c.detect();b.os.isWindows()&&(b.browser.isIE()||b.browser.isSpartan()||b.browser.isFirefox()?r:b.browser.isChrome()?
q:s)(a)},isHighContrast:function(a){return m.ancestor(a.uiContainer(),"."+p)}}});l("54",["2w"],function(c){return c.immutableBag(["width","docWidth","height","docHeight"],[])});l("55",["4o"],function(c){c=c.generate([{unchanged:["html"]},{changed:["html"]}]);return{unchanged:c.unchanged,changed:c.changed,cata:function(c,d,a){return c.fold(d,a)}}});l("46",["a","56"],function(c,e){var d=function(){return{validate:function(a,b){return c.isFunction(a)||"events"===b&&c.isObject(a)},label:"Function (or events)"}}(),
a="activateInline communication connect content deactivateInline element events filter focus getContent getMode insertHtmlAtCursor isDirty isPrettyPrinting keyboard macros operations setContent setDirty smartview state ui undo".split(" "),b=e.ensureWith(a.concat([]),d),d=e.ensureWith(a.concat("blur destroy fromTransfer fullscreen uploader toTransfer viewport".split(" ")),d);return{external:b,internal:d}});l("6y",["b","7"],function(c,e){return function(d){return c.mapToObject(d,function(){return{bind:e.noop,
unbind:e.noop}})}});l("cj",[],function(){return{create:function(){var c=!1;return{isBlocked:function(){return c},block:function(){c=!0},unblock:function(){c=!1}}}}});l("ck",[],function(){return{create:function(c,e){return{control:c,instance:e}}}});l("bw",["cj","ck"],function(c,e){return{tap:function(d){var a=c.create();return e.create(a,function(){a.isBlocked()||d.apply(null,arguments)})}}});l("6z",["bw","58","4a","4n"],function(c,e,d,a){return function(b){b=a(b.dirty);var g=b.get,f=b.set,h=d.create({dirty:e([]),
clean:e([])}),k=c.tap(function(a){var b=g();a!==b&&(f(a),!0===a?h.trigger.dirty():(k.control.block(),h.trigger.clean(),k.control.unblock()))});return{events:h.registry,isDirty:g,setDirty:k.instance,state:function(){return{dirty:g()}}}}});l("70",["b","7","3h"],function(c,e,d){return function(a,b,g){var f=[],h=e.curry(b,"input"),k=e.curry(b,"output"),m=e.curry(g,"input"),n=e.curry(g,"output");b=function(a){d.cata(a,h,k,m,n);f.push(a)};c.each(a.customs,b);return{state:function(){return{customs:f.slice(0)}},
addFilter:b}}});l("31",[],function(){var c=0;return{generate:function(e){var d=(new Date).getTime(),a=Math.floor(1E9*Math.random());c++;return e+"_"+a+c+String(d)}}});l("71",["1q","31","6"],function(c,e,d){return function(a){var b={};c.each(a,function(a,c){b[c]=a});return{get:function(){return c.values(b)},add:function(a){var c=e.generate("macro");b[c]=a;return c},remove:function(a){delete b[a]},state:function(){return d.merge({},b)}}}});l("hr",["a","b","1q"],function(c,e,d){return{isFunctionOrEvents:function(a){var b=
function(b){return!0===e.forall(a,function(a){return void 0!==b[a]&&void 0!==b[a].bind&&c.isFunction(b[a].bind)})?!0:!1};return{validate:function(a,d){return c.isFunction(a)||"events"===d&&c.isObject(a)&&b(a)},label:"Function (or events)"}}}});l("cl",["hr","56"],function(c,e){return e.ensureWith("events init ui check scanView situation hasDropdown hasAutocorrect handle assign lock destroy state lookup name".split(" "),c.isFunctionOrEvents(["analytics"]))});l("73",["7","t","6y"],function(c,e,d){return{noSituation:function(){return{primary:c.constant([]),
secondary:c.constant([]),submenus:c.constant({})}},basic:function(){return{destroy:c.noop,ui:e.none,state:c.constant({}),events:d(["analytics"])}}}});l("72","7 t 6y cl 73 1b".split(" "),function(c,e,d,a,b,g){return function(){var f=c.noop;return a({setAutocorrect:c.noop,setSpelling:c.noop,events:d(["analytics"]),init:function(a){a.body().each(function(a){g.set(a,"spellcheck","false");f=function(){g.remove(a,"spellcheck")}})},ui:e.none,check:c.noop,scanView:c.noop,situation:b.noSituation,hasDropdown:c.constant(!1),
hasAutocorrect:c.constant(!1),handle:c.noop,assign:c.noop,lock:c.apply,destroy:function(){f()},state:c.constant({}),lookup:c.constant(e.none()),name:c.constant("spelling-disabled")})}});l("74",["b","1q","6p","7","t"],function(c,e,d,a,b){var g=function(b,h){var g={};e.each(b,function(a,b){var c=b.split(".");if(1>=c.length)g[b]={finalvalue:a};else{var e=g;d.namespace(b,g);for(var f=0;f<c.length-1;f++)e=e[c[f]];e[c[c.length-1]]={finalvalue:a}}});var m=function(b){var d={},f=e.keys(b);c.each(f,function(c){d[c]=
void 0!==b[c].finalvalue?h(b[c].finalvalue):a.constant(m(b[c]))});return d};return m(g)};return{ui:function(c,d){var e=g(c,void 0!==d?d:a.constant);return a.constant(b.some(e))},actions:function(b){b=g(b,a.identity);return a.constant(b)}}});l("57","b 6 3v 7 t p 6y 6z 70 71 72 73 74 58 4a".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return{basic:p.basic,draganddrop:function(){return{events:f(["insertAssets","insertHtml"]),destroy:a.noop}},communication:function(){return{headers:a.constant({}),
destroy:a.noop}},fullscreen:function(){return{ui:b.none,actions:r.actions({maximize:a.noop,restore:a.noop}),select:a.noop,deselect:a.noop,destroy:a.noop,events:f(["analytics","maximize","restore"])}},dialog:function(){return{destroy:a.noop,ui:b.none,events:f(["analytics"]),actions:r.actions({show:a.noop})}},spelling:function(){return n()},editorcontext:function(){return{events:f(["blockChanged","enterDown","enterUp"]),destroy:a.noop}},highlighter:function(){return{destroy:a.noop,run:a.noop}},linkvalidator:function(){return{destroy:a.noop,
refresh:a.noop,ignore:a.noop,state:a.constant({ignore:[],cache:{}})}},macros:function(){return{events:f(["analytics"]),state:a.constant({}),customMacros:a.constant(m({})),destroy:a.noop}},table:function(){return{ui:b.none,state:a.constant({}),events:f(["analytics"]),situation:p.noSituation,handle:a.noop,assign:a.noop,destroy:a.noop,name:a.constant("table-disabled")}},image:function(){return{events:f(["changed","contextmenu"]),situation:p.noSituation,handle:a.noop,assign:a.noop,destroy:a.noop,name:a.constant("image-disabled")}},
imageEdit:function(){var e=function(b,e){return d.pure(c.map(e,a.compose(g.value,b)))},f=a.curry(e,a.identity),e=a.curry(e,function(a){return a.asset()});return{situation:p.noSituation,handle:a.noop,assign:a.noop,ui:b.none,destroy:a.noop,insertResample:a.constant({assets:f,correlated:e,destroy:a.noop}),name:a.constant("imageEdit-disabled")}},mobile:function(){return{ui:b.none,events:f(["fullscreen"]),destroy:a.noop}},noAnalytics:function(){return{log:a.noop,register:a.noop}},state:function(b){var c=
h(b.laundry),d=k(b.filters,a.noop,a.noop),f=m(b.macros.customs);return{filter:a.constant({customFilters:a.constant(d)}),macros:a.constant({customMacros:a.constant(f)}),laundry:c,getState:function(a){return e.merge(b,void 0===a?{}:a,{laundry:c.state(),filters:d.state(),macros:{customs:f.state()}})}}},uploader:function(){var b=s.create({reconstitute:q([]),uploadAssets:q(["assets"])});return{destroy:a.noop,events:b.registry,reconstitute:a.noop,uploadAssets:a.noop}},undo:function(){return{reset:a.noop,
disable:a.apply,save:a.noop}}}});l("49",["7","57","58","4a"],function(c,e,d,a){return{activateInline:c.noop,deactivateInline:c.noop,communication:e.communication,events:function(){return a.create({loaded:d([]),focus:d([]),dirty:d([]),change:d([]),internal:d(["command","data"]),paint:d([])}).registry},keyboard:c.die("the keyboard feature is not implemented in this mode"),operations:c.die("the operations feature is not implemented in this mode"),smartview:c.die("the smartview feature is not implemented in this mode"),
ui:c.die("the ui feature is not implemented in this mode")}});l("4b",["b","7","58"],function(c,e,d){return function(a,b){var g=d(a),f=0,h=function(b){var d=c.map(a,function(a){return b[a]()});g.trigger.apply(null,d)};return{bind:function(a){g.bind(a);f++;1===f&&b.bind(h)},unbind:function(a){g.unbind(a);f--;0===f&&b.unbind(h)},trigger:e.die("Cannot trigger a source event.")}}});l("5a",["2p","3z"],function(c,e){var d=e("height",function(a){return a.dom().offsetHeight});return{set:function(a,b){d.set(a,
b)},get:function(a){return d.get(a)},getOuter:function(a){return d.getOuter(a)},setMax:function(a,b){var e=d.max(a,b,"margin-top border-top-width padding-top padding-bottom border-bottom-width margin-bottom".split(" "));c.set(a,"max-height",e+"px")}}});l("40","52 7 t 53 3f 54 55 3j 46 57 3g 49 59 58 4a 4b 4e l 5a 2q 2s 2t".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,z,x,y){return function(A,l,C){var D=m.state(C),F=d.none(),E=d.none(),G=s.create({loaded:q([]),focus:q([]),dirty:t([],D.laundry.events.dirty),
change:q([]),internal:q(["command","data"]),paint:q(["dimensions"])}),H=c.div();u.add(H,[r.resolve("source-container"),"ephox-textbox-font",r.resolve("layer-editor")]);C=function(){return H};var L=function(){return E.getOrDie("CodeMirror not added to DOM")},I=function(a){return M()?b.beautify(a):a},J=function(a){var b=L().doc;a=I(a);b.setValue(a);b.clearHistory()},K=function(a){var b=v.fromDom(a.getWrapperElement()),c=a.doc.lineCount();a.on("changes",function(){var d=a.doc.lineCount();d!=c&&(c=d,
d=a.getScrollInfo(),d=g({width:y.get(b),docWidth:d.width,height:d.height,docHeight:d.height}),G.trigger.paint(d))})},N=function(){L().focus()},M=function(){return!0===A.content.prettyprint};return k.internal({activateInline:p.activateInline,blur:e.die("blur is not supported in the API."),communication:m.communication,connect:function(b){if(A.content&&!0===A.content.autoresize){var c=b.dom().clientHeight;w.set(H,c)}z.append(b,H);l.updateUi(H);a.detect(H);b=n.use.codemirror()(H.dom(),{mode:"text/html",
extraKeys:{"Ctrl-Space":"autocomplete"},lineWrapping:!0});b.on("focus",function(){G.trigger.focus()});E=d.some(b);G.trigger.loaded();K(b);return!0},content:e.constant({body:e.constant(d.none()),doc:e.die("content.doc is not supported in code view"),execCommand:e.die("content.execCommand is not supported in code view"),getSelectedText:function(){var a=L().getSelection();return void 0!==a&&null!==a&&0<a.length?d.some(a):d.none()},focus:N,isInline:e.constant(!1)}),deactivateInline:p.deactivateInline,
destroy:function(){x.remove(H);x.empty(H);E=d.none()},element:C,events:G.registry,filter:D.filter,focus:N,fromTransfer:function(a){var b=function(a){J(a);F=d.some(a);E.bind(function(a){a.on("changes",function(a,b){D.laundry.setDirty(!0);G.trigger.change()})})};f.cata(a,b,b)},fullscreen:m.fullscreen,getContent:function(){return L().doc.getValue()},getMode:h.code,insertHtmlAtCursor:function(a){L().replaceSelection(a)},isDirty:D.laundry.isDirty,isPrettyPrinting:M,keyboard:p.keyboard,macros:D.macros,
operations:p.operations,setContent:function(a){J(a);D.laundry.setDirty(!1)},setDirty:D.laundry.setDirty,smartview:p.smartview,state:function(){return D.getState({content:{}})},toTransfer:function(){var a=L().doc.getValue();return F.filter(function(b){return I(b)===a}).fold(function(){return f.changed(a)},f.unchanged)},ui:p.ui,undo:e.constant(m.undo()),uploader:e.constant(m.uploader()),viewport:C})}});l("5b",[],function(){return"undo insert style emphasis align listindent format tools".split(" ")});
l("78",["2w"],function(c){return c.immutable("x","y","width","height")});l("75",["78","1u"],function(c,e){return{intersect:function(d,a){var b=e.max(d.x(),a.x()),g=e.max(d.y(),a.y()),f=e.min(d.x()+d.width(),a.x()+a.width()),f=e.max(0,f-b),h=e.min(d.y()+d.height(),a.y()+a.height()),h=e.max(0,h-g);return c(b,g,f,h)}}});l("ss",["b","4o"],function(c,e){var d=e.generate([{unbundled:[]},{unsupported:["message"]},{item:["info","blueprint"]},{customMenu:["info","groups","blueprint"]},{textboxMenu:["info",
"blueprint"]},{palette:["info","children","blueprint"]}]);return{create:function(a){var b=function(a,b){return a.feature.fold(function(){return void 0!==a.unsupported?[d.unsupported(a.unsupported)]:[d.unbundled()]},function(c){if(void 0===c[a.command])return console.warn("unknown command: "+a.command),[];c=c[a.command]();return[b(c)]})},e=function(a,e){return b(e,function(b){return c.contains(["widget","inline-widget","split-widget"],e.type)?d.item({instance:b.widget},a[e.type]):d.item(b[e.type](),
a[e.type])})},f={dropdown:e,general:e,widget:e,"split-widget":e,"inline-widget":e,palette:function(a,e){return b(e,function(b){b=b.palette();var e=c.map(b.items,function(b){return c.contains(["widget","inline-widget","split-widget"],b.type)?d.item({instance:b.build},a[b.type]):d.item(b.spec,a[b.type])});return d.palette(b,e,a.palette)})},submenu:function(b,e){var f=c.map(e.commands,a);return[d.customMenu(e,f,b.menu)]},menu:function(a,c){return b(c,function(b){return d.textboxMenu(b[c.type](),a[c.type])})}};
return{classify:function(a,b){var c=f[b.type];return void 0!==c?c(a,b):[]}}},cata:function(a,b,c,d,e,k,m){return a.fold(b,c,d,e,k,m)}}});l("km",["ss","b","7"],function(c,e,d){return{fromConfig:function(a,b,g){var f=function(a,b){var c=d.curry(h.classify,a),c=e.bind(b.items,c);return{category:b.category,books:c}};a=d.curry(f,a);b=d.curry(f,b);var h=c.create(b);return e.map(g,a)}}});l("7g",["6u"],function(c){return{resolve:c.create("ephox-chameleon").resolve}});l("z5",["2p"],function(c){return{show:function(e){c.remove(e,
"display")},hide:function(e){c.set(e,"display","none")},isShowing:function(e){return c.getRaw(e,"display").isNone()},isHiding:function(e){return c.getRaw(e,"display").is("none")}}});l("su",["56"],function(c){return{group:c.ensure(["component","isVisible","refreshUi","destroy"])}});l("st","7g z5 su b 52 2o 3c".split(" "),function(c,e,d,a,b,g,f){return function(h){var k=b.span();g.add(k,c.resolve("toolbar-group"));var m=a.map(h,function(a){return a.component()});f.append(k,m);return d.group({component:function(){return k},
isVisible:function(){return a.exists(m,e.isShowing)},refreshUi:function(){a.each(h,function(a){a.refreshUi()})},destroy:function(){a.each(h,function(a){a.destroy()})}})}});l("kn","st su b 6 7 58 4a".split(" "),function(c,e,d,a,b,g,f){return{menu:function(c,e){var m=f.create({done:g([]),abort:g(["item"])}),n=function(b){b.done.bind(function(){m.trigger.done()});b.abort.bind(function(a){m.trigger.abort(a.item())});return a.merge(b,{done:m.registry.done,abort:m.registry.abort})},p=d.foldr(e,function(b,
c){var d=a.merge(c.structure(),b.structures),e=c.submenus().concat(b.submenus),f=a.merge(c.handlers(),b.actions),g=[c.refreshMenu].concat(b.refreshMenu),h=[c.destroyer].concat(b.destroyers),k=n(c.events);return{structures:d,submenus:e,refreshMenu:g,actions:f,destroyers:h,events:k}},{structures:{},submenus:[],actions:{},refreshMenu:[],destroyers:[]});return{structure:b.constant(p.structures),init:function(a){d.each(p.refreshMenu,b.apply)},name:b.constant(c),handlers:b.constant(p.actions),submenus:b.constant(p.submenus),
events:p.events,destroy:function(){d.each(p.destroyers,b.apply)}}},toolbar:function(a){a=c(a);var b=f.create({escaped:g([]),executed:g([])});return e.group({component:a.component,isVisible:a.isVisible,refreshUi:a.refreshUi,destroy:a.destroy,events:b.registry})}}});l("kw",["7g","2o","2p","33"],function(c,e,d,a){var b=function(a,b){e.add(a,c.resolve("user-icon"));d.setAll(a,{"background-image":"url("+b+")"})};return{setUrl:b,findAndSetUrl:function(c,d){a.descendant(c,".ephox-pastry-icon-content").each(function(a){b(a,
d)})}}});l("fp",["b","1b","x"],function(c,e,d){var a=function(a,c){e.set(a,"aria-pressed",c?"true":"false")};return{expanded:function(a){e.set(a,"aria-expanded","true")},collapsed:function(a){e.set(a,"aria-expanded","false")},checked:function(a,c){e.set(a,"aria-checked",d(c))},setPressed:a,press:function(b){a(b,!0)},release:function(b){a(b,!1)},pressed:function(b){a(b.element(),b.selected())},enable:function(a){e.set(a,"aria-disabled","false")},disable:function(a){e.set(a,"aria-disabled","true")},
tabSelected:function(a,d){e.setAll(a,{"aria-selected":"true","aria-pressed":"true"});c.each(d,function(a){e.setAll(a,{"aria-selected":"false","aria-pressed":"false"})})},showPanel:function(a){e.set(a,"aria-selected","true");e.set(a,"aria-hidden","false")},hidePanel:function(a){e.set(a,"aria-selected","false");e.set(a,"aria-hidden","true")}}});l("sv",["fp","7"],function(c,e){var d=function(a){a.enable();c.enable(a.element())},a=function(a){a.disable();c.disable(a.element())};return{control:function(b){return{enable:e.curry(d,
b),disable:e.curry(a,b)}},ariaPressed:function(a){return{press:e.curry(c.press,a.element()),release:e.curry(c.release,a.element())}}}});l("db",["6u"],function(c){return{resolve:c.create("ephox-echo").resolve}});l("8e","a b db 31 6 7 t 1b 2o l 2q 3c".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=d.resolve("aria-help"),q=d.resolve("aria-help-visible"),s=function(a){h.set(a,"role","presentation")},t=function(a,b){h.setAll(a,{role:"application","aria-label":b})},u=function(a){h.set(a,"role","button")},
v=function(a,b){h.set(a,"aria-owns",b)},w=function(a,b){h.set(a,"aria-controls",b)},z=function(b,c){var d=a.generate("ephox-aria");h.set(c,"id",d);w(b,d)},x=function(a,b){h.set(a,"aria-describedby",b)},y=function(a,b){h.set(a,"aria-labelledby",b)},A=function(a,b){h.set(a,"aria-label",b)};return{document:function(a){h.set(a,"role","document")},presentation:s,region:function(a){h.set(a,"role","region")},controls:w,owns:v,disown:function(a){h.remove(a,"aria-owns")},editor:function(b,c,d,e,f){t(b,d);
e.each(function(d){var e=m.fromTag("span");s(e);n.append(e,m.fromText(d));d=a.generate("ephox-aria");h.set(e,"id",d);x(c,d);k.add(e,r);!0===f&&k.add(e,q);n.append(b,e)});return{destroy:function(){h.remove(c,"aria-describedby")}}},inline:function(b,c,d,f,k){t(b,d);var m=[];h.has(c,"id")?v(b,h.get(c,"id")):(d=a.generate("ephox-aria-content"),h.set(c,"id",d),v(b,d),m.push(function(){h.remove(c,"id")}));f.each(function(a){if(h.has(c,"aria-label")){var b=h.get(c,"aria-label");A(c,a);m.push(function(){A(c,
b)})}else A(c,a),m.push(function(){h.remove(c,"aria-label")})});return{destroy:function(){e.each(m,g.apply)}}},group:function(a){h.set(a,"role","group")},toolbar:function(a,b){h.setAll(a,{role:"group","aria-label":b})},toolbarGroup:function(a,b){h.set(a,"role","toolbar");null===b||void 0===b||""===b||c.isArray(b)&&0===b.length||h.set(a,"aria-label",b)},toolbarButton:function(a,b,c,d){h.setAll(a,{role:"button","aria-label":b,"aria-haspopup":""+c});d&&h.set(a,"aria-pressed","false");c&&h.set(a,"aria-expanded",
"false")},textButton:function(a,b){u(a);s(b)},menu:function(a,b){h.setAll(a,{"aria-label":b,role:"menu"})},menuItem:function(a,c,d){c=c.map(function(a){return{"aria-label":a}}).getOr({});h.setAll(a,b.merge(c,{role:"menuitem","aria-haspopup":d.getOr(!1)}))},menuItemCheckbox:function(a){h.setAll(a,{role:"menuitemcheckbox","aria-checked":!1})},checkbox:function(a,b){h.setAll(a,{role:"checkbox","aria-label":b,"aria-checked":!1})},dialog:function(a,b){h.setAll(a,{role:"dialog","aria-label":b})},buttonRole:u,
button:function(a,b){h.setAll(a,{"aria-label":b,role:"button"})},labelledField:function(b,c,d){var e=m.fromTag("div");s(e);c+=a.generate("");var f=a.generate("label");d=m.fromHtml("<label>"+d+"</label>");h.set(d,"for",c);h.set(d,"id",f);h.set(b,"id",c);y(b,f);p.append(e,[d,b]);return{element:g.constant(e),field:g.constant(b)}},multiline:function(a){h.set(a,"aria-multiline","true")},textarea:function(a){h.setAll(a,{"aria-multiline":"true",role:"textbox"})},label:A,widget:function(a){h.set(a,"role",
"widget")},option:function(a){h.set(a,"role","option")},listBox:function(a){h.set(a,"role","listbox")},live:function(a,b,c){h.setAll(a,{"aria-live":c?c:"polite",id:b})},tabList:function(a){h.set(a,"role","tablist")},tabButton:function(a,b){h.setAll(a,{"aria-label":b,role:"tab"})},tabPanel:function(a){h.setAll(a,{role:"tabpanel"})},linkElements:z,linkTabToPanel:function(a,b){z(a,b)},describedBy:x,labelledBy:y,required:function(a){h.set(a,"aria-required","true")},hidden:function(a,b){b?h.set(a,"aria-hidden",
b):h.remove(a,"aria-hidden")},invalid:function(a,b){!0===b?h.set(a,"aria-invalid","true"):h.remove(a,"aria-invalid")}}});l("sw",["1b","2p","3y"],function(c,e,d){return{disable:function(a){c.set(a,"unselectable","on");e.setAll(a,{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none"});a.dom().style.setProperty("-moz-user-select","-moz-none");return d.bind(a,"onselectstart",function(){return!1})}}});l("lz",["6u"],function(c){return{resolve:c.create("ephox-pastry").resolve}});l("ly",
"sw lz 58 4a 2o 3y 2q 2s".split(" "),function(c,e,d,a,b,g,f,h){return function(k,m,n){b.add(k,e.resolve("button"));var p=c.disable(k);m=m.getOr(k);var r=null,q=b.toggler(k,e.resolve("button-disabled")),s=function(){q.isOn()||u.trigger.click()},t=g.bind(m,"click",s),u=a.create({click:d([])});return{element:function(){return k},name:function(){return n},destroy:function(){t.unbind();p.unbind();h.remove(k)},content:function(a){null!==r&&h.remove(r.element());f.append(k,a.element());r=a},enable:q.off,
disable:q.on,disabled:q.isOn,click:s,events:u.registry}}});l("hp",["ly","lz","t","2o","l"],function(c,e,d,a,b){return function(g){var f=b.fromTag("span");a.add(f,e.resolve("independent-button"));return c(f,d.none(),g)}});l("hq",["52","lz","1b","4e","2s"],function(c,e,d,a,b){return function(g){var f=c.span();d.set(f,"aria-hidden",!0);a.add(f,[e.resolve("icon-content")].concat(g));return{element:function(){return f},destroy:function(){b.remove(f)}}}});l("pg","52 ly lz t 2o l 2q 2s".split(" "),function(c,
e,d,a,b,g,f,h){return function(g){var m=c.span();b.add(m,d.resolve("statebutton"));var n=e(c.span(),a.some(m),g);b.add(n.element(),d.resolve("dependent-button"));f.append(m,n.element());g=b.toggler(m,d.resolve("statebutton-selected"));var p=b.toggler(m,d.resolve("statebutton-disabled"));return{element:function(){return m},destroy:function(){n.destroy();h.remove(m)},name:n.name,content:n.content,enable:function(){p.off();n.enable()},disable:function(){p.on();n.disable()},disabled:function(){return p.isOn()&&
n.disabled()},click:n.click,events:n.events,select:g.on,deselect:g.off,selected:g.isOn}}});l("m0",["pg","58","4a"],function(c,e,d){return function(a){var b=c(a),g=d.create({click:e([])}),f=function(){b.selected()?b.deselect():b.select();g.trigger.click()};b.events.click.bind(f);return{element:b.element,name:b.name,content:b.content,destroy:function(){b.events.click.unbind(f);b.destroy()},enable:b.enable,disable:b.disable,disabled:b.disabled,click:b.click,events:g.registry,select:b.select,deselect:b.deselect,
selected:b.selected}}});l("sx","52 hp hq m0 lz 58 4a 2o 2q 3c 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(p){var r=c.span();h.add(r,b.resolve("dropbutton"));var q=c.span();h.add(q,b.resolve("dropbutton-button"));var s=c.span();h.add(s,b.resolve("dropbutton-arrow"));m.append(r,[q,s]);var t=e(),u=a();u.content(d(["ephox-pastry-arrow-icon"]));k.append(q,t.element());k.append(s,u.element());var v=f.create({click:g([]),open:g([]),close:g([])}),w=function(){v.trigger.click()},z=function(){(u.selected()?
v.trigger.open:v.trigger.close)()};t.events.click.bind(w);u.events.click.bind(z);return{element:function(){return r},name:function(){return p},content:t.content,events:v.registry,open:function(){u.select();v.trigger.open()},close:function(){u.deselect();v.trigger.close()},destroy:function(){t.events.click.unbind(w);u.events.click.unbind(z);t.destroy();u.destroy();n.remove(r)},isOpen:function(){return u.selected()}}}});l("sy","52 hq m0 lz 7 58 4a 2o 2q 3c 2s".split(" "),function(c,e,d,a,b,g,f,h,k,
m,n){return function(p){var r=c.span();h.add(r,a.resolve("dropbutton"));var q=c.span();h.add(q,a.resolve("dropbutton-button"));var s=c.span();h.add(s,a.resolve("dropbutton-arrow"));m.append(r,[q,s]);var t=d(),u=d();u.content(e(["ephox-pastry-arrow-icon"]));k.append(q,t.element());k.append(s,u.element());var v=f.create({click:g([]),open:g([]),close:g([])}),w=function(){v.trigger.click()},z=function(){(u.selected()?v.trigger.open:v.trigger.close)()};t.events.click.bind(w);u.events.click.bind(z);return{element:b.constant(r),
name:b.constant(p),content:t.content,events:v.registry,open:function(){u.select();v.trigger.open()},close:function(){u.deselect();v.trigger.close()},destroy:function(){t.events.click.unbind(w);u.events.click.unbind(z);t.destroy();u.destroy();n.remove(r)},isOpen:function(){return u.selected()},click:t.click,enable:t.enable,disable:t.disable,disabled:t.disabled,select:t.select,deselect:t.deselect,selected:t.selected}}});l("eo","52 lz 2o l 2q 2s".split(" "),function(c,e,d,a,b,g){return function(f){var h=
c.span();d.add(h,e.resolve("text-content"));b.append(h,a.fromText(f));return{element:function(){return h},destroy:function(){g.remove(h)}}}});l("kx","sv 7g 8e hp sx sy hq eo m0 t 1b 2o 3c 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=function(a,b,e,f){d.toolbarButton(a.element(),b,e,f);b=c.control(a);e=c.ariaPressed(a);return{enable:b.enable,disable:b.disable,press:e.press,release:e.release,destroy:function(){a.destroy()}}},t=function(a,b,c,d,g,k,p,q){p=m.from(p).fold(function(){return q(g)},
function(a){return a(g,b)});k=m.from(k).getOr(!1);a=a(b);c=f([e.resolve("icon"),e.resolve(c)]);k=!0===k?[h(q(g)).element()]:[];r.append(c.element(),k);a.content(c);a.events.click.bind(function(){d()});n.set(a.element(),"title",p);a.initAria=s;return a},u=function(a,b){q.descendant(a,b).bind(function(a){d.hidden(a,"true")})},v=function(a,b,c,d,f,g,h,k){a=t(a,b,c,d,f,g,h,k);p.add(a.element(),e.resolve("split-"+b));u(a.element(),".ephox-pastry-dropbutton-arrow");u(a.element(),".ephox-pastry-dropbutton-button");
q.descendant(a.element(),".ephox-pastry-dropbutton-arrow .ephox-pastry-icon-content").bind(function(a){p.add(a,e.resolve("icon"));p.add(a,e.resolve("arrow-"+b))});return a};return{aria:s,typical:function(b,c,d,e,f,g,h){return t(a,b,c,d,e,f,g,h)},toggle:function(a,b,c,d,e,f,g){return t(k,a,b,c,d,e,f,g)},splitToggle:function(a,b,c,d,e,f,h){return v(g,a,b,c,d,e,f,h)},split:function(a,c,d,e,f,g,h){return v(b,a,c,d,e,f,g,h)}}});l("ky",["6u"],function(c){return{resolve:c.create("ephox-gopher").resolve}});
l("sz",["ky","t","2o","4h","33"],function(c,e,d,a,b){return function(g){var f=c.resolve(g);return{set:function(a){d.add(a,f)},up:function(a){return d.has(a,f)?e.some(a):b.ancestor(a,"."+f)},all:function(b){return a.descendants(b,"."+f)},first:function(a){return b.descendant(a,"."+f)},is:function(a){return d.has(a,f)}}}});l("kz",["ky","sz","1b","2o"],function(c,e,d,a){var b=e("item"),g=c.resolve("disabled-item"),f="data-"+c.resolve("item-value");return{set:function(a,c){b.set(a);d.set(a,f,c)},get:function(a){return d.get(a,
f)},up:b.up,all:b.all,disable:function(b){a.add(b,g)},enable:function(b){a.remove(b,g)},isEnabled:function(b){return!a.has(b,g)}}});l("l0","b ky sz kz t 1b 2o 33".split(" "),function(c,e,d,a,b,g,f,h){var k=d("menu"),m="data-"+e.resolve("menu-value"),n=e.resolve("active-menu");return{set:function(a,b){k.set(a);g.set(a,m,b)},active:function(a){return h.descendant(a,"."+n)},inactive:function(a){a=k.all(a);return c.filter(a,function(a){return!f.has(a,n)})},activate:function(a,b){var d=k.all(a);c.each(d,
function(a){f.remove(a,n)});f.add(b,n)},up:k.up,all:k.all,submenu:function(c,d,e){e=a.get(e);return(d.hasOwnProperty(e)?b.from(d[e]):b.none()).bind(function(a){return h.descendant(c,"["+m+'="'+a+'"]')})}}});l("l1",["sz","7"],function(c,e){var d=c("submenu"),a=c("main-menu");return{main:e.constant(a),submenu:e.constant(d)}});l("h0","b ky kz l0 l1 52 7 1b 2o l 2q 3c".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=function(a,b,c){d.set(c,b);h.set(c,"tabindex",-1);return c},q=function(a,b,c){return s(a,
b,c,!1)},s=function(a,b,c,d){var f=m.fromTag("li",a.dom()),h=g.span();k.add(h,e.resolve("item-text"));!0===d&&k.add(h,e.resolve("item-ellipsis"));n.append(h,m.fromText(c));n.append(f,h);r(a,b,f);return f},t=function(a){a=m.fromTag("li",a.dom());k.add(a,e.resolve("separator"));return a},u=function(a,b){return"-"!==b.value()?q(a,b.value(),b.text()):t(a)},v=function(b,d,e){var g=m.fromTag("ol",b.dom());a.set(g,d);b=c.map(e,f.curry(u,b));p.append(g,b);return g},w=function(b,c){var d=m.fromTag("div",b.dom());
a.set(d,c);return d};return{item:q,ellipsisItem:function(a,b,c){return s(a,b,c,!0)},mainmenu:function(a,c,d){a=v(a,c,d);b.main().set(a);return a},submenu:function(a,c,d){a=v(a,c,d);b.submenu().set(a);return a},widget:w,widgetSubmenu:function(a,c){var d=w(a,c);b.submenu().set(d);return d},separator:t,custom:r,enableItem:d.enable,disableItem:d.disable}});l("l2",[],function(){var c=function(c,d){if(void 0===c)throw"Cannot intersperse undefined";if(1>=c.length)return c;var a=[];a.push(c[0]);for(var b=
1;b<c.length;b++)a.push(d()),a.push(c[b]);return a};return{intersperse:function(e,d){return c(e,function(){return d})},intersperseThunk:c,untabulate:function(c){var d=[],a;for(a in c)if(Object.prototype.hasOwnProperty.call(c,a))for(var b=c[a],g=0;g<b.length;g++){var f=b[g];d[g]=d[g]||{};d[g][a]=f}return d},tabulate:function(c){for(var d={},a=0;a<c.length;a++){var b=c[a],g;for(g in b)if(Object.prototype.hasOwnProperty.call(b,g)){var f=b[g];Object.prototype.hasOwnProperty.call(d,g)||(d[g]=[]);d[g][a]=
f}}return d}}});l("t0",[],function(){return{css:function(c){var e=/^[a-zA-Z]/.test(c)?"":"e";c=c.replace(/[^\w]/gi,"-");return e+c}}});l("t1",["b"],function(c){return{splits:function(e,d){if(0===d.length)return[e];var a=c.foldl(d,function(a,b){if(0===b)return a;var c=e.substring(a.prev,b);return{prev:b,values:a.values.concat([c])}},{prev:0,values:[]}),b=d[d.length-1];return b<e.length?a.values.concat(e.substring(b)):a.values}}});l("l3",["t0","t1"],function(c,e){return{cssSanitise:function(d){return c.css(d)},
splits:function(c,a){return e.splits(c,a)}}});l("ct","kn kw kx a b 8e h0 l2 7 t l3 l 3c q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=function(a,d){var e=b.flatten(d);return c.menu(a,e)},t=function(a){return b.map(a,function(a){a=b.map(a,function(a){return a.items()});return b.flatten(a)})};return{create:function(c,v,w){var z=c.name,x=c.textkey,y=c.menuTextkey,A=c.tooltip,l=c.label,C=m.from(c.icon),D=k.constant(void 0!==c.contentFocus?c.contentFocus:!1),F=p.fromDom(q),E=a.isString(x)?
n.cssSanitise(z):z,G=w(x),y=w(y),H=f.mainmenu(F,E+"-menu",[]),L=d.toggle(z,E,k.identity,x,l,A,w);C.filter(a.isString).each(function(a){e.findAndSetUrl(L.element(),a)});var I=L.initAria(L,G,!0,c.toggle);c=t(v);var J=s(E,v);v=h.intersperseThunk(c,function(){return[f.separator(F)]});g.menu(H,y);r.append(H,b.flatten(v));return{button:k.constant(L),contentFocus:D,destroy:function(){L.destroy();J.destroy();I.destroy()},element:k.constant(H),events:J.events,handlers:J.handlers,icon:k.constant(C),init:J.init,
label:k.constant(G),name:J.name,structure:J.structure,submenus:J.submenus,textkey:k.constant(x),menuTextkey:k.constant(y),updateMenu:k.noop,enable:I.enable,disable:I.disable}}}});l("ko",["ss","ct","b","7","t"],function(c,e,d,a,b){var g=function(a,c){return b.some(c(a))},f=function(a,c){return b.some(c(a,[]))},h=function(k,m){var n=a.curry(h,k);return c.cata(m,b.none,b.none,g,function(a,c,f){c=d.map(c,function(a){return d.bind(a.books,n)});a=e.create(a,c,k);return b.some(f(a,[]))},f,function(a,c,e){c=
d.bind(c,n);return b.some(e(a,c))}).toArray()};return{build:function(a,b){return{items:d.bind(a.books,function(a){return h(b,a)}),category:a.category}}}});l("cm",["km","kn","ko","b","8e"],function(c,e,d,a,b){return{build:function(g,f,h){var k=h.translations();g=c.fromConfig(f.toolbar(),f.menu(),g);g=a.map(g,function(a){return d.build(a,k)});return a.map(g,function(a){var c=e.toolbar(a.items);a=a.category;b.toolbarGroup(c.component(),k(a));return c})}}});l("cn",["2w"],function(c){var e=c.immutable("toolbar",
"menu");c=c.immutable("smartview","translations");var d=function(a){return function(){return a.apply(null,arguments)}};return{blueprints:d(e),env:d(c)}});l("cr",["6r"],function(c){var e=function(){return/(?:(?:[A-Za-z]{3,9}:(?:\/\/))(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?[A-Za-z0-9-]+(?:\.[A-Za-z0-9-]+)*|(?:www\.|[-;:&=+$,.\w]+@)[A-Za-z0-9-]+(?:\.[A-Za-z0-9-]+)*)(?::[0-9]+)?(?:\/[-+~%.()\/\w]*)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g};return{tokens:function(c,a){return c.replace(/\{(\d+)\}/g,
function(b,e,f,h){e=parseInt(e,10);if(void 0===a[e])throw"No value for token: "+b+" in translation: "+c;return a[e]})},link:e,autolink:function(){var d=e().source;return new c("("+d+")[-.~*+=!&;:'%@?#^${}(),]*","g")}}});l("7e","a 7 cr 1i 4o r".split(" "),function(c,e,d,a,b,g){var f=b.generate([{raw:["text"]},{key:["key"]},{pkey:["key","params"]}]),h=function(b){var c=a.get(b);if(1<arguments.length||/\{(\d+)\}/.test(c)){for(var e=new g(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];
return d.tokens(c,e)}return c};return{get:function(a){if(c.isString(a))throw"string passed to I18n.get:"+a;return a.fold(e.identity,h,h)},has:a.has,translate:h,raw:f.raw,key:function(b){a.get(b);return f.key(b)},pkey:function(b,c){a.get(b);return f.pkey(b,c)},cata:function(a,b,c,d){return a.fold(b,c,d)}}});l("kp","8e 52 7e 59 58 4a 2o 4e 3y l 2q 3c 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){return function(q,s){var t=void 0!==s?s:"info",u=e.div();h.add(u,[a.resolve("banner"),a.resolve("banner-"+
t)]);t=e.div();f.add(t,a.resolve("banner-message"));n.append(t,m.fromText(q));var v=e.div();f.add(v,a.resolve("banner-buttons"));var w=m.fromTag("span");f.add(w,a.resolve("banner-close"));n.append(v,w);c.button(w,d.translate("banner.close"));p.append(u,[t,v]);var z=k.bind(w,"click",function(){x.trigger.close()}),x=g.create({close:b([])});return{element:function(){return u},action:function(a){n.prepend(v,a.element())},destroy:function(){z.unbind();r.remove(u)},events:x.registry}}});l("co","7 t kp 1b 3y l 2q 36".split(" "),
function(c,e,d,a,b,g,f,h){return function(k,m){var n=void 0!==m?m:"error",p=k.description(),r=k.link(),q=d(p,n),s=e.none(),t=function(a,c){return b.bind(a,"click",function(a){a.kill();h.open(c.url())})},n=function(b){var d=g.fromTag("a");a.set(d,"href",b.url());a.set(d,"target","_blank");var h=g.fromText(b.text());s=e.some(t(d,b));f.append(d,h);q.action({element:c.constant(d)})};null!==r&&r.url()&&r.text()&&n(r);return{element:q.element,action:q.action,destroy:function(){q.destroy();s.each(function(a){a.unbind()})},
events:q.events}}});l("t6",["56"],function(c){return{dropdown:c.exactly("enable disable select clear selectElement populate tick untick activate deactivate".split(" ")),menu:c.exactly(["enable","disable"]),general:c.exactly("enable disable select deselect selected element".split(" ")),widget:c.exactly("enable disable select deselect press release".split(" ")),palette:c.exactly(["show","hide"])}});l("z6",["h0","l","2q"],function(c,e,d){return{generateItem:function(a,b,g,f){return g.fold(function(){return c.item(a,
b.value(),f(b.textkey()))},function(f){f=f(b);var g=e.fromTag("li",a.dom());d.append(g,f);return c.custom(a,b.value(),g)})},generateSeparator:function(a,b,g){var f=c.separator(a);d.append(f,e.fromText(g(b),a.dom()));return f}}});l("z7","a b fp lz 7 t 1b 2o 4h".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b){var c=e.find(a,function(a){return a.value()===b});return g.from(c)},n=function(a){a=k.children(a,".ephox-pastry-toggle-list-item-selected");e.each(a,function(a){h.remove(a,"ephox-pastry-toggle-list-item-selected");
d.checked(a,!1)})};return{updateDropdown:function(d,e,f,k,n){e.fold(d.clear,b.noop,function(b){n.fold(function(){(c.isString(b)?m(k,b):g.some(b)).each(d.select)},function(c){c=c(b);var e=a.resolve("arrow-righticon");h.add(c,e);d.selectElement(c)})});f.fold(d.disable,b.noop,d.enable)},tick:function(a,b){n(a);var c=k.descendants(a,".ephox-gopher-item"),c=e.find(c,function(a){return f.get(a,"data-ephox-gopher-item-value")===b});void 0!==c&&null!==c&&(h.add(c,"ephox-pastry-toggle-list-item-selected"),
d.checked(c,!0))},untick:n,activate:function(a){h.add(a,"ephox-pastry-statebutton-selected")},deactivate:function(a){h.remove(a,"ephox-pastry-statebutton-selected")}}});l("t5",["fp","h0","lz","7","2o"],function(c,e,d,a,b){var g=d.resolve("toggle-list-item-selected"),f=function(a){e.enableItem(a);c.enable(a)},h=function(a){e.disableItem(a);c.disable(a)},k=function(a){b.remove(a,g);c.checked(a,!1)},m=function(a){b.add(a,g);c.checked(a,!0)};return{control:function(b){return{enable:a.curry(f,b),disable:a.curry(h,
b)}},selected:function(c){return{deselect:a.curry(k,c),select:a.curry(m,c),selected:a.curry(b.has,c,g)}}}});l("t7",["kw","a","8e","52","4e"],function(c,e,d,a,b){var g=function(c){var e=a.span();d.hidden(e,!0);b.add(e,["ephox-pastry-icon-content","ephox-chameleon-icon"].concat([c]));return[e]},f=function(e){var f=a.span();d.hidden(f,!0);b.add(f,["ephox-pastry-icon-content","ephox-chameleon-"+e.value]);c.setUrl(f,e.icon);return[f]},h=function(a){return g(!0===a.icon?"ephox-chameleon-"+a.value:a.icon)};
return{generate:g,generateFrom:function(a){return void 0===a.icon?[]:(e.isString(a.icon)?f:h)(a)}}});l("aq","8e 31 c 7 1b 2p l 2q 2s 2b 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=d.detect().browser.isFirefox(),r={position:"absolute",left:"-9999px"},q=function(a,b){var d=f.fromTag("span",a.dom());c.presentation(d);var e=f.fromText(b,a.dom());h.append(d,e);return d},s=function(a,c){var d=e.generate("ephox-echo-voice");b.set(c,"id",d);b.set(a,"aria-describedby",d)},t=function(a,c,d){var e=
m.owner(c),f=q(e,d);p&&s(c,f);b.setAll(f,a(d));g.setAll(f,r);h.append(c,f);n(function(){b.remove(f,"aria-live");k.remove(f)},1E3)};d=a.curry(t,function(a){return{"aria-live":"polite","aria-atomic":"true","aria-label":a}});a=a.curry(t,a.constant({"aria-live":"assertive","aria-atomic":"true",role:"alert"}));return{describe:function(a,b){var d=m.owner(a),d=q(d,b);g.set(d,"display","none");c.hidden(d,!0);s(a,d);return d},speak:d,shout:a,tokenSelector:function(){return'span[id^="ephox-echo-voice"]'}}});
l("z8","t5 t7 7g 8e aq h0 7 t 58 4a 2o l 2q 3c 2s 33 q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){var v=p.fromDom(u),w=d.resolve("label-default");return function(u,x){var y=m.create({populate:k(["items"])}),A=function(b){var c=u(b.textkey),c=g.item(v,b.name+"-menu-trigger",c);n.add(c,d.resolve("menu-more"));b=e.generate("ephox-chameleon-"+b.name);q.prepend(c,b);a.menuItem(c,h.none(),h.some(!0));return c}(x),l=function(a){a=p.fromText(a);C(a)},C=function(a){t.child(A,".ephox-gopher-item-text").each(function(b){s.empty(b);
r.append(b,a);n.remove(b,w)})},D=c.control(A);return{element:f.constant(A),populate:function(a){y.trigger.populate(a)},select:function(a){t.child(A,b.tokenSelector()).each(s.remove);var c=b.describe(A,x.describe(a));r.append(A,c);a=u(a.textkey());l(a)},selectElement:C,disable:D.disable,enable:D.enable,clear:function(){l(u(x.textkey));t.child(A,".ephox-gopher-item-text").each(function(a){n.add(a,w)})},destroy:function(){s.remove(A)},events:y.registry}}});l("t2","t6 z6 z7 z8 b 8e h0 ky 7 58 4a 1b 2o l 3c 2s q".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){var v=q.fromDom(u),w="data-"+h.resolve("item-value"),z=function(a){a=f.submenu(v,a+"-menu",[]);r.remove(a,"ephox-gopher-main-menu");r.add(a,"ephox-gopher-submenu");return a},x=function(a,b){var c=p.get(b,"data-ephox-gopher-menu-value"),d={};d[a.name+"-menu-trigger"]=c;return d};return{init:function(f,h){var r=z(h.name);g.menu(r,f(h.textkey,!1));var q=x(h,r),u=a(f,h),l=function(a){a=b.bind(a,function(a){var c=b.map(a.items(),function(a){a=e.generateItem(v,
a,h.render,f);g.menuItemCheckbox(a);return a});return a.label().fold(k.constant(c),function(a){return[e.generateSeparator(v,a,f)].concat(c)})});t.empty(r);s.append(r,a)},E=n.create({done:m([]),abort:m(["item"])}),G={};b.each(h.values,function(a){G[a.value()]=function(a){a=p.get(a,w);h.action(a);E.trigger.done()}});u.events.populate.bind(function(a){l(a.items())});return{items:k.constant([u.element()]),structure:k.constant(q),submenus:k.constant([r]),refreshMenu:function(){h.updateDropdown(c.dropdown({enable:u.enable,
disable:u.disable,select:u.select,clear:u.clear,selectElement:u.selectElement,populate:u.populate,tick:k.curry(d.tick,r),untick:k.curry(d.untick,r),activate:k.noop,deactivate:k.noop}))},destroyer:function(){u.destroy()},handlers:k.constant(G),events:E.registry}}}});l("t3","t5 t6 t7 8e h0 7 t 58 4a l 3c q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=m.fromDom(p);return{init:function(m,p){var t=m(p.textkey),u=(!0===p.hasDialog?b.ellipsisItem:b.item)(r,p.value,t),v=c.control(u),w=!0===p.toggle?
c.selected(u):{select:g.noop,deselect:g.noop,selected:g.constant(!1)};!0===p.toggle?a.menuItemCheckbox(u):a.menuItem(u,f.some(t),f.some(!1));var z=function(){p.updateGeneral(e.general({disable:v.disable,enable:v.enable,select:w.select,deselect:w.deselect,selected:w.selected,element:g.constant(u)}))},x=k.create({done:h([]),abort:h(["item"])}),t={};t[p.value]=function(){x.trigger.done();p.action();z()};var y=d.generateFrom(p);n.prepend(u,y);return{items:g.constant([u]),structure:g.constant({}),submenus:g.constant([]),
refreshMenu:z,handlers:g.constant(t),destroyer:g.identity,events:x.registry}}}});l("t4","t5 kw t7 7g 8e h0 6 7 t 1b 2o l 3c q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=p.fromDom(q),t=function(c){return{submenu:function(a){var d=a.textkey();a=a.element();b.menu(a,c(d));n.remove(a,"ephox-gopher-main-menu");n.add(a,"ephox-gopher-submenu");return a},item:function(d){var e=d.textkey(),e=c(e);d=g.item(s,d.name()+"-menu-trigger",e);n.add(d,a.resolve("menu-more"));b.menuItem(d,k.some(e),k.some(!0));
return d}}};return{nested:function(a,b,g){g=t(a);a=g.submenu(b);var k=m.get(a,"data-ephox-gopher-menu-value");g=g.item(b);var n={};n[b.name()+"-menu-trigger"]=k;var k=f.merge(n,b.structure()),p=d.generate("ephox-chameleon-"+b.name());r.prepend(g,p);b.icon().each(function(a){0<p.length&&e.setUrl(p[0],a)});var q=c.control(g),n=void 0!==b.destroyer?b.destroyer:void 0!==b.destroy?b.destroy:h.noop;return{items:h.constant([g]),structure:h.constant(k),submenus:h.constant([a].concat(b.submenus())),refreshMenu:function(){b.updateMenu({enable:q.enable,
disable:q.disable})},destroyer:n,handlers:b.handlers,events:b.events}}}});l("l5","t5 t6 t7 7g 8e h0 7 t 58 4a 4b 2o 4e 1c l 30 2q 3c 37 q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,z){var x=s.fromDom(z),y=a.resolve("menu-widget"),A=function(a,b){var c=g.widgetSubmenu(x,b);u.append(c,a.element());r.add(a.element(),[y,"ephox-gopher-item"]);return c},l=function(b,c,e){b=b(c.textkey());b=g.item(x,e,b);p.add(b,a.resolve("menu-more"));e=d.generate(a.resolve(e));v.prepend(b,e);return b};
z=function(a,d){var g=d.instance(),p=g.name(),r=p+"-submenu",q=A(g,r),t=l(a,g,p);b.menu(q,a(g.menuTextkey()));b.menuItem(t,h.some(a(g.textkey())),h.some(!0));var s=c.control(t),u={};u[p]=r;var v=m.create({done:n([],g.events.done),abort:k(["item"])});g.events.abort.bind(function(){v.trigger.abort(t)});return{items:f.constant([t]),structure:f.constant(u),submenus:f.constant([q]),refreshMenu:function(){g.updateWidget(e.widget({enable:s.enable,disable:s.disable,select:f.noop,deselect:f.noop,press:f.noop,
release:f.noop}))},destroyer:g.destroy,handlers:f.constant({}),events:v.registry}};return{widget:z,inline:function(d,r){var v=r.instance(),z=v.name();p.add(v.element(),a.resolve("menu-inline-widget"));var y=s.fromTag("li");u.append(y,v.element());var A=g.custom(x,z,y),l=c.control(A);b.menuItem(A,h.some(d(v.textkey())),h.some(!1));y={};y[z]=function(a){var b=t.active().filter(function(b){return w.ancestor(b,f.curry(q.eq,a))});v.element().dom().click();b.each(t.focus)};var B=m.create({done:n([],v.events.done),
abort:k(["item"])});v.events.abort.bind(function(){B.trigger.abort(A)});return{items:f.constant([A]),structure:f.constant({}),submenus:f.constant([]),refreshMenu:function(){v.updateInlineWidget(e.widget({enable:l.enable,disable:l.disable,select:f.noop,deselect:f.noop,press:f.noop,release:f.noop}))},destroyer:v.destroy,handlers:f.constant(y),events:B.registry}},split:z,styles:f.constant(y)}});l("l9","7g 52 t 2o 2p 3y 2q 33 m".split(" "),function(c,e,d,a,b,g,f,h,k){var m=c.resolve("keyfocus"),n=function(c,
d){var h=e.span();b.set(h,"display","none");a.add(h,m);f.append(c,h);return g.bind(h,"click",function(a){d();a.kill()})};return{onButton:function(a){return n(a.element(),a.click)},custom:n,trigger:function(a){var b="."+m;a=k.is(a,b)?d.some(a):h.descendant(a,b);a.each(function(a){a.dom().click()});return a}}});l("ap",["2w"],function(c){return{menu:c.immutableBag(["focusActive"],[])}});l("tf","b ky kz t 2o 33".split(" "),function(c,e,d,a,b,g){var f=e.resolve("item-selected"),h=function(a,c){b.add(c,
f)},k=function(a,c){b.remove(c,f)};return{is:function(a){return b.has(a,f)},none:function(a){var b=d.all(a);c.each(b,function(b){k(a,b)})},selectAll:function(a,e){var g=d.all(a);c.each(g,function(a){b.remove(a,f)});c.each(e,function(a){b.add(a,f)})},select:h,deselect:k,selected:function(a){return g.descendant(a,"."+f)},first:function(b){var c=d.all(b);return a.from(c[0]).map(function(a){h(b,a);return a})},last:function(b){var c=d.all(b);return a.from(c[c.length-1]).map(function(a){h(b,a);return a})}}});
l("te","b tf kz 7 t 1c".split(" "),function(c,e,d,a,b,g){var f=function(e,f){var h=d.all(e),k=c.findIndex(h,function(a){return g.eq(f,a)});return 0<=k?b.some({index:a.constant(k),all:a.constant(h)}):b.none()},h=function(a,b){return 0===b?a.length-1:b-1},k=function(a,b){return b===a.length-1?0:b+1},m=function(a,b,c){return f(a,b).map(function(d){var f=c(d.all(),d.index());d=d.all()[f];e.deselect(a,b);e.select(a,d);return d})};return{first:function(a){var c=d.all(a);return b.from(c[0]).map(function(b){e.select(a,
b);return b})},prev:function(a,b){return m(a,b,h)},next:function(a,b){return m(a,b,k)}}});l("ar",[],function(){var c=function(c){return function(){return c}};return{BACKSPACE:c([8]),TAB:c([9]),ENTER:c([13]),SHIFT:c([16]),CTRL:c([17]),ALT:c([18]),CAPSLOCK:c([20]),ESCAPE:c([27]),SPACE:c([32]),PAGEUP:c([33]),PAGEDOWN:c([34]),END:c([35]),HOME:c([36]),LEFT:c([37]),UP:c([38]),RIGHT:c([39]),DOWN:c([40]),INSERT:c([45]),DEL:c([46]),META:c([91,93,224]),F10:c([121])}});l("wq",["b","ar","x"],function(c,e,d){return{isCommand:function(a,
b){var g=[];c.each(b,function(a){a="string"===typeof a?[a.toUpperCase().charCodeAt(0)]:a;g=g.concat(a)});var f=function(a){return 0<c.filter(g,function(b){return c.contains(e[a](),b)}).length};if(!!a.altKey!==f("ALT")||!!a.shiftKey!==f("SHIFT")||!!a.ctrlKey!==f("CTRL")||!!a.metaKey!==f("META"))return!1;var f=null!==a.charCode&&void 0!==a.charCode&&0!==a.charCode?d.fromCharCode(a.charCode).toUpperCase().charCodeAt(0):a.which,h=e.CTRL().concat(e.ALT()).concat(e.SHIFT()).concat(e.META()),k=c.filter(g,
function(a){return!c.contains(h,a)});return 1<k.length?!1:0===k.length&&void 0===a.which||k[0]===f}}});l("ws",[],function(){return{stop:function(c){c.preventDefault();c.stopPropagation&&c.stopPropagation()}}});l("za",["b","1q","ar"],function(c,e,d){return function(a,b){var g=b?a.slice(0):[],f=b,h=b?c.map(e.values(d),function(a){return a()}):[];return{swallowShortcuts:function(a){g=a.slice(0)},yieldShortcuts:function(a){g=c.difference(g,a)},swallowChars:function(){f=!0},yieldChars:function(){f=!1},
swallowKeys:function(a){h=a.slice(0)},yieldKeys:function(a){h=c.difference(h,a)},process:function(a,b){a.fold(function(a){c.contains(g,a)&&b()},function(a){c.contains(h,a)&&b()},function(){f&&b()})}}}});l("wu",["b","1q","ar"],function(c,e,d){var a={BACKSPACE:d.BACKSPACE,TAB:d.TAB,ENTER:d.ENTER,CAPSLOCK:d.CAPSLOCK,ESCAPE:d.ESCAPE,SPACE:d.SPACE,PAGEUP:d.PAGEUP,PAGEDOWN:d.PAGEDOWN,END:d.END,HOME:d.HOME,LEFT:d.LEFT,UP:d.UP,DOWN:d.DOWN,RIGHT:d.RIGHT,INSERT:d.INSERT,DEL:d.DEL};return{getSpecial:function(b){var d=
null;e.each(a,function(a,e){c.contains(a(),b)&&(d=e)});return d},noModifiers:function(a){return!(a.metaKey||a.altKey||a.ctrlKey)},isCharCode:function(a){return a.charCode===a.keyCode}}});l("zb","b wq wu ar t x".split(" "),function(c,e,d,a,b,g){var f=function(a,d){return b.from(c.find(d,function(b){return e.isCommand(a,b)}))},h=function(a){return d.isCharCode(a)?b.none():b.from(d.getSpecial(a.keyCode))};return{identify:function(b,c){return{fold:function(d,e,r){f(b,c).fold(function(){h(b).fold(function(){r(b.which&&
g.fromCharCode(b.which))},function(b){e(a[b]())})},d)}}},shortcut:f,special:h}});l("wr",["ws","za","zb","7"],function(c,e,d,a){return function(b,g){var f=!1,h=e(b,g);return{on:function(){f=!0},off:function(){f=!1},isOn:function(){return f},handle:function(a){return function(b){f&&a(b.raw())}},stop:function(e){var f=d.identify(e,b);h.process(f,a.curry(c.stop,e))},swallowShortcuts:h.swallowShortcuts,yieldShortcuts:h.yieldShortcuts,swallowChars:h.swallowChars,yieldChars:h.yieldChars,swallowKeys:h.swallowKeys,
yieldKeys:h.yieldKeys}}});l("wt",["58","4a"],function(c,e){return function(){return e.create({character:c(["character"]),space:c(["shift","stopper"]),left:c(["shift","stopper"]),right:c(["shift","stopper"]),backspace:c(["shift","stopper"]),tab:c(["shift","stopper"]),enter:c(["shift","stopper"]),capslock:c(["shift","stopper"]),escape:c(["shift","stopper"]),pageup:c(["shift","stopper"]),pagedown:c(["shift","stopper"]),end:c(["shift","stopper"]),home:c(["shift","stopper"]),down:c(["shift","stopper"]),
up:c(["shift","stopper"]),insert:c(["shift","stopper"]),del:c(["shift","stopper"]),command:c(["command"])})}});l("om","b 6 wq wr ws wt wu x".split(" "),function(c,e,d,a,b,g,f,h){return function(k){var m=e.merge({shortcuts:[],swallow:!1},k),n=g(),p=a(m.shortcuts,m.swallow),r=function(a){return c.find(m.shortcuts,function(b){return d.isCommand(a,b)})||null},q=function(a,b,c){t(a);n.trigger[b].apply(void 0,c)},s=function(a){return function(){p.isOn()&&b.stop(a)}};k=p.handle(function(a){var b=r(a);null!==
b?q(a,"command",[b]):(b=f.getSpecial(a.keyCode),f.noModifiers(a)&&null!==b&&(b=b.toLowerCase(),q(a,b,[a.shiftKey,s(a)])))});var t=function(a){p.isOn()&&p.stop(a)},u=p.handle(function(a){if(f.noModifiers(a))f.isCharCode(a)||null===f.getSpecial(a.keyCode)?null!==r(a)?t(a):a.which&&q(a,"character",[h.fromCharCode(a.which)]):t(a);else return!1});return{off:p.off,on:p.on,events:n.registry,swallowShortcuts:p.swallowShortcuts,yieldShortcuts:p.yieldShortcuts,swallowChars:p.swallowChars,yieldChars:p.yieldChars,
swallowKeys:p.swallowKeys,yieldKeys:p.yieldKeys,keypress:u,keydown:k}}});l("tg","b kz ar om 7 58 4a 3y".split(" "),function(c,e,d,a,b,g,f,h){return function(k){var m=f.create({mouseover:g(["item"]),click:g(["item"])}),n=[],p=a({shortcuts:k.shortcuts,swallow:k.swallow});k=k.tabs?[d.TAB()]:[];p.swallowKeys([d.UP(),d.DOWN(),d.ENTER(),d.SPACE(),d.ESCAPE()].concat(k));var r=function(){c.each(n,function(a){a.mouseover().unbind();a.click().unbind();a.keydown().unbind()});n=[];p.off()};return{destroy:function(){r()},
attach:function(a){r();n=c.map(a,function(a){var c=h.bind(a,"mouseover",function(a){e.up(a.target()).each(m.trigger.mouseover)}),d=h.bind(a,"click",function(a){e.up(a.target()).each(m.trigger.click)});a=h.bind(a,"keydown",function(a){p.keydown(a)});return{mouseover:b.constant(c),click:b.constant(d),keydown:b.constant(a)}});p.on()},detach:r,simulateKey:function(a){p.keydown(a)},events:m.registry,keys:p.events}}});l("bx",["2p"],function(c){var e=function(d){return"rtl"===c.get(d,"direction")?"rtl":
"ltr"};return{onDirection:function(c,a){return function(b){return"rtl"===e(b)?a:c}},getDirection:e}});l("b4",["7","2z","2p"],function(c,e,d){var a=function(a,g,f,h){var k=d.get(a,g);void 0===k&&(k="");f=k===f?h:f;k=c.curry(d.set,a,g,k);a=c.curry(d.set,a,g,f);return e(k,a,!1)};return{toggler:function(b){return a(b,"visibility","hidden","visible")},displayToggler:function(b,c){return a(b,"display","none",c)},isVisible:function(a){a=a.dom();return!(0>=a.offsetWidth&&0>=a.offsetHeight)}}});l("kv","b te tf tg kz l0 l1 6 7 58 4a 1c bx l 30 21 b4 q".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v){return function(w,z){var x=n.create({select:m(["item"]),active:m(["item"]),show:m(["menu"]),hide:m(["menu"]),collapse:m(["menu"]),expand:m(["menu","trigger"]),escaped:m([])}),y=a({shortcuts:[],swallow:[],tabs:z.tabs}),A={},l=function(a){g.activate(w,a)},C=function(){var a=g.inactive(w);c.each(a,function(a){f.submenu().is(a)&&x.trigger.hide(a)})},D=function(a){b.isEnabled(a)&&g.submenu(w,A,a).each(function(b){x.trigger.expand(b,a)})},F=function(a){g.up(a).each(function(b){l(b);
d.selectAll(b,[a]);x.trigger.active(a)})},E=function(a){g.active(w).bind(function(b){d.selected(b).orThunk(function(){return e.first(b)}).each(function(c){a(b,c)})})},G=function(a){E(function(c,d){b.isEnabled(d)&&a(c,d)})},H=function(a){E(function(b,c){a(b,c).each(function(a){p.eq(c,a)||(g.submenu(w,A,c).each(x.trigger.collapse),x.trigger.active(a))})})},L=k.curry(H,e.prev),I=k.curry(H,e.next),J=function(){f.main().first(w).each(function(a){l(a);d.selected(a).each(x.trigger.active)})},K=function(a){s.active().fold(a.stopper(),
function(b){!1===c.contains(["input"],t.name(b))&&a.stopper()()});G(function(a,b){g.submenu(w,A,b).fold(function(){f.submenu().is(a)&&(x.trigger.collapse(a),J())},function(a){x.trigger.expand(a,b);d.none(a);d.first(a).each(x.trigger.active);l(a)})})},H=function(a){s.active().fold(a.stopper(),function(b){!1===c.contains(["input"],t.name(b))&&a.stopper()()});G(function(a,b){f.submenu().is(a)&&(x.trigger.collapse(a),J())})},N=function(a){G(function(c,d){var e=b.get(d);A.hasOwnProperty(e)&&void 0!==A[e]?
K(a):x.trigger.select(d)})},M=function(a){a.shift()?L(a):I(a)};y.keys.up.bind(L);y.keys.down.bind(I);z.tabs&&y.keys.tab.bind(M);y.keys.enter.bind(N);y.keys.space.bind(N);y.keys.escape.bind(function(a){a.stopper()();E(function(a,b){f.submenu().is(a)?(x.trigger.collapse(a),J()):x.trigger.escaped()})});"ltr"===r.getDirection(w)?(y.keys.left.bind(H),y.keys.right.bind(K)):(y.keys.right.bind(H),y.keys.left.bind(K));y.events.mouseover.bind(function(a){a=a.item();d.is(a)&&g.submenu(w,A,a).forall(u.isVisible)||
(F(a),C(),D(a))});y.events.click.bind(function(a){a=a.item();var c=b.get(a);A.hasOwnProperty(c)&&void 0!==A[c]||!b.isEnabled(a)||x.trigger.select(a)});return{destroy:function(){y.destroy()},populate:function(a){A=h.merge({},a)},on:function(a){a=void 0!==a?a:[q.fromDom(v)];y.attach(a)},off:function(){y.detach()},selectFirst:function(){g.active(w).each(function(a){d.none(a);d.first(a).each(x.trigger.active)})},select:function(a){F(a);C()},setActiveMenu:l,simulateKey:y.simulateKey,state:function(){return g.active(w).bind(function(a){return d.selected(a).map(function(b){return{menu:k.constant(a),
item:k.constant(b)}})})},events:x.registry}}});l("cs","7g b 1q kv 52 7 t 58 4a 4b 4n 2w 1b 2o 30 2q 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){return function(v,w,z){var x=b.div();q.add(x,c.resolve("menu-"+w()+"-sandbox"));r.set(x,"tabindex",-1);t.append(v(),x);var y=f.none(),A=a(x,{tabs:!0}),l=n({}),C=function(){A.off();E();F.trigger.close()},D=function(a){var b=d.mapToArray(l.get(),p.immutable("submenu","item")),c=r.get(a,"data-ephox-gopher-menu-value"),b=e.find(b,function(a){return a.submenu()===
c});return f.from(b).bind(function(b){return u.descendant(x,"[data-ephox-gopher-item-value="+b.item()+"]").map(function(b){return{menu:g.constant(a),item:g.constant(b)}})})};v=function(a){var b=D(a.menu()).map(function(a){return a.item()});F.trigger.collapse(a.menu(),b)};var F=k.create({open:h([]),close:h([]),itemAction:h(["value","item"]),itemHover:m(["item"],A.events.active),reveal:m(["menu","trigger"],A.events.expand),collapse:h(["menu","item"]),escaped:m([],A.events.escaped)});A.events.hide.bind(v);
A.events.collapse.bind(v);A.events.escaped.bind(function(){A.state().fold(C,function(a){D(a.menu()).fold(function(){C()},function(a){F.trigger.collapse(a.menu(),f.some(a.item()));A.select(a.item())})})});A.events.select.bind(function(a){a=a.item();var b=r.get(a,"data-ephox-gopher-item-value");F.trigger.itemAction(b,a)});A.events.active.bind(function(a){z.focusActive()&&s.focusInside(a.item())});var E=function(){d.each(l.get(),function(a,b){u.descendant(x,'[data-ephox-gopher-menu-value="'+a+'"]').each(function(a){var c=
u.descendant(x,'[data-ephox-gopher-item-value="'+b+'"]');F.trigger.collapse(a,c)})})};return{update:function(a){l.set(a);A.populate(a)},setActiveMenu:function(a){y=f.from(a);A.setActiveMenu(a);A.selectFirst()},getActiveMenu:function(){return y},structure:l,destroy:function(){C();A.destroy()},open:function(a,b){s.focus(b);A.on(a);A.selectFirst();F.trigger.open()},close:C,events:F.registry,sandbox:g.constant(x),select:A.select,simulateKey:A.simulateKey}}});l("th",["4o"],function(c){c=c.generate([{southeast:[]},
{southwest:[]},{northeast:[]},{northwest:[]}]);return{southeast:c.southeast,southwest:c.southwest,northeast:c.northeast,northwest:c.northwest,cata:function(c,d,a,b,g){return c.fold(d,a,b,g)}}});l("ls",["7","t"],function(c,e){var d=function(a,b){return a.view(b).fold(c.constant([]),function(b){var c=a.owner(b),c=d(a,c);return[b].concat(c)})};return{pathTo:function(a,b){var c=b.owner(a),c=d(b,c);return e.some(c)}}});l("lt",["t","l","2b","q"],function(c,e,d,a){return{view:function(b){return(b.dom()===
a?c.none():c.from(b.dom().defaultView.frameElement)).map(e.fromDom)},owner:function(a){return d.owner(a)}}});l("d0","b 7 ls lt 3n l 3o 2a q".split(" "),function(c,e,d,a,b,g,f,h,k){return{find:function(m){var n=g.fromDom(k),p=h.get(n);return d.pathTo(m,a).fold(e.curry(f.absolute,m),function(a){var d=f.viewport(m);a=c.foldr(a,function(a,b){var c=f.viewport(b);return{left:a.left+c.left(),top:a.top+c.top()}},{left:0,top:0});return b(a.left+d.left()+p.left(),a.top+d.top()+p.top())})}}});l("79","d0 78 l 5a 2a 2t q 36".split(" "),
function(c,e,d,a,b,g,f,h){return{absolute:function(b){var d=c.find(b),f=g.getOuter(b);b=a.getOuter(b);return e(d.left(),d.top(),f,b)},view:function(){return e(0,0,h.innerWidth,h.innerHeight)}}});l("ti","7 d0 78 79 3n 5a 2a 2t".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,d,e){var g=b(d,e);d=function(){var a=f.get();return g.translate(-a.left(),-a.top())};return a.fold(c.constant(g),d,d)};return{toBox:function(a,b){var c=e.find(b),c=k(a,c.left(),c.top()),f=h.getOuter(b),q=g.getOuter(b);return d(c.left(),
c.top(),f,q)},viewport:function(b,c){return c.fold(function(){return b.fold(a.view,a.view,d)},function(a){return b.fold(a,a,d)})},translate:k}});l("tj",["2w"],function(c){var e=c.immutableBag("x y width height maxHeight direction classes label candidateYforTest".split(" "),[]);c=c.immutable("position","left","top","right","bottom");return{decision:e,css:c}});l("oe",["t","th","ti","tj","4o"],function(c,e,d,a,b){b=b.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]);
var g=function(b,d,g,m,n,p){g=d.x()-g;m=d.y()-m;var r=d.width(),q=d.height();n-=g+r;p-=m+q;var s=c.some(g),t=c.some(m),u=c.some(n),v=c.some(p),w=c.none();return e.cata(d.direction(),function(){return a.css(b,s,t,w,w)},function(){return a.css(b,w,t,u,w)},function(){return a.css(b,s,w,w,v)},function(){return a.css(b,w,w,u,v)})};return{none:b.none,relative:b.relative,fixed:b.fixed,reposition:function(b,d){return b.fold(function(){return a.css("absolute",c.some(d.x()),c.some(d.y()),c.none(),c.none())},
function(a,b,c,e){return g("absolute",d,a,b,c,e)},function(a,b,c,e){return g("fixed",d,a,b,c,e)})},viewport:function(a,b){return d.viewport(a,b)},toBox:function(a,b){return d.toBox(a,b)},translate:function(a,b,c){return d.translate(a,b,c)},cata:function(a,b,c,d){return a.fold(b,c,d)}}});l("gt",["oe","2w"],function(c,e){var d=e.immutable("anchorBox","origin");return{box:function(a,b){return d(a,b)},element:function(a,b){var e=c.toBox(b,a);return d(e,b)},relativeOrigin:function(a){a=a.dom().getBoundingClientRect();
return c.relative(a.left,a.top,a.width,a.height)}}});l("fu",["7","3n"],function(c,e){return function(d,a){return{southeast:c.constant(e(-d,a)),southwest:c.constant(e(d,a)),northeast:c.constant(e(-d,-a)),northwest:c.constant(e(d,-a))}}});l("zc",["6u"],function(c){return{resolve:c.create("ephox-repartee").resolve}});l("tk",["7","zc"],function(c,e){var d=e.resolve("caret-top-align"),a=e.resolve("caret-bottom-align"),b=e.resolve("caret-right-align"),g=e.resolve("caret-left-align"),f=e.resolve("caret-middle-align");
return{east:c.constant(g),south:c.constant(d),west:c.constant(b),north:c.constant(a),middle:c.constant(f),all:c.constant([d,a,g,b,f])}});l("tl",["2w"],function(c){return c.immutable("x","y","bubble","direction","anchors","label")});l("of",["th","tk","tl"],function(c,e,d){var a=function(a,b){return a.x()+a.width()-b.width()/2},b=function(a,b){return a.x()+a.width()-b.width()},g=function(a,b){return a.y()-b.height()},f=function(a){return a.y()+a.height()},h=function(a,b,g){return d(a.x(),f(a),g.southeast(),
c.southeast(),[e.south(),e.east()],"layout-se")},k=function(a,g,h){return d(b(a,g),f(a),h.southwest(),c.southwest(),[e.south(),e.west()],"layout-sw")},m=function(a,b,f){return d(a.x(),g(a,b),f.northeast(),c.northeast(),[e.north(),e.east()],"layout-ne")},n=function(a,f,h){return d(b(a,f),g(a,f),h.northwest(),c.northwest(),[e.north(),e.west()],"layout-nw")},p=function(b,f,h){return d(a(b,f),g(b,f),h.northeast(),c.northeast(),[e.north(),e.middle()],"layout-nm")},r=function(b,g,h){return d(a(b,g),f(b),
h.southeast(),c.southeast(),[e.south(),e.middle()],"layout-sm")};return{southeast:h,northeast:m,southwest:k,northwest:n,southmiddle:r,northmiddle:p,all:function(){return[h,k,m,n,r,p]},allRtl:function(){return[k,h,n,m,r,p]}}});l("tm",["th","tk","tl"],function(c,e,d){var a=function(a){return a.x()+a.width()},b=function(a,b){return a.y()-b.height()+a.height()},g=function(b,f,g){return d(a(b),b.y(),g.southeast(),c.southeast(),[e.south(),e.east()],"link-layout-se")},f=function(a,b,f){b=a.x()-b.width();
return d(b,a.y(),f.southwest(),c.southwest(),[e.south(),e.west()],"link-layout-sw")},h=function(f,g,h){return d(a(f),b(f,g),h.northeast(),c.northeast(),[e.north(),e.east()],"link-layout-ne")},k=function(a,f,g){var h;h=a.x()-f.width();return d(h,b(a,f),g.northwest(),c.northwest(),[e.north(),e.west()],"link-layout-nw")};return{southeast:g,northeast:h,southwest:f,northwest:k,all:function(){return[g,f,h,k]},allRtl:function(){return[f,g,k,h]}}});l("ik",["7","2p","5a","1u"],function(c,e,d,a){return{anchored:c.constant(function(b,
c){d.setMax(b,a.floor(c));e.setAll(b,{"overflow-x":"hidden","overflow-y":"auto"})}),expandable:c.constant(function(b,c){d.setMax(b,a.floor(c))})}});l("zd","b 7 th tj 4o 1u".split(" "),function(c,e,d,a,b,g){var f=b.generate([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),h=function(b,c,h,p){var r=b.x(),q=b.y(),s=b.bubble().left(),t=b.bubble().top(),u=p.x(),v=p.y(),w=p.width(),z=p.height(),s=r+s,r=q+t,x=s>=u,y=r>=v,q=x&&y,t=s+c<=u+w&&r+h<=v+z,u=x?g.min(c,u+w-s):g.abs(u-(s+c)),w=y?g.min(h,
v+z-r):g.abs(v-(r+h));c=p.width()-c;p=g.max(0,s);c=g.min(p,c);h=y?r:r+(h-w);p=e.constant(h+w-v);v=e.constant(v+z-h);v=d.cata(b.direction(),v,v,p,p);b=a.decision({x:c,y:h,width:u,height:w,maxHeight:v,direction:b.direction(),classes:b.anchors(),label:b.label(),candidateYforTest:r});return q&&t?f.fit(b):f.nofit(b,u,w)};return{attempts:function(b,g,n,p,r){var q=n.width(),s=n.height(),t=function(a,b,c,d){a=a(g,n,p);return h(a,q,s,r).fold(f.fit,function(a,e,g){return e>c||g>d?f.nofit(a,e,g):f.nofit(b,c,
d)})};return c.foldl(b,function(a,b){var c=e.curry(t,b);return a.fold(f.fit,c)},f.nofit(a.decision({x:g.x(),y:g.y(),width:n.width(),height:n.height(),maxHeight:n.height(),direction:d.southeast(),classes:[],label:"none",candidateYforTest:g.y()}),-1,-1)).fold(e.identity,e.identity)}}});l("ze","7 2p l 5a 2q 3o 2s 2t".split(" "),function(c,e,d,a,b,g,f,h){return{measure:function(k){var m=d.fromTag("div");e.setAll(m,{position:"fixed",opacity:"0",top:"0",left:"0",bottom:"0",right:"0"});b.prepend(k,m);k=
g.viewport(m);var n=h.get(m),p=a.get(m);f.remove(m);return{top:k.top,left:k.left,width:c.constant(n),height:c.constant(p)}}}});l("tn","7 t oe tk zd ze 4e 2p 5a 2t".split(" "),function(c,e,d,a,b,g,f,h,k,m){return{layout:function(a,d,e,f){h.remove(d,"max-height");d={width:c.constant(m.getOuter(d)),height:c.constant(k.getOuter(d))};return b.attempts(f.preference(),a,d,e,f.bounds())},setClasses:function(b,c){f.remove(b,a.all());f.add(b,c.classes())},setHeight:function(a,b,c){c.maxHeightFunction()(a,b.maxHeight())},
position:function(a,b,f){var k=function(a){return a+"px"};f=f.origin();var m=c.constant(f);f=f.fold(m,m,function(){var b=g.measure(a);return d.fixed(b.left(),b.top(),b.width(),b.height())});b=d.reposition(f,b,a);h.setOptions(a,{position:e.some(b.position()),left:b.left().map(k),top:b.top().map(k),right:b.right().map(k),bottom:b.bottom().map(k)})}}});l("og","t 79 of ik oe tn 2w".split(" "),function(c,e,d,a,b,g,f){var h=f.immutableBag(["bounds","origin","preference","maxHeightFunction"],[]),k=function(a,
b,c){return void 0===a[b]?c:a[b]},m=function(a,b,c,d){a=g.layout(a,b,c,d);g.position(b,a,d);g.setClasses(b,a);g.setHeight(b,a,d)};return{simple:function(d,e,f,g,s){var t=k(s,"maxHeightFunction",a.anchored());s=d.anchorBox();d=d.origin();g=h({bounds:b.viewport(d,c.none()),origin:d,preference:g,maxHeightFunction:t});m(s,e,f,g)},detailed:function(c,f,g,q){q=void 0!==q?q:{};q=h({bounds:k(q,"bounds",e.view()),origin:k(q,"origin",b.none()),preference:k(q,"preference",d.all()),maxHeightFunction:k(q,"maxHeightFunction",
a.anchored())});m(c,f,g,q)}}});l("l6","c 7 t gt fu of tm oe og".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b,c,e,f,g,m){return function(a){var n,p,r=h.none();n=h.viewport(r,d.some(b));p=h.toBox(r,c());n={bounds:n,origin:r,preference:f.isRtl()?g.allRtl():g.all(),maxHeightFunction:m};a=a.panel();k.detailed(p,a,e,n)}},n=function(b,c,d,e,f,g,h){return function(c){var m=f.isRtl()?g.allRtl():g.all(),n={maxHeightFunction:h},p=a.element(d(),a.relativeOrigin(b()));c=c.panel();k.simple(p,c,e,m,
n)}},p=c.detect().deviceType.isiOS()?m:n;return{main:function(a,b,c,d,f,h){a=p(a,b,c,d,f,g,h);return{recalculate:a,isAnchored:e.constant(!0),place:a}},submenu:function(a,c,d,g,h){a=p(a,c,d,b(3,-2),g,f,h);return{recalculate:a,isAnchored:e.constant(!0),place:a}}}});l("zf",["3n"],function(c){return function(){return{northwest:function(){return c(-2,1)},northeast:function(){return c(0,1)},southwest:function(){return c(-2,-2)},southeast:function(){return c(0,-2)}}}});l("l4",["b","t","2w"],function(c,e,
d){var a=function(a){return function(b){return b.key()===a}},b=d.immutable("key","value");return{put:function(d,e,h,k,m){var n=void 0!==k?k:b,p=void 0!==m?m:a(e);d=c.foldl(d,function(a,b){var c=p(b)?n(e,h):b;return{updated:p(b)||a.updated,acc:a.acc.concat([c])}},{updated:!1,acc:[]});return d.updated?d.acc:d.acc.concat([n(e,h)])},get:function(b,d,h){d=void 0!==h?h:a(d);b=c.find(b,d);return e.from(b)}}});l("l7",["b","2n"],function(c,e){return{triage:function(d){d=c.foldr(d,function(a,b){var c=e.inBody(b.menu());
return{keep:c?[b].concat(a.keep):a.keep,throwaway:!1===c?[b].concat(a.throwaway):a.throwaway}},{throwaway:[],keep:[]});c.each(d.throwaway,function(a){a.popup().destroy()});return d.keep}}});l("mc",["b","7","1c","37"],function(c,e,d,a){var b=function(b,c){return a.ancestor(b,e.curry(d.eq,c))};return{ancestor:b,anyAncestor:function(a,d){return c.exists(d,function(c){return b(a,c)})},sibling:function(b,c){return a.sibling(b,e.curry(d.eq,c))},child:function(b,c){return a.child(b,e.curry(d.eq,c))},descendant:function(b,
c){return a.descendant(b,e.curry(d.eq,c))}}});l("dc","b 7 1c 3y l mc q".split(" "),function(c,e,d,a,b,g,f){return function(h,k,m){m=m||[b.fromDom(f)];var n=[],p=function(a){var b=k();a=a.target();d.member(a,b)||g.anyAncestor(a,b)||h(a)};return{on:function(){c.each(m,function(b){n.push(a.bind(b,"mousedown",p).unbind)})},off:function(){c.each(n,e.apply)},mousedown:p}}});l("to","6 52 lz 2o 2p 2q 2s 33 b4".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m){var n=c.merge({layerClass:null,zindex:null},
m),p=e.div();a.add(p,d.resolve("panel"));b.setAll(p,{position:"fixed",display:"none",top:"0px"});n.zindex&&b.set(p,"z-index",n.zindex);n.layerClass&&a.add(p,n.layerClass);m=void 0!==m.container?m.container:h.first("body").getOrDie();g.append(m,p);m=k.displayToggler(p,"block");return{element:function(){return p},destroy:function(){f.remove(p)},content:function(a){f.empty(p);g.append(p,a)},show:m.on,hide:m.off,toggle:m.toggle}}});l("l8","7g dc 52 to 7 bw 58 4a 2o 2p 30 2q 33".split(" "),function(c,
e,d,a,b,g,f,h,k,m,n,p,r){return{create:function(q,s){var t=h.create({open:f([]),close:f([]),uistale:f([])});if(void 0===q)throw"uicontainer not specified";var u=a({layerClass:c.resolve("layer-menus"),container:q()}),v=d.div();k.add(v,c.resolve("popup-container"));u.content(v);var w=!1,z=function(){w&&(y.off(),u.hide(),w=!1,A.control.block(),t.trigger.close())},x=[v],y=e(function(a){!1===!w&&(z(),r.ancestor(a,"."+s).fold(function(){n.focus(a)},b.noop))},function(){return x}),A=g.tap(function(){t.trigger.uistale()});
A.control.block();return{element:function(){return v},panel:u.element,destroy:function(){u.hide();u.destroy();y.off()},open:function(){w||(A.control.unblock(),m.set(u.element(),"opacity","0"),u.show(),m.reflow(u.element()),y.on(),w=!0,t.trigger.open(),m.set(u.element(),"opacity","1"))},close:z,closed:function(){return!w},mousedown:function(a){y.mousedown(a.original())},uiStale:function(){A.instance()},setContent:function(a){p.append(v,a)},setComponents:function(a){x=a.concat([v])},events:t.registry}}}});
l("cu","l4 l5 l6 l7 l8 b 7 ik 2w 1c 2p 6x".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=k.immutable("menu","popup"),q=function(a){return function(b){return m.eq(b.menu(),a)}};return function(k,m,u,v,w){var z=[],x=function(){var a=g.map(z,function(a){return a.popup().panel()}).concat(v);g.each(z,function(b){b.popup().setComponents(a)})},y=function(a){var b=c.get(z,a,q(a)).fold(function(){return l(a)},function(a){return a.popup()});x();z=c.put(z,a,b,r,q(a));return b},A=function(a){c.get(z,a,q(a)).each(function(a){a.popup().close()});
n.set(a,"display","none")},l=function(a){var d=b.create(k,w);d.setContent(a);z=c.put(z,a,d,r,q(a));x();return d};return{initMenu:l,registerMenus:function(b){z=a.triage(z);return g.map(b,y)},hideAll:function(){g.each(z,function(a){A(a.menu())})},hideMenu:A,expandMenu:function(a,b){var c=y(a),g=p.descendant(a,"."+e.styles())?h.expandable():h.anchored(),g=d.submenu(k,m,f.constant(b),u.uiDirection(),g);n.set(a,"display","block");c.open();g.recalculate(c);return{popup:c,anchorage:g}}}}});l("12r","52 lz 4e l 2q 2s".split(" "),
function(c,e,d,a,b,g){return function(a,h){var k=c.span();d.add(k,[e.resolve("righticon-content"),h]);b.append(k,a);return{element:function(){return k},destroy:function(){g.remove(k)}}}});l("12s",["12r","eo"],function(c,e){return function(d,a){var b=e(d),g=c(b.element(),a);return{element:g.element,destroy:function(){b.destroy();g.destroy()}}}});l("z9","ap sv cs z6 z7 t7 l6 zf cu 7g b 8e fp 31 c h0 52 12r 12s m0 7 58 4a 4b ik 1b 2o 4e l 2q 3c 2s q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,
t,u,v,w,z,x,y,l,B,C,D,F,E,G,H,L,I,J){var K=s.detect().deviceType.isiOS;return function(s,M,O,S,P,U,Q,V,W,Y){var X=z(O);Q=e.control(X);E.add(X.element(),[m.resolve("dropdown-button"),m.resolve(O+"-dropdown-button")]);D.set(X.element(),"title",V(S));p.toolbarButton(X.element(),V(S),!0,W);var Z=d(s.uiContainer,x.constant("dropdown-"+O),c.menu({focusActive:!0})),ea=G.fromDom(J),aa=t.mainmenu(ea,O+"-menu",[]),R=k(Z.sandbox,s.bounds,M,[X.element()],Y).initMenu(aa);O=h();var ga=f.main(s.uiContainer,s.bounds,
X.element,O,M.uiDirection(),C.anchored());p.menu(aa,V(P));var ja=q.generate("menu-control");D.set(aa,"id",ja);p.controls(X.element(),ja);var fa=u.span();F.add(fa,m.resolve("dropdown-viewport"));X.content({element:x.constant(fa)});var ha=function(a,b){var c=b.map(g.generate).getOr([]);L.prepend(a,c)};M=function(){ia(V(S))};var ia=function(a){I.empty(fa);H.append(fa,w(a,"ephox-pastry-arrow-righticon").element())},ba=function(){X.deselect();W&&r.pressed(X);r.collapsed(X.element());p.disown(X.element());
R.close();Z.close()},$=function(){X.select();W&&r.pressed(X);r.expanded(X.element());p.owns(X.element(),ja);R.open();var a=[s.uiContainer()];Z.open(a,X.element())},da=l.create({select:B(["value","item"],Z.events.itemAction),itemHover:B(["item"],Z.events.itemHover),escaped:B([],Z.events.escaped),open:y(["menu","popup","anchor"]),close:B([],Z.events.close)});X.events.click.bind(function(){(X.selected()?$:ba)()});R.events.close.bind(ba);Z.events.open.bind(function(){da.trigger.open(aa,R,ga);Z.update({});
K()||Z.setActiveMenu(aa)});Z.events.escaped.bind(ba);M();return{element:x.constant(X.element()),menu:R.element,list:x.constant(aa),click:X.click,populate:function(b){I.empty(aa);n.each(b,function(b){b.label().each(function(b){b=a.generateSeparator(ea,b,V);H.append(aa,b)});n.each(b.items(),function(b){var c=a.generateItem(ea,b,U,V);p.menuItemCheckbox(c);ha(c,b.icon());H.append(aa,c)})})},enable:Q.enable,disable:Q.disable,close:ba,uiStale:R.uiStale,recalculate:function(){ga.recalculate(R)},clear:M,
select:function(a){ia(V(a.textkey()));ha(fa,a.icon())},selectElement:function(a){a=v(a,"ephox-pastry-arrow-righticon");X.content({element:a.element,destroy:x.noop})},tick:x.curry(b.tick,aa),untick:x.curry(b.untick,aa),activate:x.curry(b.activate,X.element()),deactivate:x.curry(b.deactivate,X.element()),destroy:function(){Z.destroy();X.destroy()},events:da.registry}}});l("t8","l9 t6 z9 4a 4b 1b".split(" "),function(c,e,d,a,b,g){return{init:function(f,h,k,m,n){var p=d(f,h,n.name,n.textkey,n.menuTextkey,
n.render,n.layout,k,n.toggle,m);f=function(){n.updateDropdown(e.dropdown({enable:p.enable,disable:p.disable,select:p.select,clear:p.clear,selectElement:p.selectElement,populate:p.populate,tick:p.tick,untick:p.untick,activate:p.activate,deactivate:p.deactivate}))};var r=c.onButton(p);p.events.select.bind(function(a){n.action(a.value());p.close()});var q=a.create({select:b(["value","item"],p.events.select),itemHover:b(["item"],p.events.itemHover),escaped:b([],p.events.escaped),open:b(["menu","popup",
"anchor"],p.events.open),close:b([],p.events.close)});f();g.set(p.element(),"tabindex","-1");return{dropdown:function(){return{events:q.registry,close:p.close,uiStale:p.uiStale,enable:p.enable,disable:p.disable,list:p.list,menu:p.menu,recalculate:p.recalculate}},component:p.element,refreshUi:f,destroy:function(){r.unbind();p.destroy()}}}}});l("t9","l9 t6 kw kx a fp 7 4a 4b 1b".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(b,c){var d=a.typical(b.value,b.value,b.action,b.textkey,b.label,b.tooltip,
c);b.setup&&b.setup(d,b);return d},p=function(b,c){var d=a.toggle(b.value,b.value,b.action,b.textkey,b.label,b.tooltip,c);b.setup&&b.setup(d,b);b.selected&&d.select();return d};return{init:function(a,q){var s=!0===q.hasPopup,t=(!0===q.toggle?p:n)(q,a);b.isString(q.icon)&&d.findAndSetUrl(t.element(),q.icon);var u=t.initAria(t,a(q.textkey),s,q.toggle);m.set(t.element(),"tabindex","-1");var v=function(){!0===q.toggle&&g.pressed(t)},w=c.onButton(t);t.events.click.bind(function(){v()});var z=!0===q.toggle?
t.select:f.noop,x=!0===q.toggle?t.deselect:f.noop,y=!0===q.toggle?t.selected:f.constant(!1);v();var l=h.create({click:k([],t.events.click)});return{generals:function(){return{events:l.registry,enableButton:t.enable,disableButton:t.disable}},component:t.element,refreshUi:function(){q.updateGeneral(e.general({disable:u.disable,enable:u.enable,select:z,deselect:x,selected:y,element:t.element}));v()},destroy:function(){w.unbind();t.destroy();u.destroy()}}}}});l("ta","ap l9 cs l6 zf cu 7g b fp c 52 58 4a 4b ik 1b 2o 2p 30 2q 3c 2s 2b".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,z,x,y,l){var B=m.detect().deviceType.isiOS;return{init:function(m,D,F,E,G,H){var L=G.button(),I=e.onButton(L),J=d(m.uiContainer,G.name,c.menu({focusActive:!0}));t.set(L.element(),"tabindex","-1");var K=n.div();u.add(K,f.resolve("menu-system-main"));var N=g(J.sandbox,m.bounds,D,[L.element()],E),M=N.initMenu(K);F=b();var O=a.main(m.uiContainer,m.bounds,L.element,F,D.uiDirection(),s.anchored()),S=function(){O.recalculate(M)},P=function(){var a=l.children(J.sandbox());
h.each(a,function(a){v.set(a,"display","none")})},U=function(a){J.update(a.structure());y.empty(K);z.append(K,a.element());a=N.registerMenus(a.submenus());a=h.map(a,function(a){return a.panel()});y.empty(J.sandbox());x.append(J.sandbox(),[M.panel()].concat(a));P()},Q=function(a){G.init(a)},V=r.create({open:p(["menu","popup","anchor"]),close:q([],J.events.close),itemAction:q(["value","item"],J.events.itemAction),itemHover:q(["item"],J.events.itemHover),reveal:p(["menu","trigger","popup","anchor"]),
collapse:q(["menu","item"],J.events.collapse),escaped:q([],J.events.escaped)});L.events.click.bind(function(){return(L.selected()?M.open:M.close)()});G.events.done.bind(function(){J.close()});G.events.abort.bind(function(a){J.select(a.item());w.focus(a.item())});M.events.uistale.bind(function(){J.getActiveMenu().bind(function(a){Q(a)})});M.events.close.bind(function(){J.close();k.collapsed(L.element())});M.events.open.bind(function(){var a=void 0!==H?H:[],a=[J.sandbox()].concat(a);U(G);Q(G);v.set(M.panel(),
"display","block");v.set(K,"display","block");J.open(a,K);k.expanded(L.element())});J.events.open.bind(function(){V.trigger.open(G.element(),M,O);B()||J.setActiveMenu(G.element())});J.events.close.bind(function(){N.hideAll();L.deselect()});J.events.itemAction.bind(function(a){var b=G.handlers();if(void 0!==b[a.value()])(0,b[a.value()])(a.item())});J.events.reveal.bind(function(a){k.expanded(a.trigger());var b=N.expandMenu(a.menu(),a.trigger(),M);V.trigger.reveal(a.menu(),a.trigger(),b.popup,b.anchorage)});
J.events.collapse.bind(function(a){N.hideMenu(a.menu());a.item().each(k.collapsed)});return{menus:function(){return{events:V.registry,enable:G.enable,disable:G.disable,close:M.close,uiStale:M.uiStale,mousedown:M.mousedown,contentFocus:G.contentFocus,menu:M.element,refreshMenus:Q,recalculate:S}},component:L.element,refreshUi:function(){G.updateMenu({enable:G.enable,disable:G.disable})},destroy:function(){I.unbind();J.destroy();G.destroy();M.destroy()}}}}});l("tb","t6 7g z5 b aq 52 7 t 2n 2o 3c".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n){return{init:function(p,r){var q=g.span();m.add(q,e.resolve("palette-group"));var s=f.curry(b.speak,k.body()),t=function(a){var b=d.isShowing(q);d.hide(q);b&&a.each(s);return b},u=c.palette({show:function(a){var b=d.isHiding(q);d.show(q);b&&a.each(s);return b},hide:t});t(h.none());n.append(q,a.map(r,function(a){return a.component()}));return{component:f.constant(q),destroy:function(){a.each(r,function(a){a.destroy()})},refreshUi:function(){p.updatePalette(u);a.each(r,
function(a){a.refreshUi()})}}}}});l("tc","l9 t6 l6 zf cu kx 8e fp 31 h0 7 58 4a 4b ik 1b l 2q q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w){return{widget:function(z,x,y,l,B){var C=B.instance();B=u.fromDom(w);var D=(C.toggle?g.splitToggle:g.split)(C.name(),C.name(),n.identity,C.textkey(),C.label(),C.tooltip,y),F=c.custom(D.element(),function(){D.open();C.enter()});t.set(D.element(),"tabindex","-1");var E=D.initAria(D,y(C.textkey()),!0,C.toggle);l=b(z.uiContainer,z.bounds,x,[D.element()],
l);var G=a(),H=m.widget(B,C.name());B=k.generate("menu-control");t.set(H,"id",B);f.controls(D.element(),B);f.owns(D.element(),B);f.menu(H,y(C.menuTextkey()));v.append(H,C.element());var L=l.initMenu(H),I=d.main(z.uiContainer,z.bounds,D.element,G,x.uiDirection(),s.expandable()),J=function(){I.recalculate(L)};L.events.open.bind(function(){h.expanded(D.element());C.open();K.trigger.open(H,L,I)});L.events.close.bind(function(){h.collapsed(D.element());C.close();D.close()});C.events.done.bind(function(){L.close();
D.close()});C.events.abort.bind(function(){L.close();D.close();K.trigger.abort()});D.events.open.bind(function(){L.open();I.recalculate(L)});D.events.close.bind(function(){C.close();L.close()});D.events.click.bind(function(){C.action()});var K=r.create({abort:p([]),close:q([],C.events.close),open:p(["menu","popup","anchor"])});return{widgets:function(){return{events:K.registry,open:D.open,isOpen:D.isOpen,close:D.close,recalculate:J}},component:D.element,refreshUi:function(){C.updateWidget(e.widget({select:D.select,
deselect:D.deselect,enable:D.enable,disable:D.disable,press:E.press,release:E.release}))},destroy:function(){F.unbind();E.destroy();L.destroy();C.destroy();D.destroy()}}}}});l("td","l9 t6 l6 zf cu 7g kx 8e fp 7 58 4a ik 1b 2o".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return{widget:function(h,u,v,w,z){var x=z.instance(),y=f.toggle(x.name(),x.name(),m.identity,x.textkey(),x.label(),x.tooltip,v),l=c.onButton(y),B=y.initAria(y,v(x.textkey()),!0,!0);v=b(h.uiContainer,h.bounds,u,[y.element()],
w);w=a();var C=v.initMenu(x.element()),D=d.main(h.uiContainer,h.bounds,y.element,w,u.uiDirection(),r.expandable());q.set(y.element(),"tabindex","-1");s.add(C.element(),g.resolve("toolbar-widget"));var F=function(){D.recalculate(C)};C.events.open.bind(function(){k.expanded(y.element());x.open();E.trigger.open(x.element(),C,D)});C.events.close.bind(function(){k.collapsed(y.element());x.close()});x.events.done.bind(function(){C.close();y.deselect()});x.events.abort.bind(function(){C.close();y.deselect();
E.trigger.abort()});y.events.click.bind(function(){y.selected()?(C.open(),D.recalculate(C)):C.close();k.pressed(y)});var E=p.create({abort:n([]),open:n(["menu","popup","anchor"])}),G=function(){y.deselect();C.close()};return{widgets:function(){return{events:E.registry,close:G,recalculate:F}},component:y.element,refreshUi:function(){x.updateWidget(e.widget({select:m.noop,deselect:m.noop,enable:B.enable,disable:B.disable,press:m.noop,release:m.noop}))},destroy:function(){l.unbind();B.destroy();C.destroy();
x.destroy();y.destroy()}}},inline:function(a,b){var d=b.instance(),f=c.custom(d.element(),function(){d.element().dom().click()});q.remove(d.element(),"tabindex");s.add(d.element(),g.resolve("toolbar-inline-widget"));h.toolbarButton(d.element(),a(d.textkey()),!1);var r=p.create({abort:n([]),open:n(["menu","popup","anchor"])});return{widgets:function(){return{events:r.registry,recalculate:m.noop,close:m.noop}},component:d.element,refreshUi:function(){d.updateInlineWidget(e.widget({select:m.noop,deselect:m.noop,
enable:m.curry(k.enable,d.element()),disable:m.curry(k.disable,d.element()),press:m.noop,release:m.noop}))},destroy:function(){f.unbind();d.destroy()}}}}});l("kq","t2 t3 t4 l5 t8 t9 ta tb tc td 7".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return{menu:function(b){return{general:n.curry(e.init,b),menu:n.curry(d.nested,b),dropdown:n.curry(c.init,b),widget:n.curry(a.widget,b),"split-widget":n.curry(a.split,b),"inline-widget":n.curry(a.inline,b),palette:n.die("No palettes for menus yet")}},toolbar:function(a,
c,d,e){var t=function(b){return n.curry(b,a,c,d,e)};return{menu:t(f.init),dropdown:t(b.init),widget:t(m.widget),"split-widget":t(k.widget),"inline-widget":n.curry(m.inline,d),general:n.curry(g.init,d),palette:h.init}}}});l("hv",["4o"],function(c){c=c.generate([{toolbar:[]},{menu:[]}]);return{toolbar:c.toolbar,menu:c.menu,cata:function(c,d,a){return c.fold(d,a)}}});l("cp",["kq","hv"],function(c,e){return function(d){var a=c.menu(d);return{widget:a.widget,menu:a.menu,general:a.general,"inline-widget":function(b){return a["inline-widget"]({instance:function(){return b.instance(e.menu())}})},
"split-widget":a["split-widget"],dropdown:a.dropdown,palette:a.palette}}});l("kr",["b","c","3p","30"],function(c,e,d,a){var b=function(b,c,d,e){b.events.escaped.bind(function(b){d.focused()&&a.focus(e.component())});b.events.close.bind(function(a){c.focus()})},g=function(a,b,c,e){a.events.open.bind(function(a){d.register(a.popup().panel())})};return{init:function(d,h,k,m,n,p,r,q,s){var t=d.dropdown(s),u=t.dropdown();d=k.toolbar;(e.detect().deviceType.isTouch()?g:b)(u,n,d,t);var v=!1;u.events.open.bind(function(a){n.toReading();
r.show(a.popup(),a.anchor());v=!0});u.events.close.bind(function(){v=!1});u.events.escaped.bind(function(){a.focus(t.component())});n.events.mousedown.bind(function(){v&&u.close()});n.events.uiStale.bind(u.uiStale);k.toolbar.events.transitionend.bind(function(a){c.contains(["top","height"],a.property())&&u.recalculate()});return{component:t.component,refreshUi:t.refreshUi,destroy:t.destroy}}}});l("ks",[],function(){return{init:function(c,e,d,a,b,g,f,h,k){c=c.general(k);e=c.generals();c.refreshUi();
return{generals:e,component:c.component,refreshUi:c.refreshUi,destroy:c.destroy}}}});l("fq",["t","2a"],function(c,e){var d=function(a,b){var d=c.none(),f=function(){d=c.none()};return{begin:function(){d=c.some(e.get(a))},end:function(){d.each(function(a){b.scrollTo(a.left(),a.top())});f()},destroy:f}};return{fromSafe:function(a){return d(a.doc(),a.win())},fromUnsafe:function(a){var b=a.doc().getOrDie();a=a.win().getOrDie();return d(b,a)}}});l("kt","7 t fq 3p l 30 21 2b q".split(" "),function(c,e,
d,a,b,g,f,h,k){return{init:function(m,n,p,r,q,s,t,u,v){var w=m.menu(v,[]),z=w.menus(),x=d.fromUnsafe(q);z.events.open.bind(function(a){q.toReading();z.refreshMenus(a.menu());t.show(a.popup(),a.anchor())});z.events.close.bind(function(){q.focus();x.end()});z.events.escaped.bind(function(){g.focus(w.component())});z.events.reveal.bind(function(a){v.init(a.menu());t.show(a.popup(),a.anchor())});z.events.itemAction.bind(function(a){x.end()});z.events.itemHover.bind(function(d){x.begin();if(null!==k.activeElement&&
void 0!==k.activeElement){var e=b.fromDom(k.activeElement),m=h.owner(d.item());"input"!==f.name(e)&&a.preserve(m,c.curry(g.focusInside,d.item()))}else q.backupSelection(),g.focus(d.item())});q.events.mousedown.bind(z.mousedown);q.events.uiStale.bind(z.uiStale);q.events.focus.bind(z.enable);var y=!q.isInline()&&v.contentFocus();y&&z.disable();return{component:w.component,refreshUi:function(){w.refreshUi();var a=y?e.none():e.some(!0);q.getSelection().or(a).fold(z.disable,z.enable)},destroy:function(){x.destroy();
q.events.mousedown.unbind(z.mousedown);q.events.uiStale.unbind(z.update);w.destroy()}}}}});l("ku","c lz 7 hv 2o 3y 30".split(" "),function(c,e,d,a,b,g,f){var h=function(a,b,d,e,g,h,u,v,w,z,x){var y=d[b]({instance:a(x.instance)});a=y.widgets();g=g.toolbar;a.events.open.bind(function(a){u.toReading();w.show(a.popup(),a.anchor())});a.events.abort.bind(function(){f.focus(y.component())});u.events.mousedown.bind(a.close);return(c.detect().deviceType.isTouch()&&"split-widget"===b?m:k)(a,u,g,y)},k=function(a,
b,c,d){return d},m=function(a,c,d,f){var h=g.capture(f.component(),"click",function(c){c.kill();b.add(f.component(),e.resolve("statebutton-selected"));a.isOpen()?a.close():a.open()});a.events.close.bind(function(){b.remove(f.component(),e.resolve("statebutton-selected"))});return{widgets:f.widgets,component:f.component,refreshUi:f.refreshUi,destroy:function(){h.unbind();f.destroy()}}};return{widget:d.curry(h,d.identity,"widget"),inlineWidget:d.curry(h,function(b){return function(){return b(a.toolbar())}},
"inline-widget"),splitWidget:d.curry(h,d.identity,"split-widget")}});l("b2",["7","59"],function(c,e){var d=e.resolve("editor-container");return{editorContainer:c.constant(d)}});l("cq","kq 7 kr ks kt ku b2".split(" "),function(c,e,d,a,b,g,f){return function(h,k,m,n,p,r,q){var s=c.toolbar(r,m,q,f.editorContainer()),t=function(a){return e.curry(a,s,h,k,m,n,p,r,q)};return{widget:t(g.widget),"inline-widget":t(g.inlineWidget),"split-widget":t(g.splitWidget),cards:s.cards,general:t(a.init),dropdown:t(d.init),
menu:t(b.init),palette:s.palette}}});l("9a","c 7 t 7e 2w o".split(" "),function(c,e,d,a,b,g){var f=b.immutable("key","link"),h=b.immutable("url","text"),k=function(b,c,e){return function(g){var k=h(c,a.translate(e));return f(a.pkey(b,g),d.some(k))}},m=function(b){return function(c){return f(a.pkey(b,c),d.none())}};b=function(b){return function(c){var e=b(c);c=h(c[0].websiteUrl,a.translate("cloud.dashboard"));return f(e.key(),d.some(c))}};var n={"no.api.key":b(m("cloud.error.apikey")),"domain.not.supported":b(function(b){return f(a.pkey("cloud.error.domain",
[b[0].details.domain]),d.none())}),"plan.exceeded":b(m("cloud.error.plan")),"error.code.invalid.toolbar":m("errors.toolbar.invalid"),"error.code.spelling.not.found":m("errors.spelling.missing.service"),"error.code.images.not.found":m("errors.images.missing.service"),"safari.imagepaste":k("errors.safari.image","https://support.ephox.com/entries/88543243-Safari-Direct-paste-of-images-does-not-work","errors.safari.url"),"webview.imagepaste":m("errors.webview.image"),"flash.clipboard.no.rtf":function(a){return(c.detect().browser.isSafari()?
k("errors.safari.browser-settings","https://support.ephox.com/entries/59328357-Safari-6-1-and-7-Flash-Sandboxing","errors.safari.rtf"):m("errors.images.missing.flash"))(a)},"fileupload.invalidimages":m("errors.images.upload.invalid"),"error.imageupload":m("errors.images.upload.failed"),"error.imageupload.generic":m("errors.images.upload.unknown"),"error.imageupload.cors":m("errors.images.upload.cors"),"errors.paste.word.notready":m("errors.paste.notready"),"errors.paste.process.failure":m("errors.paste.generic"),
"flash.crashed":m("errors.flash.crashed"),"errors.imageimport.failed":m("errors.images.import.failed"),"errors.imageimport.unsupported":m("errors.images.import.unsupported"),"errors.imageimport.invalid":m("errors.images.import.invalid"),"imageedit.needsproxy":m("errors.images.edit.needsproxy"),"imageedit.proxyerror":m("errors.images.edit.proxyerror"),"imageedit.generic":m("errors.images.edit.generic")},p={"errors.local.images.disallowed":"Removing pasted images from content. Local image insert has been disabled.",
"errors.dragdrop.images.disallowed":"Blocking image drop operation. Local image insert has been disabled."},r=function(b,c){var d=(0,n[b])(c);return{description:e.constant(a.get(d.key())),link:e.constant(d.link().getOr(null))}};return{get:r,getOrLog:function(a,b){return d.from(p[a]).fold(function(){var c=r(a,b);return d.some(c)},function(a){g.warn(a);return d.none()})}}});l("76","cm cn a b 7 co cp cq 7e 9a 59 2o o".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var q=function(c,d){var e=function(b){var d=
m.get("error.code.invalid.toolbar",[b.small()]),d=g(d);c.displayBanner(d);a.each(b.big(),function(a){r.error(a)})};return d.fold(function(a){e(a);return[]},b.identity)};return{setup:function(b,g,m,r,w,z){z=q(b,z);var x=function(a){a=d.isString(a)?k.has(a)?k.key(a):k.raw(a):a;return k.get(a)};p.add(b.toolbar.element(),n.resolve("layer-above-editor"));g=e.blueprints(h(w.uiContainer,b,g,m,r,w,x),f(x));w=e.env(w.uiContainer,x);w=c.build(z,g,w);a.each(w,b.toolbar.add);b.position();a.each(w,function(a){m.events.uiStale.bind(function(){a.refreshUi()})})}}});
l("la","l9 kn 7g kx pg eo 7 1b 2o 30".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(n){var p=b("overflower");k.add(p.element(),d.resolve("more-button"));p.content(g(n("toolbar.more")));var r=c.onButton(p);h.set(p.element(),"tabindex","-1");n=n("aria.label.more");h.set(p.element(),"title",n);var q=a.aria(p,n,!0,!0),s=e.toolbar([{component:p.element,destroy:p.destroy,refreshUi:f.noop}]);return{group:s.component,select:function(){p.select();q.press()},deselect:function(){q.release();p.deselect()},
focus:function(){m.focus(p.element())},destroy:function(){r.unbind();q.destroy();s.destroy()},events:p.events}}});l("m4",["t","1c","30","4j","2b"],function(c,e,d,a,b){return{preserve:function(g,f){var h=b.owner(f),k=d.active(h).bind(function(b){var d=function(a){return e.eq(b,a)};return d(f)?c.some(f):a.descendant(f,d)}),m=g(f);k.each(function(a){d.active(h).filter(function(b){return e.eq(b,a)}).orThunk(function(){d.focus(a)})});return m}}});l("zg",["2w"],function(c){return c.immutable("component",
"index")});l("tp",["b","zg"],function(c,e){return function(d){var a=[];return{add:function(b,c){var f=c?d.indexOf(a,c).getOrDie():a.length;a.splice(f,0,b);return e(b,f)},remove:function(b){b=d.resolve(a,b).getOrDie();var g=c.indexOf(a,b);a.splice(g,1);return e(b,g)},get:function(){return a.slice(0)},itemAt:function(b){return d.resolve(a,b)}}}});l("tq",["a","b","p"],function(c,e,d){return function(a){var b=function(a,b){return c.isNumber(b)?g(a,b):c.isString(b)?f(a,b):c.isObject(b)?h(a,b):d.error("Unsupported specifier type: "+
b)},g=function(a,b){return 0===a.length?d.error("Items is empty"):0>b||b>=a.length?d.error("Item index: "+b+" is out of range (0-"+(a.length-1)+")"):d.value(a[b])},f=function(b,c){var f=e.find(b,function(b){return a(b)===c});return void 0===f?d.error("No item with value: ["+c+"]"):d.value(f)},h=function(a,b){return-1===e.indexOf(a,b)?d.error("Specified object is not a registered item: "+b):d.value(b)};return{resolve:b,indexOf:function(a,c){return b(a,c).bind(function(b){b=e.indexOf(a,b);return-1<
b?d.value(b):d.error("Item not found: "+c)})},index:g,value:f,item:h}}});l("lb","7g b m4 8e tp tq 7 58 4a 2o 4e 2p l 2q 3c 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){return function(u,v){var w=k.create({grow:h([]),shrink:h([]),exit:h([])}),z=b(g(f.identity)),x=r.fromTag("div");p.set(x,"overflow-x","auto");m.add(x,c.resolve("toolstrip"));a.toolbarGroup(x);var y=r.fromTag("div");n.add(y,[c.resolve("toolbar"),c.resolve("toolbar-primary")]);var l=r.fromTag("div");n.add(l,[c.resolve("toolbar"),
c.resolve("toolbar-more")]);q.append(x,y);q.append(x,l);var B=function(){var a=z.get();return e.bind(a,function(a){return a.isVisible()?[a.component()]:[]})},C=function(){var a=B(),a=u.build(a);t.empty(y);t.empty(l);s.append(y,a);p.reflow(y)};return{element:function(){return x},main:f.constant(y),mores:f.constant(l),destroy:function(){var a=z.get();e.each(a,function(a){a.destroy()})},focused:f.constant(!1),enter:f.noop,restore:f.noop,refocus:f.noop,refresh:f.curry(d.preserve,C,x),repaint:f.curry(d.preserve,
C,x),add:function(a){z.add(a)},events:w.registry}}});l("lc",["7"],function(c){return{item:c.constant('.ephox-chameleon-toolbar-group [tabindex="-1"]'),group:c.constant(".ephox-chameleon-toolbar-group"),sector:c.constant(".ephox-chameleon-toolstrip > *")}});l("po","7g 2o 4e 2p 3y 5a".split(" "),function(c,e,d,a,b,g){var f=c.resolve("toolbar-more-closed"),h=c.resolve("toolbar-more-open"),k=c.resolve("toolbar-more-hide"),m=c.resolve("toolbar-more-show"),n=function(b,c){a.set(b,"height",c+"px");a.reflow(b)},
p=function(a){e.remove(a,h);e.add(a,f);n(a,0)},r=function(b){e.remove(b,f);e.add(b,h);a.remove(b,"height")};return function(c){p(c);var f=!1,h=b.bind(c,"transitionend",function(b){"height"===b.raw().propertyName&&(d.remove(c,[m,k]),f&&a.remove(c,"height"))});return{visible:function(){return f},hide:function(){f=!1;n(c,g.get(c));e.add(c,k);p(c)},show:function(){r(c);var a=g.get(c);p(c);e.add(c,m);r(c);n(c,a);f=!0},destroy:function(){h.unbind()}}}});l("zh",["2w"],function(c){return c.immutable("within",
"extra","withinWidth")});l("tr",["b","zh","7","t","i4"],function(c,e,d,a,b){var g=function(e,f,g){var h=b.generate(e,function(b,c){var e=g(b);return a.some({element:d.constant(b),start:d.constant(c),finish:d.constant(c+e),width:d.constant(e)})});e=c.filter(h,function(a){return a.finish()<f});var k=c.foldr(e,function(a,b){return a+b.width()},0),h=h.slice(e.length);return{within:d.constant(e),extra:d.constant(h),withinWidth:d.constant(k)}},f=function(a){return c.map(a,function(a){return a.element()})},
h=function(a,b,c){a=f(a.concat(b));return e(a,[],c)},k=function(a,b,c,d){a=f(a).concat([c]);return e(a,f(b),d)},m=function(a,b,c){return e(f(a),[],c)},n=function(b,c,d){b=g(c,b,d);return 0===b.extra().length?a.some(b):a.none()};return{partition:function(a,b,c,d){var e=n(a,b,c).getOrThunk(function(){return g(b,a-c(d),c)}),f=e.within(),v=e.extra(),e=e.withinWidth();return 1===v.length&&v[0].width()<=c(d)?h(f,v,e):1<=v.length?k(f,v,d,e):m(f,v,e)}}});l("ld","7g po b m4 8e tp tq tr 7 58 4a 2o 4e 2p l 2q 3c 2s 2t".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w){return function(z,x){var y=n.create({grow:m([]),shrink:m([]),exit:m([])}),l=g(f(k.identity)),B=s.fromTag("div");b.toolbarGroup(B);p.add(B,c.resolve("toolstrip"));var C=s.fromTag("div");r.add(C,[c.resolve("toolbar"),c.resolve("toolbar-primary")]);var D=s.fromTag("div");r.add(D,[c.resolve("toolbar"),c.resolve("toolbar-more")]);t.append(B,C);t.append(B,D);var F=e(D);x.events.click.bind(function(){F.visible()?(F.hide(),x.deselect(),y.trigger.shrink()):(F.show(),
x.select(),y.trigger.grow())});var E=function(){var a=l.get();return d.bind(a,function(a){return a.isVisible()?[a.component()]:[]})},G=function(){z.update();var a=E(),a=z.build(a);q.set(C,"visibility","hidden");z.clearWidth();v.empty(C);u.append(C,a);var b=z.width(C);t.append(C,x.group());var a=h.partition(b,a,w.getOuter,x.group()),b=a.extra(),c=a.within();v.empty(C);v.empty(D);u.append(C,c);u.append(D,b);z.updateWidth(x,a);q.remove(C,"visibility")},H=function(){a.preserve(G,B)};return{element:function(){return B},
main:k.constant(C),mores:k.constant(D),destroy:function(){var a=l.get();d.each(a,function(a){a.destroy()});x.destroy();F.destroy()},focused:k.constant(!1),enter:k.noop,restore:k.noop,refocus:k.noop,refresh:H,repaint:function(){z.shouldRefresh()&&H()},add:function(a){l.add(a)},events:y.registry}}});l("h2",["2w"],function(c){return{grid:c.immutableBag(["trigger"],["isValid","first"]),flow:c.immutableBag(["trigger"],["first","executeOnArrow"]),sectors:c.immutableBag(["trigger","first"],[]),radio:c.immutableBag(["one"],
[]),input:c.immutableBag([],["execute"]),button:c.immutableBag(["execute"],["process"]),dialog:c.immutableBag(["execute","ok","cancel"],["index"]),inlineDialog:c.immutableBag(["ok","cancel"],["index"]),page:c.immutableBag(["trigger"],["first"]),tabular:c.immutableBag(["trigger"],["first","isValid"]),dynamic:c.immutableBag([],["execute"])}});l("le",["56"],function(c){return c.ensure(["enter","exit","destroy"])});l("lf",["b"],function(c){var e=function(c){return function(a){return a.raw().which===c}};
return{inSet:function(d){return function(a){return c.contains(d,a.raw().which)}},and:function(d){return function(a){return c.forall(d,function(b){return b(a)})}},is:e,isShift:function(c){return!0===c.raw().shiftKey},basic:function(c,a){return{matches:e(c),run:a}},rule:function(c,a){return{matches:c,run:a}}}});l("lg",["b","1b","30","4h"],function(c,e,d,a){var b=function(a){e.has(a,"tabIndex")||e.set(a,"tabIndex","-1")};return{set:function(a){b(a);d.focus(a)},find:function(a){return d.search(a)},isFocused:d.hasFocus,
mark:b,markSelectors:function(d,e){c.each(e,function(e){e=a.descendants(d,e);c.each(e,b)})}}});l("dp","b le lg 7 58 4a 3y".split(" "),function(c,e,d,a,b,g,f){return function(h,k,m){var n=f.bind(h,"keydown",m.getOr(function(a){var b=c.find(k,function(b){return b.matches(a)});void 0!==b&&null!==b&&b.run(a).each(function(b){a.kill()})})),p=g.create({enter:b([]),exit:b([])});return e({isFocused:a.curry(d.isFocused,h),element:a.constant(h),clear:a.noop,enter:function(){d.set(h);p.trigger.enter()},refresh:a.noop,
isEnabled:a.constant(!0),exit:function(){p.trigger.exit()},events:p.registry,destroy:function(){n.unbind()}})}});l("dd","le lf dp ar 7 t".split(" "),function(c,e,d,a,b,g){return function(f,h){var k=d(f,[e.rule(e.inSet(a.SPACE().concat(a.ENTER())),function(){h.execute()(f);return g.some(!0)})],h.process());return c({element:k.element,destroy:k.destroy,clear:k.clear,isFocused:k.isFocused,isEnabled:b.constant(!0),refresh:b.noop,enter:k.enter,exit:k.exit})}});l("lk",["b","t"],function(c,e){return{adjust:function(c,
a,b,e){c+=a;return c>e?b:c<b?e:c},findPrev:function(d,a,b){var g=c.reverse(d.slice(0,a));d=c.reverse(d.slice(a+1));b=c.find(g.concat(d),b);return void 0!==b&&null!==b?e.some(b):e.none()},findNext:function(d,a,b){var g=d.slice(0,a);d=d.slice(a+1);b=c.find(d.concat(g),b);return e.from(b)}}});l("lh","b lk 7 t 1c 2p 37 b4".split(" "),function(c,e,d,a,b,g,f,h){var k=function(b){b=c.find(b,m);return a.from(b)},m=function(a){return h.isVisible(a.element())&&a.isEnabled()&&"hidden"!==g.get(a.element(),"visibility")};
return{exit:function(a){c.each(a,function(a){a.clear();a.exit()})},clear:function(a){c.each(a,function(a){a.clear()})},refresh:function(a){c.each(a,function(a){a.refresh()})},first:k,enterFirst:function(b,c){c.index().bind(function(c){return a.from(b[c]).filter(m)}).orThunk(function(){return k(b)}).each(function(a){a.enter()})},isEnabled:function(a){return c.exists(a,function(a){return a.isEnabled()})},locate:function(a,e){return c.find(a,function(a){var c=e.target();a=a.element();return f.closest(c,
d.curry(b.eq,a))})},next:function(a,b){var d=c.indexOf(a,b);return e.findNext(a,d,m).getOr(b)},prev:function(a,b){var d=c.indexOf(a,b);return e.findPrev(a,d,m).getOr(b)},prevNoCycle:function(b,d){var e=c.indexOf(b,d);return 0<e?a.some(b[e-1]):a.none()},nextNoCycle:function(b,d){var e=c.indexOf(b,d);return e+1<b.length?a.some(b[e+1]):a.none()},progress:function(a,b){a.exit();b.enter()},destroy:function(a){c.each(a,function(a){a.destroy()})}}});l("de","b le h2 lf dd lg lh ar 7 58 4a 3y 21".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r){return function(q,s,t){var u=t.execute(),v=d.button({execute:u}),w=s.slice(0).concat([b(t.cancel(),v),b(t.ok(),v)]),z=p.bind(q,"keydown",function(b){var d=f.locate(w,b);if(void 0!==d&&null!==d){var e=a.isShift(b);a.is(h.TAB()[0])(b)?(e=(e?f.prev:f.next)(w,d),f.progress(d,e),b.kill()):a.is(h.ESCAPE()[0])(b)?(x(),b.kill(),u(t.cancel())):(d=d.element(),"button"===r.name(d)||e||!a.is(h.ENTER()[0])(b)?(d=[h.UP()[0],h.DOWN()[0]],e=["textarea","select","input"],a.inSet(d)(b)&&
!1===c.contains(e,r.name(b.target()))&&b.kill()):(u(t.ok()),b.kill()))}}),x=function(){f.exit(w);y.trigger.exit()},y=n.create({enter:m([]),exit:m([])});return e({enter:function(){f.enterFirst(w,t)},exit:x,clear:k.curry(f.clear,w),refresh:k.curry(f.refresh,w),isEnabled:k.curry(f.isEnabled,w),isFocused:k.curry(g.isFocused,q),events:y.registry,destroy:function(){f.destroy(w);z.unbind()}})}});l("df","le lf lg lh ar 7 58 4a 4n 3y".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(n){var p=k([]),
r=function(c,d){e.is(b.TAB()[0])(d)&&(e.isShift(d)?a.prevNoCycle:a.nextNoCycle)(p.get(),c).each(function(b){a.progress(c,b);d.kill()})},q=m.bind(n,"keydown",function(b){var c=a.locate(p.get(),b);void 0!==c&&null!==c&&r(c,b)}),s=h.create({enter:f([]),exit:f([])}),t=function(a){return function(){return a(p.get())}};return c({element:g.constant(n),enter:function(){a.first(p.get()).each(function(a){a.enter()})},exit:function(){a.exit(p.get());s.trigger.exit()},set:function(b){a.destroy(p.get());p.set(b)},
clear:t(a.clear,p),refresh:t(a.refresh,p),isEnabled:t(a.isEnabled,p),isFocused:t(d.isFocused,n),destroy:function(){a.destroy(p.get());q.unbind()},events:s.registry})}});l("lm","b lg 7 t 2w 1c 4h 33 2b b4".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=b.immutableBag(["index","focused","group","items"],[]),p=b.immutableBag(["index","sectors","sector"],[]),r=b.immutableBag(["index","candidates"],[]);return{ofFocus:function(b,k,p){return e.find(b).bind(function(b){return h.closest(b,k).bind(function(e){var h=
f.descendants(e,p),h=c.filter(h,m.isVisible),k=c.findIndex(h,d.curry(g.eq,b));return-1<k?a.some(n({index:k,focused:b,group:e,items:h})):a.none()})})},ofSector:function(b,e,k){var m=f.descendants(b,e);return h.closest(k,e).bind(function(b){var e=c.findIndex(m,d.curry(g.eq,b));return-1<e?a.some(p({index:e,sectors:m,sector:b})):a.none()})},within:function(b,e,h){b=f.descendants(b,h);e=c.findIndex(b,d.curry(g.eq,e));return-1<e?a.some(r({index:e,candidates:b})):a.none()}}});l("li",["lk","lm","t"],function(c,
e,d){return{horizontal:function(a,b,g,f){return e.within(a,g,b).bind(function(a){var b=a.index();a=a.candidates();b=c.adjust(b,f,0,a.length-1);return d.from(a[b])})}}});l("lj",["7","bx"],function(c,e){return function(d,a){var b=c.curry(a,-1,0),g=c.curry(a,1,0),f=e.onDirection(b,g),h=e.onDirection(g,b),b=c.curry(a,0,-1),g=c.curry(a,0,1),k=function(a){return a(d)()},f=c.curry(k,f),h=c.curry(k,h);return{west:f,east:h,north:b,south:g}}});l("dg","le lf dp li lg lj ar 7 t 33 m".split(" "),function(c,e,
d,a,b,g,f,h,k,m,n){return function(p,r,q){var s=k.none();b.markSelectors(p,[r.item()]);var t=function(c){return b.find(p).bind(function(b){return a.horizontal(p,r.item(),b,c)})},u=g(p,function(a){return t(a).bind(function(a){z(a);return q.executeOnArrow().fold(function(){return k.some(!0)},v)})}),v=function(){return b.find(p).bind(q.trigger()).map(h.constant(!0))},w=d(p,[e.rule(e.inSet(f.LEFT().concat(f.UP())),u.west),e.rule(e.inSet(f.RIGHT().concat(f.DOWN())),u.east),e.rule(e.inSet(f.SPACE().concat(f.ENTER())),
v)],k.none()),z=function(a){s=k.some(a);b.set(a)};return c({element:w.element,destroy:w.destroy,clickFocus:function(a){n.is(a,r.item())&&z(a)},clear:function(){s=k.none()},isFocused:w.isFocused,isEnabled:h.constant(!0),refresh:h.noop,enter:function(){w.enter();s.orThunk(function(){return q.first().fold(function(){return m.descendant(p,r.item())},h.apply)}).bind(z)},exit:w.exit})}});l("ll","lf dp lg ar 7 t 33".split(" "),function(c,e,d,a,b,g,f){return{delegate:function(f,k,m){return e(f,[c.basic(a.LEFT()[0],
k.west),c.basic(a.RIGHT()[0],k.east),c.basic(a.UP()[0],k.north),c.basic(a.DOWN()[0],k.south),c.rule(c.inSet(a.SPACE().concat(a.ENTER())),function(){return d.find(f).bind(m.trigger()).map(b.constant(!0))})],g.none())},findRecent:function(a,c,d,e){return e.isValid().fold(b.constant(d),function(a){return d.filter(a)}).orThunk(function(){return e.first().bind(function(a){return a()}).orThunk(function(){return f.descendant(a,c)})})}}});l("dh","le lk lg ll lj 7 t 4n 2w 30 4h 2b 1u".split(" "),function(c,
e,d,a,b,g,f,h,k,m,n,p,r){var q=k.immutable("row","column");return function(k,t,u,v,w){var z=u,x=v;d.markSelectors(k,[t.cell()]);var y=h(f.none()),l=function(a){return p.findIndex(a).map(function(a){return q(r.floor(a/x),a%x)})},B=function(a,b){return d.find(k).bind(function(c){return l(c).bind(function(c){var d=e.adjust(c.row(),b,0,z-1),g=e.adjust(c.column(),a,0,x-1);c=n.descendants(k,t.cell());var h=c.length-1,d=d*x,d=d+g>h?0<a?d:h:d+g;return 0<=d&&d<c.length?f.some(c[d]):f.none()})})};u=b(k,function(a,
b){return B(a,b).bind(function(a){d.set(a);y.set(f.some(a));return f.some(!0)})});var C=a.delegate(k,u,w);return c({element:C.element,destroy:C.destroy,clear:function(){y.set(f.none())},isFocused:C.isFocused,isEnabled:g.constant(!0),refresh:g.noop,enter:function(){C.enter();y.set(a.findRecent(k,t.cell(),y.get(),w));y.get().each(m.focus)},exit:C.exit,resize:function(a,b){z=a;x=b}})}});l("di","b le lf lg lh ar 7 58 4a 3y 21".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(p,r,q){var s=q.ok(),
t=q.cancel(),u=m.bind(p,"keydown",function(a){var e=b.locate(r,a);if(void 0!==e&&null!==e){var f=d.isShift(a);d.is(g.TAB()[0])(a)?(f=(f?b.prev:b.next)(r,e),b.progress(e,f),a.kill()):d.is(g.ESCAPE()[0])(a)?(v(),a.kill(),t(a.target())):!f&&d.is(g.ENTER()[0])(a)?(s(a.target()),a.kill()):(e=[g.UP()[0],g.DOWN()[0]],f=["textarea","select","input"],d.inSet(e)(a)&&!1===c.contains(f,n.name(a.target()))&&a.kill())}}),v=function(){b.exit(r);w.trigger.exit()},w=k.create({enter:h([]),exit:h([])});return e({enter:function(){b.enterFirst(r,
q)},exit:v,clear:f.curry(b.clear,r),refresh:f.curry(b.refresh,r),isEnabled:f.curry(b.isEnabled,r),isFocused:f.curry(a.isFocused,p),events:w.registry,destroy:function(){b.destroy(r);u.unbind()}})}});l("34",["n"],function(c){return{set:function(e,d){if(void 0===d)throw new c("Value.set was undefined");e.dom().value=d},get:function(c){return c.dom().value}}});l("dj","le lf dp ar 7 t 1b 34".split(" "),function(c,e,d,a,b,g,f,h){return function(k,m){var n=d(k,[e.basic(a.ENTER()[0],function(a){return m.execute().map(function(c){var d=
{isShift:b.constant(e.isShift(a))},f=h.get(k);c(f,d);return!0})})],g.none());return c({element:n.element,destroy:n.destroy,clear:n.clear,isFocused:n.isFocused,isEnabled:function(){return!f.has(k,"disabled")},refresh:b.noop,enter:function(){n.enter();k.dom().setSelectionRange(0,h.get(k).length)},exit:n.exit})}});l("dk","le lf lg lh ar 7 58 4a 3y".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n){var p=k.bind(m,"keydown",function(c){var d=a.locate(n,c);if(e.is(b.ESCAPE()[0])(c))r(),c.kill();
else if(void 0!==d&&null!==d&&e.is(b.TAB()[0])(c)){var f=(e.isShift(c)?a.prev:a.next)(n,d);a.progress(d,f);c.kill()}}),r=function(){a.exit(n);q.trigger.exit()},q=h.create({enter:f([]),exit:f([])});return c({enter:function(){a.first(n).each(function(a){a.enter()})},exit:r,clear:g.curry(a.clear,n),refresh:g.curry(a.refresh,n),isEnabled:g.curry(a.isEnabled,n),isFocused:g.curry(d.isFocused,m),destroy:function(){a.destroy(n);p.unbind()},events:q.registry})}});l("dl","le lf lg lh ar 7 58 4a 3y".split(" "),
function(c,e,d,a,b,g,f,h,k){return function(m,n){var p=k.bind(m,"keydown",function(c){var d=a.locate(n,c);if(e.is(b.ESCAPE()[0])(c))r(),c.kill();else if(void 0!==d&&null!==d)if(e.is(b.UP()[0])(c))a.progress(d,a.prev(n,d)),c.kill();else if(e.is(b.DOWN()[0])(c))a.progress(d,a.next(n,d)),c.kill();else if(e.is(b.TAB()[0])(c)){var f=(e.isShift(c)?a.prev:a.next)(n,d);a.progress(d,f);c.kill()}}),r=function(){a.exit(n);q.trigger.exit()},q=h.create({enter:f([]),exit:f([])});return c({enter:function(){a.first(n).each(function(a){a.enter()})},
exit:r,clear:g.curry(a.clear,n),refresh:g.curry(a.refresh,n),isEnabled:g.curry(a.isEnabled,n),isFocused:g.curry(d.isFocused,m),events:q.registry,destroy:function(){a.destroy(n);p.unbind()}})}});l("dm","b le lf dp lg ar 7 t 1c 30 4h 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){return function(r,q,s){var t=q.stops().join(","),u=function(){return s.first().bind(function(a){return p.descendant(r,a)}).getOr(r)},v=function(a){var d=u();return(m.hasFocus(d)?h.some:b.find)(d).bind(function(b){var d;d=
u();if(k.eq(d,b)&&0>a)d=h.none();else{var e=n.descendants(d,t);b=c.findIndex(e,f.curry(k.eq,b))+a;d=b>=e.length?h.none():0>b?h.some(d):0<=b&&b<e.length?h.some(e[b]):h.none()}return d})};q=function(a){return v(a).bind(function(a){b.set(a);return h.some(!0)})};var w=a(r,[d.rule(d.and([d.isShift,d.inSet(g.TAB())]),f.curry(q,-1)),d.rule(d.inSet(g.TAB()),f.curry(q,1)),d.rule(d.inSet(g.SPACE().concat(g.ENTER())),function(){return b.find(r).bind(s.trigger()).map(f.constant(!0))})],h.none());return e({element:w.element,
destroy:w.destroy,clear:f.noop,isFocused:w.isFocused,isEnabled:f.constant(!0),refresh:f.noop,enter:function(){w.enter();b.set(u())},exit:w.exit})}});l("dn","le lf dp li lg lj ar 7 t 33 m".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(p,r,q){var s=function(c){return b.find(p).bind(function(b){return a.horizontal(p,r.item(),b,c)})},t=g(p,function(a){return s(a).bind(function(a){b.set(a);q.one()(p,a);return k.some(!0)})}),u=d(p,[e.rule(e.inSet(f.LEFT().concat(f.UP())),t.west),e.rule(e.inSet(f.RIGHT().concat(f.DOWN())),
t.east),e.rule(e.inSet(f.SPACE()),h.curry(k.some,!0))],k.none());return c({element:u.element,destroy:u.destroy,clear:h.noop,refresh:function(){u.isFocused()&&m.descendant(p,r.selected()).each(b.set)},isFocused:u.isFocused,isEnabled:h.constant(!0),enter:function(){u.enter();m.descendant(p,r.selected()).orThunk(function(){return m.descendant(p,r.item())}).each(function(a){n.is(a,r.selected())||q.one()(p,a);b.set(a)})},exit:u.exit})}});l("do","b le lf dp lk lg lm lj ar 7 t 58 4a 5a 6o 4j 4h m 2b b4".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,z){return function(x,y,l){g.markSelectors(x,[y.sector(),y.group(),y.item()]);var B=function(a){return t.descendant(a,function(a){return v.is(a,y.item())&&G(a)})},C=function(a){return t.child(a,I)},D=function(a){a=s.children(a,I);return 0<a.length?n.some(a[a.length-1]):n.none()},F=h(x,function(a){return f.ofFocus(x,y.group(),y.item()).bind(function(c){var d=c.items();c=b.adjust(c.index(),a,0,d.length-1);return n.from(d[c])})}),E=function(a){return f.ofFocus(x,
y.group(),y.item()).bind(function(b){return a(b.group()).bind(B)})},G=function(a){return 0<q.get(a)},H=function(a){return f.ofSector(x,y.sector(),a).map(function(a){return b.findPrev(a.sectors(),a.index(),G).getOr(a.sector())})},L=function(a){return f.ofSector(x,y.sector(),a).map(function(a){return b.findNext(a.sectors(),a.index(),G).getOr(a.sector())})},I=function(a){var b;if(b=v.is(a,y.group()))a=u.descendants(a,y.item()),b=c.exists(a,z.isVisible);return b},J=function(a){return function(){return a().map(function(a){g.set(a);
K.trigger.active(a);return a})}},K=r.create({enter:p([]),exit:p([]),active:p(["element"])}),N=a(x,[d.rule(d.inSet(k.ESCAPE()),function(){N.exit();K.trigger.exit();return n.some(!0)}),d.rule(d.inSet(k.RIGHT().concat(k.DOWN())),J(F.east)),d.rule(d.inSet(k.LEFT().concat(k.UP())),J(F.west)),d.rule(d.and([d.isShift,d.inSet(k.TAB())]),J(m.curry(E,function(a){return w.prevSibling(a).filter(I).orThunk(function(){return H(a).bind(D)})}))),d.rule(d.inSet(k.TAB()),J(m.curry(E,function(a){return w.nextSibling(a).filter(I).orThunk(function(){return L(a).bind(C)})}))),
d.rule(d.inSet(k.SPACE().concat(k.ENTER())),function(){return g.find(x).bind(l.trigger()).map(m.constant(!0))})],n.none());return e({element:N.element,clear:m.noop,isFocused:N.isFocused,enter:function(){N.enter();K.trigger.enter();l.first()().orThunk(function(){return B(x)}).each(function(a){g.set(a);K.trigger.active(a)})},refresh:m.noop,isEnabled:m.constant(!0),exit:N.exit,destroy:N.destroy,events:K.registry})}});l("ln",["lk","2w","1u"],function(c,e,d){return{move:function(a,b,g){var f=e.immutable("row",
"col"),h=a.length-1,k=a[b.row()]-1,h=c.adjust(b.row(),g.dr(),0,h);a=a[h]-1;k=d.max(k,a);b=d.min(a,c.adjust(b.col(),g.dc(),0,k));return f(h,b)}}});l("dq","b le lg ll lm ln lj 7 t 4n 2w 4h 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){return function(q,s,t){var u=s.row(),v=s.cell();d.markSelectors(q,[u,v]);var w=m(k.none()),z=f(q,function(a,b){return D(a,b).bind(function(a){d.set(a);w.set(k.some(a));return k.some(!0)})}),x=n.immutable("row","col"),y=n.immutable("dc","dr"),l=function(a){a=p.descendants(a,
u);return c.map(a,function(a){return p.descendants(a,v).length})},B=function(a){return r.closest(a,u).bind(function(c){return b.within(q,c,u).bind(function(d){return b.within(c,a,v).map(function(a){return x(d.index(),a.index())})})})},C=function(a){var b=p.descendants(q,u);return k.from(b[a.row()]).bind(function(b){b=p.descendants(b,v);return k.from(b[a.col()])})},D=function(a,b){return d.find(q).bind(function(c){return B(c).bind(function(c){var d=l(q);c=g.move(d,c,y(a,b));return C(c)})})},F=a.delegate(q,
z,t);return e({element:F.element,destroy:F.destroy,clear:function(){w.set(k.none())},isFocused:F.isFocused,isEnabled:h.constant(!0),refresh:h.noop,enter:function(){F.enter();w.set(a.findRecent(q,s.cell(),w.get(),t));w.get().each(d.set)},exit:F.exit})}});l("dr",["lg"],function(c){return function(e,d,a,b,g){c.markSelectors(e,[d.cell()])}});l("92","1q c dd de df dg dh di dj dk dl dm dn do dp dq dr 7 t 58 4a".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,z,x){d={single:s,multiple:m,multipleAll:n,
flow:g,grid:f,sectors:q,radio:r,input:k,dialog:a,button:d,inlineDialog:h,tabular:t,page:p,dynamic:b};var y={grid:u};u=function(a,b){var c=w.from(y[b]).getOr(v.noop);return function(){c.apply(null,arguments);return{element:v.noop,clear:v.noop,isFocused:v.noop,isEnabled:v.noop,refresh:v.noop,enter:v.noop,exit:v.noop,events:x.create({enter:z([]),exit:z([]),active:z([])}).registry,destroy:v.noop,set:v.noop,clickFocus:v.noop,resize:v.noop}}};return e.detect().deviceType.isTouch()?c.map(d,u):d});l("cv",
"l9 la lb lc ld 8e c h2 92 t 58 4a 4b 3y 30".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return function(t,u){var v=e(u),w=f.detect().deviceType.isTouch()?d(t,v):b(t,v);g.toolbar(w.main(),u("aria.label.toolbar"));g.group(w.mores());var z=p.create({drawer:r(["delta","total"],w.events.drawer),grow:r([],w.events.grow),shrink:n([]),transitionend:n(["property"]),exit:n([])}),x=q.bind(w.element(),"transitionend",function(a){z.trigger.transitionend(a.raw().propertyName)}),y=m.none(),l=h.sectors({first:m.none,
trigger:c.trigger}),B=k.sectors(w.element(),a,l);B.events.exit.bind(function(){y=m.none();z.trigger.exit()});B.events.active.bind(function(a){y=m.some(a.element())});var C=function(){return B.isFocused()},D=function(){y.each(s.focus)};w.events.shrink.bind(function(){s.search(w.mores()).isSome()&&v.focus();z.trigger.shrink()});return{element:w.element,refresh:w.refresh,repaint:w.repaint,add:w.add,enter:function(){B.enter()},destroy:function(){B.exit();y=m.none();x.unbind();w.destroy();B.destroy()},
focused:C,restore:D,refocus:function(){C()&&D()},events:z.registry}}});l("ao",["cs","ct","cu","cv"],function(c,e,d,a){return{toolbar:function(b,c){return a(b,c)},menu:function(a,c,d){return e.create(a,c,d)},popup:function(a,c,e,h,k){return d(a,c,e,h,k)},menuSystem:function(a,d,e){return c(a,d,e)}}});l("4d",["7"],function(c){return{styleSpan:c.constant("ephox-hare-style-span"),base:c.constant("ephox-candy-mountain"),active:c.constant("ephox-candy-mountain-active"),autoresize:c.constant("ephox-candy-mountain-autoresize")}});
l("j0",["b","c","t","36"],function(c,e,d,a){var b=e.detect(),g=b.deviceType.isTouch,f=function(b,c){return a.screen.width>=b&&a.screen.height>=c},h=function(){return!f(620,700)&&g()};return{isTouch:g,choice:function(a,b){return c.foldl(a,function(a,b){return a.orThunk(function(){return b.predicate()?d.some(b.value()):d.none()})},d.none()).getOr(b)},isLarge:function(){return f(620,700)},isLargeTouch:function(){return f(620,700)&&g()},isSmallTouch:h,isLargeDesktop:function(){return f(620,700)&&!g()},
isSmallAndroid:function(){return h()&&b.deviceType.isAndroid()}}});l("cw",["1q","c","4e","j0"],function(c,e,d,a){e=e.detect();a={"ephox-platform-desktop":!e.deviceType.isTouch(),"ephox-platform-touch":e.deviceType.isTouch(),"ephox-platform-small-touch":a.isSmallTouch(),"ephox-platform-android":e.deviceType.isAndroid(),"ephox-platform-ios":e.deviceType.isiOS(),"ephox-platform-ie":e.browser.isIE()||e.browser.isSpartan(),"ephox-platform-firefox":e.browser.isFirefox()};var b=[];c.each(a,function(a,c){!0===
a&&b.push(c)});return{addClasses:function(a){d.add(a,b)}}});l("lo","b 52 t 59 3e 58 4a 2o 2q 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(){var n=e.div();h.add(n,a.resolve("bannerarium"));h.add(n,a.resolve("layer-above-editor"));var p=d.some([]),r=b.create(),q=function(a){p=p.bind(function(b){b=c.filter(b,function(b){return b!==a});return d.some(b)});s(a)},s=function(a){a.destroy();r.unbind(a.events.close);m.remove(a.element())},t=f.create({close:g(["banner"])});return{element:function(){return n},
display:function(a){p.fold(function(){a.destroy()},function(b){b.push(a);r.bind(a.events.close,function(){q(a);t.trigger.close(a)});k.append(n,a.element())})},hide:q,destroy:function(){m.remove(n);p=p.bind(function(a){c.each(a,s);return d.none()})},events:t.registry}}});l("cx",["lo","58","4a"],function(c,e,d){return function(){var a=c();a.events.close.bind(function(){b.trigger.resize()});var b=d.create({resize:e([])});return{element:a.element,display:function(c){a.display(c);b.trigger.resize()},hide:function(c){a.hide(c);
b.trigger.resize()},destroy:a.destroy,events:b.registry}}});l("cy","1r 7 t 59 2o l 2q 3c 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(c,d){var e=g.fromTag("div");b.add(e,a.resolve(d));f.append(e,c);return e};return{build:function(e,p,r){d.from(p).filter(c.isPrototypeOf).map(g.fromDom).each(function(c){var d=g.fromTag("div");b.add(d,a.resolve("flex-row"));var p=g.fromTag("div");b.add(p,a.resolve("flex-column"));h.append(p,k.children(e));f.append(e,d);f.append(d,p);f.append(d,m(c,"side-bar"))});
d.from(r).filter(c.isPrototypeOf).map(g.fromDom).each(function(a){f.append(e,m(a,"bottom-bar"))})}}});l("lp",["7","t","6y","3c","2t"],function(c,e,d,a,b){return function(g,f){var h=-1;return{shouldRefresh:function(){return b.getOuter(f)!==h},updateWidth:c.curry(function(a,c,d){h=b.getOuter(a)},f),clearWidth:c.noop,build:c.identity,update:c.noop,width:b.getOuter,init:function(a,b,c,d,e){a.refresh()},state:c.constant({toolbar:{drag:e.none()}}),integrate:function(b,c,d,e){a.append(b,[c.element(),d.element(),
e])},destroy:c.noop,events:d(["changed"])}}});l("xx",["56"],function(c){var e=c.exactly(["compare","extract","mutate","sink"]),d=c.exactly(["element","start","stop","destroy"]);c=c.exactly(["forceDrop","drop","move","delayDrop"]);return{mode:e,sink:d,api:c}});l("11o",["6u"],function(c){return{resolve:c.create("ephox-dragster").resolve}});l("xy","11o 6 2o 2p l 2s".split(" "),function(c,e,d,a,b,g){return function(f){f=e.merge({layerClass:c.resolve("blocker")},f);var h=b.fromTag("div");a.setAll(h,{position:"fixed",
left:"0px",top:"0px",width:"100%",height:"100%"});d.add(h,c.resolve("blocker"));d.add(h,f.layerClass);return{element:function(){return h},destroy:function(){g.remove(h)}}}});l("r5","xx xy t 3n 3y 2q 2s".split(" "),function(c,e,d,a,b,g,f){return c.mode({compare:function(b,c){return a(c.left()-b.left(),c.top()-b.top())},extract:function(b){return d.some(a(b.x(),b.y()))},sink:function(a,d){var m=e(d),n=b.bind(m.element(),"mousedown",a.forceDrop),p=b.bind(m.element(),"mouseup",a.drop),r=b.bind(m.element(),
"mousemove",a.move),q=b.bind(m.element(),"mouseout",a.delayDrop);return c.sink({element:m.element,start:function(a){g.append(a,m.element())},stop:function(){f.remove(m.element())},destroy:function(){m.destroy();p.unbind();r.unbind();q.unbind();n.unbind()}})},mutate:function(a,b){a.mutate(b.left(),b.top())}})});l("11p",["t","58","4a"],function(c,e,d){return function(){var a=c.none(),b=function(b,d){var e=a.map(function(a){return b.compare(a,d)});a=c.some(d);return e},g=d.create({move:e(["info"])});
return{onEvent:function(a,c){c.extract(a).each(function(a){b(c,a).each(function(a){g.trigger.move(a)})})},reset:function(){a=c.none()},events:g.registry}}});l("11q",["7"],function(c){return function(e){return{onEvent:function(c,a){},reset:c.noop}}});l("xz",["11p","11q"],function(c,e){return function(){var d=e(),a=c(),b=d;return{on:function(){b.reset();b=a},off:function(){b.reset();b=d},isOn:function(){return b===a},onEvent:function(a,c){b.onEvent(a,c)},events:a.events}}});l("r6","xx xz 6w 58 4a r".split(" "),
function(c,e,d,a,b,g){return{setup:function(f,h,k){var m=!1,n=b.create({start:a([]),stop:a([])}),p=e(),r=function(){t.stop();p.isOn()&&(p.off(),n.trigger.stop())},q=d(r,200);p.events.move.bind(function(a){h.mutate(f,a.info())});var s=function(a){return function(){var b=g.prototype.slice.call(arguments,0);if(m)return a.apply(null,b)}},t=h.sink(c.api({forceDrop:r,drop:s(r),move:s(function(a,b){q.cancel();p.onEvent(a,h)}),delayDrop:s(q.schedule)}),k);return{element:t.element,go:function(a){t.start(a);
p.on();n.trigger.start()},on:function(){m=!0},off:function(){m=!1},destroy:function(){t.destroy()},events:n.registry}}}});l("j7",["r5","r6","r"],function(c,e,d){return{transform:function(a,b){var d=void 0!==b?b:{};return e.setup(a,void 0!==d.mode?d.mode:c,b)}}});l("12t",["58","4a","3o"],function(c,e,d){return{both:function(a){var b=e.create({relocate:c(["x","y","deltaX","deltaY"])});return{mutate:function(c,e){var h=d.absolute(a),k=h.left()+c,h=h.top()+e;b.trigger.relocate(k,h,c,e)},events:b.registry}}}});
l("zi","j7 12t 58 4a 2p 3y l 6x q".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n){var p=a.create({relocate:d(["x","y","deltaX","deltaY"]),dragend:d([])}),r=e.both(m);b.set(m,"position","absolute");var q=c.transform(r),s=g.bind(m,"mousedown",function(a){0!==a.raw().button||h.closest(a.target(),n)||(q.on(),q.go(f.fromDom(k.body)))});q.events.stop.bind(function(){p.trigger.dragend();q.off()});r.events.relocate.bind(function(a){p.trigger.relocate(a.x(),a.y(),a.deltaX(),a.deltaY())});return{blocker:q.element,
destroy:function(){s.unbind();q.destroy()},events:p.registry}}});l("12u",["b","t","2w","1u"],function(c,e,d,a){var b=d.immutable("hx","hy","position","x","y"),g=function(a,c,d,e,g,p){p=c.x();c=c.y()-d;return(c>=a.y()&&c<=a.y()+a.h()?[b(p,c,"absolute",p,c)]:[]).concat([b(g,a.y(),"fixed",g-e.left(),a.fy())])};return{detect:function(b,d,k,m,n,p){b=g(b,d,n,p,k,m);b=c.find(b,function(b){return 10>a.abs(m-b.hy())&&38>a.abs(k-b.hx())});return e.from(b)}}});l("12v",["7"],function(c){return function(e,d,a,
b){return{x:c.constant(e),y:c.constant(d),width:c.constant(a),height:c.constant(b),right:c.constant(e+a),bottom:c.constant(d+b)}}});l("zl",["12v","5a","3o","2t"],function(c,e,d,a){return{box:function(b){var g=d.absolute(b),f=a.getOuter(b);b=e.getOuter(b);return c(g.left(),g.top(),f,b)}}});l("15i",["6u"],function(c){return{resolve:c.create("ephox-ego").resolve}});$("e9",parseInt);l("12w","15i 7 t 1b 1w e9".split(" "),function(c,e,d,a,b,g){return{make:function(f){var h="data-"+c.resolve(f+"-left"),
k="data-"+c.resolve(f+"-top"),m="data-"+c.resolve(f+"-position");return{get:function(c){var f=g(a.get(c,h),10),r=g(a.get(c,k),10);c=a.get(c,m);return b(f)||b(r)?d.none():d.some({left:e.constant(f),top:e.constant(r),position:e.constant(c)})},set:function(b,c,d,e){a.set(b,m,c);a.set(b,h,d+"px");a.set(b,k,e+"px")},clear:function(b){a.remove(b,m);a.remove(b,h);a.remove(b,k)}}}}});l("zj","12u zl 12w 2w 3n 2a 2b".split(" "),function(c,e,d,a,b,g,f){var h=d.make("pre-snap");a.immutable("fixed","loc");var k=
function(a,b,c,d,e,f){return h.get(b).fold(function(){return a.fromLocation(b,c,d)},function(c){return a.fromFixed(b,c.left()+e,c.top()+f)})},m=function(a,b,d,h){var k=f.owner(b),k=g.get(k);b=e.box(b);d=d.loc();return c.detect(a,b,d.left(),d.top(),h,k)};return{move:function(a,c,d,e,f,g){var u=a.graph(),v=a.lazyTheatre(),w=a.lazyHeight();d=k(u,c,d,e,f,g);var z=d.loc(),x=d.fixed();return m(v,a.container(),d,w).fold(function(){var a=u.boundToFixed(v,c,z.left(),z.top(),x.left(),x.top(),w);h.set(c,"fixed",
a.left(),a.top());return{position:"fixed",left:a.left()+"px",top:a.top()+"px"}},function(a){var d=u.boundToFixed(v,c,z.left(),z.top(),x.left(),x.top(),w);h.set(c,"fixed",d.left()+"px",d.top()+"px");d="absolute"===a.position()?u.locationToAbsolute(c,a.x(),a.y()):b(a.x(),a.y());return{position:a.position(),left:d.left()+"px",top:d.top()+"px"}})},forget:function(a){h.clear(a)}}});l("zm",[],function(){return{isInside:function(c,e,d){return!(e>c.y()+c.h()||d<c.y())},isAllInside:function(c,e,d){return e>
c.y()&&e<c.y()+c.h()&&d>c.y()&&d<c.y()+c.h()}}});l("zk","12w zm t 3n 2p 3o e9".split(" "),function(c,e,d,a,b,g,f){var h=c.make("old"),k=function(c,d,e){return b.getRaw(d,"left").bind(function(c){return b.getRaw(d,"top").map(function(b){var d=f(c,10);b=f(b,10);return a(d,b)})}).getOrThunk(function(){return c.locationToAbsolute(d,e.left(),e.top())})},m=function(a,c,f,m,n,u){f=g.absolute(m);n="absolute"===b.get(m,"position");var v=e.isAllInside(c,f.top(),f.top()+u());return n&&!v?(n=k(a,m,f),h.set(m,
"absolute",n.left(),n.top()),a=a.absoluteToFixed(m,f.left(),f.top()),c=f.top()<=c.y()?c.fy():c.fy()+c.h()-u(),d.some({position:"fixed",left:a.left()+"px",top:c+"px"})):d.none()},n=function(a,c,f,g,k,m){return h.get(g).bind(function(f){var k="fixed"===b.get(g,"position"),n=a.absoluteToLocation(g,f.left(),f.top()),n=e.isAllInside(c,n.top(),n.top()+m());return k&&n?(h.clear(g),d.some({position:"absolute",left:f.left()+"px",top:f.top()+"px"})):d.none()})};return{forget:function(a){h.clear(a)},update:function(a,
c,d,e,f,g){m(a,c,d,e,f,g).orThunk(function(){return n(a,c,d,e,f,g)}).each(function(a){b.setAll(e,a)})},state:function(a){return h.get(a)},set:function(a,b){h.set(a,b.position(),b.left(),b.top())}}});l("ts","zi zj zk 7 t 58 4a 4b 2p 3o".split(" "),function(c,e,d,a,b,g,f,h,k,m){return{none:function(b,c){var d=f.create({dragend:g([]),moved:g([])});return{blocker:a.die("no blocker"),setState:a.noop,getState:a.constant({}),init:function(a,b){k.setAll(c,{left:a+"px",top:b+"px",position:"absolute"});d.trigger.moved()},
update:a.noop,destroy:a.noop,events:d.registry}},except:function(b){return function(p,r){var q=c(r,b.join(",")),s=f.create({dragend:h([],q.events.dragend),moved:g([])});q.events.relocate.bind(function(a){var b=a.x(),c=a.y(),f=a.deltaX();a=a.deltaY();b=e.move(p,r,b,c,f,a);k.setAll(r,b);"absolute"!==b.position&&d.forget(r)});q.events.dragend.bind(function(){s.trigger.moved()});return{blocker:q.blocker,setState:function(a){k.setAll(r,{position:a.position(),left:a.x()+"px",top:a.y()+"px"})},getState:function(){var b=
m.viewport(r),c=k.get(r,"position");return{x:b.left,y:b.top,position:a.constant(c)}},init:function(a,b){k.setAll(r,{left:a+"px",top:b+"px",position:"absolute"});s.trigger.moved()},update:function(){e.forget(r)},destroy:function(){q.destroy()},events:s.registry}}}}});l("tt","6 t 4a 4b 2p 3o 2t 1u e9".split(" "),function(c,e,d,a,b,g,f,h){return{register:function(f,m,n,p){f.container();var r=n(f,m),q=p(f,m);n=d.create({dragend:a([],r.events.dragend),appear:a(["element"],q.events.appear),disappear:a(["element"],
q.events.disappear)});r.events.moved.bind(function(){t();s=!0});q.events.scrolled.bind(function(){t()});var s=!1,t=function(){r.update();q.update();var a=f.lazyTheatre(),c=g.absolute(m),a=h.max(0,a.x()+a.w()-c.left());b.set(m,"max-width",a+"px")};return{blocker:r.blocker,setState:function(a){r.setState(a);q.setState(a);t();s=!0},state:function(){if(!s)return e.none();var a=c.deepMerge(r.getState(),q.getState());return e.some(a)},init:function(a,b){r.init(a,b);t()},update:t,destroy:function(){q.destroy();
r.destroy()},events:n.registry}}}});l("tu","zk zl zm 7 58 4a 3y 2a 2b".split(" "),function(c,e,d,a,b,g,f,h,k){return{transitions:function(m,n){var p=m.container(),r=k.defaultView(n),q=g.create({appear:b(["element"]),disappear:b(["element"]),scrolled:b([])}),s=f.bind(r,"scroll",function(){q.trigger.scrolled()});return{update:function(){var a=m.lazyTheatre(),b=e.box(p);if(d.isInside(a,b.y(),b.bottom())){q.trigger.appear(n);var f=m.graph(),g=k.owner(p),g=h.get(g);c.update(f,a,b,n,g,m.lazyHeight)}else q.trigger.disappear(n)},
destroy:function(){s.unbind()},setState:function(b){b.transition().each(a.curry(c.set,n))},getState:function(){return{transition:a.constant(c.state(n))}},events:q.registry}}}});l("12x",["2w","3n","2a","2b"],function(c,e,d,a){var b=c.immutable("fixed","loc");return function(c){var f=function(b,c,f){b=a.owner(b);b=d.get(b);c-=b.left();f-=b.top();return e(c,f)},h=function(b,c,f){b=a.owner(b);b=d.get(b);c+=b.left();f+=b.top();return e(c,f)};return{locationToFixed:f,fixedToLocation:h,absoluteToFixed:function(b,
f,h){var p=c();b=a.owner(b);b=d.get(b);f-=b.left();return e(f,p.top()-h)},locationToAbsolute:function(a,b,d){a=c();return e(b,d).translate(-a.left(),-a.top())},absoluteToLocation:function(a,b,d){a=c();return e(b,d).translate(a.left(),a.top())},fromFixed:function(a,c,d){var f=e(c,d);a=h(a,c,d);return b(f,a)},fromLocation:function(a,c,d){a=f(a,c,d);c=e(c,d);return b(a,c)},boundToFixed:function(a,b,c,d,f,g,h){b=c<a.x()?a.fx():c>a.x()+a.w()?a.fx()+a.w():f;a=d<a.y()?a.fy():d+h>a.y()+a.h()?a.fy()+a.h()-
h:g;return e(b,a)}}}});l("zn",["12x","7"],function(c,e){return function(d,a,b,g){a=c(a);return{lazyTheatre:d,graph:e.constant(a),lazyHeight:b,container:e.constant(g)}}});l("tv","zn 7 3n 5a 3o 2a 33 2b 36".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n){var p=m.isInline()?m.element():h.parent(m.placeholder()).getOr(m.placeholder());return c(function(){var a=g.get();return{x:a.left,y:a.top,w:e.constant(k.innerWidth),h:e.constant(k.innerHeight),fx:e.constant(0),fy:e.constant(0)}},function(){return m.isInline()?
d(0,0):b.absolute(p)},function(){var b=f.descendant(n,".ephox-chameleon-toolbar").getOr(n);return a.getOuter(b)},p)}});l("6d","59 2o 2p 3o 2b 2t".split(" "),function(c,e,d,a,b,g){var f=c.resolve("drag-show"),h=c.resolve("fade-container");return{width:function(c,e){return d.getRaw(c,"max-width").fold(function(){return b.owner(e).dom().defaultView.innerWidth-a.absolute(e).left()},function(a){return parseInt(a,10)})},updateWidth:function(a,b,c){b=0===c.extra().length?c.withinWidth():c.withinWidth()+
g.getOuter(b.group());0<b&&d.set(a,"width",b+"px")},clearWidth:function(a){d.remove(a,"width")},offsetFrom:function(b,c,d,e){c=void 0!==e.toolbar.offset?e.toolbar.offset:{left:0,top:-1*d};d=a.absolute(b.element());b=b.isInline()?{left:d.left(),top:d.top()}:{left:0,top:0};return{left:b.left+c.left,top:b.top+c.top}},initFade:function(a,b){e.add(b,f)},fadeIn:function(a,b){e.remove(a,h);e.add(b,f)},fadeOut:function(a,b){e.remove(b,f);e.add(a,h)}}});l("lq","8e ts tt tu c 52 7 59 tv 6d 4a 4b 2o 4e 2p 5a 2q 3c".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v){return function(w,z){var x=g.div();s.set(x,"position","relative");r.add(x,h.resolve("dragging-container"));var y=g.div();r.add(y,h.resolve("draggable-container"));var l=w.isInline()?z:y,B=k(w,l,y),C=a.transitions,D=e.except([".ephox-pastry-button","."+h.resolve("banner-buttons")+" *",".ephox-polish-ui-container",".ephox-polish-socket"]),F=d.register(B,l,D,C);m.initFade(l,y);F.events.appear.bind(f.curry(m.fadeIn,l,y));F.events.disappear.bind(f.curry(m.fadeOut,
l,y));r.add(y,h.resolve("layer-above-editor"));q.add(F.blocker(),[h.resolve("above-outside"),h.resolve("dragging")]);var E=g.span();c.hidden(E,!0);q.add(E,[h.resolve("toolbar-drag-handle"),h.resolve("general-drag-handle"),"ephox-textbox-font",h.resolve("icon")]);B=b.detect();B.browser.isIE()&&10===B.browser.version.major&&r.add(E,h.resolve("ie10"));return{shouldRefresh:f.constant(!0),updateWidth:f.curry(m.updateWidth,l),clearWidth:f.curry(m.clearWidth,l),build:function(a){return[E].concat(a)},width:f.curry(m.width,
l),init:function(a,b,c,d,e){var f=s.preserve(l,function(){s.set(l,"visibility","hidden");s.remove(l,"display");a.refresh();return t.get(a.element())});e.toolbar.drag.fold(function(){var a=m.offsetFrom(w,l,f,d);F.init(a.left,a.top)},F.setState);v.append(y,[a.element(),b.element()])},update:function(){F.update()},state:function(){return{toolbar:{drag:F.state()}}},integrate:function(a,b,c,d){u.append(y,b.element());w.isInline()?(v.append(x,[y,d]),u.append(z,x)):v.append(z,[y,d])},destroy:function(){F.destroy()},
events:n.create({changed:p([],F.events.dragend)}).registry}}});l("lr","ts tt tu 7 t 59 tv 6d 4a 4b 2o 2p l 5a 2q 3c".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){return function(u,v){var w=r.fromTag("div");p.set(w,"position","relative");n.add(w,g.resolve("floating-container"));var z=r.fromTag("div");n.add(z,g.resolve("draggable-container"));var x=u.isInline()?v:z,y=f(u,x),l=e.register(y,x,c.none,d.transitions);h.initFade(x,z);l.events.appear.bind(a.curry(h.fadeIn,x,z));l.events.disappear.bind(a.curry(h.fadeOut,
x,z));n.add(z,g.resolve("layer-above-editor"));return{shouldRefresh:a.constant(!0),updateWidth:a.curry(h.updateWidth,x),clearWidth:a.curry(h.clearWidth,x),build:a.identity,width:a.curry(h.width,x),init:function(a,b,c,d,e){c=p.preserve(x,function(){p.set(x,"visibility","hidden");p.remove(x,"display");a.refresh();return q.get(a.element())});d=h.offsetFrom(u,x,c,d);l.init(d.left,d.top);t.append(z,[a.element(),b.element()])},update:function(){l.update()},state:a.constant({toolbar:{drag:b.none()}}),integrate:function(a,
b,c,d){s.append(z,b.element());u.isInline()?(t.append(w,[z,d]),s.append(v,w)):t.append(v,[z,d])},destroy:function(){l.destroy()},events:k.create({changed:m([],l.events.dragend)}).registry}}});l("cz",["lp","lq","lr"],function(c,e,d){return{setup:function(a,b,g,f){return(!0===g.toolbar.draggable?e:void 0!==g.toolbar.offset||a.isInline()?d:c)(a,b)}}});l("77","ao c 4d 52 7 53 7e 1h cw 59 cx cy b2 cz 1b 2n 2o 4e 2p l 2q 2s 2t".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,z,x,y,l){var B=function(a,
b){a.updateUi(b);var c=[r.editorContainer(),"ephox-textbox-font",m.resolve("layer-editor")];v.add(b,c);s.set(b,"lang",h.get());k.addClasses(b)};return function(h,k,r,s,v,H){var L=e.detect(),I=z.fromTag("div"),J=r.uiContainer(),K=a.div();B(s,I);u.add(I,m.resolve("editor-main"));!0===v.autoresize&&u.add(I,d.autoresize());h.isInline()||L.deviceType.isTouch()?x.append(I,J):(B(s,K),u.add(K,m.resolve("external-ui")),s=t.body(),x.append(s,K),x.append(K,J));var N=q.setup(h,I,v,H),M=c.toolbar(N,f.translate);
!1===v.toolbar.visible&&u.add(I,"ephox-polish-no-toolbar");k.events.toolbar.bind(M.enter);M.events.exit.bind(h.focus);var O=n(),S=a.div();u.add(S,m.resolve("socket"));N.integrate(I,M,O,S);p.build(I,v.sideBar,v.bottomBar);var P=h.isInline()?function(){w.set(O.element(),"min-width",l.getOuter(h.element())+"px")}:b.noop;h.events.paint.bind(function(a){M.repaint();r.refresh();P()});N.events.changed.bind(function(){M.refresh()});return{element:b.constant(I),socket:function(a){a.connect(S)},viewport:b.constant(S),
uiContainerParent:b.constant(K),connect:function(a){x.append(a,I);g.detect(I);return!0},destroy:function(){M.destroy();N.destroy();O.destroy();y.remove(I);y.remove(K)},toolbar:M,position:function(){P();N.init(M,O,S,v,H)},refresh:function(){N.update();M.refresh()},banners:O.element,displayBanner:O.display,hideBanner:O.hide,state:N.state}}});l("5c","a c 1r 7 t 75 76 77 78 79 l".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a){a=m.absolute(a);var b=m.view();a=g.intersect(a,b);return k(a.x(),
a.y(),a.width(),a.height())};return{build:function(a,b,c,d,e,g,k,m){var n=h(a,b,c,g,k,m),p=d.tabbed(n);p.init();return{element:n.element,socket:n.socket,viewport:n.viewport,uiContainerParent:n.uiContainerParent,init:function(b,d,h){d=p.config(a.isInline(),d,e,h);f.setup(n,g,a,b,c,d);p.loaded()},connect:n.connect,destroy:function(){n.destroy();p.destroy()},displayBanner:n.displayBanner,hideBanner:n.hideBanner,position:n.position,refresh:n.refresh,tabstrip:n.toolbar,state:n.state}},bounds:function(){var f=
function(a){var e=function(){return b.from(a.bounds()).filter(d.isPrototypeOf).map(n.fromDom).map(p).getOrThunk(m.view)};return c.isFunction(a.bounds)?e:m.view};return e.detect().deviceType.isTouch()?a.constant(m.view):f}()}});l("41",["t","p","5b","5c"],function(c,e,d,a){return{settings:function(b){return{onprem:!0,blocktag:{styles:[{rule:"p"},{rule:"h1"},{rule:"h2"},{rule:"h3"},{rule:"h4"},{rule:"div"},{rule:"pre"}],bundled:!0},image:{bundled:!0},imageEdit:{bundled:!0},imageupload:{immediate:!1,
bundled:!1},content:{css:b+"/css",tabindex:null,stylesheets:[],documentStyles:"",prettyprint:!0,autoresize:!1},ui:{layout:a,isFullScreen:!1,toolbar:{draggable:!1},locale:{},editorName:e.value("debug"),bounds:null,showHelpHint:!1},shortcuts:{features:!0},spelling:{bundled:!0,autocorrect:!0,scanView:!0,multilingual:!0,menu:!0},specialchar:{bundled:!0},fileupload:{bundled:!0,allowLocalImages:!0},horizontalrule:{bundled:!0},media:{bundled:!0},mentions:{bundled:!1},registration:{bundled:!1},help:{baseUrl:b+
"/html",integration:{},bundled:!0},draganddrop:{bundled:!0},wordcount:{bundled:!0},formatting:{bundled:!0},alignindent:{bundled:!0},directionality:{bundled:!0},parlance:{bundled:!0,languages:"en_us en_gb es fr de pt zh".split(" ")},font:{faces:[],bundled:!0},lists:{bundled:!0},link:{bundled:!0},linkvalidator:{bundled:!1},removeformat:{bundled:!0},fullscreen:{bundled:!0},editorcontext:{bundled:!0},macros:{whitelist:c.none(),bundled:!0},highlighter:{external:[],bundled:!0},table:{bundled:!0},contextmenu:{bundled:!0},
project:{apiKey:null},smartclipboard:{bundled:!0,copy:{},paste:{forceText:!1,baseUrl:b+"/js",swf:b+"/flash/textboxpaste.swf",officeStyles:"prompt",htmlStyles:"merge",allowLocalImages:!0,enableFlashImport:!0}},resize:{bundled:!0},platform:{toolbar:{items:d,contextual:["table-tools","image-tools"]},allowLocalImages:!0,fillscreen:!1},codeview:{bundled:!0,showButton:!0,mode:"pencil",css:b+"/css",js:b+"/js"},findreplace:{bundled:!0},accessibility:{bundled:!0},plaincodeview:{bundled:!0},embed:{inlineStyles:!0,
bundled:!1}}},state:function(){return{spelling:{words:{},language:c.none()},undo:{initial:{raw:"",marked:""},undo:[],redo:[]},profile:{spelling:!1,nativeSpelling:!0,autocorrect:!0,capitalisation:!1,linkpreviews:!1},content:{raw:"",marked:""},ui:{toolbar:{drag:c.none()}},macros:{customs:{}},filters:{customs:[]},laundry:{dirty:!1},linkvalidator:{ignore:[],cache:{}},embed:{cache:{}}}}}});l("42",["t","46","58","4a"],function(c,e,d,a){return function(b){var g=c.none(),f=function(a){return function(){var c=
b.get()[a];if(null===c||void 0===c)throw"can't find instance method: "+a;return c.apply(null,arguments)}},h=function(){var a=g.getOrDie("Cannot reconnect the editor before it has been connected the first time.");f("connect")(a)&&k.trigger.connected()},k=a.create({connected:d([])});return e.external({activateInline:f("activateInline"),deactivateInline:f("deactivateInline"),content:f("content"),keyboard:f("keyboard"),smartview:f("smartview"),macros:f("macros"),ui:f("ui"),filter:f("filter"),undo:f("undo"),
operations:f("operations"),getMode:f("getMode"),element:f("element"),connect:function(a){g=c.some(a);h()},reconnect:h,focus:f("focus"),getContent:f("getContent"),setContent:f("setContent"),insertHtmlAtCursor:f("insertHtmlAtCursor"),state:f("state"),communication:f("communication"),uploader:f("uploader"),isDirty:f("isDirty"),setDirty:f("setDirty"),isPrettyPrinting:f("isPrettyPrinting"),events:k.registry})}});l("ou",["b","t","2w"],function(c,e,d){var a=d.immutable("item","mode");d=function(c,d,e,f){var g=
void 0!==f?f:b;return c.property().parent(d).map(function(b){return a(b,g)})};var b=function(b,c,d,e){var f=void 0!==e?e:g;return d.sibling(b,c).map(function(b){return a(b,f)})},g=function(b,c,d,e){var f=void 0!==e?e:g;b=b.property().children(c);return d.first(b).map(function(b){return a(b,f)})},f=[{current:d,next:b,fallback:e.none()},{current:b,next:g,fallback:e.some(d)},{current:g,next:g,fallback:e.some(b)}],h=function(a,b,d,g,r){var q=c.find(void 0!==r?r:f,function(a){return a.current===d});return void 0===
q||null===q?e.none():q.current(a,b,g,q.next).orThunk(function(){return q.fallback.bind(function(c){return h(a,b,c,g)})})};return{backtrack:d,sidestep:b,advance:g,go:h}});l("ov",["t"],function(c){return{left:function(){return{sibling:function(c,d){return c.query().prevSibling(d)},first:function(e){return 0<e.length?c.some(e[e.length-1]):c.none()}}},right:function(){return{sibling:function(c,d){return c.query().nextSibling(d)},first:function(e){return 0<e.length?c.some(e[0]):c.none()}}}}});l("ot",["t",
"ou","ov"],function(c,e,d){var a=function(b,d,f,h,k,m){return e.go(b,d,h,k).bind(function(d){return m(d.item())?c.none():f(d.item())?c.some(d.item()):a(b,d.item(),f,d.mode(),k,m)})};return{left:function(b,c,f,h){return a(b,c,f,e.sidestep,d.left(),h)},right:function(b,c,f,h){return a(b,c,f,e.sidestep,d.right(),h)}}});l("j3",["7","ot","ou","ov"],function(c,e,d,a){var b=function(a,b){return 0===a.property().children(b).length},g=function(a,b,c,d){return e.left(a,b,c,d)},f=function(a,b,c,d){return e.right(a,
b,c,d)};return{before:function(a,d,e){return g(a,d,c.curry(b,a),e)},after:function(a,d,e){return f(a,d,c.curry(b,a),e)},seekLeft:g,seekRight:f,walkers:function(){return{left:a.left,right:a.right}},walk:function(a,b,c,e,f){return d.go(a,b,c,e,f)},backtrack:d.backtrack,sidestep:d.sidestep,advance:d.advance}});l("jq",["6s","j3"],function(c,e){var d=c();return{gather:function(a,b,c){return e.gather(d,a,b,c)},before:function(a,b){return e.before(d,a,b)},after:function(a,b){return e.after(d,a,b)},seekLeft:function(a,
b,c){return e.seekLeft(d,a,b,c)},seekRight:function(a,b,c){return e.seekRight(d,a,b,c)},walkers:function(){return e.walkers()},walk:function(a,b,c,f){return e.walk(d,a,b,c,f)}}});l("69","1b l 2q 3c 2s 2b".split(" "),function(c,e,d,a,b,g){var f=function(a){return e.fromDom(a.dom().cloneNode(!0))},h=function(a,b){var d=e.fromTag(b),f=c.clone(a);c.setAll(d,f);return d};return{shallow:function(a){return e.fromDom(a.dom().cloneNode(!1))},shallowAs:h,deep:f,copy:function(b,c){var d=h(b,c),e=g.children(f(b));
a.append(d,e);return d},mutate:function(c,e){var f=h(c,e);d.before(c,f);var p=g.children(c);a.append(f,p);b.remove(c);return f}}});l("lu","b p jq l 2q 3c 21 2s 69 4h 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return{convertToHeading:function(d,f){var q=n.owner(d),q=a.fromTag(f,q.dom()),s=n.children(d),s=c.map(s,k.deep);g.append(q,s);s=m.descendants(q,"b,strong");c.each(s,h.unwrap);b.before(d,q);h.remove(d);return e.value(q)},joinLinks:function(a,b){return d.seekLeft(b,function(a){return"a"===
f.name(a)},a).fold(function(){return e.value(b)},function(a){var c=n.children(b);g.append(a,c);h.remove(b);return e.value(a)})}}});l("tw",["7","p"],function(c,e){return function(d){var a=c.compose(e.error,d);return{invalidError:a,different:function(b,c,d,h,k){return 0===c.length?a(h):c===d?a(k):e.value(b)}}}});l("lv",["tw","1b"],function(c,e){return function(d){var a=c(d);return{changeAlt:function(b,c,d,h){var k=e.get(b,"src");return a.different(b,c,k,d,h).map(function(a){e.set(a,"alt",c);return a})}}}});
l("k2",["7","1c"],function(c,e){return function(d,a,b,g){var f=e.eq(d,b)&&a===g;return{startContainer:c.constant(d),startOffset:c.constant(a),endContainer:c.constant(b),endOffset:c.constant(g),collapsed:c.constant(f)}}});l("k6","b 7 2w 5a 3o 2t".split(" "),function(c,e,d,a,b,g){var f=d.immutable("row","y"),h=d.immutable("col","x"),k=function(a){return b.absolute(a).left()+g.getOuter(a)},m=function(a){return b.absolute(a).left()},n=function(a,b){return h(a,m(b))},p=function(a,b){return h(a,k(b))},
r=function(a){return b.absolute(a).top()},q=function(a,b,d){if(0===d.length)return[];var e=c.map(d.slice(1),function(b,c){return b.map(function(b){return a(c,b)})}),f=d[d.length-1].map(function(a){return b(d.length-1,a)});return e.concat([f])};d={delta:e.identity,positions:e.curry(q,function(a,b){return f(a,r(b))},function(b,c){return f(b,r(c)+a.getOuter(c))}),edge:r};var s={delta:e.identity,edge:m,positions:e.curry(q,n,p)};e={delta:function(a,b){return-a},edge:k,positions:e.curry(q,p,n)};return{height:d,
rtl:e,ltr:s}});l("k3",["k6"],function(c){return{ltr:c.ltr,rtl:c.rtl}});l("bp",["k3"],function(c){return function(e){var d=function(a){return e(a).isRtl()?c.rtl:c.ltr};return{delta:function(a,b){return d(b).delta(a,b)},edge:function(a){return d(a).edge(a)},positions:function(a,b){return d(b).positions(a,b)}}}});l("rd","1q 1b 2p l 2q 21 69 2b".split(" "),function(c,e,d,a,b,g,f,h){var k=function(){var c=a.fromTag("td");b.append(c,a.fromTag("br"));return c},m=function(a,b,d){var g=f.copy(a,b);c.each(d,
function(a,b){null===a?e.remove(g,b):e.set(g,b,a)});return g},n=function(a){return a},p=function(b){return function(){return a.fromTag("tr",b.dom())}};return{cellOperations:function(c,e){return{row:p(e),cell:function(e){var f=h.owner(e.element()),f=a.fromTag(g.name(e.element()),f.dom());b.append(f,a.fromTag("br"));d.copy(e.element(),f);d.remove(f,"height");1!==e.colspan()&&d.remove(e.element(),"width");c(e.element(),f);return f},replace:m,gap:k}},paste:function(a){return{row:p(a),cell:k,replace:n,
gap:k}}}});l("jw","k2 7 t bp rd l 2q 2s".split(" "),function(c,e,d,a,b,g,f,h){return{erase:function(a,b,e,p){a=g.fromText("");f.after(b,a);h.remove(b);return d.some(c(a,0,a,0))},execute:function(d,f,g,h){return function(r,q,s){var t=h(),u=r.doc().getOrDie();r=a(d.directionAt);u=b.cellOperations(g,u);return f(t,q,s,u,r,e.noop,e.noop).bind(function(a){return a.cursor().map(function(a){return c(a,0,a,0)})})}}}});l("bo",["7","t","3n","l","3o"],function(c,e,d,a,b){return{only:function(b){var f=e.from(b.dom().documentElement).map(a.fromDom).getOr(b);
return{parent:c.constant(f),view:c.constant(b),origin:c.constant(d(0,0))}},detached:function(a,d){var e=c.curry(b.absolute,d);return{parent:c.constant(d),view:c.constant(a),origin:e}}}});l("bg",["bo"],function(c){var e=function(d,a,b){return d.isInline()?c.detached(d.element(),a.uiContainer()):c.only(b)};return{get:e,fromEngine:function(c){var a=c.content(),b=c.smartview();return a.doc().map(function(c){return e(a,b,c)})}}});l("go",["2w"],function(c){var e=c.immutable("width","height"),d=c.immutable("rows",
"columns"),a=c.immutable("row","column"),b=c.immutable("x","y"),g=c.immutable("element","rowspan","colspan"),f=c.immutable("element","rowspan","colspan","isNew"),h=c.immutable("element","rowspan","colspan","row","column"),k=c.immutable("element","cells","section"),m=c.immutable("element","isNew"),n=c.immutable("element","cells","section","isNew"),p=c.immutable("cells","section"),r=c.immutable("details","section");c=c.immutable("startRow","startCol","finishRow","finishCol");return{dimensions:e,grid:d,
address:a,coords:b,extended:h,detail:g,detailnew:f,rowdata:k,elementnew:m,rowdatanew:n,rowcells:p,rowdetails:r,bounds:c}});l("gp",["b","7","m","2b"],function(c,e,d,a){var b=function(e,f,h){return c.bind(a.children(e),function(a){return d.is(a,f)?h(a)?[a]:[]:b(a,f,h)})};return{firstLayer:function(a,c){return b(a,c,e.constant(!0))},filterFirstLayer:b}});l("bq","b 7 t go gp 1b 21 4h 33 m 2b e9".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=function(a,b,g){var h=void 0!==g?g:e.constant(!1);return h(b)?
d.none():c.contains(a,f.name(b))?d.some(b):k.ancestor(b,a.join(","),function(a){return m.is(a,"table")||h(a)})},q=function(a,b){return n.parent(b).map(function(b){return h.children(b,a)})},s=e.curry(q,"th,td"),q=e.curry(q,"tr"),t=function(a,b){return p(g.get(a,b),10)};return{cell:function(a,b){return r(["td","th"],a,b)},firstCell:function(a){return k.descendant(a,"th,td")},cells:function(a){return b.firstLayer(a,"th,td")},neighbourCells:s,table:function(a,b){return k.closest(a,"table",b)},row:function(a,
b){return r(["tr"],a,b)},rows:function(a){return b.firstLayer(a,"tr")},notCell:function(a,b){return r(["caption","tr","tbody","tfoot","thead"],a,b)},neighbourRows:q,attr:t,grid:function(b,c,d){c=t(b,c);b=t(b,d);return a.grid(c,b)}}});l("r7","b go bq 1b 21 2b".split(" "),function(c,e,d,a,b,g){return{fromTable:function(f){f=d.rows(f);return c.map(f,function(f){var k=g.parent(f).bind(function(a){a=b.name(a);return"tfoot"===a||"thead"===a||"tbody"===a?a:"tbody"}),m=c.map(d.cells(f),function(b){var c=
a.has(b,"rowspan")?parseInt(a.get(b,"rowspan"),10):1,d=a.has(b,"colspan")?parseInt(a.get(b,"colspan"),10):1;return e.detail(b,c,d)});return e.rowdata(f,m,k)})},fromPastedRows:function(b,g){return c.map(b,function(b){var f=c.map(d.cells(b),function(b){var c=a.has(b,"rowspan")?parseInt(a.get(b,"rowspan"),10):1,d=a.has(b,"colspan")?parseInt(a.get(b,"colspan"),10):1;return e.detail(b,c,d)});return e.rowdata(b,f,g.section())})}}});l("r8",["b","7","t","go","1u"],function(c,e,d,a,b){var g=function(a,b){var d=
c.bind(a.all(),function(a){return a.cells()});return c.filter(d,b)};return{generate:function(d){var g={},k=[],m=0,n=0;c.each(d,function(d,e){var f=[];c.each(d.cells(),function(c,d){for(var k=0;void 0!==g[e+","+k];)k++;for(var p=a.extended(c.element(),c.rowspan(),c.colspan(),e,k),w=0;w<c.colspan();w++)for(var z=0;z<c.rowspan();z++){var x=e+z,y=k+w;g[x+","+y]=p;m=b.max(m,x+1);n=b.max(n,y+1)}f.push(p)});k.push(a.rowdata(d.element(),f,d.section()))});d=a.grid(m,n);return{grid:e.constant(d),access:e.constant(g),
all:e.constant(k)}},getAt:function(a,b,c){a=a.access()[b+","+c];return void 0!==a?d.some(a):d.none()},findItem:function(a,b,c){a=g(a,function(a){return c(b,a.element())});return 0<a.length?d.some(a[0]):d.none()},filterItems:g,justCells:function(a){a=c.map(a.all(),function(a){return a.cells()});return c.flatten(a)}}});l("ty",["b","t","k","1u"],function(c,e,d,a){return{repeat:function(a,c){for(var d=[],e=0;e<a;e++)d.push(c(e));return d},range:function(a,c){for(var d=[],e=a;e<c;e++)d.push(e);return d},
unique:function(a,d){var e=[];c.each(a,function(c,k){k<a.length-1&&!d(c,a[k+1])?e.push(c):k===a.length-1&&e.push(c)});return e},deduce:function(b,g){if(0>g||g>=b.length-1)return e.none();var f=b[g].fold(function(){var a=c.reverse(b.slice(0,g));return d.findMap(a,function(a,b){return a.map(function(a){return{value:a,delta:b+1}})})},function(a){return e.some({value:a,delta:0})}),h=b[g+1].fold(function(){var a=b.slice(g+1);return d.findMap(a,function(a,b){return a.map(function(a){return{value:a,delta:b+
1}})})},function(a){return e.some({value:a,delta:1})});return f.bind(function(b){return h.map(function(c){var d=c.delta+b.delta;return a.abs(c.value-b.value)/d})})}}});l("tx",["b","7","t","r8","ty"],function(c,e,d,a,b){var g=function(a,b,e){var g=a();a=c.find(g,b);return d.from(a).orThunk(function(){return d.from(g[0]).orThunk(e)}).map(function(a){return a.element()})};return{columns:function(d){var h=d.grid(),k=b.range(0,h.columns()),m=b.range(0,h.rows());return c.map(k,function(b){return g(function(){return c.bind(m,
function(c){return a.getAt(d,c,b).filter(function(a){return a.column()===b}).fold(e.constant([]),function(a){return[a]})})},function(a){return 1===a.colspan()},function(){return a.getAt(d,0,b)})})},rows:function(d){var h=d.grid(),k=b.range(0,h.rows()),m=b.range(0,h.columns());return c.map(k,function(b){return g(function(){return c.bind(m,function(c){return a.getAt(d,b,c).filter(function(a){return a.row()===b}).fold(e.constant([]),function(a){return[a]})})},function(a){return 1===a.rowspan()},function(){return a.getAt(d,
b,0)})})}}});l("rr","bq 1b 2p 5a 21 2t w 1u e9".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b){d.set(a,"width",b+"px")},n=function(a,b){d.set(a,"height",b+"px")},p=function(a,b){return d.getRaw(a,b).getOrThunk(function(){return d.get(a,b)})},r=function(a,b,d,e){var f=c.table(a).map(function(a){a=d(a);return h.floor(b/100*a)}).getOr(b);e(a,f);return f},q=function(a,c,d,e){var g=k(a,10);return f.endsWith(a,"%")&&"table"!==b.name(c)?r(c,g,d,e):g},s=function(a){var b=p(a,"width");return b?
q(b,a,g.get,m):g.get(a)},t=function(b){var c=p(b,"height");return c?q(c,b,a.get,n):a.get(b)},u=function(a,b,c){c=c(a);a=e.has(a,b)?k(e.get(a,b),10):1;return c/a};return{setWidth:m,setHeight:n,getWidth:function(a){return u(a,"colspan",s)},getHeight:function(a){return u(a,"rowspan",t)}}});l("rs",["7","1b","2p","e9"],function(c,e,d,a){var b=function(b,c){return e.has(b,c)&&1<a(e.get(b,c),10)};return{hasColspan:function(a){return b(a,"colspan")},hasRowspan:function(a){return b(a,"rowspan")},minWidth:c.constant(10),
minHeight:c.constant(10),getInt:function(b,c){return a(d.get(b,c),10)}}});l("rp","b 7 tx rr rs ty 2p".split(" "),function(c,e,d,a,b,g,f){var h=function(a,b,c){return f.getRaw(a,b).fold(function(){return c(a)+"px"},function(a){return a})},k=function(b){return h(b,"width",a.getWidth)},m=function(b){return h(b,"height",a.getHeight)},n=function(b){return a.getWidth(b)},p=function(a,f,h,k){a=d.columns(a);var m=c.map(a,function(a){return a.map(f.edge)});return c.map(a,function(a,c){return a.filter(e.not(b.hasColspan)).fold(function(){var a=
g.deduce(m,c);return k(a)},function(a){return h(a)})})},r=function(a){return a.map(function(a){return a+"px"}).getOr("")},q=function(b){return a.getHeight(b)},s=function(a,f,h,k){a=d.rows(a);var m=c.map(a,function(a){return a.map(f.edge)});return c.map(a,function(a,c){return a.filter(e.not(b.hasRowspan)).fold(function(){var a=g.deduce(m,c);return k(a)},function(a){return h(a)})})};return{getRawWidths:function(a,b){return p(a,b,k,r)},getPixelWidths:function(a,c){return p(a,c,n,function(a){return a.getOrThunk(b.minWidth)})},
getPixelHeights:function(a,c){return s(a,c,q,function(a){return a.getOrThunk(b.minHeight)})},getRawHeights:function(a,b){return s(a,b,m,r)}}});l("tz","b 7 4o ty w 1u 1x e9".split(" "),function(c,e,d,a,b,g,f,h){var k=d.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),m=function(a,b,c){a=c.substring(0,c.length-a.length);var d=f(a);return a===d.toString()?b(d):k.invalid(c)},n=function(a){return b.endsWith(a,"%")?m("%",k.percent,a):b.endsWith(a,"px")?m("px",k.pixels,a):k.invalid(a)},
p=function(a,b){return c.map(a,function(a){return n(a).fold(function(){return a},function(a){return a/b*100+"%"},function(a){return a+"%"})})},r=function(a,b,d){var e=d/b;return c.map(a,function(a){return n(a).fold(function(){return a},function(a){return a*e+"px"},function(a){return a/100*d+"px"})})},q=function(b,c){var d=b.fold(function(){return e.constant("")},function(a){return e.constant(a/c+"px")},function(a){return e.constant(a/c+"px")});return a.repeat(c,d)},s=function(a,b,c){return a.fold(function(){return b},
function(a){return r(b,c,a)},function(a){return p(b,c)})},t=function(a,b){var c=g.floor(a);return{value:c+b,remainder:a-c}},u=function(a,b){return n(a).fold(e.constant(a),function(a){return a+b+"px"},function(a){return a+b+"%"})},v=function(a){if(0===a.length)return a;a=c.foldr(a,function(a,b){var c=n(b).fold(function(){return{value:b,remainder:0}},function(a){return t(a,"px")},function(a){return t(a,"%")});return{output:[c.value].concat(a.output),remainder:a.remainder+c.remainder}},{output:[],remainder:0});
var b=a.output;return b.slice(0,b.length-1).concat([u(b[b.length-1],g.round(a.remainder))])};return{validate:n,redistribute:function(a,b,d){d=n(d);a=c.forall(a,function(a){return"0px"===a})?q(d,a.length):s(d,a,b);return v(a)},sum:function(a,b){return 0===a.length?b:c.foldr(a,function(a,b){return n(b).fold(e.constant(0),e.identity,e.identity)+a},0)},toIntegers:v}});l("se","b 7 r7 r8 k6 rp tz rr rs 2p 5a 2t".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=function(a,b,d){c.each(b,function(b){var c=
a.slice(b.column(),b.colspan()+b.column()),c=f.sum(c,k.minWidth());m.set(b.element(),"width",c+d)})},q=function(a,b,d,e){c.each(d,function(b){var c=a.slice(b.row(),b.rowspan()+b.row()),c=f.sum(c,k.minHeight());m.set(b.element(),"height",c+e)});c.each(b,function(b,c){m.set(b.element(),"height",a[c])})},s=function(a){return f.validate(a).fold(e.constant("px"),e.constant("px"),e.constant("%"))};return{setWidth:h.setWidth,getWidth:h.getWidth,setHeight:h.setHeight,getHeight:h.getHeight,redistribute:function(c,
e,h,k){var z=d.fromTable(c),x=a.generate(z),y=x.all(),l=a.justCells(x);e.each(function(a){var b=s(a),d=p.get(c),e=g.getRawWidths(x,k),d=f.redistribute(e,d,a);r(d,l,b);m.set(c,"width",a)});h.each(function(a){var d=s(a),e=n.get(c),h=g.getRawHeights(x,b.height),e=f.redistribute(h,e,a);q(e,y,l,d);m.set(c,"height",a)})}}});l("rf","b 7 t 4n 56 1b 2p e9".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a){var b=g.has(a,"colspan")?h(g.get(a,"colspan"),10):1,c=g.has(a,"rowspan")?h(g.get(a,"rowspan"),10):
1;return{element:e.constant(a),colspan:e.constant(b),rowspan:e.constant(c)}},m=b.exactly(["cell","row","replace","gap"]);return{modification:function(b,c){m(b);var e=a(d.none()),f=void 0!==c?c:k,g=function(a){var c;c=f(a);c=b.cell(c);e.get().isNone()&&e.set(d.some(c));h=d.some({item:a,replacement:c});return c},h=d.none();return{getOrInit:function(a,b){return h.fold(function(){return g(a)},function(c){return b(a,c.item)?c.replacement:g(a)})},cursor:e.get}},transform:function(b,e){return function(f){var g=
a(d.none());m(f);var h=[],k=function(a,b){var e=c.find(h,function(c){return b(c.item,a)});return d.from(e)},u=function(a){var c=f.replace(a,e,{scope:b});h.push({item:a,sub:c});g.get().isNone()&&g.set(d.some(c));return c};return{replaceOrInit:function(a,b){return k(a,b).fold(function(){return u(a)},function(c){return b(a,c.item)?c.sub:u(a)})},cursor:g.get}}},merging:function(b){m(b);var c=a(d.none());return{combine:function(a){c.get().isNone()&&c.set(d.some(a));return function(){var c=b.cell({element:e.constant(a),
colspan:e.constant(1),rowspan:e.constant(1)});f.remove(c,"width");f.remove(a,"width");return c}},cursor:c.get}}}});l("8a",["b","21","b3","2b"],function(c,e,d,a){var b=function(b){return"img"===e.name(b)?1:d.getOption(b).fold(function(){return a.children(b).length},function(a){return a.length})},g=function(a){return d.getOption(a).filter(function(a){return 0!==a.trim().length||-1<a.indexOf("\u00a0")}).isSome()},f=["img","br"];return{getEnd:b,isEnd:function(a,c){return b(a)===c},isStart:function(a,
b){return 0===b},isCursorPosition:function(a){return g(a)||c.contains(f,e.name(a))}}});l("ec",["8a","t","4j","2b"],function(c,e,d,a){var b=function(b,c){var d=function(b){b=a.children(b);for(var g=b.length-1;0<=g;g--){var n=b[g];if(c(n))return e.some(n);n=d(n);if(n.isSome())return n}return e.none()};return d(b)};return{firstCursor:function(a){return d.descendant(a,c.isCursorPosition)},lastCursor:function(a){return b(a,c.isCursorPosition)}}});l("mm",["b"],function(c){var e="body p div article aside figcaption figure footer header nav section ol ul table thead tfoot tbody caption tr td th h1 h2 h3 h4 h5 h6 blockquote pre address".split(" "),
d=function(a,d){var f=a.property().name(d);return c.contains(e,f)},a=function(a,d){return c.contains(["br","img","hr","input"],a.property().name(d))};return{isBlock:d,isList:function(a,d){var e=a.property().name(d);return c.contains(["ol","ul"],e)},isFormatting:function(a,d){var e=a.property().name(d);return c.contains("address pre p h1 h2 h3 h4 h5 h6".split(" "),e)},isHeading:function(a,d){var e=a.property().name(d);return c.contains("h1 h2 h3 h4 h5 h6".split(" "),e)},isContainer:function(a,d){return c.contains("div li td th blockquote body caption".split(" "),
a.property().name(d))},isEmptyTag:a,isFrame:function(a,c){return"iframe"===a.property().name(c)},isInline:function(b,c){return!(d(b,c)||a(b,c))&&"li"!==b.property().name(c)}}});l("fo",["6s","mm"],function(c,e){var d=c();return{isBlock:function(a){return e.isBlock(d,a)},isList:function(a){return e.isList(d,a)},isFormatting:function(a){return e.isFormatting(d,a)},isHeading:function(a){return e.isHeading(d,a)},isContainer:function(a){return e.isContainer(d,a)},isEmptyTag:function(a){return e.isEmptyTag(d,
a)},isFrame:function(a){return e.isFrame(d,a)},isInline:function(a){return e.isInline(d,a)}}});l("rg","b ec fo 1c l 3c 21 4j 2s b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return{merge:function(p){var r=function(a){return c.forall(a,function(a){return"br"===f.name(a)||f.isText(a)&&0===m.get(a).trim().length})},q=function(a){return n.nextSibling(a).each(function(a){if(d.isBlock(a))return!0;if(d.isEmptyTag(a))return"img"===f.name(a)?!1:!0}).getOr(!1)},s=function(c){return e.lastCursor(c).bind(function(e){var g=
q(e);return n.parent(e).map(function(k){var m;(m=!0===g)||(m="li"===f.name(k)||h.ancestor(k,d.isList).isSome()||"br"===f.name(e)||d.isBlock(k)&&!a.eq(c,k));return m?[]:[b.fromTag("br")]})}).getOr([])},t=function(){var a=c.bind(p,function(a){var b=n.children(a);return r(b)?[]:b.concat(s(a))});return 0===a.length?[b.fromTag("br")]:a}();k.empty(p[0]);g.append(p[0],t)}}});l("ke",["9","1a"],function(c,e){var d=c.never,a=c.always,b=function(){return g},g=function(){var f=function(a){return a.isNone()},
g=function(a){return a()},m=function(a){return a},f={fold:function(a,b){return a()},is:d,isSome:d,isNone:a,getOr:m,getOrThunk:g,getOrDie:function(a){throw Error(a||"error: getOrDie called on none.");},or:m,orThunk:g,map:b,ap:b,each:function(){},bind:b,flatten:b,exists:d,forall:a,filter:b,equals:f,equals_:f,toArray:function(){return[]},toString:c.constant("none()")};e.freeze&&e.freeze(f);return f}(),f=function(c){var e=function(){return c},m=function(){return p},n=function(a){return a(c)},p={fold:function(a,
b){return b(c)},is:function(a){return c===a},isSome:a,isNone:d,getOr:e,getOrThunk:e,getOrDie:e,or:m,orThunk:m,map:function(a){return f(a(c))},ap:function(a){return a.fold(b,function(a){return f(a(c))})},each:function(a){a(c)},bind:n,flatten:e,exists:n,forall:n,filter:function(a){return a(c)?p:g},equals:function(a){return a.is(c)},equals_:function(a,b){return a.fold(d,function(a){return b(c,a)})},toArray:function(){return[c]},toString:function(){return"some("+c+")"}};return p};return{some:f,none:b,
from:function(a){return null===a||void 0===a?g:f(a)}}});l("c7",["ke","r","n","x"],function(c,e,d,a){var b=function(){var a=e.prototype.indexOf,b=function(b,c){return a.call(b,c)},c=function(a,b){var c;a:{c=0;for(var d=a.length;c<d;++c)if(a[c]===b)break a;c=-1}return c};return void 0===a?c:b}(),g=function(a,c){return-1<b(a,c)},f=function(a,b){for(var c=a.length,d=new e(c),f=0;f<c;f++)d[f]=b(a[f],f,a);return d},h=function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c,a)},k=function(a,b){for(var c=a.length-
1;0<=c;c--)b(a[c],c,a)},m=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d,a)&&c.push(f)}return c},n=function(a,b){for(var d=0,e=a.length;d<e;d++)if(b(a[d],d,a))return c.some(d);return c.none()},p=e.prototype.push,r=function(a){for(var b=[],c=0,f=a.length;c<f;++c){if(!e.prototype.isPrototypeOf(a[c]))throw new d("Arr.flatten item "+c+" was not an array, input: "+a);p.apply(b,a[c])}return b},q=function(a,b){for(var c=0,d=a.length;c<d;++c)if(!0!==b(a[c],c,a))return!1;return!0},s=e.prototype.slice;
return{map:f,each:h,eachr:k,partition:function(a,b){for(var c=[],d=[],e=0,f=a.length;e<f;e++){var g=a[e];(b(g,e,a)?c:d).push(g)}return{pass:c,fail:d}},filter:m,groupBy:function(a,b){if(0===a.length)return[];for(var c=b(a[0]),d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f],k=b(h);k!==c&&(d.push(e),e=[]);c=k;e.push(h)}0!==e.length&&d.push(e);return d},indexOf:function(a,d){var e=b(a,d);return-1===e?c.none():c.some(e)},foldr:function(a,b,c){k(a,function(a){c=b(c,a)});return c},foldl:function(a,b,c){h(a,
function(a){c=b(c,a)});return c},find:function(a,b){for(var d=0,e=a.length;d<e;d++){var f=a[d];if(b(f,d,a))return c.some(f)}return c.none()},findIndex:n,flatten:r,bind:function(a,b){var c=f(a,b);return r(c)},forall:q,exists:function(a,b){return n(a,b).isSome()},contains:g,equal:function(a,b){return a.length===b.length&&q(a,function(a,c){return a===b[c]})},reverse:function(a){a=s.call(a,0);a.reverse();return a},chunk:function(a,b){for(var c=[],d=0;d<a.length;d+=b){var e=a.slice(d,d+b);c.push(e)}return c},
difference:function(a,b){return m(a,function(a){return!g(b,a)})},mapToObject:function(b,c){for(var d={},e=0,f=b.length;e<f;e++){var g=b[e];d[a(g)]=c(g,e)}return d},pure:function(a){return[a]},sort:function(a,b){var c=s.call(a,0);c.sort(b);return c},range:function(a,b){for(var c=[],d=0;d<a;d++)c.push(b(d));return c}}});l("rh",["c7","go"],function(c,e){var d=function(a,c){return e.rowcells(c,a.section())},a=function(a,c){return a.cells()[c]};return{addCell:function(a,c,e){var h=a.cells(),k=h.slice(0,
c);c=h.slice(c);e=k.concat([e]).concat(c);return d(a,e)},setCells:d,mutateCell:function(a,c,d){a.cells()[c]=d},getCell:a,getCellElement:function(b,c){return a(b,c).element()},mapCells:function(a,d){var f=a.cells(),f=c.map(f,d);return e.rowcells(f,a.section())},cellLength:function(a){return a.cells().length}}});l("u0",["b","7","rh"],function(c,e,d){var a=function(a,b){return c.map(a,function(a){return d.getCell(a,b)})},b=function(a,b){if(0===a.length)return 0;var d=a[0],e=c.findIndex(a,function(a){return!b(d.element(),
a.element())});return-1===e?a.length:e};return{subgrid:function(c,d,h,k){var m=c[d].cells().slice(h),m=b(m,k);c=a(c,h).slice(d);k=b(c,k);return{colspan:e.constant(m),rowspan:e.constant(k)}}}});l("rk",["b","go","u0","r8"],function(c,e,d,a){return{toDetails:function(a,g){var f=c.map(a,function(a,b){return c.map(a.cells(),function(a,b){return!1})});return c.map(a,function(h,k){var m=c.bind(h.cells(),function(c,h){if(!1===f[k][h]){for(var m=d.subgrid(a,k,h,g),q=m.rowspan(),s=m.colspan(),t=k;t<k+q;t++)for(var u=
h;u<h+s;u++)f[t][u]=!0;return[e.detailnew(c.element(),m.rowspan(),m.colspan(),c.isNew())]}return[]});return e.rowdetails(m,h.section())})},toGrid:function(b,c,d){for(var h=[],k=0;k<b.grid().rows();k++){for(var m=[],n=0;n<b.grid().columns();n++){var p=a.getAt(b,k,n).map(function(a){return e.elementnew(a.element(),d)}).getOrThunk(function(){return e.elementnew(c.gap(),!0)});m.push(p)}m=e.rowcells(m,b.all()[k].section());h.push(m)}return h}}});l("u1","b 7 1b l 2q 3c 2s 69 33 2b".split(" "),function(c,
e,d,a,b,g,f,h,k,m){var n=function(a,b,c,e){c===e?d.remove(a,b):d.set(a,b,c)};return{render:function(d,h){var q=[],s=[],t=function(e,h){var r=k.child(d,h).getOrThunk(function(){var c=a.fromTag(h,m.owner(d).dom());b.append(d,c);return c});f.empty(r);var t=c.map(e,function(a){a.isNew()&&q.push(a.element());var d=a.element();f.empty(d);c.each(a.cells(),function(a){a.isNew()&&s.push(a.element());n(a.element(),"colspan",a.colspan(),1);n(a.element(),"rowspan",a.rowspan(),1);b.append(d,a.element())});return d});
g.append(r,t)},u=function(a,b){0<a.length?t(a,b):k.child(d,b).bind(f.remove)},v=[],w=[],z=[];c.each(h,function(a){switch(a.section()){case "thead":v.push(a);break;case "tbody":w.push(a);break;case "tfoot":z.push(a)}});u(v,"thead");u(w,"tbody");u(z,"tfoot");return{newRows:e.constant(q),newCells:e.constant(s)}},copy:function(a){return c.map(a,function(a){var d=h.shallow(a.element());c.each(a.cells(),function(a){var c=h.deep(a.element());n(c,"colspan",a.colspan(),1);n(c,"rowspan",a.rowspan(),1);b.append(d,
c)});return d})}}});l("u2",["1b","2p","l"],function(c,e,d){return{col:function(a,b,g,f,h){var k=d.fromTag("div");e.setAll(k,{position:"absolute",left:b-f/2+"px",top:g+"px",height:h+"px",width:f+"px"});c.set(k,"data-column",a);return k},row:function(a,b,g,f,h){var k=d.fromTag("div");e.setAll(k,{position:"absolute",left:b+"px",top:g-h/2+"px",height:h+"px",width:f+"px"});c.set(k,"data-row",a);return k}}});l("sh",["6u"],function(c){return{resolve:c.create("ephox-snooker").resolve}});l("sg","b tx r7 r8 u2 sh 2o 2p 5a 2q 3o 2s 4h 2t".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=g.resolve("resizer-bar"),t=g.resolve("resizer-rows"),u=g.resolve("resizer-cols"),v=function(a){a=r.descendants(a.parent(),"."+s);c.each(a,p.remove)},w=function(a,b,d){var e=a.origin();c.each(b,function(b,c){b.each(function(b){b=d(e,b);f.add(b,s);m.append(a.parent(),b)})})},z=function(a,c,d,e){w(a,c,function(a,c){var g=b.col(c.col(),c.x()-a.left(),d.top()-a.top(),7,e);f.add(g,u);return g})},x=function(a,c,d,e){w(a,c,function(a,c){var g=b.row(c.row(),d.left()-
a.left(),c.y()-a.top(),e,7);f.add(g,t);return g})},l=function(a,b){var d=r.descendants(a.parent(),"."+s);c.each(d,b)};return{refresh:function(b,c,f,g){v(b,c);var h=d.fromTable(c),h=a.generate(h),m=e.rows(h),p=e.columns(h),h=n.absolute(c);f=0<m.length?f.positions(m,c):[];x(b,f,h,q.getOuter(c));g=0<p.length?g.positions(p,c):[];z(b,g,h,k.getOuter(c))},hide:function(a){l(a,function(a){h.set(a,"display","none")})},show:function(a){l(a,function(a){h.set(a,"display","block")})},destroy:v,isRowBar:function(a){return f.has(a,
t)},isColBar:function(a){return f.has(a,u)}}});l("ri","b 6 7 t k go bq r7 rk r8 u1 k6 sg 1c 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=function(a,d){var e=function(a){return b.findMap(a,function(a){return s.parent(a.element()).map(function(a){var b=s.parent(a).isNone();return g.elementnew(a,b)})}).getOrThunk(function(){return g.elementnew(d.row(),!0)})};return c.map(a,function(a){var b=e(a.details());return g.rowdatanew(b.element(),a.details(),a.section(),b.isNew())})},u=function(a,
b){var c=k.toDetails(a,q.eq);return t(c,b)},v=function(b,d){var e=c.flatten(c.map(b.all(),function(a){return a.cells()})),e=c.find(e,function(a){return q.eq(d,a.element())});return a.from(e)};return{run:function(b,c,e,f,g){return function(t,s,v,l,E){var G=h.fromTable(s),H=m.generate(G);return c(H,v).map(function(a){var c=k.toGrid(H,l,!1);a=b(c,a,q.eq,g(l));c=u(a.grid(),l);return{grid:d.constant(c),cursor:a.cursor}}).fold(function(){return a.none()},function(b){var c=n.render(s,b.grid());e(b.grid(),
E);f(s);r.refresh(t,s,p.height,E);return a.some({cursor:b.cursor,newRows:c.newRows,newCells:c.newCells})})}},toDetailList:u,onCell:function(a,b){return f.cell(b.element()).bind(function(b){return v(a,b)})},onCells:function(d,e){var g=c.map(e.selection(),function(a){return f.cell(a).bind(function(a){return v(d,a)})}),g=b.cat(g);return 0<g.length?a.some(g):a.none()},onPaste:function(a,b){return f.cell(b.element()).bind(function(c){return v(a,c).map(function(a){return e.merge(a,{generators:b.generators,
clipboard:b.clipboard})})})},onPasteRows:function(d,g){var h=c.map(g.selection(),function(a){return f.cell(a).bind(function(a){return v(d,a)})}),h=b.cat(h);return 0<h.length?a.some(e.merge({cells:h},{generators:g.generators,clipboard:g.clipboard})):a.none()},onMergable:function(a,b){return b.mergable()},onUnmergable:function(a,b){return b.unmergable()}}});l("u3","b 7 p go rh ty r n 1u".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(b,d){return c.map(b,function(){return a.elementnew(d.cell(),
!0)})},n=function(a,c,d){return a.concat(g.repeat(c,function(c){return b.setCells(a[a.length-1],m(a[a.length-1].cells(),d))}))},p=function(a,d,e){return c.map(a,function(a){return b.setCells(a,a.cells().concat(m(g.range(0,d),e)))})};return{measure:function(a,c,f){if(a.row()>=c.length||a.column()>b.cellLength(c[0]))return d.error("invalid start address out of table bounds, row: "+a.row()+", column: "+a.column());c=c.slice(a.row());a=c[0].cells().slice(a.column());var g=b.cellLength(f[0]);return d.value({rowDelta:e.constant(c.length-
f.length),colDelta:e.constant(a.length-g)})},measureWidth:function(a,c){var d=b.cellLength(a[0]),f=b.cellLength(c[0]);return{rowDelta:e.constant(0),colDelta:e.constant(d-f)}},tailor:function(a,b,c){var d=0>b.colDelta()?p:e.identity,f=0>b.rowDelta()?n:e.identity;a=d(a,k.abs(b.colDelta()),c);return f(a,k.abs(b.rowDelta()),c)}}});l("rl",["b","t","go","rh"],function(c,e,d,a){var b=function(a,b){return c.foldl(a,function(a,d){return c.exists(a,function(a){return b(a.element(),d.element())})?a:a.concat([d])},
[])};return{merge:function(b,c,e,k){if(0===b.length)return b;for(e=c.startRow();e<=c.finishRow();e++)for(var m=c.startCol();m<=c.finishCol();m++)a.mutateCell(b[e],m,d.elementnew(k(),!1));return b},unmerge:function(b,c,e,k){for(var m=!0,n=0;n<b.length;n++)for(var p=0;p<a.cellLength(b[0]);p++){var r=a.getCellElement(b[n],p),r=e(r,c);!0===r&&!1===m?a.mutateCell(b[n],p,d.elementnew(k(),!0)):!0===r&&(m=!1)}return b},splitRows:function(g,f,h,k){if(0<f&&f<g.length){var m=g[f-1].cells(),m=b(m,h);c.each(m,
function(b){for(var c=e.none(),m=f;m<g.length;m++)for(var q=0;q<a.cellLength(g[0]);q++){var s=g[m].cells()[q];h(s.element(),b.element())&&(c.isNone()&&(c=e.some(k())),c.each(function(b){a.mutateCell(g[m],q,d.elementnew(b,!0))}))}})}return g}}});l("rj",["7","go","u3","rh","rl"],function(c,e,d,a,b){return{merge:function(g,f,h,k,m){return d.measure(g,f,h).map(function(n){n=d.tailor(f,n,k);for(var p=g.row(),r=g.column(),q=h.length,s=a.cellLength(h[0]),q=p+q,s=r+s,t=p;t<q;t++)for(var u=r;u<s;u++){var v=
n,w=t,z=u,x=m,l=a.getCell(v[w],z),x=c.curry(x,l.element()),l=v[w];1<v.length&&1<a.cellLength(l)&&(0<z&&x(a.getCellElement(l,z-1))||z<l.length-1&&x(a.getCellElement(l,z+1))||0<w&&x(a.getCellElement(v[w-1],z))||w<v.length-1&&x(a.getCellElement(v[w+1],z)))&&b.unmerge(n,a.getCellElement(n[t],u),m,k.cell);v=a.getCellElement(h[t-p],u-r);v=k.replace(v);a.mutateCell(n[t],u,e.elementnew(v,!0))}return n})},insert:function(a,c,e,k,m){b.splitRows(c,a,m,k.cell);m=d.measureWidth(e,c);e=d.tailor(e,m,k);m=d.measureWidth(c,
e);c=d.tailor(c,m,k);return c.slice(0,a).concat(e).concat(c.slice(a,c.length))}}});l("rm",["b","go","rh"],function(c,e,d){return{insertRowAt:function(a,b,c,f,h){var k=a.slice(0,b),m=a.slice(b);c=d.mapCells(a[c],function(c,g){return 0<b&&b<a.length&&f(d.getCellElement(a[b-1],g),d.getCellElement(a[b],g))?d.getCell(a[b],g):e.elementnew(h(c.element(),f),!0)});return k.concat([c]).concat(m)},insertColumnAt:function(a,b,g,f,h){return c.map(a,function(a){var c=0<b&&b<d.cellLength(a)&&f(d.getCellElement(a,
b-1),d.getCellElement(a,b))?d.getCell(a,b):e.elementnew(h(d.getCellElement(a,g),f),!0);return d.addCell(a,b,c)})},splitCellIntoColumns:function(a,b,g,f,h){var k=g+1;return c.map(a,function(a,c){var p=c===b?e.elementnew(h(d.getCellElement(a,g),f),!0):d.getCell(a,g);return d.addCell(a,k,p)})},splitCellIntoRows:function(a,b,c,f,h){var k=b+1,m=a.slice(0,k),k=a.slice(k);a=d.mapCells(a[b],function(a,b){return b===c?e.elementnew(h(a.element(),f),!0):a});return m.concat([a]).concat(k)},deleteRowsAt:function(a,
b,c){return a.slice(0,b).concat(a.slice(c+1))},deleteColumnsAt:function(a,b,d){a=c.map(a,function(a){var c=a.cells().slice(0,b).concat(a.cells().slice(d+1));return e.rowcells(c,a.section())});return c.filter(a,function(a){return 0<a.cells().length})}}});l("rn",["b","go","rh"],function(c,e,d){var a=function(a,b,g,m){var n=function(a){return c.exists(b,function(b){return g(a.element(),b.element())})};return c.map(a,function(a){return d.mapCells(a,function(a){return n(a)?e.elementnew(m(a.element(),g),
!0):a})})},b=function(a,b,c,e){return void 0!==d.getCellElement(a[b],c)&&0<b&&e(d.getCellElement(a[b-1],c),d.getCellElement(a[b],c))},g=function(a,b,c){return 0<b&&c(d.getCellElement(a,b-1),d.getCellElement(a,b))};return{replaceColumn:function(e,h,k,m){var n=c.bind(e,function(a,c){return b(e,c,h,k)||g(a,h,k)?[]:[d.getCell(a,h)]});return a(e,n,k,m)},replaceRow:function(d,e,k,m){var n=d[e],p=c.bind(n.cells(),function(a,c){return b(d,e,c,k)||g(n,c,k)?[]:[a]});return a(d,p,k,m)}}});l("u4",[],function(){var c=
function(c){return{fold:c}};return{none:function(){return c(function(c,d,a,b,g){return c()})},only:function(e){return c(function(c,a,b,g,f){return a(e)})},left:function(e,d){return c(function(a,b,c,f,h){return c(e,d)})},middle:function(e,d,a){return c(function(b,c,f,h,k){return h(e,d,a)})},right:function(e,d){return c(function(a,b,c,f,h){return h(e,d)})}}});l("ro",["b","7","u4","1u"],function(c,e,d,a){var b=function(a,b){return 0===a.length?d.none():1===a.length?d.only(0):0===b?d.left(0,1):b===a.length-
1?d.right(b-1,b):0<b&&b<a.length-1?d.middle(b-1,b,b+1):d.none()};return{determine:function(d,f,h,k){var m=d.slice(0);d=b(d,f);var n=function(a){return c.map(a,e.constant(0))};f=e.constant(n(m));var p=function(b,c){if(0<=h){var d=a.max(k,m[c]-h);return n(m.slice(0,b)).concat([h,d-m[c]]).concat(n(m.slice(c+1)))}var d=a.max(k,m[b]+h),e=m[b]-d;return n(m.slice(0,b)).concat([d-m[b],e]).concat(n(m.slice(c+1)))};return d.fold(f,function(b){return[a.max(k,m[b]+h)-m[b]]},p,function(a,b,c){return p(b,c)},function(b,
c){if(0<=h)return n(m.slice(0,c)).concat([h]);var d=a.max(k,m[c]+h);return n(m.slice(0,c)).concat([d-m[c]])})}}});l("rq",["b","7","r8","e9"],function(c,e,d,a){var b=function(b,c,d){for(var e=0;b<c;b++)e+=void 0!==d[b]?a(d[b],10):0;return e};return{recalculateWidth:function(a,f){var h=d.justCells(a);return c.map(h,function(a){var c=b(a.column(),a.column()+a.colspan(),f);return{element:a.element,width:e.constant(c),colspan:a.colspan}})},recalculateHeight:function(a,f){var h=d.justCells(a);return c.map(h,
function(a){var c=b(a.row(),a.row()+a.rowspan(),f);return{element:a.element,height:e.constant(c),rowspan:a.rowspan}})},matchRowHeight:function(a,b){return c.map(a.all(),function(a,c){return{element:a.element,height:e.constant(b[c])}})}}});l("k4","b ro r7 r8 rp rq rr rs 33 1u".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(a){return c.foldr(a,function(a,b){return a+b},0)},p=function(b){b=d.fromTable(b);return a.generate(b)};return{adjustWidth:function(a,d,k,m){var u=p(a),v=b.getPixelWidths(u,
m);d=e.determine(v,k,d,h.minWidth());d=c.map(d,function(a,b){return a+v[b]});u=g.recalculateWidth(u,d);c.each(u,function(a){f.setWidth(a.element(),a.width())});u=n(d);f.setWidth(a,u)},adjustHeight:function(a,d,e,k){var u=p(a);k=b.getPixelHeights(u,k);k=c.map(k,function(a,b){return e===b?m.max(d+a,h.minHeight()):a});var v=g.recalculateHeight(u,k),u=g.matchRowHeight(u,k);c.each(u,function(a){f.setHeight(a.element(),a.height())});c.each(v,function(a){f.setHeight(a.element(),a.height())});u=n(k);f.setHeight(a,
u)},adjustWidthTo:function(d,e){var h=a.generate(d),m=b.getPixelWidths(h,e),h=g.recalculateWidth(h,m);c.each(h,function(a){f.setWidth(a.element(),a.width())});var n=c.foldr(m,function(a,b){return b+a},0);0<h.length&&k.ancestor(h[0].element(),"table").each(function(a){f.setWidth(a,n)})}}});l("k1","b 7 t 2w rf go rg bq r7 rh ri rj rk r8 rl rm rn k4 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w){m=function(a){0===h.cells(a).length&&w.remove(a)};var z=a.immutable("grid","cursor"),x=function(a,
b,c){return l(a,b,c).orThunk(function(){return l(a,0,0)})},l=function(a,b,c){return d.from(a[b]).bind(function(a){return d.from(a.cells()[c]).bind(function(a){return d.from(a.element())})})},A=function(a,b,c){return z(a,l(a,b,c))},B=function(a){return c.foldl(a,function(a,b){return c.exists(a,function(a){return a.row()===b.row()})?a:a.concat([b])},[]).sort(function(a,b){return a.row()-b.row()})},C=function(a){return c.foldl(a,function(a,b){return c.exists(a,function(a){return a.column()===b.column()})?
a:a.concat([b])},[]).sort(function(a,b){return a.column()-b.column()})},D=function(a,b,c){a=k.fromPastedRows(a,c);a=q.generate(a);return r.toGrid(a,b,!0)};a=v.adjustWidthTo;return{insertRowBefore:n.run(function(a,b,c,d){var e=b.row(),f=b.row();a=t.insertRowAt(a,f,e,c,d.getOrInit);return A(a,f,b.column())},n.onCell,e.noop,e.noop,b.modification),insertRowsBefore:n.run(function(a,b,d,e){var f=b[0].row(),g=b[0].row(),h=B(b);a=c.foldl(h,function(a,b){return t.insertRowAt(a,g,f,d,e.getOrInit)},a);return A(a,
g,b[0].column())},n.onCells,e.noop,e.noop,b.modification),insertRowAfter:n.run(function(a,b,c,d){var e=b.row(),f=b.row()+b.rowspan();a=t.insertRowAt(a,f,e,c,d.getOrInit);return A(a,f,b.column())},n.onCell,e.noop,e.noop,b.modification),insertRowsAfter:n.run(function(a,b,d,e){var f=B(b),g=f[f.length-1].row(),h=f[f.length-1].row()+f[f.length-1].rowspan();a=c.foldl(f,function(a,b){return t.insertRowAt(a,h,g,d,e.getOrInit)},a);return A(a,h,b[0].column())},n.onCells,e.noop,e.noop,b.modification),insertColumnBefore:n.run(function(a,
b,c,d){var e=b.column(),f=b.column();a=t.insertColumnAt(a,f,e,c,d.getOrInit);return A(a,b.row(),f)},n.onCell,a,e.noop,b.modification),insertColumnsBefore:n.run(function(a,b,d,e){var f=C(b),g=f[0].column(),h=f[0].column();a=c.foldl(f,function(a,b){return t.insertColumnAt(a,h,g,d,e.getOrInit)},a);return A(a,b[0].row(),h)},n.onCells,e.noop,e.noop,b.modification),insertColumnAfter:n.run(function(a,b,c,d){var e=b.column(),f=b.column()+b.colspan();a=t.insertColumnAt(a,f,e,c,d.getOrInit);return A(a,b.row(),
f)},n.onCell,a,e.noop,b.modification),insertColumnsAfter:n.run(function(a,b,d,e){var f=b[b.length-1].column(),g=b[b.length-1].column()+b[b.length-1].colspan(),h=C(b);a=c.foldl(h,function(a,b){return t.insertColumnAt(a,g,f,d,e.getOrInit)},a);return A(a,b[0].row(),g)},n.onCells,e.noop,e.noop,b.modification),splitCellIntoColumns:n.run(function(a,b,c,d){a=t.splitCellIntoColumns(a,b.row(),b.column(),c,d.getOrInit);return A(a,b.row(),b.column())},n.onCell,a,e.noop,b.modification),splitCellIntoRows:n.run(function(a,
b,c,d){a=t.splitCellIntoRows(a,b.row(),b.column(),c,d.getOrInit);return A(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.modification),eraseColumns:n.run(function(a,b,c,d){c=C(b);a=t.deleteColumnsAt(a,c[0].column(),c[c.length-1].column());b=x(a,b[0].row(),b[0].column());return z(a,b)},n.onCells,a,m,b.modification),eraseRows:n.run(function(a,b,c,d){c=B(b);a=t.deleteRowsAt(a,c[0].row(),c[c.length-1].row());b=x(a,b[0].row(),b[0].column());return z(a,b)},n.onCells,e.noop,m,b.modification),makeColumnHeader:n.run(function(a,
b,c,d){a=u.replaceColumn(a,b.column(),c,d.replaceOrInit);return A(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform("row","th")),unmakeColumnHeader:n.run(function(a,b,c,d){a=u.replaceColumn(a,b.column(),c,d.replaceOrInit);return A(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform(null,"td")),makeRowHeader:n.run(function(a,b,c,d){a=u.replaceRow(a,b.row(),c,d.replaceOrInit);return A(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform("col","th")),unmakeRowHeader:n.run(function(a,
b,c,d){a=u.replaceRow(a,b.row(),c,d.replaceOrInit);return A(a,b.row(),b.column())},n.onCell,e.noop,e.noop,b.transform(null,"td")),mergeCells:n.run(function(a,b,c,g){g=b.cells();f.merge(g);a=s.merge(a,b.bounds(),c,e.constant(g[0]));return z(a,d.from(g[0]))},n.onMergable,e.noop,e.noop,b.merging),unmergeCells:n.run(function(a,b,e,f){a=c.foldr(b,function(a,b){return s.unmerge(a,b,e,f.combine(b))},a);return z(a,d.from(b[0]))},n.onUnmergable,a,e.noop,b.merging),pasteCells:n.run(function(a,b,c,e){e=function(a,
b){var c=k.fromTable(a),c=q.generate(c);return r.toGrid(c,b,!0)}(b.clipboard(),b.generators());var f=g.address(b.row(),b.column());return p.merge(f,a,e,b.generators(),c).fold(function(){return z(a,d.some(b.element()))},function(a){var c=x(a,b.row(),b.column());return z(a,c)})},n.onPaste,a,e.noop,b.modification),pasteRowsBefore:n.run(function(a,b,c,d){var e=a[b.cells[0].row()];d=b.cells[0].row();e=D(b.clipboard(),b.generators(),e);a=p.insert(d,a,e,b.generators(),c);b=x(a,b.cells[0].row(),b.cells[0].column());
return z(a,b)},n.onPasteRows,e.noop,e.noop,b.modification),pasteRowsAfter:n.run(function(a,b,c,d){var e=a[b.cells.length-1];d=b.cells[b.cells.length-1].row()+b.cells[b.cells.length-1].colspan();e=D(b.clipboard(),b.generators(),e);a=p.insert(d,a,e,b.generators(),c);b=x(a,b.cells[0].row(),b.cells[0].column());return z(a,b)},n.onPasteRows,e.noop,e.noop,b.modification)}});l("sd","b 7 p jw bg k3 se k1 1b l 2g 2q 2s 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=function(a){return function(b,
e){return c.foldl(a,function(a,c){return a.bind(function(a){return w(e,function(a){return v(c,b,e,a)})})},d.value(e))}},t=s([h.makeRowHeader,h.makeColumnHeader]),u=s([h.makeRowHeader]);h=s([h.makeColumnHeader]);var v=function(c,d,f,g){return b.fromEngine(d).bind(function(b){b=e.constant(b);var h=e.noop;return a.execute(d.region(),c,h,b)(d.content(),f,{element:e.constant(g)})})},w=function(a,b){return q.descendant(a,"td,th").bind(function(a){return b(a)}).fold(function(){return d.error("Could not run the operation on table")},
function(b){return d.value(a)})};return{setCaption:function(a,b){var c=q.child(a,"caption").fold(function(){return m.fromTag("caption")},function(a){r.empty(a);return a});n.set(c,b);p.prepend(a,c)},setSummary:function(a,b){k.set(a,"summary",b)},setDimensions:function(a,b){f.redistribute(a,b.width(),b.height(),"rtl"===k.get(a,"dir")?g.rtl:g.ltr)},addBothHeaders:t,addRowHeader:u,addColumnHeader:h}});l("lw","7 p tw sd 1b 2g 33".split(" "),function(c,e,d,a,b,g,f){return function(h){var k=d(h);return{changeCaption:function(c,
d,e,f){var g=b.get(c,"summary");return k.different(c,d,g,e,f).map(function(b){a.setCaption(b,d);return b})},changeSummary:function(b,c,d,e){var h=f.descendant(b,"caption").map(g.get).getOr("");return k.different(b,c,h,d,e).map(function(b){a.setSummary(b,c);return b})},setHeaders:function(b,d,e,f){return(!0===e&&!0===f?a.addBothHeaders:!0===e?a.addRowHeader:!0===f?a.addColumnHeader:c.constant(k.invalidError("a11y.t4b.repair.errors.none")))(b,d)},setScope:function(a,c){b.set(a,"scope",c);return e.value(a)}}}});
l("lx",["4o","2w"],function(c,e){var d=c.generate([{field:["name","textkey","f"]},{select:["name","textkey","values"]},{toggles:["name","textkey","options"]}]),a=e.immutable("value","text"),b=e.immutable("value","icon","textkey");return{field:d.field,select:d.select,toggles:d.toggles,pair:a,toggle:b,cata:function(a,b,c,d){return a.fold(b,c,d)}}});l("d1","b 7 t p lu lv lw 2w 1b l lx".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(p){var r=h.immutableBag("id description prompts element severity url repair".split(" "),
[]),q=h.immutableBag(["ui","repair"],[]),s=g(p),t=f(p),u={I1:d.some(q({ui:[n.field("image-alt","a11y.i1.repair.info",e.constant(""))],repair:function(a,b,c){return s.changeAlt(b.element(),c["image-alt"](),"a11y.i1.repair.errors.empty","a11y.i1.repair.errors.duplicate")}})),I2:d.some(q({ui:[n.field("image-alt","a11y.i2.repair.info",function(a){return k.get(a.element(),"alt")})],repair:function(a,b,c){return s.changeAlt(b.element(),c["image-alt"](),"a11y.i2.repair.errors.empty","a11y.i2.repair.errors.duplicate")}})),
T1:d.some(q({ui:[n.field("table-caption","a11y.t1.repair.info",e.constant(""))],repair:function(a,b,c){return t.changeCaption(b.element(),c["table-caption"](),"a11y.t1.repair.errors.empty","a11y.t1.repair.errors.duplicate")}})),T2:d.some(q({ui:[n.field("table-summary","a11y.t2.repair.info",e.constant(""))],repair:function(a,b,c){return t.changeSummary(b.element(),c["table-summary"](),"a11y.t2.repair.errors.empty","a11y.t2.repair.errors.duplicate")}})),T3:d.some(q({ui:[n.field("table-caption","a11y.t3.repair.info",
function(a){return k.get(a.element(),"summary")})],repair:function(a,b,c){return t.changeCaption(b.element(),c["table-caption"](),"a11y.t3.repair.errors.empty","a11y.t3.repair.errors.duplicate")}})),T4A:d.none(),T4B:d.some(q({ui:[n.toggles("table-headers","a11y.t4b.repair.info",[n.toggle("row-header","ephox-polish-row-header","a11y.t4b.repair.row"),n.toggle("col-header","ephox-polish-column-header","a11y.t4b.repair.column")])],repair:function(a,b,c){var d=c["row-header"]();c=c["col-header"]();return t.setHeaders(a,
b.element(),d,c)}})),T4C:d.some(q({ui:[n.select("scope-type","a11y.t4c.repair.info",[n.pair("row","a11y.t4c.repair.scope.row"),n.pair("col","a11y.t4c.repair.scope.col"),n.pair("rowgroup","a11y.t4c.repair.scope.rowgroup"),n.pair("colgroup","a11y.t4c.repair.scope.colgroup")])],repair:function(a,b,c){return t.setScope(b.element(),c["scope-type"]())}})),D1:d.some(q({ui:[n.select("heading-type","a11y.d1.repair.info",[n.pair("h1","a11y.d1.repair.block.h1"),n.pair("h2","a11y.d1.repair.block.h2"),n.pair("h3",
"a11y.d1.repair.block.h3"),n.pair("h4","a11y.d1.repair.block.h4"),n.pair("h5","a11y.d1.repair.block.h5"),n.pair("h6","a11y.d1.repair.block.h6")])],repair:function(a,c,d){return b.convertToHeading(c.element(),d["heading-type"]())}})),D2:d.none(),D3:d.some(q({ui:[],repair:function(a,c,d){return b.joinLinks(a.content().isRoot,c.element())}})),D4:d.none(),D5:d.none(),O1:d.none(),O2:d.none()};return{convert:function(b,e){var f=function(a){var c=a.repair();return function(a,d){return b.undo().transaction(function(){return c(b,
a,d)})}};return c.map(e,function(b){var c=b.rule(),e=c.id().toUpperCase(),g=void 0!==u[e]?u[e]:d.none(),h=c.desckey();return r({id:e,description:h,prompts:g.map(function(a){return a.ui()}),element:m.fromDom(b.element()),url:c.url(),severity:c.severity(),repair:g.map(f).getOr(function(){return a.error("no repair")})})})}}}});l("d2","b t 1b 4x 2o 4e 4h o".split(" "),function(c,e,d,a,b,g,f,h){var k=function(b,f){c.each(b,function(b){f.get(b.severity()).fold(function(){h.warn("unknown severity for accessibility rule: ",
b.id(),b.severity())},function(c){g.add(b.element(),[f.violation(),c.style()]);a.add(b.element(),c.attribute(),b.id())})});e.from(b[0]).each(function(a){var b=a.element(),c=f.currentAttr();a=a.severity();d.set(b,c,a)})},m=function(a,b,e,g){a=f.descendants(a,"["+b+"]");c.each(a,function(a){d.remove(a,b)});d.set(e,b,g)},n=function(a,e){var g=f.descendants(a,"."+e.violation());c.each(g,function(a){b.remove(a,e.violation());d.remove(a,e.currentAttr());c.each(e.all(),function(c){b.remove(a,c.style());
d.remove(a,c.attribute())})})},p=function(d,e,f){var g=function(b){return 0===a.read(d,b.attribute()).length};e.get(f).each(function(a){g(a)&&b.remove(d,a.style())});c.forall(e.all(),g)&&b.remove(d,e.violation())},r=function(b,c,e,f){c.get(f).each(function(f){a.remove(b,f.attribute(),e);a.add(b,c.ignoreAttr(),e);f=c.currentAttr();d.remove(b,f)})},q=function(b,c,e,f){c.get(f).each(function(f){a.remove(b,f.attribute(),e);f=c.currentAttr();d.remove(b,f)})};return{manager:function(a){var b=a.content();
return{start:function(b){k(b,a)},moveTo:function(c,d){b.body().each(function(b){m(b,a.currentAttr(),c,d)})},stop:function(){b.body().each(function(b){n(b,a)})},ignore:function(b,c,d){r(b,a,c,d);p(b,a,d)},solve:function(b,c,d){q(b,a,c,d);p(b,a,d)}}}}});l("d3","87 b 1b 2o 3c 21 2s 3m 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a){return function(b){e.each(b,a)}},n=m(f.remove),p=m(function(a){d.set(a,"class","")}),r=m(function(a){var c=k.children(a);b.before(a,c);f.remove(a)}),q=c.zeroWidth(),
s=function(a){return g.isText(a)?(a=h.get(a),""===a||a===q):!1};c=m(function(a){var b;g.isElement(a)?(b=k.childNodesCount(a),b=0===b||1===b&&k.child(a,0).exists(s)):b=!1;b&&d.hasNone(a)&&f.remove(a)});return{remove:n,clearClasses:p,removeClass:function(b){return m(function(c){a.remove(c,b)})},removeAttr:function(a){return m(function(b){d.remove(b,a)})},unwrap:r,removeIfEmpty:c}});l("7b","b 7 t d2 59 2w d3".split(" "),function(c,e,d,a,b,g,f){var h=function(a){return"data-"+b.resolve(a)},k=h("a11y-current-violation"),
m=b.resolve("a11y-violation"),n=b.resolve("a11y-severity-info"),p=b.resolve("a11y-severity-warn"),r=b.resolve("a11y-severity-error"),q=h("a11y-ignore"),s=h("a11y-error"),t=h("a11y-warning"),u=h("a11y-info");g=g.immutableBag(["style","attribute"],[]);var v=g({style:r,attribute:s}),w=g({style:p,attribute:t}),z=g({style:n,attribute:u}),x=function(a){return"error"===a?d.some(v):"warning"===a?d.some(w):"info"===a?d.some(z):d.none()};return{configure:function(a){a.addSelector(a.output(),"["+q+"]",f.removeAttr(q));
c.each([a.output(),a.input(),a.history(),a.internal()],function(b){c.each([m,n,p,r],function(c){a.add(b,c,f.removeClass(c))});c.each([k,s,t,u],function(c){a.addSelector(b,"["+c+"]",f.removeAttr(c))})})},ignoreAttr:e.constant(q),manager:function(b){return a.manager({content:e.constant(b),violation:e.constant(m),currentAttr:e.constant(k),ignoreAttr:e.constant(q),get:x,all:e.constant([v,w,z])})}}});l("9o",["7","59","d3"],function(c,e,d){var a=e.resolve("highlight-common"),b=e.resolve("highlight-placeholder");
return{configure:function(c){c.add(c.output(),a,d.unwrap);c.add(c.history(),b,d.unwrap);c.add(c.output(),b,d.unwrap);c.add(c.output(),"ephox-custom-highlight",d.unwrap);c.add(c.history(),"ephox-custom-highlight",d.unwrap)},highlightClass:c.constant(a),customHighlightClass:c.constant("ephox-custom-highlight"),placeholderClass:c.constant(b)}});l("7m",["7"],function(c){var e=function(){return b(function(a,b,c){return a()},"off")},d=function(){return b(function(a,b,c){return b()},"unchanged")},a=function(a){return b(function(b,
c,d){return d(a)},"on")},b=function(b,f){return{fold:b,map:function(c){return b(e,d,function(b){return a(c(b))})},label:c.constant(f)}};return{off:e,unchanged:d,on:a}});l("7z","9o 7m 2w 2o 21 b3".split(" "),function(c,e,d,a,b,g){var f=d.immutable("content");return{hasSelection:function(a){return a.getSelection().fold(function(){return f(e.off())},function(){return f(e.on(!0))})},isAnnotation:function(b){return a.has(b,"ephox-cram-annotation-wrap")||a.has(b,c.customHighlightClass())},isEmptyText:function(a){return b.isText(a)&&
0===g.get(a).length},isTextArea:function(a){return"textarea"===b.name(a)}}});l("iv","8a fg 7z 1b 21 b3 2b".split(" "),function(c,e,d,a,b,g,f){var h=d.isTextArea,k=function(b){return"false"===a.get(b,"contenteditable")},m=function(a){a=a[a.length-1];var b=c.getEnd(a);return e.point(a,b)};return{descend:function(a,c){var d=f.children(a);if(0===d.length||h(a))return e.point(a,c);if(c<d.length&&!h(d[c]))return e.point(d[c],0);d=d[d.length-1];if(h(d))return e.point(a,c);var k=b.isText(d)?g.get(d).length:
f.children(d).length;return e.point(d,k)},descendUntilLeaf:function(a,b){var c=e.point(a,b),d=function(a){return k(a.element())?c:f.child(a.element(),a.offset()).fold(function(){return a},function(a){return d(e.point(a,0))})},g=f.children(a);return 0<g.length&&b<g.length?d(e.point(g[b],0)):0<g.length&&b===g.length?d(m(g)):c}}});l("d4","87 7 d0 iv 2p l 5a 2q 3o 21 2s 2a 2b 1u e9 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){var u=function(a){var c=s(b.get(a,"padding-top"),10),d=s(b.get(a,
"padding-bottom"),10);a=r.owner(a);return p.get(a).top()-(c+d)},v=function(b,d){var m=a.descend(b,d),p=g.fromText(c.zeroWidth()),r=g.fromTag("span");h.append(r,p);h.before(m.element(),r);m=k.absolute(r);p=f.get(r);return{element:e.constant(r),bottom:e.constant(m.top()+p),pos:e.constant(m),cleanup:function(){n.remove(r)}}},w=function(a){var b=k.absolute(a),c=f.get(a);return{element:e.constant(a),bottom:e.constant(b.top()+c),pos:e.constant(b),cleanup:e.noop}},z=function(a,b){a.getSelection().each(function(c){G(a,
function(d,e){x(a,b,c)},c)})},x=function(a,c,d){a.body().each(function(e){a.win().each(function(a){b.reflow(e);var f=u(e),g=v(d.startContainer(),d.startOffset());c(a,f,g);g.cleanup()})})},l=function(a,b,c){a.body().each(function(d){a.win().each(function(a){c(a,u(d),b)})})},A=function(a,b,c){var d=a.innerHeight,e=c.pos();c.bottom()>d+b?(b=e.top()-d+1.5*f.get(c.element()),a.scrollTo(e.left(),b)):e.top()<b&&a.scrollTo(e.left(),e.top())},B=function(a,c,e,g){a.body().each(function(h){var k=f.get(a.element()),
m;m=h.dom();m=q.max(m.offsetHeight,m.scrollHeight);var n=g.pos();g.bottom()>m?b.set(h,"min-height",g.bottom()+"px"):b.remove(h,"min-height");(n.top()>k+e||n.top()<e)&&c.scrollTo(n.left(),n.top());h=d.find(g.element());k=p.get().top();m=t.innerHeight+k;h.top()<k?p.intoView(g.element(),!0):h.top()>m&&p.intoView(g.element(),!1)})},C=function(a){z(a,A)},D=function(a,b){l(a,w(b),A)},F=function(a){z(a,e.curry(B,a))},E=function(a,b){l(a,w(b),e.curry(B,a))},G=function(b,c,d){var e=a.descend(d.startContainer(),
d.startOffset());d=a.descend(d.endContainer(),d.endOffset());c(e.element(),d.element());b.setSelection(e.element(),e.offset(),d.element(),d.offset())};return{cursorIntoView:function(a){(a.isInline()?C:F)(a)},elementIntoView:function(a,b){(a.isInline()?D:E)(a,b)},putInView:function(a,b,c,d){r.parent(d).each(function(e){var g=m.isText(d)||"br"===m.name(d)?e:d;e=f.get(c.element());var h=p.get(a),g=k.absolute(g),n=h.top(),r=n+e;(g.top()>r||g.top()<n)&&b.scrollTo(h.left(),q.max(0,g.top()-e/2))})},preserve:function(a,
b){a.getSelection().each(function(c){G(a,b,c)})},createMarker:v}});l("m1","8e 31 c 52 7 7e 59 1b 2o 4e l 2q 3c 21".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=d.detect(),t=function(a,b,c){a=n.fromTag(a);c=g.translate(c);return u(a,b,c)},u=function(b,d,e){e=c.labelledField(b,d,e);k.add(e.element(),f.resolve("form-group"));k.add(e.element(),f.resolve(d));"select"===q.name(b)&&(b=a.div(),k.add(b,f.resolve("select-wrap")),p.append(b,e.field()),p.append(e.element(),b));return e};return{input:function(a,
b){var c=t("input",a,b);s.browser.isSafari()&&h.setAll(c.field(),{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"});h.setAll(c.field(),{type:"text"});return{element:c.element,input:c.field}},textarea:function(a,b){var d=t("textarea",a,b);c.multiline(d.field());return{element:d.element,textarea:d.field}},common:t,commonWith:u,comboBox:function(d,q,t){var s=n.fromTag("input"),u=g.translate(q);q=a.div();var l=d+e.generate(""),u=n.fromHtml("<label>"+u+"</label>");h.set(u,
"for",l);h.set(s,"id",l);k.add(q,f.resolve("form-group"));k.add(q,f.resolve(d));d=a.span();c.hidden(d,!0);l=a.span();c.hidden(l,!0);m.add(l,["ephox-textbox-font",f.resolve("icon"),f.resolve("combo-drop-arrow-icon")]);k.add(d,f.resolve("combo-drop-arrow"));p.append(d,l);var B=a.div();k.add(B,f.resolve("label-wrap"));t.each(function(a){p.append(B,a)});p.append(B,u);t=a.div();k.add(t,f.resolve("combo-wrap"));r.append(t,[s,d]);h.set(s,"type","text");r.append(q,[B,t]);return{element:b.constant(q),input:b.constant(s),
dropArrow:b.constant(d)}}}});l("h5","8e fp 52 hp eo 7 7e 59 4a 4b 1b 2o 3c".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var q=function(a){p.add(a,h.resolve("dialog-button-default"))},s=function(a){p.add(a,h.resolve("dialog-button"))},t=function(d,g,k){var m=a(d+g);p.add(m.element(),h.resolve("dialog-"+g));d=b(f.translate(k));m.content(d);n.set(m.element(),"tabindex","-1");c.textButton(m.element(),d.element());return{enable:function(){m.enable();e.enable(m.element())},disable:function(){m.disable();
e.disable(m.element())},element:m.element,name:m.name,destroy:m.destroy,content:m.content,disabled:m.disabled,click:m.click,events:m.events}},u=function(a){a=t(a,"ok","button.ok");q(a.element());return a},v=function(a){a=t(a,"cancel","button.cancel");s(a.element());return a};return{button:t,okCancel:function(a){var b=void 0!==a?a+"-":"";a=d.div();p.add(a,h.resolve(b+"dialog-controls"));var c=v(b),e=u(b);r.append(a,[c.element(),e.element()]);b=k.create({ok:m([],e.events.click),cancel:m([],c.events.click)});
return{element:g.constant(a),ok:g.constant(e),cancel:g.constant(c),destroy:function(){e.destroy();c.destroy()},events:b.registry}},makeNormal:s,makeDefault:q}});l("d5","8e hp hq eo m0 m1 h5 59 1b 2o 4e 30".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=function(a,b){var d=a(),e=d.element();c.button(e,b);k.set(e,"tabindex","-1");d.events.click.bind(function(){p.focus(e)});return d},q=function(a,b){var c=r(e,b);c.content(d([a,h.resolve("icon")]));k.set(c.element(),"title",b);return c};return{setDefaultAction:function(a){f.makeDefault(a)},
setNormalButton:function(a){f.makeNormal(a)},makeTextButton:function(b,c,d){c=r(e,c);n.add(c.element(),b);c.content(a(d));return c},makeIconToggle:function(a,c,e){var f=r(b,e);f.content(d([c,h.resolve("icon")]));m.add(f.element(),h.resolve("choice-button"));k.set(f.element(),"data-value",a);k.set(f.element(),"title",e);return f},makeField:function(a,b,c){return g.commonWith(a,b,c)},makeIconButton:q,makeIconStepperButton:function(a,b){var c=q(a,b);m.add(c.element(),h.resolve("stepper-button"));return c}}});
l("d6",["t","7e","r"],function(c,e,d){var a={"a11y.widget.ok.label":"button.ok","a11y.widget.ok.text":"button.ok","a11y.widget.ignore.label":"a11y.widget.ignore","a11y.widget.ignore.text":"a11y.widget.ignore","a11y.widget.repair.label":"a11y.widget.repair","a11y.widget.repair.text":"a11y.widget.repair","a11y.widget.repair.available":"a11y.widget.available","a11y.i1.description":"a11y.image.alttext.empty","a11y.i1.repair.info":"a11y.image.alttext.set","a11y.i1.repair.errors.empty":"a11y.image.alttext.validation.empty",
"a11y.i1.repair.errors.duplicate":"a11y.image.alttext.validation.filenameduplicate","a11y.i2.description":"a11y.image.alttext.filenameduplicate","a11y.i2.repair.info":"a11y.image.alttext.set","a11y.i2.repair.errors.empty":"a11y.image.alttext.validation.empty","a11y.i2.repair.errors.duplicate":"a11y.image.alttext.validation.filenameduplicate","a11y.t1.description":"a11y.table.caption.empty","a11y.t1.repair.info":"a11y.table.caption.set","a11y.t1.repair.errors.empty":"a11y.table.caption.validation.empty",
"a11y.t1.repair.errors.duplicate":"a11y.table.caption.validation.summaryduplicate","a11y.t2.description":"a11y.table.summary.empty","a11y.t2.repair.info":"a11y.table.summary.set","a11y.t2.repair.errors.empty":"a11y.table.summary.validation.empty","a11y.t2.repair.errors.duplicate":"a11y.table.summary.validation.captionduplicate","a11y.t3.description":"a11y.table.caption.summaryduplicate","a11y.t3.repair.info":"a11y.table.caption.set","a11y.t3.repair.errors.empty":"a11y.table.caption.validation.empty",
"a11y.t3.repair.errors.duplicate":"a11y.table.caption.validation.summaryduplicate","a11y.t4a.description":"a11y.table.rowscells.none","a11y.t4b.description":"a11y.table.headers.none","a11y.t4b.repair.info":"a11y.table.headers.set","a11y.t4b.repair.row":"table.row-header","a11y.t4b.repair.column":"table.column-header","a11y.t4b.repair.errors.none":"a11y.table.headers.validation.none","a11y.t4c.description":"a11y.table.headerscope.none","a11y.t4c.repair.info":"a11y.table.headerscope.set","a11y.t4c.repair.scope.row":"a11y.table.headerscope.scope.row",
"a11y.t4c.repair.scope.col":"a11y.table.headerscope.scope.col","a11y.t4c.repair.scope.rowgroup":"a11y.table.headerscope.scope.rowgroup","a11y.t4c.repair.scope.colgroup":"a11y.table.headerscope.scope.colgroup","a11y.d1.description":"a11y.heading.paragraphmisuse","a11y.d1.repair.info":"a11y.heading.set","a11y.d1.repair.block.h1":"block.h1","a11y.d1.repair.block.h2":"block.h2","a11y.d1.repair.block.h3":"block.h3","a11y.d1.repair.block.h4":"block.h4","a11y.d1.repair.block.h5":"block.h5","a11y.d1.repair.block.h6":"block.h6",
"a11y.d2.description":"a11y.heading.nonsequential","a11y.d3.description":"a11y.link.adjacent","a11y.d4.description":"a11y.list.paragraphmisuse","a11y.d5a.description":"a11y.contrast.largetext","a11y.d5b.description":"a11y.contrast.smalltext"};return{get:function(b){return c.from(a[b])},translate:function(b){var c=d.prototype.slice.call(arguments,1);return e.translate.apply(void 0,[void 0!==a[b]?a[b]:b].concat(c))}}});l("d7",["2w"],function(c){return c.immutableBag(["rules"],[])});l("u5",["2j"],function(c){return{filterAccept:function(){return c.getOrDie("NodeFilter").FILTER_ACCEPT},
showElement:function(){return c.getOrDie("NodeFilter").SHOW_ELEMENT}}});l("u6",["2w"],function(c){return c.immutableBag(["rule","element"],[])});l("m2",["b","2c","u5","u6","q"],function(c,e,d,a,b){var g=function(a){return d.filterAccept()},f=function(b,d){return c.bind(d,function(c){return c.check()(b)?[a({rule:c,element:b})]:[]})},h=function(b,d){return c.bind(d,function(d){return c.map(d.check()(b),function(b){return a({rule:d,element:b})})})};return{audit:function(a,m){for(var n=[],p=c.partition(m,
function(a){return a.walkable()}),r=p.pass,p=p.fail,q=b.createTreeWalker(a,d.showElement(),g,!1);q.nextNode();)n=n.concat(f(q.currentNode,r));r=h(a,p);n=n.concat(r);n.sort(function(a,b){var c=a.element(),d=b.element();return c===d?0:e.documentPositionPreceding(c,d)?1:-1});return n}}});l("d8",["m2"],function(c){return function(e){return{audit:function(d){return c.audit(d,e.rules())}}}});l("zo",["2w"],function(c){return c.immutableBag("id wcag severity desckey url walkable check".split(" "),[])});l("zp",
["7"],function(c){return{error:c.constant("error"),warning:c.constant("warning"),info:c.constant("info")}});l("zq",[],function(){return{match:function(c,e){return c.matches?c.matches(e):c.webkitMatchesSelector?c.webkitMatchesSelector(e):c.mozMatchesSelector?c.mozMatchesSelector(e):c.msMatchesSelector?c.msMatchesSelector(e):!1}}});l("u7",["b","zo","zp","zq"],function(c,e,d,a){var b=function(a){return c.forall(a.childNodes,function(a){return/^(b|strong)$/i.test(a.nodeName)})};return e({id:"D1",wcag:"1.3.1",
severity:d.warning(),desckey:"a11y.d1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(c){return a.match(c,"p")?b(c):!1}})});l("u8",["b","zo","zp"],function(c,e,d){return e({id:"D2",wcag:"1.3.1",severity:d.error(),desckey:"a11y.d2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(a){a=a.querySelectorAll("h1, h2, h3, h4, h5, h6");
var b,d=[];c.each(a,function(a){var c=parseInt(a.tagName.slice(1),10);b&&1<c-b&&d.push(a);b=c});return d}})});l("u9",["b","zo","zp"],function(c,e,d){return e({id:"D3",wcag:"2.4.4",severity:d.error(),desckey:"a11y.d3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-refs.html",walkable:!1,check:function(a){return c.filter(a.querySelectorAll("a + a"),function(a){return a.href===a.previousSibling.href})}})});l("zr",[],function(){var c=function(c){var d=c.nodeName;for(c=
c.nextSibling;null!==c&&("#text"===c.nodeName||"BR"===c.nodeName);)c=c.nextSibling;return null!==c&&c.nodeName===d?c:!1};return{check:function(e,d){for(var a=e.querySelectorAll("p,h1,h2,h3,h4,h5,h6"),b=[],g=0;g<a.length;){var f,h=a[g];f=d;for(var k=c(h),h=f(h)?[h]:[];!1!==k&&f(k);)h.push(k),k=c(k);f=h;if(1<f.length){b.push(f[0]);f=f[f.length-1];k=-1;for(h=0;h<a.length;h++)if(a[h]===f){k=h;break}f=k;g=-1===f?g+1:f}else g++}return b}}});l("ua",["zo","zp","zr"],function(c,e,d){var a=function(a){return a.textContent.match(/^\s{0,}([a-z1-9]|i+)\s{0,}[.)-]/gmi)};
return c({id:"D4o",wcag:"1.3.1",severity:e.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!1,check:function(b){return d.check(b,a)}})});l("ub",["zo","zp","zr"],function(c,e,d){var a=function(a){return a.textContent.match(/^\s{0,}(\*|-)\s{0,}/gmi)};return c({id:"D4u",wcag:"1.3.1",severity:e.error(),desckey:"a11y.d4.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",
walkable:!1,check:function(b){return d.check(b,a)}})});l("15j",["2w"],function(c){var e=c.immutable("red","green","blue","alpha");return{rgbaColour:e,white:function(){return e(255,255,255,1)}}});l("12z",["15j","1u"],function(c,e){return{calculateContrastRatio:function(c,a){var b=e.max(c,a)+0.05,g=e.min(c,a)+0.05;return b/g},calculateLuminance:function(c){var a=function(a){return 0.03928>=a?a/12.92:e.pow((a+0.055)/1.055,2.4)},b=c.red()/255,g=c.green()/255;c=c.blue()/255;b=a(b);g=a(g);a=a(c);return 0.2126*
b+0.7152*g+0.0722*a},composeColour:function(d,a){var b=d.alpha()+a.alpha()*(1-d.alpha()),g=(d.red()*d.alpha()+a.red()*a.alpha()*(1-d.alpha()))/b,f=(d.green()*d.alpha()+a.green()*a.alpha()*(1-d.alpha()))/b,h=(d.blue()*d.alpha()+a.blue()*a.alpha()*(1-d.alpha()))/b;return c.rgbaColour(e.ceil(g),e.ceil(f),e.ceil(h),b)}}});l("15k",["t","15j"],function(c,e){return{parseColour:function(d){var a=function(a,b,d,k){a=parseInt(a,10);b=parseInt(b,10);d=parseInt(d,10);k=parseFloat(k);return c.some(e.rgbaColour(a,
b,d,k))};if("transparent"===d)return a(0,0,0,0);var b=d.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(null!==b)return a(b[1],b[2],b[3],1);d=d.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/);return null!==d?a(d[1],d[2],d[3],d[4]):c.none()}}});l("12y","b t 12z 15j 15k 2n 1c 2p 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(b,c){var d=h.get(b,"opacity");return 1>d?a.rgbaColour(c.red(),c.green(),c.blue(),c.alpha()*d):c};return{getBackgroundColor:function(n){var p=k.owner(n),r=g.getBody(p);
n=[n].concat(k.parents(n,function(a){return f.eq(a,r)}));n=c.foldl(n,function(a,c){if(1===a.alpha())return a;var f=h.get(c,"background-color");return b.parseColour(f).bind(function(b){b=m(c,b);return 0<b.alpha()?e.some(d.composeColour(a,b)):e.none()}).getOr(a)},a.rgbaColour(0,0,0,0));return 1>n.alpha()?d.composeColour(n,a.white()):n},getForegroundColor:function(a,c){var f=h.get(a,"color");return b.parseColour(f).bind(function(b){b=m(a,b);b=1>b.alpha()?d.composeColour(b,c):b;return e.some(b)})}}});
l("zs",["t","12y","12z"],function(c,e,d){var a=function(a){var c=e.getBackgroundColor(a);return e.getForegroundColor(a,c).map(function(a){var b=d.calculateLuminance(c);a=d.calculateLuminance(a);return d.calculateContrastRatio(a,b)})};return{check:function(b,c){return a(b).filter(function(a){return a<c}).isSome()},getRatio:a}});$("ps",Number);l("zt","7 t 2n 2p 2b ps 6r".split(" "),function(c,e,d,a,b,g,f){var h=function(b){b=a.get(b,"font-weight");return"bold"===b||"bolder"===b?!0:/^[0-9]*$/.test(b)?
700<=parseInt(b,10):!1},k=function(b){var c=a.get(b,"font-size");b=(new f(".*px")).test(c);c=c.match(/(\d*\.?\d*)(.*)/);return b&&null!==c?e.some(g(c[1])):e.none()};return{isLargeFont:function(a){var e=h(a),f=b.owner(a),f=d.getBody(f),g=k(f);return k(a).fold(c.constant(!1),function(a){return g.fold(function(){return 24<=a||e&&19<=a},function(b){return a>=1.5*b||e&&a>=1.2*b})})}}});l("zu",["b","21","2b"],function(c,e,d){return{hasNonEmptyTextChild:function(a){a=d.children(a);return 0<c.filter(a,function(a){return e.isText(a)&&
0<e.value(a).trim().length}).length}}});l("uc","zo zp zs zt zu l".split(" "),function(c,e,d,a,b,g){return c({id:"D5a",wcag:"1.4.3",severity:e.error(),desckey:"a11y.d5a.description",url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(c){c=g.fromDom(c);return b.hasNonEmptyTextChild(c)&&a.isLargeFont(c)&&d.check(c,3)}})});l("ud","zo zp zs zt zu l".split(" "),function(c,e,d,a,b,g){return c({id:"D5b",wcag:"1.4.3",severity:e.error(),desckey:"a11y.d5b.description",
url:"https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html",walkable:!0,check:function(c){c=g.fromDom(c);return b.hasNonEmptyTextChild(c)&&!a.isLargeFont(c)&&d.check(c,4.5)}})});l("ue",["zo","zp","zq"],function(c,e,d){return c({id:"I1",wcag:"1.1.1",severity:e.error(),desckey:"a11y.i1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(a){return d.match(a,"img")&&(!1===a.hasAttribute("alt")||""===a.getAttribute("alt").trim())}})});
l("uf",["zo","zp","zq"],function(c,e,d){return c({id:"I2",wcag:"1.1.1",severity:e.error(),desckey:"a11y.i2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/text-equiv-all.html",walkable:!0,check:function(a){return d.match(a,"img[alt][src]")&&a.src.split("/").pop()===a.alt.split("/").pop()}})});l("ug",["zo","zp","zq"],function(c,e,d){return c({id:"T1",wcag:"1.3.1",severity:e.error(),desckey:"a11y.t1.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",
walkable:!0,check:function(a){return d.match(a,"table")?(a=a.querySelector("caption"))?d.match(a,":empty"):!0:!1}})});l("uh",["zo","zp","zq"],function(c,e,d){return c({id:"T2",wcag:"1.3.1",severity:e.warning(),desckey:"a11y.t2.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(a){return d.match(a,"table")&&(a.querySelector("[rowspan]")||a.querySelector("[colspan]"))&&!a.hasAttribute("summary")}})});l("ui",["zo","zp",
"zq"],function(c,e,d){return c({id:"T3",wcag:"1.3.1",severity:e.error(),desckey:"a11y.t3.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(a){return d.match(a,"table")&&a.hasAttribute("summary")&&0<a.querySelectorAll("caption").length&&a.getAttribute("summary")===a.querySelector("caption").innerHTML}})});l("uj",["zo","zp"],function(c,e){return c({id:"T4b",wcag:"1.3.1",severity:e.error(),desckey:"a11y.t4b.description",
url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(c){return"table"===c.nodeName.toLowerCase()&&0===c.querySelectorAll("th").length}})});l("uk",["zo","zp"],function(c,e){return c({id:"T4c",wcag:"1.3.1",severity:e.error(),desckey:"a11y.t4c.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(c){var a;"th"===c.nodeName.toLowerCase()?(a=!1===c.hasAttribute("scope"),
c=!1===/row|col|rowgroup|colgroup/i.test(c.getAttribute("scope")),a=a||c):a=!1;return a}})});l("ul",["zo","zp"],function(c,e){return c({id:"T4a",wcag:"1.3.1",severity:e.error(),desckey:"a11y.t4a.description",url:"http://www.w3.org/TR/UNDERSTANDING-WCAG20/content-structure-separation-programmatic.html",walkable:!0,check:function(c){return"table"===c.nodeName.toLowerCase()?0===c.querySelectorAll("tr").length||0===c.querySelectorAll("td").length:!1}})});l("m3","b 7 t u7 u8 u9 ua ub uc ud ue uf ug uh ui uj uk ul".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v){var w=[a,b,g,f,h,k,m,n,p,r,q,s,u,v,t];return{get:function(a){return d.from(c.find(w,function(b){return b.name()===a}))},all:e.constant(w)}});l("d9",["m3"],function(c){return{get:function(e){return c.get(e)},all:function(){return c.all().slice()}}});l("m5",["t","4n","2w","1u"],function(c,e,d,a){return function(){var b=e([]),g=e(0),f=d.immutable("index","total","detail"),h=function(a){var d=b.get();if(0===d.length)return c.none();var e,h=g.get();e=d.length-
1;a=h+a;e=a>e?0:0>a?e:a;g.set(e);return c.some(f(e,d.length,d[e]))};return{load:function(a){if(0===a.length)return c.none();g.set(0);b.set(a);return c.some(f(g.get(),a.length,a[0]))},backwards:function(){return h(-1)},current:function(){var a=b.get();return 0===a.length?c.none():c.some(f(g.get(),a.length,a[g.get()]))},resolve:function(){var d=b.get();if(0===d.length)return c.none();var d=d.slice(0,g.get()).concat(d.slice(g.get()+1)),e=a.min(d.length-1,g.get());g.set(e);b.set(d);return 0===d.length?
c.none():c.some(f(g.get(),d.length,d[g.get()]))},forwards:function(){return h(1)}}}});l("um",["6u"],function(c){return{resolve:c.create("ephox-wheel").resolve}});l("m6",["w","um","r"],function(c,e,d){return{resolve:function(a,b){return e.resolve(a.prefix()+"-"+b)},translate:function(a,b){var e=[(c.startsWith(b,a.tnames())?"":a.tnames()+".")+b].concat(d.prototype.slice.call(arguments,2));return a.translate.apply(null,e)}}});l("up",["m6"],function(c){var e=function(d,a,b,e,f){b=c.translate(f,b);e=c.translate(f,
e);return d.makeTextButton(a,b,e)};return{defaultActionButton:function(c,a,b,g,f){a=e(c,a,b,g,f);c.setDefaultAction(a.element());return a},normalButton:function(c,a,b,g,f){a=e(c,a,b,g,f);c.setNormalButton(a.element());return a},button:e,toggleButton:function(d,a,b,e,f){e=c.translate(f,e);return d.makeIconToggle(a,b,e)},field:function(d,a,b,e,f){e=c.translate(f,e);return d.makeField(a,b,e)},icon:function(d,a,b,e){b=c.translate(e,b);return d.makeIconStepperButton(a,b)}}});l("un","b h2 92 6 52 7 t 58 4a 2w 1b 2o l 2g 3c 33 34 m6 up".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w){var l=function(a,b,c,f,h,k){var m=r.fromTag("input");a=w.field(a,m,c,f,k);p.add(m,v.resolve(k,"input"));b=[d.input(m,e.input({execute:b}))];return{element:a.element,get:function(){var a={};a[c]=u.get(m);return a},update:function(a){a=h(a);u.set(m,a)},keylayouts:g.constant(b),destroy:g.noop}},x=function(a,b,e,h,k){var m=r.fromTag("select");a=w.field(a,m,b,e,k);h=c.map(h,function(a){var b=r.fromTag("option");u.set(b,a.value());q.set(b,v.translate(k,a.text()));
return b});s.append(m,h);h=[d.single(m,[],f.none())];return{element:a.element,get:function(){var a={};a[b]=u.get(m);return a},update:g.noop,keylayouts:g.constant(h),destroy:g.noop}},y=function(f,h,k,m,r){var q=b.div();p.add(q,v.resolve(r,"flow"));var u=c.map(m,function(a){return w.toggleButton(f,a.value(),a.icon(),a.textkey(),r)});m=c.map(u,function(a){return a.element()});s.append(q,m);m=[d.flow(q,{item:g.constant(".ephox-pastry-statebutton")},e.flow({trigger:function(a){return t.descendant(a,".ephox-pastry-button").map(function(a){a.dom().click();
return a})}}))];return{element:w.field(f,q,h,k,r).element,get:function(){return c.foldr(u,function(b,c){var d={};d[n.get(c.element(),"data-value")]=c.selected();return a.deepMerge(b,d)},{})},update:g.noop,keylayouts:g.constant(m),destroy:function(){c.each(u,function(a){a.destroy()})}}};return{generate:function(b,d,e,f){d=d.getOr([]);var n=c.bind(d,function(a){return a.fold(function(a,b,c){return[a]},function(a,b,c){return[a]},function(a,b,d){return c.map(d,function(a){return a.value()})})}),p=0<n.length?
m.immutableBag(n,[]):g.constant({}),r=k.create({execute:h([])}),q=function(){r.trigger.execute()},t=c.map(d,function(a){return a.fold(function(a,c,d){return l(b,q,a,c,d,f)},function(a,c,d){return x(b,a,c,d,f)},function(a,c,d){return y(b,a,c,d,f)})});c.each(t,function(a){a.update(e)});d=c.map(t,function(a){return a.element()});var s=c.bind(t,function(a){return a.keylayouts()});return{elements:g.constant(d),get:function(){var b=c.foldr(t,function(b,c){return a.deepMerge(b,c.get())},{});return p(b)},
keylayouts:g.constant(s),destroy:function(){c.each(t,function(a){a.destroy()});c.each(s,function(a){a.destroy()})},events:r.registry}}}});l("m7","aq h2 92 52 7 t 58 4a 1b 2o l 2g 2q 3c 2s m6 un".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){return function(v,w){var l=a.div();m.add(l,t.resolve(w,"assistance"));var x=t.resolve(w,"assistance-invalid"),y=g.none(),A=n.fromTag("p");m.add(A,t.resolve(w,"repair-error"));k.set(A,"aria-live","polite");var B=function(){m.remove(l,x);s.remove(A)},C=
h.create({execute:f([])}),D=d.dynamic(l,e.dynamic({})),F=[D];return{element:b.constant(l),keylayouts:b.constant(F),markInvalid:function(a){m.add(l,x);c.shout(l,a);p.set(A,a);r.append(l,A)},markValid:B,getChange:function(){return y.map(function(a){return a.get()})},destroy:function(){y.each(function(a){a.destroy()})},update:function(a){B();a=a.detail();var b=a.prompts();y.each(function(a){a.destroy()});a=u.generate(v,b,a,w);y=g.some(a);s.empty(l);q.prepend(l,a.elements());a.events.execute.bind(function(){C.trigger.execute()});
D.set(a.keylayouts())},events:C.registry}}});l("uo",["7"],function(c){return{title:c.constant("widget.title"),running:c.constant("widget.running"),previous:c.constant("widget.previous"),next:c.constant("widget.next"),issueCounter:c.constant("widget.issue.counter"),issueHelp:c.constant("widget.issue.help"),noIssue:c.constant("widget.issue.none"),severity:function(c){return"severity."+c},repairLabel:c.constant("widget.repair.label"),repairText:c.constant("widget.repair.text"),repairAvailable:c.constant("widget.repair.available"),
ignoreLabel:c.constant("widget.ignore.label"),ignoreText:c.constant("widget.ignore.text"),okLabel:c.constant("widget.ok.label"),okText:c.constant("widget.ok.text")}});l("m8","fp aq h2 92 52 7 4a 4b 2n 2o 30 2q 3c 2s b4 m6 uo up".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v){return function(w,l){var x=b.div();m.add(x,t.resolve(l,"commands"));var y=b.div();m.add(y,t.resolve(l,"commands-buttons"));var A=v.defaultActionButton(w,[t.resolve(l,"repair")],u.repairLabel(),u.repairText(),l),B=v.normalButton(w,
[t.resolve(l,"ignore")],u.ignoreLabel(),u.ignoreText(),l),C=v.defaultActionButton(w,[t.resolve(l,"ok")],u.okLabel(),u.okText(),l),D=function(){r.append(y,[B.element(),A.element()])};D();var F=d.button({execute:function(a){a.dom().click()}}),F=[a.button(B.element(),F),a.button(A.element(),F),a.button(C.element(),F)];p.append(x,y);var E=f.create({repair:h([],A.events.click),ignore:h([],B.events.click),done:h([],C.events.click)});return{element:g.constant(x),destroy:function(){A.destroy();B.destroy();
C.destroy()},keylayouts:g.constant(F),focus:function(){var a=A.disabled()?A.element():B.element();n.focus(a)},update:function(a){q.remove(C.element());a=a.detail();s.isVisible(B.element())||D();a.prompts().fold(function(){A.disable();c.disable(A.element())},function(a){A.enable();c.enable(A.element());e.speak(k.body(),t.translate(l,u.repairAvailable()))})},zero:function(a){q.empty(y);p.append(y,C.element());n.focus(C.element())},events:E.registry}}});l("m9","aq 92 52 7 t 1b 2n 2o 3y l 2g 2q 3c 2s m6 uo 36".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){return function(v,w){var l=d.div();h.add(l,s.resolve(w,"information"));g.set(l,"data-severity","info");var x=d.div();h.add(x,s.resolve(w,"icon"));var y=d.div();h.add(y,s.resolve(w,"description"));p.append(y,m.fromText(""));var A=m.fromTag("a");h.add(A,s.resolve(w,"help-icon"));g.set(A,"href","javascript:void(0)");r.append(l,[x,y,A]);var B=k.bind(A,"click",function(){var a=g.get(A,"data-url");u.open(a,"","height=700,width=820,resizable=yes,scrollbars=yes")}),
x=[e.single(A,[],b.none())];return{element:a.constant(l),destroy:function(){B.unbind()},keylayouts:a.constant(x),update:function(a){a=a.detail();var b=a.severity();g.set(l,"data-severity",b);c.speak(f.body(),s.translate(w,t.severity(b)));b=s.translate(w,a.description());n.set(y,b);c.speak(f.body(),b);g.set(A,"title",s.translate(w,t.issueHelp()));g.set(A,"data-url",a.url());p.after(y,A)},zero:function(){g.set(l,"data-severity","success");var a=s.translate(w,t.noIssue());n.set(y,a);c.speak(f.body(),
a);q.remove(A)}}}});l("ma",["52","7","2o","2q","m6"],function(c,e,d,a,b){return function(g,f){var h=c.div(),k=c.span();d.add(k,b.resolve(f,"spin"));d.add(h,b.resolve(f,"loading"));a.append(h,k);return{element:e.constant(h),destroy:e.noop}}});l("mb","b m4 fp aq h2 92 52 7 t 4a 4b 2n 2o l 2g 2q 3c m6 uo up".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,l){var x=function(a,b,c){var d=f.div();r.add(d,v.resolve(c,a));b.each(function(a){t.append(d,q.fromText(v.translate(c,a)))});return d};return function(q,
A){var B=x("titlebar",k.none(),A),C=x("title",k.none(),A),D=x("title-text",k.some(w.title()),A),F=x("issue",k.some(w.running()),A);u.append(C,[D,F]);var E=f.div();r.add(E,v.resolve(A,"navigation"));var D=l.icon(q,v.resolve(A,"previous"),w.previous(),A),G=l.icon(q,v.resolve(A,"next"),w.next(),A),H=[D,G],D=m.create({previous:n([],D.events.click),next:n([],G.events.click)});u.append(E,c.map(H,function(a){return a.element()}));t.append(B,C);var L=b.button({execute:function(a){a.dom().click()}}),G=c.map(H,
function(a){return g.button(a.element(),L)}),I=function(a){a.disable();d.disable(a.element())},J=function(a){a.enable();d.enable(a.element())},K=function(){c.each(H,I)},N=function(){c.each(H,J)},M=function(){e.preserve(function(){t.after(C,E)},E)};return{element:h.constant(B),update:function(b){var c=b.index()+1;b=b.total();c=v.translate(A,w.issueCounter(),c,b);s.set(F,c);a.speak(p.body(),c);(1===b?K:N)();M()},zero:function(){s.set(F,"&nbsp;");M();K()},keylayouts:h.constant(G),destroy:function(){c.each(H,
function(a){a.destroy()})},events:D.registry}}});l("da","b m4 52 7 58 4a 4n 2o 2q 3c 2s m5 m6 m7 m8 m9 ma mb".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v){return function(w,l){var x=d.div();h.add(x,r.resolve(l,"widget"));var y=r.resolve(l,"loading");h.add(x,y);var A=v(w,l),B=t(w,l),C=q(w,l),D=s(w,l),F=u(w,l);m.append(x,[A.element(),F.element()]);var E=g.create({showcase:b(["detail"]),ignored:b(["detail"]),solved:b(["detail"]),done:b([])}),G=function(a){c.each([A,B,C,D],function(b){b.update(a)});
E.trigger.showcase(a.detail());e.preserve(function(){k.after(A.element(),B.element());k.after(B.element(),C.element());k.after(C.element(),D.element())},x)},H=function(a){a.fold(function(){k.after(A.element(),B.element());k.after(B.element(),D.element());n.remove(C.element());A.zero();B.zero();D.zero()},G)},L=f(p());A.events.previous.bind(function(){L.get().backwards().each(G)});A.events.next.bind(function(){L.get().forwards().each(G)});var I=function(){var a=C.getChange().getOr({});L.get().current().each(function(b){var c=
b.detail();c.repair()(c,a).fold(function(a){C.markInvalid(a)},function(a){C.markValid();a=L.get().resolve();E.trigger.solved(c);H(a);D.focus()})})};C.events.execute.bind(I);D.events.repair.bind(I);D.events.ignore.bind(function(){L.get().current().each(function(a){var b=L.get().resolve();E.trigger.ignored(a.detail());H(b)})});D.events.done.bind(function(){E.trigger.done()});I=c.flatten([A.keylayouts(),B.keylayouts(),C.keylayouts(),D.keylayouts()]);return{element:a.constant(x),destroy:function(){c.each([A,
B,C,D],function(a){a.destroy()})},load:function(a){n.remove(F.element());h.remove(x,y);a=L.get().load(a);H(a)},open:function(){k.append(x,F.element());h.add(x,y)},skip:function(){var a=L.get().resolve();H(a)},keylayouts:a.constant(I),events:E.registry}}});l("7a","b 7 d1 7b d4 d5 d6 4a 4b d7 d8 d9 4x 2n da".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return function(t){var u=a.ignoreAttr(),v={prefix:e.constant("accessibility-check"),translate:f.translate,tnames:e.constant("a11y")},w=s(g,v),
v=p.all(),v=m({rules:v}),l=n(v),x=d(f.translate),y=a.manager(t.content()),A=function(a){a=l.audit(a.dom());a=x.convert(t,a);return c.filter(a,function(a){var b=a.element(),b=r.read(b,u);return!c.contains(b,a.id())})};w.events.showcase.bind(function(a){t.content().body().each(function(c){c=a.detail().element();q.inBody(c)?(y.moveTo(c,a.detail().severity()),b.elementIntoView(t.content(),c)):w.skip()})});w.events.ignored.bind(function(a){a=a.detail();y.ignore(a.element(),a.id(),a.severity())});w.events.solved.bind(function(a){a=
a.detail();y.solve(a.element(),a.id(),a.severity())});v=h.create({done:k([],w.events.done)});return{element:w.element,anchorName:e.constant("a11y-widget-anchor"),textkey:e.constant("action.a11ycheck"),dialogTextkey:e.constant("a11y.widget.title"),destroy:function(){w.destroy()},keylayouts:w.keylayouts,openWidget:function(){t.content().hideInlineSelection();w.open();t.content().body().each(function(a){a=A(a);y.start(a);w.load(a)})},closeWidget:function(){y.stop()},events:v.registry}}});l("7c",["t",
"4n"],function(c,e){var d=function(a){var b=e(c.none());return{clear:function(){b.get().each(a);b.set(c.none())},isSet:function(){return b.get().isSome()},set:function(d){b.get().each(a);b.set(c.some(d))}}};return{destroyable:function(){return d(function(a){a.destroy()})},unbindable:function(){return d(function(a){a.unbind()})},api:function(){var a=e(c.none()),b=function(){a.get().each(function(a){a.destroy()})};return{clear:function(){b();a.set(c.none())},isSet:function(){return a.get().isSome()},
set:function(d){b();a.set(c.some(d))},run:function(b){a.get().each(b)}}},value:function(){var a=e(c.none());return{clear:function(){a.set(c.none())},set:function(b){a.set(c.some(b))},isSet:function(){return a.get().isSome()},on:function(b){a.get().each(b)}}}}});l("ds","7g 58 4a 2o 2p 3y l 2q 2s 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(m,p){var r=d.create({open:e([]),close:e([])}),q=f.fromTag("div");a.add(q,c.resolve("layer-menus"));a.add(q,c.resolve("toolstrip"));h.append(m(),
q);var s=!1,t=g.bind(q,"transitionend",function(){s||(b.remove(q,"display"),r.trigger.close())});return{element:function(){return q},destroy:function(){t.unbind();k.remove(q)},open:function(){s||(s=!0,b.set(q,"display","block"),b.reflow(q),r.trigger.open(),b.set(q,"opacity","1"))},close:function(){s&&(s=!1,b.remove(q,"opacity"))},isClosed:function(){return!s},setContent:function(a){h.append(q,a)},events:r.registry}}});l("7d","7g 8e dc 92 7c ds 7e 59 58 4a 2o 4e 4h".split(" "),function(c,e,d,a,b,g,
f,h,k,m,n,p,r){return function(q,s,t,u){var v=q.content(),w=q.ui().tabstrip.element(),l=[s.element()],x="."+h.resolve(t)+", ."+c.resolve("more-button"),y=function(){var a=r.descendants(w,x);return l.concat(a)},A=b.api(),B=m.create({abort:k([]),open:k([]),close:k([])}),C=function(){v.events.mousedown.unbind(D);A.clear();F.off()},D=function(){A.isSet()&&(s.closeWidget(),A.run(function(a){a.close()}))},F=d(D,y);s.events.done.bind(function(){D()});var E=a.multiple(s.element(),s.keylayouts());E.events.exit.bind(function(){B.trigger.abort()});
return{destroy:function(){C();E.destroy();s.destroy();F.off()},events:B.registry,open:function(){F.on();s.openWidget();var a=g(q.ui().viewport,y);a.setContent(s.element());n.add(a.element(),u);var b=a.element();p.add(b,[h.resolve(s.anchorName()),h.resolve("side-widget-anchor")]);e.dialog(b,f.translate(s.dialogTextkey()));a.open();a.events.close.bind(function(){v.focus();B.trigger.close();C()});A.set(a);E.enter();B.trigger.open();v.events.mousedown.bind(D)},close:D,isOpen:A.isSet}}});l("7f",["b","c",
"6","7e","1h"],function(c,e,d,a,b){var g=e.detect(),f=(e=g.os.isOSX())?"\u2318":"Ctrl",h=e?"\u21e7":"Shift",k={blockquote:[f,h,"9"],bold:[f,"B"],italic:[f,"I"],underline:[f,"U"],link:[f,"K"],help:[f,"?"],fullscreen:[f,h,"F"],indent:[f,"]"],outdent:[f,"["],undo:[f,"Z"],redo:e?[f,h,"Z"]:[f,"Y"],search:[f,"F"]},m="fr nl sv ru de es it".split(" "),n=d.merge(k,{indent:[f,"M"],outdent:[f,h,"M"]}),p=function(a){var d=b.get();return c.contains(m,d)?n[a]:k[a]};d=function(a){a=p(a);return void 0===a?"":" "+
a.join("")};var f=function(a){a=p(a);return void 0===a?"":" ("+a.join(" ")+")"},r=e?d:f;return{get:function(b,c){return g.os.isiOS()?a.get(b):a.get(b)+r(c)}}});l("5d","7a 7b 7c 7d 7e 59 74 7f 2o".split(" "),function(c,e,d,a,b,g,f,h,k){var m=g.resolve("inverted-dialog-widget");return function(n){var p=n.filter();e.configure(p);var r=d.api(),q=function(){var b;b=c(n);b=a(n,b,"a11y-check",m);b.events.abort.bind(b.close);b.events.close.bind(t);r.set(b);b.open()},s=function(){r.run(function(a){a.close()})},
t=function(){r.clear()};return{ui:f.ui({"a11ycheck.general":{toggle:!1,hasPopup:!1,value:"a11y-check",textkey:b.key("action.a11ycheck"),action:function(){(r.isSet()?s:q)()},updateGeneral:function(a){k.add(a.element(),g.resolve("a11y-check"))},icon:!0,tooltip:h.get}}),destroy:t}}});l("md",["7","2p"],function(c,e){var d=function(a,c,d){var h=e.get(c,a);d=parseInt(h,10)+40*d;(0<d?e.set:e.remove)(c,a,d+"px")},a={change:c.curry(d,"margin-right")};return{ltr:{change:c.curry(d,"margin-left")},rtl:a}});l("dt",
["md"],function(c){return function(e){return{change:function(d,a){return(e.directionAt(d).isRtl()?c.rtl:c.ltr).change(d,a)}}}});l("du",["7","3w"],function(c,e){return{runTransaction:function(d,a,b,g){g=void 0!==g?g:c.noop;a.save();d.focus();b=b();e(function(){d.domChanged();d.uiChanged()},0);g();a.save();return b}}});l("me",["2w"],function(c){return c.immutable("startContainer","startOffset","endContainer","endOffset")});l("uq",["t","fg"],function(c,e){var d=function(a,b){if(a.property().isText(b))return e.point(b,
a.property().getText(b).length);var c=a.property().children(b);return 0<c.length?d(a,c[c.length-1]):e.point(b,c.length)},a=function(b,c,f){var g=b.property().children(c);return 0<g.length&&f<g.length?a(b,g[f],0):0<g.length&&b.property().isElement(c)&&g.length===f?d(b,g[g.length-1]):e.point(c,f)},b=function(a,d,e){return a.property().isText(d)&&0===a.property().getText(d).trim().length||a.property().isComment(d)?e(d).bind(function(d){return b(a,d,e).orThunk(function(){return c.some(d)})}):c.none()},
g=function(a,c){var d=b(a,c,a.query().nextSibling).getOr(c);if(a.property().isText(d))return e.point(d,0);var f=a.property().children(d);return 0<f.length?g(a,f[0]):e.point(d,0)},f=function(a,b){return a.property().isText(b)?a.property().getText(b).length:a.property().children(b).length},h=function(a,c){var d=b(a,c,a.query().prevSibling).getOr(c);if(a.property().isText(d))return e.point(d,f(a,d));var g=a.property().children(d);return 0<g.length?h(a,g[g.length-1]):e.point(d,f(a,d))};return{toLast:d,
toLeaf:a,toLower:function(a,b){var c=a.property().isText(b)?a.property().getText(b).length:a.property().children(b).length;return e.point(b,c)},freefallLtr:g,freefallRtl:h}});l("mf",["uq"],function(c){return{toLeaf:function(e,d,a){return c.toLeaf(e,d,a)},freefallLtr:function(e,d){return c.freefallLtr(e,d)},freefallRtl:function(e,d){return c.freefallRtl(e,d)}}});l("fh",["6s","mf"],function(c,e){var d=c();return{toLeaf:function(a,b){return e.toLeaf(d,a,b)},freefallLtr:function(a){return e.freefallLtr(d,
a)},freefallRtl:function(a){return e.freefallRtl(d,a)}}});l("dv","b me fh du 2n 2b".split(" "),function(c,e,d,a,b,g){var f=function(a,c){return b.inBody(a)&&0<=c&&c<g.children(a).length};return{multiple:function(b,k,m){return function(n,p){var r=b.getSelection(),q=r.map(function(a){return{left:g.parent(a.startContainer()).getOrDie(),right:g.parent(a.endContainer()).getOrDie()}}),s=a.runTransaction(b,k,function(){return c.bind(p,function(a){return a.getSelection().bind(function(a){return m(a.startContainer(),
a.startOffset(),a.endContainer(),a.endOffset()).map(function(a){return a.all()})}).getOr([])})},b.toEditing),r=r.filter(function(a){return f(a.startContainer(),a.startOffset())&&f(a.endContainer(),a.endOffset())}).getOrThunk(function(){var a=d.freefallLtr(0<s.length?s[0]:q.getOrDie().left),b=d.freefallRtl(0<s.length?s[s.length-1]:q.getOrDie().right);return e(a.element(),a.offset(),b.element(),b.offset())});b.setSelection(r.startContainer(),r.startOffset(),r.endContainer(),r.endOffset());return s}},
single:function(b,c,d,e,f){return function(g,q){var s=e(b,g.startContainer(),g.startOffset()),t=e(b,g.endContainer(),g.endOffset()),u=a.runTransaction(b,c,function(){return d(s.element(),s.offset(),t.element(),t.offset())},b.toEditing);return f(b,u,s,t,g)}}}});l("dw",["b","du"],function(c,e){return{multiple:function(d,a,b){return function(g,f){return e.runTransaction(d,a,function(){return c.bind(f,function(a){return a.getSelection().bind(function(a){return b(a.startContainer(),a.startOffset(),a.endContainer(),
a.endOffset()).map(function(a){return a.all()})}).getOr([])})},d.toEditing)}},single:function(c,a,b,g,f){return function(h,k){var m=g(c,h.startContainer(),h.startOffset()),n=g(c,h.endContainer(),h.endOffset()),p=e.runTransaction(c,a,function(){return b(m.element(),m.offset(),n.element(),n.offset())},c.toEditing);return f(c,p,m,n,h)}}}});l("dx",[],function(){return{update:function(c,e,d,a,b){return e.map(function(a){c.setSelection(a.start(),a.soffset(),a.finish(),a.foffset());return a.all()}).getOr([])}}});
l("dy",["fg"],function(c){return{spot:function(e,d,a){return c.point(d,a)}}});l("7o",["t","4o"],function(c,e){var d=e.generate([{none:[]},{multiple:["elements","environments"]},{single:["selection","environment"]}]);return{cata:function(a,b,c,d){return a.fold(b,c,d)},none:d.none,multiple:d.multiple,single:d.single,toSelection:function(a){return a.fold(c.none,function(a,d){return c.from(d[0]).bind(function(a){return a.getSelection()})},c.some)}}});l("9s",[],function(){var c=function(c){return{fold:c}};
return{on:function(e,d){return c(function(a,b,c){return b(e,d)})},before:function(e){return c(function(c,a,b){return c(e)})},after:function(e){return c(function(c,a,b){return b(e)})}}});l("ez",["9s","2w","l"],function(c,e,d){var a=e.immutable("start","soffset","finish","foffset"),b=e.immutable("start","soffset","finish","foffset"),g=e.immutable("start","finish");return{read:a,general:b,write:g,writeFromNative:function(a){var b=d.fromDom(a.startContainer),e=d.fromDom(a.endContainer);return g(c.on(b,
a.startOffset),c.on(e,a.endOffset))}}});l("f0",[],function(){return{run:function(c,e){if(c.getSelection)return e(c,c.getSelection());throw"No selection model supported.";}}});l("e5",["1c","l","2b"],function(c,e,d){var a=function(a,c,e,h){var k=d.owner(a).dom().createRange();k.setStart(a.dom(),c);k.setEnd(e.dom(),h);return k};return{after:function(b,d,e,h){var k=a(b,d,e,h);b=c.eq(b,e)&&d===h;return k.collapsed&&!b},commonAncestorContainer:function(b,c,d,h){b=a(b,c,d,h);return e.fromDom(b.commonAncestorContainer)}}});
l("mg",["ez","e5","l","2b"],function(c,e,d,a){var b=function(a){return e.after(d.fromDom(a.anchorNode),a.anchorOffset,d.fromDom(a.focusNode),a.focusOffset)},g=function(a,e){var f=d.fromDom(e.startContainer),g=d.fromDom(e.endContainer);return b(a)?c.read(g,e.endOffset,f,e.startOffset):c.read(f,e.startOffset,g,e.endOffset)},f=function(a){return b(a)},h=function(b,c,d,e){return function(f){if(f.extend)f.collapse(b.dom(),c),f.extend(d.dom(),e);else{var g=a.owner(b).dom().createRange();g.setStart(d.dom(),
e);g.setEnd(b.dom(),c);f.removeAllRanges();f.addRange(g)}}},k=function(a,b,c,d){return e.after(a,b,c,d)};return{read:function(){return{flip:g,isRtl:f}},write:function(){return{flip:h,isRtl:k}}}});l("f2",["ez","mg","t","e5","l"],function(c,e,d,a,b){var g=function(a,e){if(!0===f(a,e.start(),e.finish()).collapsed){var g=f(a,e.finish(),e.start());return!0===g.collapsed?d.none():d.some(c.general(b.fromDom(g.endContainer),g.endOffset,b.fromDom(g.startContainer),g.startOffset))}return d.none()},f=function(a,
b,c){var d=m(a);b.fold(function(a){d.setStartBefore(a.dom())},function(a,b){d.setStart(a.dom(),b)},function(a){d.setStartAfter(a.dom())});c.fold(function(a){d.setEndBefore(a.dom())},function(a,b){d.setEnd(a.dom(),b)},function(a){d.setEndAfter(a.dom())});return d},h=function(a,b){return f(a,b.start(),b.finish())},k=function(a,b){var c=h(a,b);return function(a){a.addRange(c)}},m=function(a){return a.document.createRange()};return{create:m,build:function(a,b){return g(a,b).fold(function(){return k(a,
b)},function(a){return e.write().flip(a.start(),a.soffset(),a.finish(),a.foffset())})},toNative:h,forceRange:function(a,b){var c=f(a,b.start(),b.finish());return!0===c.collapsed?f(a,b.finish(),b.start()):c},toExactNative:function(b,c,d,e,f){var g=a.after(c,d,e,f);b=b.document.createRange();g?(b.setStart(e.dom(),f),b.setEnd(c.dom(),d)):(b.setStart(c.dom(),d),b.setEnd(e.dom(),f));return b}}});l("f1","b f2 l 21 4h m".split(" "),function(c,e,d,a,b,g){var f=function(a,d,e,f){var p=a.document.createRange();
a=(g.is(d,f)?[d]:[]).concat(b.descendants(d,f));return c.filter(a,function(a){p.selectNodeContents(a.dom());return 1>p.compareBoundaryPoints(e.END_TO_START,e)&&-1<p.compareBoundaryPoints(e.START_TO_END,e)})};return{find:function(b,c,g){c=e.forceRange(b,c);var n=d.fromDom(c.commonAncestorContainer);return a.isElement(n)?f(b,n,c,g):[]}}});l("mh",["b","ez","9s","21"],function(c,e,d,a){var b=function(b,e){var h=a.name(b);return"input"===h?d.after(b):c.contains(["br","img"],h)?0===e?d.before(b):d.after(b):
d.on(b,e)};return{beforeSpecial:b,preprocess:function(a){var c=a.start().fold(d.before,b,d.after);a=a.finish().fold(d.before,b,d.after);return e.write(c,a)}}});l("mi",["b","l","q"],function(c,e,d){return{fromElements:function(a,b){var g=(b||d).createDocumentFragment();c.each(a,function(a){g.appendChild(a.dom())});return e.fromDom(g)}}});l("f3","ez mg f2 mh t l mi".split(" "),function(c,e,d,a,b,g,f){var h=function(a,b){var c=b.getRangeAt(0),d=b.getRangeAt(b.rangeCount-1),e=a.document.createRange();
e.setStart(c.startContainer,c.startOffset);e.setEnd(d.endContainer,d.endOffset);return e},k=function(a,c){return void 0!==c&&null!==c&&0<c.rangeCount?b.from(h(a,c)):b.none()};return{get:function(a,b){return k(a,b).map(function(a){var d=g.fromDom(a.startContainer),f=g.fromDom(a.endContainer);return e.read().isRtl(b)?e.read().flip(b,a):c.read(d,a.startOffset,f,a.endOffset)})},set:function(b){return function(c,e){var f=a.preprocess(b),f=d.build(c,f);void 0!==e&&null!==e&&(e.removeAllRanges(),f(e))}},
selectElementContents:function(a){return function(b,c){var e=d.create(b);e.selectNodeContents(a.dom());c.removeAllRanges();c.addRange(e)}},replace:function(a){return function(b,c){k(b,c).each(function(c){var d=f.fromElements(a,b.document);c.deleteContents();c.insertNode(d.dom())})}},replaceRange:function(b,c){return function(e,g){var h=a.preprocess(b),h=d.toNative(e,h),k=f.fromElements(c,e.document);h.deleteContents();h.insertNode(k.dom())}},deleteRange:function(a,b,c,e){return function(f,g){d.toExactNative(f,
a,b,c,e).deleteContents()}},cloneFragment:function(a,b,c,e){return function(f,h){var k=d.toExactNative(f,a,b,c,e).cloneContents();return g.fromDom(k)}},rectangleAt:function(a,c,e,f){return function(g,h){var k=d.toExactNative(g,a,c,e,f),u=k.getClientRects(),k=0<u.length?u[0]:k.getBoundingClientRect();return 0<k.width||0<k.height?b.some(k):b.none()}},bounds:function(a){return function(c,e){var f=d.create(c);f.selectNode(a.dom());f=f.getBoundingClientRect();return 0<f.width||0<f.height?b.some(f):b.none()}},
clearSelection:function(a,b){a.getSelection().removeAllRanges()},stringAt:function(a,b,c,e){return function(f,g){return d.toExactNative(f,a,b,c,e).toString()}}}});l("84","ez 9s f0 f1 f2 f3 1c l".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,b){d.run(a,g.set(b))},m=function(b,c,d){return a.find(b,c,d)};return{get:function(a){return d.run(a,g.get)},set:k,setExact:function(a,b,d,f,g){b=c.write(e.on(b,d),e.on(f,g));k(a,b)},selectElementContents:function(a,b){d.run(a,g.selectElementContents(b))},
replace:function(a,b){d.run(a,g.replace(b))},replaceRange:function(a,b,c){d.run(a,g.replaceRange(b,c))},deleteRange:function(a,b,c,e,f){d.run(a,g.deleteRange(b,c,e,f))},isCollapsed:function(a,b,c,d){return f.eq(a,c)&&b===d},cloneFragment:function(a,b,c,e,f){return d.run(a,g.cloneFragment(b,c,e,f))},rectangleAt:function(a,b,c,e,f){return d.run(a,g.rectangleAt(b,c,e,f))},bounds:function(a,b){return d.run(a,g.bounds(b))},findWithin:m,findWithinExact:function(a,b,d,f,g,h){b=c.write(e.on(b,d),e.on(f,g));
return m(a,b,h)},deriveExact:function(a,d){var e=b.forceRange(a,d);return c.general(h.fromDom(e.startContainer),e.startOffset,h.fromDom(e.endContainer),e.endOffset)},clearAll:function(a){d.run(a,g.clearSelection)},stringAt:function(a,b,c,e,f){return d.run(a,g.stringAt(b,c,e,f))}}});l("dz","84 8a 7 t 2n 1c 33 2b 1u".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(c,d){return b.inBody(c)?a.some(k.max(0,k.min(d,e.getEnd(c)))):a.none()};return{findDescendants:function(a,b,d,e,f){var g=h.defaultView(a);
return m(a,b).bind(function(b){return m(d,e).map(function(e){return c.findWithinExact(g.dom(),a,b,d,e,f)})}).getOr([])},findAncestors:function(a,b,c){return f.ancestor(a,c).fold(function(){return f.ancestor(b,c).toArray()},function(a){return f.ancestor(b,c).fold(d.constant([a]),function(b){return g.eq(a,b)?[a]:[a,b]})})}}});l("7l","c 9s 7 t 7z dz 1c l 2q 21 2s b3 2b 1u".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=c.detect().browser.isFirefox(),t=function(a,b){return x(a).filter(function(a){return f.eq(a.image(),
b)}).isSome()};c=function(a,b){var c=function(){a.setRelativeSelection(e.before(b),e.after(b))},d=s?function(){a.getSelection().fold(c,function(c){u(a,c,b)})}:c;a.focus();d()};var u=function(a,c,d){2===q.abs(c.startOffset()-c.endOffset())&&t(c,d)||(c=r.nextSibling(d).filter(b.isEmptyText).getOrThunk(function(){var a=h.fromText("");k.after(d,a);return a}),a.setRelativeSelection(e.before(d),e.after(c)))},v=function(a){return a.filter(function(a){return"img"===m.name(a)})},w=function(b){var c=v(r.child(b.startContainer(),
b.startOffset()));return v(r.nextSibling(b.startContainer())).orThunk(function(){return c}).bind(function(d){return v(r.prevSibling(b.endContainer())).bind(function(e){e=f.eq(d,e);var g=b.startContainer().dom().length===b.startOffset(),h=0===b.endOffset();return e&&(g||c.isSome())&&h?a.some(d):a.none()})})},l=function(c){if(!f.eq(c.startContainer(),c.endContainer()))return a.none();var d=q.min(c.startOffset(),c.endOffset()),e=q.max(c.startOffset(),c.endOffset()),g=v(r.child(c.startContainer(),d));
return e===d+1?g.orThunk(function(){return v(a.some(c.startContainer()))}):s&&e===d+2?g.filter(function(a){return r.nextSibling(a).filter(b.isEmptyText).isSome()}):a.none()},x=function(b){return b.collapsed()?a.none():l(b).orThunk(function(){return w(b)}).map(function(a){return{image:d.constant(a)}})};return{detect:x,selectionContains:function(b){b=g.findDescendants(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset(),"img");return 1===b.length?a.some(b[0]):a.none()},remove:function(a,
b){a.setRelativeSelection(e.before(b),e.before(b));n.remove(b)},select:c,reselect:s?c:d.noop}});l("ux",["b","7","t","2w"],function(c,e,d,a){var b=a.immutable("left","right"),g=function(a,b,g){b=a.property().children(b);a=c.findIndex(b,e.curry(a.eq,g));return-1<a?d.some({before:e.constant(b.slice(0,a)),after:e.constant(b.slice(a+1))}):d.none()};return{breakToLeft:function(a,c,d){return g(a,c,d).map(function(e){var g=a.create().clone(c);a.insert().appendAll(g,e.before().concat([d]));a.insert().appendAll(c,
e.after());a.insert().before(c,g);return b(g,c)})},breakToRight:function(a,c,d){return g(a,c,d).map(function(d){var e=a.create().clone(c);a.insert().appendAll(e,d.after());a.insert().after(c,e);return b(c,e)})},breakPath:function(b,c,e,g){var n=a.immutable("first","second","splits"),p=function(a,c,h){var t=n(a,d.none(),h);return e(a)?n(a,c,h):b.property().parent(a).bind(function(c){return g(b,c,a).map(function(a){var b=[{first:a.left,second:a.right}],f=e(c)?c:a.left();return p(f,d.some(a.right()),
h.concat(b))}).getOr(t)})};return p(c,d.none(),[])}}});l("uy",["b","7","t"],function(c,e,d){var a=function(a,d,e,k){e=d(a,e);return c.foldr(k,function(c,e){var h=d(a,e);return b(a,c,h)},e)},b=function(a,b,c){return b.bind(function(b){return c.filter(e.curry(a.eq,b))})};return{oneAll:function(b,c,e){if(0<e.length){var k=e[0];e=e.slice(1);b=a(b,c,k,e)}else b=d.none();return b}}});l("uz",["b","7","t","1u"],function(c,e,d,a){var b=function(b,g,k,m){var n=b.property().children(g);if(b.eq(g,k[0]))return d.some([k[0]]);
if(b.eq(g,m[0]))return d.some([m[0]]);var p=function(a){a=c.reverse(a);var d=c.findIndex(a,e.curry(b.eq,g));return c.findIndex(n,e.curry(b.eq,d<a.length-1?a[d+1]:a[d]))};k=p(k);m=p(m);var p=a.min(k,m),r=a.max(k,m);return-1<k&&-1<m?d.some(n.slice(p,r+1)):d.none()},g=function(a,b,g,m){var n=void 0!==m?m:e.constant(!1);b=[b].concat(a.up().all(b));m=[g].concat(a.up().all(g));var p=function(a){var b=c.findIndex(a,n);return-1<b?a.slice(0,b+1):a};g=p(b);var r=p(m);b=c.find(g,function(b){return c.exists(r,
e.curry(a.eq,b))});b=d.from(b);return{firstpath:e.constant(g),secondpath:e.constant(r),shared:e.constant(b)}};return{subset:function(a,c,d){var e=g(a,c,d);return e.shared().bind(function(c){return b(a,c,e.firstpath(),e.secondpath())})},ancestors:g}});l("my",["ux","uy","uz"],function(c,e,d){return{sharedOne:function(a,b,c){return e.oneAll(a,b,c)},subset:function(a,b,c){return d.subset(a,b,c)},ancestors:function(a,b,c,e){return d.ancestors(a,b,c,e)},breakToLeft:function(a,b,d){return c.breakToLeft(a,
b,d)},breakToRight:function(a,b,d){return c.breakToRight(a,b,d)},breakPath:function(a,b,d,e){return c.breakPath(a,b,d,e)}}});l("gn",["6s","my"],function(c,e){var d=c();return{sharedOne:function(a,b){return e.sharedOne(d,function(b,c){return a(c)},b)},subset:function(a,b){return e.subset(d,a,b)},ancestors:function(a,b,c){return e.ancestors(d,a,b,c)},breakToLeft:function(a,b){return e.breakToLeft(d,a,b)},breakToRight:function(a,b){return e.breakToRight(d,a,b)},breakPath:function(a,b,c){return e.breakPath(d,
a,b,function(a,b,d){return c(b,d)})}}});l("jo",["ec","8a","1c"],function(c,e,d){var a=function(a,c,e,h,k){return h(a).fold(function(){return!0},function(a){return d.eq(c,a)&&k(c,e)})};return{isLeft:function(b,d){return a(b,d.startContainer(),d.startOffset(),c.firstCursor,e.isStart)},isAtLeftEdge:function(b,d,f){return a(b,d,f,c.firstCursor,e.isStart)},isRight:function(b,d){return a(b,d.startContainer(),d.startOffset(),c.lastCursor,e.isEnd)},isAtRightEdge:function(b,d,f){return a(b,d,f,c.lastCursor,
e.isEnd)}}});l("oi","a b jo 7 fo 2w 1c 21 6o 4j b3 w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=function(a){a=h.name(a);return"td"===a||"th"===a},q=function(a){return"li"===h.name(a)||b.isBlock(a)},s=function(a){return"a"===h.name(a)},t=function(b,c,d){return m.closest(b,c,d).filter(a.not(d)).filter(a.not(r))};return{stopAt:function(b){return a.curry(f.eq,b)},isList:function(a){a=h.name(a);return"ol"===a||"ul"===a},isAnchor:s,isHeading:function(a,b){var d=c.isArray(b)?b:[],d="h1 h2 h3 h4 h5 h6".split(" ").concat(d),
f=h.name(a);return e.contains(d,f)},isCollapsed:function(a){return f.eq(a.startContainer(),a.endContainer())&&a.startOffset()===a.endOffset()},isRightEdge:function(a,b,c){var e=g.immutable("startContainer","startOffset");return d.isRight(a,e(b,c))},isBlockOrList:q,exitList:function(a){return 0===k.descendants(a,function(a){return h.isText(a)&&0<n.get(a).length&&0<p.trim(n.get(a)).length||h.isElement(a)&&e.contains("hr img input video iframe picture audio embed map object".split(" "),h.name(a))}).length},
findBlock:function(a,b){return m.closest(a,q,b)},findValidHardBreak:function(a,b){return t(a,q,b)},findAnchorBreak:function(a,b){return t(a,s,b)}}});l("zv","87 oi 1c l 2q 21 2s".split(" "),function(c,e,d,a,b,g,f){return{forceAddBr:function(h,k){if("br"!==g.name(h)){var m=a.fromTag("br");if(g.isText(h))b.after(h,m),d.eq(k,h)||f.remove(h);else if(e.isBlockOrList(h))b.append(h,m);else{var n=a.fromText(c.zeroWidth());b.prepend(h,n);b.after(h,m)}}},rootBr:function(c,d){b.before(c,a.fromTag("br"))}}});
l("zw",["b","21","2b"],function(c,e,d){var a=function(b,e,h){var k=[];c.each(d.children(b),function(b){e(b)&&(k=k.concat([b]));k=h(b)?k:k.concat(a(b,e,h))});return k},b=function(a,c){var h=d.children(a);return 0<h.length?(h=h[0],c(h)||"textarea"===e.name(h)?a:b(h,c)):0<h.length?b(h[0]):a};return{descendants:a,plunge:b}});l("w2","87 b 1b 2g 21 4h b3 2b w".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a){if(!b.isText(a))return!1;a=f.get(a).trim();return 0===a.length||0===a.replace(c.zeroWidth(),
"").length},n=function(c){if(b.isText(c))return m(c);var d=a.get(c);c=h.children(c);return""===k.trim(d)||e.forall(c,m)};return{vacant:function(a){a=g.descendants(a,"span,a");return e.filter(a,function(a){return"span"===b.name(a)?!(d.has(a,"class")&&0<d.get(a,"class").length)&&!d.has(a,"style")&&n(a):n(a)})},isEmpty:n,hasCursor:function(a,c){var d=void 0!==c?c:"hr br img input textarea iframe".split(" ");return b.isText(a)?!1===m(a):e.contains(d,b.name(a))},isVacantText:m,hasNoContent:n}});l("us",
"b 7 t zv zw oi w2 1b 21 2s 4h".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a){var c="li"===k.name(a)?g.isList:e.constant(!1);return 0<b.descendants(a,f.hasCursor,c).length?d.none():d.some(b.plunge(a,c))},r=function(a){a=f.vacant(a);c.each(a,m.remove)},q=function(a,b){var d=n.descendants(b,a),d=c.filter(d,f.isEmpty);c.each(d,m.remove);f.isEmpty(b)&&m.remove(b)};return{vacate:r,emptyStyles:function(a){!0===h.has(a,"style")&&0===h.get(a,"style").length&&h.remove(a,"style")},needsCursor:p,
postprocess:function(b,c,d){r(b);p(b).each(function(b){a.forceAddBr(b,c)})},lists:e.curry(q,"ul,ol"),blockquotes:e.curry(q,"blockquote")}});l("ur",["b","7","gn","us","1b"],function(c,e,d,a,b){var g=function(f,g){var k=d.breakToRight(f,g);k.each(function(d){d=d.right();c.each(["id"],e.curry(b.remove,d));a.emptyStyles(d)});return k};return{breakPath:function(a,b){return d.breakPath(a,b,g)}}});l("mj","b 9s 7 ur us oi 2q".split(" "),function(c,e,d,a,b,g,f){return{breakQuote:function(h,k){var m=a.breakPath(k,
g.stopAt(h));return m.second().map(function(a){var g=m.first();f.before(a,k);c.each([g,a],b.blockquotes);return{start:d.constant(e.on(k,0)),finish:d.constant(e.on(k,0))}})}}});l("e0",["mj"],function(c){return{breakQuote:c.breakQuote}});l("mk",["21","2b"],function(c,e){var d=function(a){return c.isElement(a)?a:e.parent(a).getOr(a)};return{bothMatch:function(a,b,c){a=d(a);b=d(b);return c(a)&&c(b)}}});l("mt",["fo","m"],function(c,e){return{isRootOrCell:function(c){return function(a){return c(a)||e.is(a,
"td,th")}},isRootOrContainer:function(d){return function(a){return d(a)||c.isContainer(a)}}}});l("ut",["t"],function(c){var e=function(c,a){return 0===c.length?!0:0===a.length?!1:c[0]<a[0]?!0:a[0]<c[0]?!1:e(c.slice(1),a.slice(1))};return{head:function(d){return 0<d.length?c.some(d[0]):c.none()},tail:function(d){return 0<d.length?c.some(d.slice(1)):c.none()},toLast:function(d){return 0<d.length?c.some(d[d.length-1]):c.none()},box:function(c){return[c]},isBefore:e}});l("ni",["b","7","4o","ut"],function(c,
e,d,a){d=d.generate([{quasi:["elements"]},{block:["element"]},{container:["element","children"]},{fixture:["element"]}]);var b=function(a){return a.fold(function(a){return"@q["+c.map(a,function(a){return a.dom().outerHTML||'"'+a.dom().nodeValue+'"'}).join(",")+"]"},function(a){return"@"+a.dom().nodeName.toLowerCase()+"("+a.dom().innerHTML+")"},function(a,d){return"#"+a.dom().nodeName.toLowerCase()+"("+c.map(d,b).join(",")+")"},function(a){return a.dom().nodeName.toLowerCase()})},g=function(a){var b=
function(a){return[a]};return a.fold(e.identity,b,b,b)},f=e.constant(!0),h=e.constant(!1);return{cata:function(a,b,c,d,e){return a.fold(b,c,d,e)},quasi:d.quasi,block:d.block,container:d.container,fixture:d.fixture,isQuasi:function(a){return a.fold(f,h,h,h)},isFixture:function(a){return a.fold(h,h,h,f)},isQuasiOrFixture:function(a){return a.fold(f,h,h,f)},toTarget:g,toString:b,toLastTarget:function(b){return a.toLast(g(b))}}});l("130",["7"],function(c){var e=function(d,a){return{fold:d,label:c.constant(a)}};
return{before:function(c){return e(function(a,b,e,f,h){return a(c)},"before")},after:function(c){return e(function(a,b,e,f,h){return b(c)},"after")},rest:function(c){return e(function(a,b,e,f,h){return e(c)},"rest")},last:function(c){return e(function(a,b,e,f,h){return f(c)},"last")},invalid:function(c,a){return e(function(b,e,f,h,k){return k(c,a)},"invalid")}}});l("vb",["b","t","fg","i4","l3"],function(c,e,d,a,b){return{subdivide:function(g,f,h){var k=g.property().getText(f);h=c.filter(b.splits(k,
h),function(a){return 0<a.length});if(1>=h.length)return[d.range(f,0,k.length)];g.property().setText(f,h[0]);var k=a.generate(h.slice(1),function(a,b){var c=g.create().text(a),c=d.range(c,b,b+a.length);return e.some(c)},h[0].length),m=c.map(k,function(a){return a.element()});g.insert().afterAll(f,m);return[d.range(f,0,h[0].length)].concat(k)}}});l("101",["7"],function(c){var e=function(d,a){return{fold:d,label:c.constant(a)}};return{none:function(){return e(function(c,a,b,e){return c()},"none")},
start:function(c){return e(function(a,b,e,f){return b(c)},"start")},middle:function(c,a){return e(function(b,e,f,h){return f(c,a)},"middle")},end:function(c){return e(function(a,b,e,f){return f(c)},"end")}}});l("vc",["101"],function(c){return{determine:function(e){return e.before().fold(function(){return e.after().fold(function(){return c.none()},function(d){return c.start(d)})},function(d){return e.after().fold(function(){return c.end(d)},function(a){return c.middle(d,a)})})}}});l("131",["b","6t",
"kg","sr","12q"],function(c,e,d,a,b){return{group:function(g,f,h){f=c.bind(f,function(a){return e.from(g,a,h)});f=a.splitbyAdv(f,function(a){return d.cata(a,function(){return b.excludeWithout(a)},function(){return b.excludeWith(a)},function(){return b.include(a)})});return c.filter(f,function(a){return 0<a.length})}}});l("15l",["b","t"],function(c,e){return{common:function(d,a,b){a=[a].concat(d.up().all(a));var g=[b].concat(d.up().all(b));b=c.find(a,function(a){return c.exists(g,function(b){return d.eq(b,
a)})});return e.from(b)}}});l("15m",["b"],function(c){var e="table tbody thead tfoot tr ul ol".split(" ");return function(d){var a=d.property(),b=function(b,d){return a.parent(b).map(a.name).map(function(a){return!c.contains(d,a)}).getOr(!1)};return{validateText:function(c){return a.isText(c)&&b(c,e)}}}});l("132",["b","7","6t","15l","15m"],function(c,e,d,a,b){return{range:function(g,f,h,k,m){return g.eq(f,k)?[f]:a.common(g,f,k).fold(function(){return[]},function(a){a=[a].concat(d.all(g,a,e.constant(!1)));
var p=c.findIndex(a,e.curry(g.eq,f)),r=c.findIndex(a,e.curry(g.eq,k));a=-1<p&&-1<r?p<r?a.slice(p+h,r+m):a.slice(r+m,p+h):[];p=b(g);return c.filter(a,p.validateText)})}}});l("102",["131","132"],function(c,e){return{range:function(c,a,b,g,f){return e.range(c,a,b,g,f)},group:function(d,a,b){return c.group(d,a,b)}}});l("103",["2w"],function(c){return c.immutable("before","after")});l("ve",["b","t","103","l3"],function(c,e,d,a){var b=function(b,c,d){b=b.property().getText(c);return a.splits(b,d)},g=function(a,
d,e,m){if(!a.property().isText(d)||e===m)return d;if(e>m)return g(a,d,m,e);var n=a.property().getText(d).length;if(0===e&&m===n)return d;m=b(a,d,[e,m]);a.property().setText(d,m[0]);m=c.map(m.slice(1),function(b){return a.create().text(b)});n=m[0];a.insert().afterAll(d,m);return 0===e?d:n};return{split:function(a,c,g){if(!a.property().isText(c)||0>=g)return d(e.none(),e.some(c));if(g>=a.property().getText(c).length)return d(e.some(c),e.none());g=b(a,c,[g]);a.property().setText(c,g[0]);g=a.create().text(g[1]);
a.insert().after(c,g);return d(e.some(c),e.some(g))},splitByPair:g}});l("vd",["fg","102","ve"],function(c,e,d){var a=function(a,b,h,k,m){h=d.split(a,b,h).after().fold(function(){return c.delta(b,1)},function(a){return c.delta(a,0)});m=d.split(a,k,m).before().fold(function(){return c.delta(k,0)},function(a){return c.delta(a,1)});return e.range(a,h.element(),h.deltaOffset(),m.element(),m.deltaOffset())},b=function(a,b,c,e,m){return[d.splitByPair(a,b,c,m)]};return{nodes:function(c,d,e,k,m){return(c.eq(d,
k)?b:a)(c,d,e,k,m)}}});l("q0",["vb","vc","vd","ve"],function(c,e,d,a){return{split:function(b,c,d){return a.split(b,c,d)},splitByPair:function(b,c,d,e){return a.splitByPair(b,c,d,e)},range:function(a,c,e,h,k){return d.nodes(a,c,e,h,k)},subdivide:function(a,d,e){return c.subdivide(a,d,e)},position:function(a,c){return e.determine(c)}}});l("zx",["7","130","q0"],function(c,e,d){var a=function(a,b,c){var k=d.split(a,b,c);return d.position(a,k).fold(function(){return e.invalid(b,c)},e.before,e.after,e.after)},
b=function(a,b,c){a=a.property().children(b);return c===a.length?e.last(b):c<a.length?e.rest(a[c]):e.invalid(b,c)};return{atStartOf:function(d,e,h,k){var m=function(a){d.insert().before(a,k)};(d.property().isText(e)?a:b)(d,e,h).fold(m,function(a){d.insert().after(a,k)},m,function(a){d.insert().append(a,k)},c.noop)}}});l("v5",["zx"],function(c){return{atStartOf:function(e,d,a,b){c.atStartOf(e,d,a,b)}}});l("v0",["6","7","4o"],function(c,e,d){d=d.generate([{none:[]},{root:["target","block"]},{created:["target",
"block"]},{actual:["target","block"]}]);return c.merge(d,{toString:function(a){return a.fold(function(){return["block.none"]},function(a,c){return["block.root",a,c]},function(a,c){return["block.created",a,c]},function(a,c){return["block.actual",a,c]})},cata:function(a,b,c,d,e){return a.fold(b,c,d,e)},extract:function(a){var b=e.constant([]),c=function(a,b){return[b]};return a.fold(b,b,c,c)},extractEvenRoot:function(a){var b=e.constant([]),c=function(a,b){return[b]};return a.fold(b,c,c,c)}})});l("uw",
"b 7 t mf j3 my".split(" "),function(c,e,d,a,b,g){var f=function(a,b){return function(c){return a.eq(c,b)||a.property().parent(c).map(function(c){return a.eq(c,b)}).getOr(!1)}},h=function(a,b,c){return a.eq(b,c)?d.none():a.property().isBoundary(c)?a.query().nextSibling(c):a.property().isEmptyTag(c)?(b=f(a,b),b(c)?a.query().nextSibling(c):g.breakPath(a,c,b,g.breakToRight).second()):d.none()},k=function(a,b,c){if(a.eq(b,c))return d.none();if(a.property().isBoundary(c))return a.query().prevSibling(c);
if(a.property().isEmptyTag(c)){var e=f(a,b);return e(c)?a.query().prevSibling(c):a.query().prevSibling(c).map(function(b){return g.breakPath(a,b,e,g.breakToRight).first()})}return d.none()},m=function(a,b,e,f){return e(a,b,f).bind(function(e){var f=a.property().children(b),f=c.findIndex(f,function(b){return a.eq(b,e)});return-1<f?d.some(f):d.none()})},n=function(a,b){return a.property().isEmptyTag(b)||a.property().isBoundary(b)};return{create:function(c,d,f){if(n(c,f)||n(c,a.toLeaf(c,f,0).element()))return[f];
var g=e.curry(n,c),t=e.curry(c.eq,d),u=b.seekLeft(c,f,g,t).bind(function(a){return m(c,d,h,a)}).getOr(0),v=c.property().children(d);f=b.seekRight(c,f,g,t).bind(function(a){return m(c,d,k,a)}).getOr(v.length-1);return c.property().children(d).slice(u,f+1)}}});l("uu","b t v5 v0 uw 1u".split(" "),function(c,e,d,a,b,g){var f=function(a,b,c,d){return c(b)||d(b)?e.some(b):a.up().predicate(b,c,d)},h=function(b,c,d){d=d();b.insert().wrap(c,d);return a.created(c,d)},k=function(b,d,e,f){var g=f();b.insert().before(e[0],
g);c.each(e,function(a){b.insert().append(g,a)});return a.created(d,g)},m=function(c,e,f,m,s,t,u){if(t(f)){var v=c.property().children(e);if(m<v.length&&u(v[m]))return a.actual(f,v[m])}return s(e).fold(function(){return a.root(f,e)},function(s){if(t(f)){var u=s(),v=c.property().children(e),l=v[m];void 0!==l&&(s=b.create(c,e,l,s),c.insert().appendAll(u,0<s.length?s:[l]));d.atStartOf(c,e,g.min(v.count,m),u);return a.created(e,u)}c.property().isEmptyTag(f)?s=h(c,f,s):(u=b.create(c,e,f),s=0<u.length?
k(c,f,u,s):h(c,f,s));return s})};return{single:function(b,c,d,e,g,h){return f(b,d,c,h).fold(a.none,function(f){return h(f)?m(b,f,d,e,g,h,c):a.actual(d,f)})}}});l("n4",["6u"],function(c){return{resolve:c.create("ephox-soldier").resolve}});l("mp","b 7 t n4 2o 21 2s 4h 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=a.resolve("quasi-block"),n=function(a){a=k.children(a);return 1===a.length&&"br"===g.name(a[0])},p=function(a){return b.has(a,m)&&!n(a)};return{condense:function(a){a=c.filter(a,function(a,
c){if(!g.isElement(a))return!0;var d;b.has(a,m)&&n(a)&&(k.prevSibling(a).exists(p)||k.nextSibling(a).exists(p))?(f.remove(a),d=!1):d=!0;return d});return c.map(a,function(a){var d=g.isElement(a)?[a].concat(h.descendants(a,"."+m)):[];c.each(d,function(a){b.remove(a,m)});return a})},register:function(a){return function(c){return a(c).map(function(a){return function(){var c=a();b.add(c,m);return c}})}},style:e.constant(m)}});l("p5",["6s","b","uu","mp","21"],function(c,e,d,a,b){var g=c();return{single:function(b,
c,e,m,n){return d.single(g,b,c,e,a.register(m),n)},isBlock:function(a){return e.contains("ol p div ul table caption td th h1 h2 h3 h4 h5 h6 body blockquote pre".split(" "),b.name(a))}}});l("nh",["7"],function(c){return{tag:function(){return"p"},nu:function(e){return c.curry(e.create().nu,"p")}}});l("uv",["t","4o"],function(c,e){var d=function(a){return 0<a.length?c.some(a[0]):c.none()},a=e.generate([{descend:["index"]},{leftOf:["rindex"]},{bounded:["lindex","rindex"]},{rightOf:["lindex"]},{all:[]}]);
return{derive:function(b,c){return b.bind(d).fold(function(){return c.bind(d).fold(function(){return a.all()},function(b){return a.leftOf(b)})},function(b){return c.bind(d).fold(function(){return a.rightOf(b)},function(c){return b===c?a.descend(b):a.bounded(b,c)})})},cata:function(a,c,d,e,k,m){return a.fold(c,d,e,k,m)}}});l("mo","t j3 mm ut ni uv uw".split(" "),function(c,e,d,a,b,g,f){var h=function(a,b,d){return c.from(a.property().children(b)[d])},k=function(a,c,d){var e=a.property().children(d),
f=h(a,d,0).bind(function(b){return h(a,d,e.length-1).map(function(e){return m(a,c,d,b,e)})}).getOr([]);return b.container(d,f)},m=function(a,d,f,g,h){var k=n(a,f,d,g);return b.toLastTarget(k).filter(function(b){return!a.eq(h,b)}).bind(function(b){return e.walk(a,b,e.sidestep,e.walkers().right()).bind(function(b){if(a.eq(f,b.item()))return c.none();b=m(a,d,f,b.item(),h);return c.some([k].concat(b))})}).getOrThunk(function(){return[k]})},n=function(a,c,e,g){if(d.isFormatting(a,g))return b.block(g);
if(d.isEmptyTag(a,g))return b.fixture(g);if(d.isBlock(a,g)||d.isContainer(a,g))return k(a,e,g);a=f.create(a,c,g);return b.quasi(0<a.length?a:[g])},p=function(a,b,c){return n(a,c,b,c)},r=function(d,e,f,g,h,k,n,p){f=f.map(function(b){return q(d,e,b,n.bind(a.tail),c.none())}).getOr([]);h=h.map(function(b){return q(d,e,b,c.none(),p.bind(a.tail))}).getOr([]);g=0===g.length?[]:m(d,e,k,g[0],g[g.length-1]);return[b.container(k,f.concat(g).concat(h))]},q=function(b,d,e,f,h){var k=b.property().children(e);
f.bind(a.head).getOr(0);h.bind(a.head).getOr(k.length-1);var m=g.derive(f,h);return g.cata(m,function(c){return q(b,d,k[c],f.bind(a.tail),h.bind(a.tail))},function(a){return r(b,d,c.none(),k.slice(0,a),c.from(k[a]),e,f,h)},function(a,g){return r(b,d,c.from(k[a]),k.slice(a+1,g),c.from(k[g]),e,f,h)},function(a){return r(b,d,c.from(k[a]),k.slice(a+1),c.none(),e,f,h)},function(){return[p(b,d,e)]})};return{categorise:p,within:function(b,d,e,f,g){return!0===a.isBefore(f,g)?q(b,d,e,c.some(f),c.some(g)):
q(b,d,e,c.some(g),c.some(f))}}});l("nj","6s b 7 t nh ni mo mp 2o 1c l 2q 3c 21 2s b3".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){var u=function(a,b){if("li"!==q.name(a))return!1;var c=e.foldl(b,function(a,b){return 1<a.quasi||0<a.nonlist?a:g.cata(b,function(){return{quasi:1+a.quasi,nonlist:a.nonlist}},function(){return{quasi:a.quasi,nonlist:1+a.nonlist}},function(b){return{quasi:a.quasi,nonlist:(e.contains(["ul","ol"],q.name(b))?0:1)+a.nonlist}},function(){return{quasi:1+a.quasi,nonlist:a.nonlist}})},
{quasi:0,nonlist:0});return 1>=c.quasi&&0===c.nonlist},v=function(a,b,c){return 0>=c.length?!0:e.contains(a,q.name(b))?2<c.length?!1:1===c.length?g.isQuasiOrFixture(c[0]):g.isQuasiOrFixture(c[0])&&g.isQuasiOrFixture(c[1])&&!e.forall(c,g.isFixture):!1};return{wrap:function(a){if(0===a.length||1===a.length&&q.isText(a[0])&&0===t.get(a[0]).trim().length)return[];var c=n.fromTag(b.tag());k.add(c,h.style());p.before(a[0],c);r.append(c,a);return[c]},handleContainer:function(a,b,c,d){if(v(a,b,c))return[b];
var f=u(b,c)?[b]:[];return f.concat(e.bind(c,function(a){return d(a,0<f.length)}))},hasSimpleContent:v,isNestedList:u,handleRoot:function(e,h){var k=f.categorise(c(),d.curry(m.eq,h),h,h,h),n=function(){return a.some(b.nu(c()))},p=a.none;return g.cata(k,n,p,function(a,b){return v(e,a,b)||u(a,b)?p():n()},n)}}});l("ml","b 7 fo mt ni p5 nj 21".split(" "),function(c,e,d,a,b,g,f,h){var k=["li","td","th","caption"],m=function(a,c){return b.cata(a,function(a){return!0===c?[]:f.wrap(a)},function(a){return[a]},
function(a,b){return f.handleContainer(k,a,b,m)},function(a){return!0===c?[]:f.wrap([a])})};return{isRootContainer:a.isRootOrContainer,extract:function(a){return m(a,!1)},isCapable:function(a){return g.isBlock(a)||c.contains(k,h.name(a))},canUse:function(a){return d.isFormatting(a)||c.contains(k,h.name(a))},quasi:e.curry(f.handleRoot,k),ascend:e.identity}});l("ed",["8a","t","2w"],function(c,e,d){var a=d.immutableBag(["start","soffset","finish","foffset","all"],[]),b=d.immutableBag(["start","soffset",
"finish","foffset"],[]);return{block:a,inline:b,blockFrom:function(b){return 0<b.length?e.some(a({start:b[0],soffset:0,finish:b[b.length-1],foffset:c.getEnd(b[b.length-1]),all:b})):e.none()},inlineFrom:function(a){return a.map(function(a){return b({start:a.start(),soffset:a.soffset(),finish:a.finish(),foffset:a.foffset()})})}}});l("mz","8a 7 t fg fh 1c m".split(" "),function(c,e,d,a,b,g,f){var h=function(a){return f.is(a,"td,th")},k=function(a){return g.eq(a.startContainer(),a.endContainer())&&a.startOffset()===
a.endOffset()},m=function(a,c){return a(c.startContainer())?d.some(b.freefallLtr(c.startContainer())):d.none()},n=function(c,e){return(c(e.endContainer())?d.some(b.freefallRtl(e.endContainer())):d.none()).map(function(b){return f.is(b.element(),"br")&&!1===k(e)?a.point(b.element(),1):b})};return{is:h,isCollapsed:k,isWholeCell:function(a){return h(a.startContainer())&&g.eq(a.startContainer(),a.endContainer())&&0===a.startOffset()&&a.endOffset()===c.getEnd(a.endContainer())},left:e.curry(m,h),leftWith:m,
right:e.curry(n,h),rightWith:n}});l("eg",["8a","t","2w","2b"],function(c,e,d,a){var b=d.immutable("startContainer","startOffset","endContainer","endOffset"),g=d.immutable("start","soffset","finish","foffset");return{hare:b,fussy:g,fromHare:function(a){return g(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())},fromFussy:function(a){return b(a.start(),a.soffset(),a.finish(),a.foffset())},fussyFromElements:function(b){if(0===b.length)return e.none();var d=b[0];b=b[b.length-1];d=a.firstChild(d).getOr(d);
b=a.lastChild(b).getOr(b);return e.some(g(d,0,b,c.getEnd(b)))}}});l("o6",["7","t","1c","2b"],function(c,e,d,a){var b=function(c,d){return d(c)?e.some([]):a.parent(c).bind(function(e){return a.findIndex(c).bind(function(a){return b(e,d).map(function(b){return b.concat([a])})})})},g=function(b,c){return 0===c.length?e.some(b):a.child(b,c[0]).bind(function(a){return g(a,c.slice(1))})};return{path:function(a,g){var k=c.curry(d.eq,a);return d.eq(a,g)?e.some([]):b(g,k)},follow:g}});l("mn","8a 7 t fg fh gn 2w mz v0 p5 eg 1c l o6 2q".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=f.immutable("ancestor","startPath","finishPath"),u=function(a,b,c){return g.ancestors(b,c,a).shared().bind(function(a){return q.path(a,b).bind(function(b){return q.path(a,c).map(function(c){return t(a,b,c)})})})},v=function(a,b,c,e){var f=b.isRootContainer(a);c=m.single(b.isCapable,c,e,b.quasi,f);c=k.extractEvenRoot(c);return 1===c.length?d.some(c[0]).map(function(c){return b.ascend(c,a)}):d.none()},w=function(d,e,f,g){if(!1===e(f))return a.point(f,g);
g<c.getEnd(f)||d.isCapable(f)&&d.canUse(f)?f=b.toLeaf(f,g):(d=r.fromTag("br"),s.append(f,d),f=a.point(d,0));return f};return{branch:function(a,b,c,f,g,k){var m=b.isRootContainer(a),r=n.hare(c,f,g,k),q=e.constant(!0===h.isWholeCell(r)),s=h.left(r).filter(q).getOrThunk(function(){return w(b,m,c,f)}),l=h.right(r).filter(q).getOrThunk(function(){return w(b,m,g,k)});return v(a,b,s.element(),s.offset()).bind(function(c){return(p.eq(s.element(),l.element())&&s.offset()===l.offset()?d.some(c):v(a,b,l.element(),
l.offset())).bind(function(b){return p.eq(c,b)?d.some(t(c,[],[])):u(a,c,b)})})}}});l("et","6s b 8a t fg fh fo ed mn mo mp 2n e5 l 2q 21 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){var v=function(c,f,h,k,m,n,r){c=f.isRootContainer(c)(h);f=!c&&p.inBody(h)?b.point(h,k):c||!f.isCapable(h)||p.inBody(h)?p.inBody(m.element())&&e.contains(["td","th"],t.name(h))?m:!p.inBody(h)&&p.inBody(n.element())&&"br"==t.name(n.element())?n:g.toLeaf(r,0):b.point(r,k);d.getEnd(f.element());return f.offset()<=
d.getEnd(f.element())?a.some(f):a.none()};return{applyOn:function(d,p,t,l,A,B,C){var D=r.after(t,l,A,B),F=p.isRootContainer(d)(t)?g.toLeaf(t,l):b.point(t,l),E=p.isRootContainer(d)(A)?g.toLeaf(A,B):b.point(A,B),G=g.toLeaf(t,l),H=g.toLeaf(A,B),L=k.branch(d,p,t,l,A,B).map(function(a){return m.within(c(),d,a.ancestor(),a.startPath(),a.finishPath())}).getOr([]),L=e.bind(L,p.extract);e.each(L,function(a){0===u.children(a).length&&f.isFormatting(a)&&s.append(a,q.fromTag("br"))});var L=n.condense(L),I=C(L);
return 0===I.length?a.none():v(d,p,t,l,F,G,I[D?I.length-1:0]).bind(function(a){return v(d,p,A,B,E,H,I[D?0:I.length-1]).map(function(b){return h.block({start:a.element(),soffset:a.offset(),finish:b.element(),foffset:b.offset(),all:I})})})}}});l("mq",["2p","bx","21"],function(c,e,d){var a=function(a){return function(b){return a}},b={start:e.onDirection("left","right"),end:e.onDirection("right","left"),justify:a("justify"),center:a("center"),"match-parent":a("match-parent")};return{hasAlignment:function(a,
e,h){d.isText(a)?a=!1:(e=c.get(a,e),a=(void 0!==b[e]?b[e](a):e)===h);return a}}});l("mr",["2p"],function(c){return function(e,d){return{is:function(a){return c.get(a,e)===d},remove:function(a){c.remove(a,e)},set:function(a){c.set(a,e,d)}}}});l("e1","b 7 mk ml et mq mr".split(" "),function(c,e,d,a,b,g,f){var h=function(a,b,c){return g.hasAlignment(c,a,b)},k=function(g,k,m){var n=f(k,m);return{run:function(d,e,f,g,h){return b.applyOn(d,a,e,f,g,h,function(a){var b=c.forall(a,n.is)?n.remove:n.set;c.each(a,
b);return a})},query:function(a,b){var c=e.curry(h,k,m);return d.bothMatch(a,b,c)},name:e.constant(g)}},m=k("JustifyLeft","text-align","left"),n=k("JustifyCenter","text-align","center"),p=k("JustifyRight","text-align","right"),k=k("JustifyFull","text-align","justify");return{justifyleft:e.constant(m),justifycentre:e.constant(n),justifyright:e.constant(p),justifyfull:e.constant(k)}});l("e8",["t","2p","35"],function(c,e,d){var a=function(a){a=a.dom();if(d.isSupported(a)){var c=a.style.marginLeft;return"auto"===
a.style.marginRight&&"auto"===c}return!1};return{isCentered:a,divine:function(b){if(a(b))return c.some("center");var d=e.getRaw(b,"float").getOrThunk(function(){return e.get(b,"float")});return void 0!==d&&null!==d&&0<d.length?c.some(d):c.none()},getRaw:function(a){return e.getRaw(a,"float").getOr(null)},setCentered:function(a){e.setAll(a,{"margin-left":"auto","margin-right":"auto"})}}});l("e2",["7","t","2p","e8","21"],function(c,e,d,a,b){var g={left:{"float":"left",margin:""},right:{"float":"right",
margin:""},none:{"float":"none",margin:""},center:{"float":"",margin:"0 auto"}},f={none:{display:""},left:{display:""},right:{display:""},center:{display:"block"}},h=function(b,c){return a.divine(b).is(c)},k=function(a,c){var h="img"===b.name(a)&&void 0!==f[c]?f[c]:{};e.from(g[c]).each(function(b){d.setAll(a,b);d.setAll(a,h)})},m=function(a,b){return{run:function(a){k(a,b);return e.none()},query:function(a){return h(a,b)},name:c.constant(a)}},n=m("JustifyLeft","left"),p=m("JustifyCenter","center"),
r=m("JustifyRight","right"),m=m("FloatNone","none");return{floatnone:c.constant(m),floatleft:c.constant(n),floatcentre:c.constant(p),floatright:c.constant(r),queryIsFloat:h,runFloat:k}});l("v1",["2w"],function(c){return c.immutable("level","content","cruft","list","item")});l("ms",["v1"],function(c){return{level:function(e,d){return c(e.level()+d,e.content(),e.cruft(),e.list(),e.item())},list:function(e,d){return c(e.level(),e.content(),e.cruft(),d,e.item())}}});l("mu","6s b 7 t fo nh mt ni p5 nj 21".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a){return h.cata(a,function(a){return m.wrap(a)},function(a){return[a]},function(a,b){return e.bind(b,p)},function(a){return m.wrap([a])})};return{isRootContainer:f.isRootOrContainer,extract:p,isCapable:function(a){return k.isBlock(a)||"li"===n.name(a)},canUse:function(a){return b.isFormatting(a)},quasi:function(b){return a.some(g.nu(c()))},ascend:d.identity}});l("v3",["b","9","mm","2w"],function(c,e,d,a){var b=a.immutable("elements","elementsTransformed"),
g=a.immutable("original","replaced"),f=a.immutable("result","items");return{answer:b,write:function(a,k){var m=[],n=function(b){var c=a.create().nu("p");a.insert().appendAll(c,b);return c},p=function(a){if(0===a.length)throw"Cannot get tail of an empty array";return a.slice(1)},r=function(b,d){for(var g=a.create().clone(d[0].list()),k=[],m=d[0];0<d.length&&d[0].level()>=b&&a.property().name(m.list())===a.property().name(d[0].list());){var n;if(d[0].level()===b){n=b;var s=d,l=s[0],B;B=l;var C=B.item(),
D=C,D=a.property().children(D);c.each(D,a.remove().remove);a.insert().appendAll(C,B.content());B=C;l=l.cruft();for(s=p(s);0<s.length&&s[0].level()>n;)s=r(n+1,s),C=[s.result()].filter(e.curry(q,["li"])),s=s.items(),a.insert().appendAll(B,C);a.insert().appendAll(B,l);n=f(B,s);s=[n.result()].filter(e.curry(q,["li"]));n=f(s,n.items())}else n=r(b+1,d),s=[n.result()].filter(e.curry(q,["ul","ol"])),l=a.create().nu("li"),a.styles().set(l,"list-style-type","none"),a.attrs().remove(g,"id"),a.insert().appendAll(l,
s),n=f([l],n.items());d=n.items();k=k.concat(n.result())}a.insert().appendAll(g,k);return f(g,d)},q=function(b,d){return!(c.contains(b,a.property().name(d))&&0===a.property().children(d).length)},s=function(b){for(var c=[];0<b.length;){var k=b[0];if(0===k.level()){var s=b[0],l=s.content(),l=1===l.length&&d.isBlock(a,l[0])?l[0]:n(l);m.push(g(s.item(),l));b=f(l,p(b));s=[b.result()].filter(e.curry(q,["p"]));0===s.length&&m.pop();b=b.items();c=c.concat(s);l=b;for(b=[];0<l.length&&0<l[0].level();)l=r(1,
l),s=[l.result()].filter(e.curry(q,["ul","ol"])),l=l.items(),b=b.concat(s);s=f(b,l);b=s.items();c=c.concat(s.result());0<k.cruft().length&&(c=c.concat([n(k.cruft())]))}else b=r(1,b),k=[b.result()].filter(e.curry(q,["ul","ol"])),b=b.items(),c=c.concat(k)}return f(c,b)}(k);if(0!==s.items().length)throw"Error - there should not be any remaining items to parse";return b(s.result(),m)}}});l("v2",["b","v3"],function(c,e){var d=function(a){return c.foldl(a,function(a,c){var d=a.elements().concat(c.elements()),
h=a.elementsTransformed().concat(c.elementsTransformed());return e.answer(d,h)},e.answer([],[]))};return{combine:d,write:function(a,b){var g=c.groupBy(b,function(b){return a.property().name(b.list())+"-"+a.styles().getRaw(b.list(),"list-style-type").getOr("default")}),g=c.map(g,function(b){return e.write(a,b)});return d(g)}}});l("nk",["6s","v2","v3"],function(c,e,d){var a=c();return{groupWrite:function(b){return e.write(a,b)},write:function(b){return d.write(a,b)}}});l("nl","b 7 t fo 1c 21 6o 4h 33 1u".split(" "),
function(c,e,d,a,b,g,f,h,k,m){var n=function(a,b,c){return k.closest(a,"li",c).bind(function(a){return b(a,c).map(function(b){return{item:e.constant(a),outerlist:e.constant(b)}})})},p=function(a,d){return c.findIndex(a,function(a){return b.eq(a,d)})};return{context:function(a,c,f,g,k){return n(a,f,k).bind(function(v){return n(c,f,k).bind(function(f){if(b.eq(v.outerlist(),f.outerlist())){var k;if(b.eq(a,c))k=[v.item()];else{k=v.outerlist();var n=v.item(),s=f.item();k=h.descendants(k,"li");var n=p(k,
n),u=p(k,s),s=m.min(n,u),n=m.max(n,u);k=(-1<s&&-1<n?d.some(k.slice(s,n+1)):d.none()).getOr([])}f=d.some({outerlist:v.outerlist,startItem:v.item,finishItem:f.item,writer:e.constant(g),selected:e.constant(k)})}else f=d.none();return f})})},immediate:function(a,b){return k.closest(a,"ul,ol",b)},topmost:function(b,e){var h=f.ancestors(b,function(b){return a.isList(b)||a.isContainer(b)},e),k=c.findIndex(h,function(a){return!c.contains(["li","ol","ul"],g.name(a))});return 0<k&&k-1<h.length?d.some(h[k-1]):
0<h.length?d.some(h[h.length-1]):d.none()}}});l("mv",["ms","nk","nl"],function(c,e,d){return{context:function(a,b,c){return d.context(a,b,d.topmost,e.write,c)},indent:function(a){return c.level(a,1)},outdent:function(a){return c.level(a,-1)}}});l("mw",["b","1c"],function(c,e){var d=function(a,b){var d=c.find(a,function(a){return e.eq(b,a)});return null!==d&&void 0!==d};return{operate:function(a,b,e){return c.map(b,function(b){return d(e,b.item())?a(b):b})}}});l("v4",["b","t","k","2w"],function(c,
e,d,a){var b=a.immutable("before","on","after"),g=function(a,d){var g=e.from(c.map(d,function(b){return a[b]})),m=a.slice(0,d[0]),n=a.slice(d[d.length-1]+1);return b(m,g,n)};return{refine:function(a,h){var k=c.map(a,function(a,b){return h(a)?e.some(b):e.none()}),k=d.cat(k),m=b(a,e.none(),[]);return 0===k.length?m:g(a,k)}}});l("mx","b v1 v4 21 4h m 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(d,e){var f=b.children(d,"li,ol,ul");return c.bind(f,function(b){return"li"===a.name(b)?k(d,b,e):h(b,
e+1)})},k=function(a,b,d){var f=n(b),g=[e(d,f.before(),f.after(),a,b)];return f.on().fold(function(){return g},function(a){a=c.bind(a,function(a){return h(a,d+1)});return g.concat(a)})},m=function(a){return g.is(a,"ol,ul")},n=function(a){a=f.children(a);return d.refine(a,m)};return{read:function(a){return h(a,1)}}});l("ev","b mw mx 7 t ed 1b 1c 2p 3c 2s 1u".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=function(a){a=a.elementsTransformed();c.each(a,function(a){k.transfer(a.original(),a.replaced(),
["text-align"]);f.transfer(a.original(),a.replaced(),["dir"])})},q=function(a,b){var d=c.find(b,function(b){return h.eq(b.original(),a)});return void 0!==d&&null!==d?d.replaced():a},s=function(a,c,f,h,k,p){if(0===a.selected().length)return b.none();var s=a.writer(),l=a.outerlist();a=a.selected();var B=d.read(l);p=p(a);p=e.operate(p,B,a);s=s(p);r(s);m.before(l,s.elements());n.remove(l);l=s.elementsTransformed();c=q(c,l);h=q(h,l);return b.some(g.block({start:c,soffset:f,finish:h,foffset:k,all:s.elements()}))};
return{execute:function(b,c,d,e,f,g){return s(b,c,d,e,f,a.constant(g))},executeUsing:s}});l("e3","6s b ms mt et mu mv ev".split(" "),function(c,e,d,a,b,g,f,h){c();var k=function(a,c,d,f,h,k,m){return b.applyOn(a,g,c,d,f,h,function(a){e.each(a,function(a){m.change(a,k)});return a})},m=function(b,c){return function(d,e,g,m,u,v){var w=a.isRootOrCell(d);return f.context(e,m,d).fold(function(){return k(w,e,g,m,u,b,v)},function(a){return h.execute(a,e,g,m,u,c)})}};return{indent:function(a,b,c,d,e,g){return m(1,
f.indent)(a,b,c,d,e,g)},outdent:function(a,b,c,d,e,g){return m(-1,f.outdent)(a,b,c,d,e,g)}}});l("n0","6s b 7 t fo nh ni 21".split(" "),function(c,e,d,a,b,g,f,h){return{isRootContainer:function(a){return function(b){return a(b)||e.contains(["td","th","caption"],h.name(b))}},extract:function(a){return f.cata(a,function(a){return[a]},function(a){return[a]},function(a,b){return e.contains(["ol","ul"],h.name(a))?[a]:e.bind(b,f.toTarget)},function(a){return[a]})},isCapable:function(a){return b.isBlock(a)},
canUse:d.constant(!1),quasi:function(b){return a.some(g.nu(c()))},ascend:d.identity}});l("e4","b t gn mz ed n0 et 1c l 2q 3c 2s 4h 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=function(b){return a.is(b)?q.descendant(b,"blockquote"):q.closest(b,"blockquote")},t=function(a){return d.sharedOne(s,a)},u=function(a,b,d,e,h){return f.applyOn(a,g,b,d,e,h,function(a){var b=k.fromTag("blockquote");0<a.length&&(m.before(a[0],b),n.append(b,a),b=r.descendants(b,"blockquote"),c.map(b,p.unwrap));return a})};
return{toggle:function(a,c,d,f,g){return(h.eq(c,f)?s(c):t([c,f])).fold(function(){return u(a,c,d,f,g)},function(a){p.unwrap(a);return e.some(b.block({start:c,soffset:d,finish:f,foffset:g,all:[]}))})},queryPoint:s,queryAll:t}});l("7h","7 dt du dv dw dx dy 7o 7l e0 e1 e2 e3 e4 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=function(b,d,e,f){var g=b.content(),k=b.undo();h.cata(b.selections().get(),c.noop,a.multiple(g,b.undo(),f),a.single(g,k,f,d,e))};s=function(a){return function(b){var c=
0<a?r.indent:r.outdent,d=e(b.region()),h=b.content();t(b,f.spot,g.update,function(a,b,e,f){return c(h.isRoot,a,b,e,f,d)})}};var u=function(a){return function(d){var e=d.content(),k=function(b,c,d,f){return a.run(e.isRoot,b,c,d,f)};h.cata(d.selections().get(),c.noop,b.multiple(e,d.undo(),k),b.single(e,d.undo(),k,f.spot,g.update))}},v=function(a){return function(b){b.content().getSelection().bind(k.detect).each(function(c){d.runTransaction(b.content(),b.undo(),function(){(a.query(c.image())?p.floatnone():
a).run(c.image())},b.content().toEditing)})}};return{indent:s(1),outdent:s(-1),blockquote:function(a){var b=a.content();t(a,f.spot,g.update,function(a,c,d,e){return q.toggle(b.isRoot,a,c,d,e)})},justifyLeft:u(n.justifyleft()),justifyCentre:u(n.justifycentre()),justifyRight:u(n.justifyright()),justifyFull:u(n.justifyfull()),imageNone:v(p.floatnone()),imageLeft:v(p.floatleft()),imageCentre:v(p.floatcentre()),imageRight:v(p.floatright()),breakQuote:function(a,b,c){m.breakQuote(b,c).each(function(b){a.content().setRelativeSelection(b.start(),
b.finish());a.content().uiChanged()})}}});l("7i",["a","b","7","t"],function(c,e,d,a){var b=function(b,c){var d=e.find(b,function(a){return a.value()===c});return a.from(d)};return{updateMenu:function(e,f,h,k,m){f.fold(e.clear,d.noop,function(d){(c.isString(d)?b(k,d):a.some(d)).each(e.select);m.each(function(a){a=a(d);e.selectElement(a)})});h.fold(e.disable,d.noop,e.enable);f.fold(e.untick,d.noop,function(a){a=c.isString(a)?a:a.value();e.tick(a)})}}});l("7j","b 7 4o e5 21 33".split(" "),function(c,
e,d,a,b,g){var f=d.generate([{table:["selection"]},{list:["selection"]}]),h=function(a,d){return a.isRoot(d)||c.contains(["table","ul","ol"],b.name(d))};return{context:function(c){return c.getSelection().bind(function(d){if(d.collapsed())return g.closest(d.startContainer(),"td,th,li",e.curry(h,c)).map(function(a){return"li"===b.name(a)?f.list(d):f.table(d)});var n=a.commonAncestorContainer(d.startContainer(),d.startOffset(),d.endContainer(),d.endOffset());return g.closest(n,"ol,ul",c.isRoot).map(function(a){return f.list(d)})})},
cata:function(a,b,c){return a.fold(b,c)}}});l("e6",["7","1b","2p"],function(c,e,d){return{attr:function(a,b,d){var f=c.curry(e.set,a,b,d);a=c.curry(e.remove,a,b);0<d.length?f():a()},css:function(a,b,e){var f=c.curry(d.set,a,b,e);a=c.curry(d.remove,a,b);0<e.length?f():a()}}});l("kd",["6u"],function(c){return{resolve:c.create("ephox-salmon").resolve}});l("e7",["7","kd"],function(c,e){var d=e.resolve("upload-image-in-progress"),a="data-"+e.resolve("image-blob");return{uploadInProgress:c.constant(d),
blobId:c.constant(a)}});l("9u","e6 e7 2w e2 1b 2p e8 5a 2t e9".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=d.immutableBag("url alt width height isLocal align".split(" "),["computedWidth","computedHeight"]),p=function(a,c){var d=b.get(a,c);return void 0!==d?d:""};return{divine:function(a){var c=g.getRaw(a,"width").getOr(""),d=g.getRaw(a,"height").getOr(""),m=g.getRaw(a,"width").getOrThunk(function(){return k.get(a)+"px"}),u=g.getRaw(a,"height").getOrThunk(function(){return h.get(a)+"px"}),v=f.divine(a);
return n({url:p(a,"src"),alt:p(a,"alt"),width:c,height:d,computedWidth:m,computedHeight:u,isLocal:b.has(a,e.blobId()),align:v})},properties:n,apply:function(d,e){b.get(d,"src")===e.url()||e.isLocal()||b.set(d,"src",e.url());c.attr(d,"alt",e.alt());c.css(d,"width",e.width());c.css(d,"height",e.height());e.align().each(function(b){a.runFloat(d,b)})}}});l("ea",["21","2b"],function(c,e){return{hasNoContent:function(d){var a=e.children(d);return c.isElement(d)&&(0===a.length||1===a.length&&"br"===c.name(a[0]))}}});
l("7k","b 7 t 9u ea 7l 7m 2w e1 e4 1c 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=h.immutable("alignment","quoted"),q=function(a){return a.getSelection().fold(function(){return!1},function(a){var b=a.startContainer();a=a.endContainer();return n.eq(b,a)?m.queryPoint(b).isSome():m.queryAll([b,a]).isSome()})},s=[k.justifyleft(),k.justifycentre(),k.justifyright(),k.justifyfull()],t=function(b){return b.getSelection().bind(g.detect).fold(function(){return b.getSelection().bind(function(a){var b=
c.find(s,function(b){return b.query(a.startContainer(),a.endContainer())});return null!==b&&void 0!==b?d.some(b.name()):d.none()}).fold(f.off,f.on)},function(b){return a.divine(b.image()).align().fold(f.off,function(a){return"center"===a?f.on(k.justifycentre().name()):"right"===a?f.on(k.justifyright().name()):f.on(k.justifyleft().name())})})};return{read:function(a){var b=t(a);a=q(a)?f.on({}):f.off();return r(b,a)},alignment:t,inQuote:q,atQuoteBreak:function(a){return a.getSelection().bind(function(a){var c=
a.startContainer();return a.collapsed()?p.closest(c,"blockquote").bind(function(a){return b.hasNoContent(c)?d.some({quote:e.constant(a),element:e.constant(c)}):d.none()}):d.none()})}}});l("5e","7g 7 t 7h 7i 7e 7j 7k 7l 74 7f 7m 58 4a 2w q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){return function(t){var v=t.content(),w=t.keyboard(),l=t.shortcuts(),x=t.context(),y=q.create({analytics:r(["message","properties"])}),A=e.curry(a.indent,t),B=e.curry(a.outdent,t),C=e.curry(a.blockquote,t);l.events.indent.bind(A);
l.events.outdent.bind(B);l.events.blockquote.bind(C);var D=function(a){var b=a.stopper();f.context(v).bind(function(c){f.cata(c,e.noop,function(c){(a.shift()?B:A)();b()})})},F=w.editor();F.on();F.events.tab.bind(D);x.events.preLinebreak.bind(function(b){h.atQuoteBreak(t.content()).each(function(c){a.breakQuote(t,c.quote(),c.element());b.handler().handle()})});var E=s.immutable("value","icon","textkey"),w=E("justifyleft",d.some(c.resolve("justifyleft")),g.key("alignment.left")),l=E("justifycenter",
d.some(c.resolve("justifycenter")),g.key("alignment.center")),x=E("justifyright",d.some(c.resolve("justifyright")),g.key("alignment.right")),G=E("justifyfull",d.some(c.resolve("justifyfull")),g.key("alignment.justify")),H=E("justifyleft",d.some(c.resolve("justifyleft")),g.key("alignment.left")),L=E("justifycenter",d.some(c.resolve("justifycenter")),g.key("alignment.center")),E=E("justifyright",d.some(c.resolve("justifyright")),g.key("alignment.right")),I=[w,l,x,G],J=[H,L,E],K=function(){return v.getSelection().bind(k.detect).fold(function(){return I},
function(a){return J})},N={justifyleft:e.curry(a.imageLeft),justifycenter:e.curry(a.imageCentre),justifyright:e.curry(a.imageRight)},M={justifyleft:a.justifyLeft,justifycenter:a.justifyCentre,justifyright:a.justifyRight,justifyfull:a.justifyFull},O=function(a){return a.toLowerCase()},S=d.none();return{ui:m.ui({"indent.general":{value:"indent",textkey:g.key("action.indent"),action:A,updateGeneral:e.identity,tooltip:n.get,toggle:!1},"outdent.general":{value:"outdent",textkey:g.key("action.outdent"),
action:B,updateGeneral:e.identity,tooltip:n.get,toggle:!1},"blockquote.general":{value:"blockquote",textkey:g.key("action.blockquote"),action:C,updateGeneral:function(a){h.read(v).quoted().fold(a.deselect,e.noop,a.select)},tooltip:n.get,toggle:!0},"alignment.dropdown":{name:"alignment",textkey:g.key("alignment.toolbar"),menuTextkey:g.key("alignment.menu"),action:function(a){var b=v.getSelection().bind(k.detect).fold(e.constant(M),e.constant(N));(void 0!==b[a]?b[a]:e.noop)(t)},updateDropdown:function(a){var c=
K(),f=h.read(v).alignment().fold(function(){return 0<c.length?p.on(c[0].value()):p.off()},p.unchanged,p.on);a.populate([{label:d.none,items:e.constant(c)}]);b.updateMenu(a,f.map(O),p.on(),c,S)},values:I,render:S,tooltip:n.get,toggle:!1,describe:function(a){return g.translate("alignment.describe",g.get(a.textkey()))}}}),events:y.registry,destroy:function(){F.off();F.events.tab.unbind(D);F.destroy()}}}});l("7n",["b","du"],function(c,e){return{multiple:function(d,a,b){return function(g,f){e.runTransaction(d,
a,function(){c.each(f,b)},d.toEditing)}},single:function(c,a,b){return function(g,f){e.runTransaction(c,a,function(){b(f).each(function(a){c.setSelection(a.start(),a.soffset(),a.finish(),a.foffset())});c.backupSelection()},c.toEditing)}}}});l("n6",["6s","v5"],function(c,e){var d=c();return{atStartOf:function(a,b,c){e.atStartOf(d,a,b,c)}}});l("ee",["7","mp","n4"],function(c,e,d){d=d.resolve("style-marker");return{styleSpan:c.constant(d),overrideSpan:c.constant("data-ephox-override"),quasiBlock:e.style}});
l("v6",["84","4o"],function(c,e){var d=e.generate([{none:[]},{tempIn:["selection"]},{tempOut:["selection"]},{rangedIn:["selection"]},{rangedOut:["selection"]}]);return{detect:function(a,b){return a.getSelection().fold(function(){return d.none()},function(a){var e=b(a);return c.isCollapsed(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())?e?d.tempIn(a):d.tempOut(a):e?d.rangedIn(a):d.rangedOut(a)})}}});l("v7",["1b","2p","l"],function(c,e,d){var a=function(a,b){return d.fromTag(a,b.dom())},
b=function(a,b,c){c=d.fromTag("span",c.dom());e.set(c,a,b);return c};return{nu:function(c,d,e,k){return"span"===e?b(c,d,k):a(e,k)},nuTag:a,nuAttr:function(a,b,e){e=d.fromTag("span",e.dom());c.set(e,a,b);return e},nuStyle:b}});l("i0",["b","t","2p","21","2b"],function(c,e,d,a,b){var g={"font-weight":{700:"bold",400:"normal"}},f=function(a,b){if(a===b&&""!==b&&void 0!==b)return!0;var d=a.toLowerCase(),e=b.toLowerCase().split(" ");return c.contains(e,d)},h=function(a,b){if(void 0!==g[a]){var c=g[a][b];
return void 0!==c?c:b}return b},k=function(a,b){var c=m(a,b);return h(b,c)},m=function(c,f){return(a.isText(c)?b.parent(c):e.some(c)).map(function(a){return d.get(a,f)}).getOr(void 0)};return{state:function(a,b,c){a=k(a,b);return"text-decoration"===b?f(c,a):c===a&&""!==a&&void 0!==a},rawState:function(a,b,c){a=h(b,d.getRaw(a,b).getOr(void 0));return"text-decoration"===b?f(c,a):c===a&&""!==a&&void 0!==a},value:k}});l("zy",["b","t","2p","21","4j"],function(c,e,d,a,b){var g={"text-decoration":function(e,
g,k,m){var n=function(m){return b.closest(m,function(b){return a.isElement(b)&&(c.contains(k,a.name(b))||d.getRaw(b,e).exists(function(a){return-1!==a.indexOf(g)}))}).toArray()};m=n(m.startContainer()).concat(n(m.endContainer()));return c.exists(m,function(b){return c.contains(k,a.name(b))?!0:d.getRaw(b,e).exists(function(a){return g===a})})}};return{handle:function(a,b,c){return void 0!==g[a]?e.some(g[a]):e.none()}}});l("v8","b 7 t fg fo mz i0 eg zy 1b 21 6x 33".split(" "),function(c,e,d,a,b,g,f,
h,k,m,n,p,r){var q=function(a,b){return b.getSelection().map(function(b){return a(b)}).getOr(!1)},s=function(c,d,e,m){var n=g.leftWith(b.isBlock,m).getOrThunk(function(){return a.point(m.startContainer(),m.startOffset())}),p=g.rightWith(b.isBlock,m).getOrThunk(function(){return a.point(m.endContainer(),m.endOffset())});return k.handle(c,d).fold(function(){var a=f.state(n.element(),c,d),b=f.state(p.element(),c,d);return a||b},function(a){return a(c,d,e,h.hare(n.element(),n.offset(),p.element(),p.offset()))})},
t=function(a,b,c,d){return q(e.curry(s,a,b,c),d)},u=function(a,b){return w(a,b)},v=function(a,b){return q(e.curry(u,a),b)},w=function(a,c){var d=g.leftWith(b.isBlock,c).fold(c.startContainer,function(a){return a.element()}),e=g.rightWith(b.isBlock,c).fold(c.endContainer,function(a){return a.element()}),d=p.closest(d,a),e=p.closest(e,a);return d||e},l=function(a,b){return c.contains(a,n.name(b))},x=function(a,b){var c="["+a+"]";return r.closest(b.startContainer(),c).bind(function(e){return r.closest(b.endContainer(),
c).bind(function(b){var c=m.get(e,a);b=m.get(b,a);c=c.toLowerCase();b=b.toLowerCase();return c===b?d.some(c):d.none()})})};return{queriesStyle:function(a,b,c){return{queryOn:e.curry(s,a,b,c),query:e.curry(t,a,b,c)}},queryStyleOn:s,queriesTag:function(a){return{queryOn:e.curry(u,a),query:e.curry(v,a)}},relatedStyle:function(a,b,c,d){(c=l(c,d))||(c="span"===n.name(d)&&f.state(d,a,b));return c},relatedTags:l,queryAttrSame:function(a,b){return b.getSelection().bind(function(b){return x(a,b)})},queryAttrIs:function(a,
b,c){var d=b.toLowerCase(),e=function(b){return m.get(b,a).toLowerCase()===d};return r.closest(c.startContainer(),"["+a+"]").filter(e).orThunk(function(){return r.closest(c.endContainer(),"["+a+"]").filter(e)}).isSome()}}});l("15n","b t fg mf j3 mm 4o 2w".split(" "),function(c,e,d,a,b,g,f,h){var k=f.generate([{none:["last","mode"]},{running:["next","mode"]},{split:["boundary","last","mode"]},{finished:["element","mode"]}]),m=h.immutable("start","soffset","finish","foffset"),n=function(b,c,e){e=a.toLeaf(b,
e,0);return q(b,e.element())?r(b,c,e.element()).map(function(a){return d.point(a,0)}).getOr(e):e},p=function(a,b){return g.isFrame(a,b)||g.isBlock(a,b)||c.contains(["li"],a.property().name(b))},r=function(a,c,d){return b.seekRight(a,d,function(b){return!q(a,b)&&!p(a,b)},c)},q=function(a,b){return a.property().isText(b)?a.property().parent(b).exists(function(b){return c.contains("table tbody thead tfoot tr ul ol".split(" "),a.property().name(b))}):!1},s=function(a,c,d,e,f){return b.walk(a,e,d,b.walkers().right()).fold(function(){return k.none(e,
b.sidestep)},function(b){return a.eq(b.item(),f)?k.finished(f,b.mode()):p(a,b.item())?k.split(b.item(),e,b.mode()):k.running(b.item(),b.mode())})},t=function(a,b,c,d){return r(a,b,c).fold(function(){return e.none()},function(f){return a.eq(f,d)?e.some(d):u(a,c,f)?t(a,b,f,d):p(a,f)?(f=n(a,b,f),e.some(f.element())):e.some(f)})},u=function(a,b,c){return a.property().parent(b).exists(function(b){return a.eq(b,c)})},v=function(a,c,d,f,g,h){return s(a,c,d,g,h).fold(function(a,b){return[{start:f,finish:a}]},
function(b,d){return v(a,c,d,f,b,h)},function(d,k,m){var p={start:f,finish:k};return(u(a,g,d)?t(a,c,d,h):function(){var f=n(a,c,d);return a.eq(f.element(),d)?b.walk(a,d,b.advance,b.walkers().right()).map(function(a){return a.item()}):e.some(f.element())}()).fold(function(){return[p]},function(d){return a.eq(d,h)?[p].concat({start:h,finish:h}):[p].concat(v(a,c,b.advance,d,d,h))})},function(a,b){return[{start:f,finish:a}]})},w=function(a,b,c){if(p(a,b)){var d=a.property().children(b);return 0<=c&&c<
d.length?w(a,d[c],0):c===d.length?w(a,d[d.length-1],0):b}return b},l=function(a,b,c,d){c=w(a,c,d);return q(a,c)?r(a,b,c).getOr(c):c},x=function(a,d,e,f,g,h){var k=l(a,d,e,f),n=l(a,d,g,h);d=v(a,d,b.sidestep,k,k,n);return c.map(d,function(b,c){var d=a.eq(b.start,e)?f:0,k;a.eq(b.finish,g)?k=h:(k=b.finish,k=a.property().isText(k)?a.property().getText(k).length:a.property().children(k).length);return m(b.start,d,b.finish,k)})},y=function(b,c,d,e,f,g){b.eq(d,f)?p(b,d)?(e=a.toLeaf(b,d,e),g=a.toLeaf(b,d,
g),b=b.eq(e.element(),d)&&b.eq(g.element(),d)?[m(e.element(),e.offset(),g.element(),g.offset())]:y(b,c,e.element(),e.offset(),g.element(),g.offset())):b=[m(d,e,d,g)]:b=x(b,c,d,e,f,g);return b};return{collect:y}});l("15o",["j3","q0","4o"],function(c,e,d){var a=d.generate([{leftEdge:["element"]},{between:["before","after"]},{rightEdge:["element"]}]),b=function(b,c,d){d=e.split(b,c,d);var g=function(){return a.rightEdge(c)};return e.position(b,d).fold(g,function(){return a.leftEdge(c)},a.between,g)},
g=function(c,d,e,g){if(c.property().isText(d))return b(c,d,e);if(c.property().isEmptyTag(d))return g(d);c=c.property().children(d);d=0===e?a.leftEdge(d):e===c.length?a.rightEdge(d):0<e&&e<c.length?a.between(c[e-1],c[e]):a.rightEdge(d);return d};return{toLeft:function(b,d,e,m){return g(b,e,m,a.leftEdge).fold(function(a){return a},function(a,b){return b},function(a){return c.after(b,a,d).getOr(a)})},toRight:function(b,d,e,m){return g(b,e,m,a.rightEdge).fold(function(a){return c.before(b,a,d).getOr(a)},
function(a,b){return a},function(a){return a})}}});l("15p","b 7 t my ux uz".split(" "),function(c,e,d,a,b,g){var f=function(a,b,f,g){var h=a.property().children(b);b=function(b){b=c.findIndex(h,e.curry(a.eq,b));return-1<b?d.some(b):d.none()};f=f.bind(b).getOr(0);g=g.bind(b).getOr(h.length-1);return-1<f&&-1<g?d.some(h.slice(f,g+1)):d.none()},h=function(b,c,d,f){return a.breakPath(b,c,function(a){return b.property().parent(a).fold(e.constant(!0),e.curry(b.eq,d))},f)},k=function(a,c,e,g){a.eq(c,g)?g=
d.none():(g=h(a,g,c,b.breakToRight),g=d.some(g.first()));if(a.eq(c,e))e=d.none();else{var k=h(a,e,c,b.breakToLeft);0<k.splits().length&&a.insert().prepend(k.splits()[0].second(),e);e=d.some(k.second().getOr(e))}return f(a,c,e,g)},m=function(b,c,e,f,h){return g.ancestors(b,e,f,c).shared().orThunk(function(){return a.sharedOne(b,function(a,e){return c(e)?d.some(e):b.up().predicate(e,c)},[e,f])}).map(h)},n=function(a,b,c,d,e){return m(a,b,c,d,e).bind(function(b){return k(a,b,c,d)})};return{fracture:function(a,
b,c,f,g){g=void 0!==g?g:e.identity;a.eq(c,f)?(b=g(c),a=a.eq(b,c)?d.some([c]):k(a,b,c,c)):a=n(a,b,c,f,g);return a}}});l("133","b t q0 15n 15o 15p".split(" "),function(c,e,d,a,b,g){var f=function(a,c,e,f,p,r,q){a.property().isText(e)&&a.eq(e,p)?(e=d.splitByPair(a,e,f,r),a=g.fracture(a,c,e,e,q)):(p=b.toRight(a,c,p,r),e=b.toLeft(a,c,e,f),a=g.fracture(a,c,e,p,q));return a};return{fractures:function(b,d,e,g,p,r,q){e=a.collect(b,d,e,g,p,r);return c.bind(e,function(a,c){return f(b,d,a.start(),a.soffset(),
a.finish(),a.foffset(),q).toArray()})},fracture:f}});l("zz",["6s","133"],function(c,e){var d=c();return{fractures:function(a,b,c,f,h,k){return e.fractures(d,a,b,c,f,h,k)},fracture:function(a,b,c,f,h,k){return e.fracture(d,a,b,c,f,h,k)}}});l("vg",["fg","e5","2b"],function(c,e,d){return{makeTo:function(a,b,c){var e=d.owner(a).dom().createRange();e.setStart(a.dom(),b);e.setEndBefore(c.dom());return e},makeFrom:function(a,b,c){var e=d.owner(b).dom().createRange();e.setStartAfter(a.dom());e.setEnd(b.dom(),
c);return e},leftEdge:function(a,b,d,f){return e.after(a,b,d,f)?c.point(d,f):c.point(a,b)},rightEdge:function(a,b,d,f){return e.after(a,b,d,f)?c.point(a,b):c.point(d,f)}}});l("n8","b 1q 7 21 4h m".split(" "),function(c,e,d,a,b,g){var f=function(a,c){var d=e.keys(c).join(",");return(g.is(a,d)?[a]:[]).concat(b.descendants(a,d))};return{cleanse:function(b,e){var g=f(b,e);c.each(g,function(b){var c=a.name(b);(void 0!==e[c]?e[c]:d.noop)(b)})}}});l("va",["b","w"],function(c,e){return{onlyEphox:function(d){return void 0!==
d&&null!==d&&0<d.trim().length?(d=d.split(/\s+/),c.filter(d,function(a){return e.startsWith(a,"ephox-")}).join(" ")):""}}});l("n9","b 6 va 1b 2p 2s".split(" "),function(c,e,d,a,b,g){var f=function(a){g.unwrap(a)},h=function(c,d){b.remove(c,d);a.hasNone(c)&&f(c)},k=function(a){var b={};c.each(a,function(a){b[a]=m(f)});return b},m=function(b){return function(c){a.has(c,"data-ignore")||b.apply(null,arguments)}};return{cssAndTag:function(a,b,c){a=k(a);c=function(a){h(a,b)};return e.merge(a,{span:m(c),
font:m(c)})},tagList:k,removeStyle:m(h),removeAttribute:m(function(b,c){a.remove(b,c);a.hasNone(b)&&f(b)}),unwrap:m(f),unstyle:m(function(b){var c=a.get(b,"class");a.remove(b,"class");c=d.onlyEphox(c);0<c.length&&a.set(b,"class",c);a.remove(b,"style");a.hasNone(b)&&f(b)}),normal:function(b){a.remove(b,"data-ignore")},ignore:function(b){a.set(b,"data-ignore","true")}}});l("100","87 b fo 2g 21 2s 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(a,b){var c=f.children(a);e.each(c,function(a){h(a,
b)});b(a)},k=function(e){return b.isElement(e)&&!d.isEmptyTag(e)&&!d.isFrame(e)&&0===a.get(e).replace(c.zeroWidth(),"").length};return{wipeout:h,onEmpty:function(c){h(c,function(c){!b.isElement(c)||d.isFrame(c)||d.isEmptyTag(c)||0!==a.get(c).length?k(c)&&g.unwrap(c):g.remove(c)})},onQuasiEmpty:function(a){h(a,function(a){k(a)&&g.remove(a)})}}});l("v9","b 7 t zz fo vg mz eg n8 n9 100 2n 2q 3c 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=function(a){return s.parent(a).fold(e.constant([]),
function(a){return b.isBlock(a)?[a]:[a].concat(t(a))})},u=function(a,b){var d=[b].concat(t(b)),d=c.reverse(d),e=c.findIndex(d,a);return-1===e?b:0===e?d[0]:d[e-1]},v=function(a,b){c.each(b,function(b){k.cleanse(b,a);n.onQuasiEmpty(b)})};return{run:function(b,k,t,l){var A=f.left(t).getOrThunk(function(){return g.leftEdge(t.startContainer(),t.startOffset(),t.endContainer(),t.endOffset())}),B=f.right(t).getOrThunk(function(){return g.rightEdge(t.startContainer(),t.startOffset(),t.endContainer(),t.endOffset())}),
C=e.curry(u,l.matches);k=a.fractures(k,A.element(),A.offset(),B.element(),B.offset(),C);k=c.bind(k,function(a){var e;if(0<a.length){e=l.purifiers();var f=(0,l.nu)(b);m.ignore(f);d.from(a[0]).bind(s.prevSibling).each(n.onQuasiEmpty);d.from(a[a.length-1]).bind(s.nextSibling).each(n.onQuasiEmpty);c.each(a,n.onQuasiEmpty);a=c.filter(a,p.inBody);0<a.length?(r.before(a[0],f),q.append(f,a),v(e,a),e=[f]):e=[]}else e=[];return e});c.each(k,m.normal);return h.fussyFromElements(k)}}});l("n7",["b","1c","2b"],
function(c,e,d){var a=function(b,c){return e.eq(b,c)?[]:d.parent(b).fold(function(){return[]},function(e){e=a(e,c);var f=d.findIndex(b).toArray();return e.concat(f)})},b=function(a,b){return a.slice(b+1)},g=function(a,b){return a.slice(0,b)},f=function(a,b,e,g){if(0===g.length)b(e);else{var p=g[0],r=g.slice(1);d.child(e,p).each(function(c){f(a,b,c,r)});e=d.children(e);p=a(e,p);c.each(p,b)}};return{one:function(a,b){a(b)},across:function(e,k,m,n){m=a(m,k);n=a(n,k);k=d.children(k);var p=k.slice(0<m.length?
m[0]+1:0,0<n.length?n[0]:k.length-1);c.each(p,e);0<m.length&&f(b,e,k[m[0]],m.slice(1));0<n.length&&f(g,e,k[n[0]],n.slice(1))}}});l("i2",["6s","q0"],function(c,e){var d=c();return{split:function(a,b){return e.split(d,a,b)},splitByPair:function(a,b,c){return e.splitByPair(d,a,b,c)},range:function(a,b,c,f){return e.range(d,a,b,c,f)},subdivide:function(a,b){return e.subdivide(d,a,b)},position:function(a){return e.position(d,a)}}});l("vf","b i2 vg 21 2b r".split(" "),function(c,e,d,a,b,g){var f=function(d,
e,f){var g=b.children(e),h=0===f,k=f===g.length,m=0<g.length;return void 0!==d.empty&&c.contains(["br","hr","img"],a.name(e))?d.empty:void 0!==d.hasPrevious&&m&&0<f&&f<g.length?d.hasPrevious:void 0!==d.hasNext&&m&&f<g.length-1?d.hasNext:void 0!==d.rightEdge&&m&&k?d.rightEdge:void 0!==d.first&&h?d.first:d.otherwise},h=function(a,b,c){return f(a.before.element,b,c)(b,c)},k=function(a,b,c){return f(a.after.element,b,c)(b,c)},m=function(a,b,c){c=e.split(b,c);var d=function(a){return function(){var c=
g.prototype.slice.call(arguments,0),c=[b].concat(c);return a.apply(null,c)}};return e.position(c).fold(d(a.none),d(a.start),d(a.middle),d(a.end))},n=function(a,b,c){return m(a.before.text,b,c)},p=function(a,b,c){return m(a.after.text,b,c)};return{prefix:function(b,c,d){return(a.isText(c)?n:h)(b,c,d)},postfix:function(b,c,e,f,g){c=d.rightEdge(c,e,f,g);return(a.isText(c.element())?p:k)(b,c.element(),c.offset())}}});l("rb","7 i2 vf vg 1c 21 2b r".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,
b){return a.bind(function(a){return b.map(function(b){return{left:c.constant(a),right:c.constant(b)}})})},m=function(a,b,c,d){b=e.splitByPair(b,c,d);return k(a.general.insertBefore(b),a.general.insertAfter(b))},n=function(a,b,c,d){c=f.child(b,c);var e=d<f.children(b).length?f.child(b,d):f.lastChild(b);return c.bind(function(b){return e.bind(function(c){return k(a.general.insertBefore(b),a.general.insertAfter(c))})})};return{both:function(c,e,f,h,t){if(b.eq(e,h)){var u=g.isText(e)?m:n;return f>t?u(c,
e,t,f):u(c,e,f,t)}u=a.leftEdge(e,f,h,t);e=d.postfix(c,e,f,h,t);c=d.prefix(c,u.element(),u.offset());return k(c,e)}}});l("vh","6s b 7 t 2w ur 100 1c 4j 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=b.immutable("inside","outside"),p=function(a,b){return m.parent(b).fold(d.constant(!0),function(b){return a(b)})},r=function(b,f){var g=c(),k=[b].concat(g.up().all(b)),m=[f].concat(g.up().all(f)),g=e.find(k,function(a){return e.exists(m,d.curry(h.eq,a))});return a.from(g)},q=function(b){return n(b.second(),
a.some(b.first()))},s=function(b){return n(a.some(b.first()),b.second())},t=function(b){return n(a.some(b),a.none())},u=function(a,b,c){c=d.curry(p,c);c=c(a)?a:k.ancestor(a,c).getOr(a);return h.eq(a,c)?t(a):v(a,b,c)},v=function(a,b,c){a=g.breakPath(a,d.curry(h.eq,c));return b(a)};return{bridge:function(a,b,c){var e=u(a,q,c),g=u(b,s,c);return e.inside().bind(function(a){return g.inside().bind(function(b){return r(a,b).map(function(c){return{common:d.constant(c),left:d.constant(a),right:d.constant(b),
wipeout:function(){e.outside().each(f.onEmpty);g.outside().each(f.onEmpty)}}})})})},edge:n,isSplit:p,getCommon:r,onLeft:q,onRight:s,onInside:t,splitFrom:u,breaker:v}});l("vi",["7","t","l","2q","2s"],function(c,e,d,a,b){return function(g,f){var h=function(a,f,g){var h=d.fromText(f);a(g,h);return e.some({element:c.constant(h),cleanup:function(){b.remove(h)},splits:c.constant([])})},k=function(b){return{none:e.none,start:c.curry(h,a.before,b),end:c.curry(h,a.after,b),middle:function(c,d,e){return h(a.after,
b,d)}}},m=function(b){var d=function(b){return function(c,d){a.appendAt(c,d,b)}};return{prepend:c.curry(h,a.prepend,b),before:c.curry(h,a.before,b),after:c.curry(h,a.after,b),insertAt:function(a,c){return h(d(c),b,a)},append:c.curry(h,a.append,b)}};return{before:{text:k(g),element:{hasPrevious:m(g).insertAt,first:m(g).prepend,empty:m(g).before,otherwise:m(g).append}},after:{text:k(f),element:{hasNext:m(f).insertAt,rightEdge:m(f).append,empty:m(f).after,otherwise:m(f).append}},general:{insertBefore:m(g).before,
insertAfter:m(f).after}}}});l("na","87 b 84 8a 7 fg fh 4r jq fo 2w rb vh vi 21 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){var u=n.immutable("start","soffset","finish","foffset"),v=b.constant(!1),w=function(a,b){return m.isBlock(b)||m.isContainer(b)||a(b)},l=function(a,c){return t.parents(c,b.curry(w,a))},x=function(a,b,c){return s.isElement(c)&&!b(c)?(a=l(a,c),-1===e.findIndex(a,b)):!1},y=function(a,b){return function(c){return w(a,c)||x(a,b,c)}},A=function(b,c,e,m,n,p){var r=d.isCollapsed(c,
e,m,n);c=f.toLeaf(c,e);m=f.toLeaf(m,n);var q=h.extractTo(c.element(),c.offset(),p,v),t=h.extractTo(m.element(),m.offset(),p,v),s=function(c){return r||c.offset()!==a.getEnd(c.element())?c:k.after(c.element(),b).map(function(a){return g.point(a,0)}).getOr(c)},w=function(c){return r||0!==c.offset()?c:k.before(c.element(),b).map(function(b){return g.point(b,a.getEnd(b))}).getOr(c)};return function(){return h.find(q.element(),q.offset(),v).map(s).bind(function(a){return h.find(t.element(),t.offset(),
v).map(w).map(function(b){return u(a.element(),a.offset(),b.element(),b.offset())})})}};return{applyTo:function(a,b,d,e,f,g,h){var k=y(a,h),m=A(a,d,e,f,g,k);a=q(c.zeroWidth(),c.zeroWidth());return p.both(a,d,e,f,g).bind(function(a){return r.bridge(a.left().element(),a.right().element(),k).bind(function(c){b(c.common(),c.left(),c.right());a.left().cleanup();a.right().cleanup();c.wipeout();return m()})})},blockRoot:w,pathToTop:l,isEnclosingInline:x,isStopper:y}});l("ej","7 n7 n8 n9 na 1c".split(" "),
function(c,e,d,a,b,g){var f=function(a,c,f,n){var p=function(a){d.cleanse(a,c)};return b.applyTo(a,function(a,b,c,d){if(g.eq(b,c))e.one(p,b);else e.across(p,a,b,c)},f.startContainer(),f.startOffset(),f.endContainer(),f.endOffset(),n)};return{doRemoveAll:function(a,b,d){return f(a,b,d,c.constant(!0))},doRemoveUpto:f,allRules:c.constant({b:a.unwrap,strong:a.unwrap,i:a.unwrap,em:a.unwrap,u:a.unwrap,strike:a.unwrap,del:a.unwrap,s:a.unwrap,sup:a.unwrap,sub:a.unwrap,small:c.noop,span:a.unstyle,font:a.unstyle})}});
l("n1","87 b 1q 8a 7 t fg jq n6 ee eg v6 v7 v8 v9 n9 ej 2o l 2q 21 b3".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,l,x,y){return function(A,B,C,D){C=[B].concat(C);var F=b.curry(r.nuTag,B),E=b.curry(q.relatedTags,C),G=t.tagList(C),H=q.queriesTag(B),L={nu:F,matches:E,purifiers:b.constant(G)},I=function(a){var b=w.fromText(c.zeroWidth());k.atStartOf(a.startContainer(),a.startOffset(),b);return n.hare(b,0,b,1)},J=function(a,b,c){return x.isText(b)&&c===y.get(b).length?h.after(b,a).fold(function(){return f.point(b,
c)},function(a){return f.point(a,0)}):f.point(b,c)},K=function(b,c,d){return x.isText(c)&&0===d?h.before(c,b).fold(function(){return f.point(c,d)},function(b){return f.point(b,a.getEnd(b))}):f.point(c,d)},N=function(a,b){return b.map(function(b){var c=J(a,b.start(),b.soffset());b=K(a,b.finish(),b.foffset());return n.fussy(c.element(),c.offset(),b.element(),b.offset())})};C={nu:F,purifiers:b.constant(G),isStyled:b.constant(!0)};var M=["font-size"],O=function(a){return a.getSelection().map(function(a){var b=
d.keys(D),b=e.difference(b,M);return e.forall(b,function(b){return q.queryStyleOn(b,D[b],[B],a)})}).getOr(!1)};return{run:function(a,b){var c=b.doc();return p.detect(b,H.queryOn).fold(function(){return g.none()},function(b){b=I(b);u.doRemoveUpto(a,G,b,E);return g.some(n.fromHare(b))},function(a){a=I(a);var b=w.fromTag(B,c.dom());v.add(b,m.styleSpan());l.wrap(a.startContainer(),b);return g.some(n.fussy(a.startContainer(),1,a.startContainer(),1))},function(b){b=u.doRemoveUpto(a,G,b,E);return N(a,b)},
function(c){return s.run(b.doc(),a,c,L)})},query:function(a){return H.query(a)||O(a)},deferred:b.constant(C),name:b.constant(A)}}});l("104",["b","t"],function(c,e){var d=function(a,b,c){return{groups:0<a.current.length?a.groups.concat({parent:a.parent,children:a.current}):a.groups,current:[c],parent:b}},a=function(a,b,c){return{groups:a.groups,current:a.current.concat([c]),parent:b}},b=function(b,c,h){return e.from(c.current[c.current.length-1]).bind(b.query().nextSibling).bind(function(c){return b.eq(c,
h)?e.some(a):e.none()}).getOr(d)};return{textnodes:function(a,d){var e=c.foldl(d,function(c,d){return a.property().parent(d).fold(function(){return c},function(e){return b(a,c,d)(c,e,d)})},{groups:[],current:[],parent:null});return 0<e.current.length?e.groups.concat({parent:e.parent,children:e.current}):e.groups}}});l("vk","b t fg q0 104 uq".split(" "),function(c,e,d,a,b,g){var f=function(b,c,d,e,f,g){c=a.range(b,c,d,e,f);return h(b,c,g)},h=function(a,b,d){if(0===b.length)return b;b=c.filter(b,function(b){return a.property().isText(b)&&
0<a.property().getText(b).length});return c.map(b,function(b){var c=d();a.insert().before(b,c.element());c.wrap(b);return c.element()})},k=function(a,b){return e.from(b[0]).map(function(c){var e=g.toLower(a,b[b.length-1]);return d.points(d.point(c,0),d.point(e.element(),e.offset()))})};return{wrapWith:f,wrapper:h,leaves:function(a,b,c,d,e,h){b=g.toLeaf(a,b,c);d=g.toLeaf(a,d,e);h=f(a,b.element(),b.offset(),d.element(),d.offset(),h);return k(a,h)},reuse:function(d,e,f,h,k,s,t){e=g.toLeaf(d,e,f);h=g.toLeaf(d,
h,k);h=a.range(d,e.element(),e.offset(),h.element(),h.offset());h=b.textnodes(d,h);var u=function(a){return a.parent},v=function(a){var b=t();d.insert().before(a.children[0],b.element());c.each(a.children,b.wrap);return b.element()};return c.map(h,function(a){return(d.property().children(a.parent).length===a.children.length&&s(a.parent)?u:v)(a)})}}});l("vl",["7"],function(c){return function(e,d){return{element:c.constant(d),wrap:function(a){e.insert().append(d,a)}}}});l("vj","87 7 t fg v5 vk vl".split(" "),
function(c,e,d,a,b,g,f){var h=function(b,c,f,g,h,k){b=m(b,c,f,g,h,k);c=b.cursor();c=a.points(a.point(c.element(),c.offset()),a.point(c.element(),c.offset()));return d.some({range:e.constant(c),temporary:b.temporary,wrappers:b.wrappers})},k=function(f,g,h,k,m){k=g.dom().ownerDocument;var n=f.create().nu("span",k);k=f.create().text(c.zeroWidth(),k);f.insert().append(n,k);(f.property().isEmptyTag(g)?f.property().parent(g):d.some(g)).each(function(a){b.atStartOf(f,a,h,n)});return{cursor:e.constant(a.point(k,
1)),wrappers:e.constant([n]),temporary:e.constant(!0)}},m=function(b,f,g,h,m,p){return b.property().parent(f).bind(function(h){var k=a.point(f,g),m;if(m=n(b,p,h))if(m=1===b.property().children(h).length)m=b.property().isText(f)&&b.property().getText(f)===c.zeroWidth();return m?d.some({cursor:e.constant(k),temporary:e.constant(!1),wrappers:e.constant([h])}):d.none()}).getOrThunk(function(){return k(b,f,g,h,m)})},n=function(a,b,c){return"span"===a.property().name(c)&&!1===b(c)},p=function(b,c,h,k,m,
p){var w=c.dom().ownerDocument,l=g.reuse(b,c,h,k,m,e.curry(n,b,p),function(){return f(b,b.create().nu("span",w))});return d.from(l[l.length-1]).map(function(c){var d=b.property().children(c).length;c=a.points(a.point(l[0],0),a.point(c,d));return{wrappers:e.constant(l),temporary:e.constant(!1),range:e.constant(c)}})};return{spans:function(a,b,c,d,f,g){g=void 0!==g?g:e.constant(!1);return(a.eq(b,d)&&c===f?h:p)(a,b,c,d,f,g)}}});l("q1",["vj","vk","vl"],function(c,e,d){return{nu:function(a,b){return d(a,
b)},wrapWith:function(a,b,c,d,h,k){return e.wrapWith(a,b,c,d,h,k)},wrapper:function(a,b,c){return e.wrapper(a,b,c)},leaves:function(a,b,c,d,h,k){return e.leaves(a,b,c,d,h,k)},reuse:function(a,b,c,d,h,k,m){return e.reuse(a,b,c,d,h,k,m)},spans:function(a,b,d,e,h,k){return c.spans(a,b,d,e,h,k)}}});l("i3",["6s","q1"],function(c,e){var d=c();return{nu:function(a){return e.nu(d,a)},wrapWith:function(a,b,c,f,h){return e.wrapWith(d,a,b,c,f,h)},wrapper:function(a,b){return e.wrapper(d,a,b)},leaves:function(a,
b,c,f,h){return e.leaves(d,a,b,c,f,h)},reuse:function(a,b,c,f,h,k){return e.reuse(d,a,b,c,f,h,k)},spans:function(a,b,c,f,h){return e.spans(d,a,b,c,f,h)}}});l("nd","b fg i3 mz ee 4e 2p".split(" "),function(c,e,d,a,b,g,f){var h=function(f,h,k){f.getSelection().each(function(r){var q=a.left(r).getOrThunk(function(){return e.point(r.startContainer(),r.startOffset())}),s=a.right(r).getOrThunk(function(){return e.point(r.endContainer(),r.endOffset())});d.spans(q.element(),q.offset(),s.element(),s.offset(),
k).each(function(a){var d=a.temporary()?[b.styleSpan()]:[],e=a.range();c.each(a.wrappers(),function(a){g.add(a,d);h(a)});a=e.begin();e=e.end();f.setSelection(a.element(),a.offset(),e.element(),e.offset())})})},k=function(a,b,c,d){b(a);h(a,d,c)};return{style:function(a,b,c,d){return k(a,c,d,function(a){f.setAll(a,b)})},generic:k}});l("n2","7 t ee i0 nd v6 v7 v8 v9 n9 ej 1b 2o 1c 2p 21 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){return function(v,w,l,x,y,A){var B=c.curry(f.nu,x,y,w),
C=c.curry(h.relatedStyle,x,y,l),D=m.cssAndTag(l,x,y),F=h.queriesStyle(x,y,l),E=c.constant(!0),G=function(a,f){b.generic(a,c.noop,E,function(a){r.add(a,d.styleSpan());s.set(a,x,f);p.set(a,d.overrideSpan(),v);s.reflow(a)});return e.none()};w={nu:B,purifiers:c.constant(D),isStyled:function(b){return"span"===t.name(b)&&a.rawState(b,x,y)},matches:C};return{run:function(a,b){return g.detect(b,F.queryOn).fold(function(){return e.none()},function(a){return G(b,A)},function(a){return G(b,y)},function(b){return n.doRemoveUpto(a,
D,b,C)},function(d){return k.run(b.doc(),a,d,{nu:B,matches:C,purifiers:c.constant(D)})})},query:function(a){var b="["+d.overrideSpan()+'="'+v+'"]';return a.getSelection().bind(function(a){return u.closest(a.startContainer(),b).bind(function(c){return u.closest(a.endContainer(),b).bind(function(a){return q.eq(c,a)?s.getRaw(c,x).map(function(a){return a===y}):e.none()})})}).getOrThunk(function(){return F.query(a)})},deferred:c.constant(w),name:c.constant(v)}}});l("n3","7 t ee nd v6 v7 v8 v9 n9 ej 1b 2o 21 2s 33".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return function(t,u){var v=function(a,b){return g.nuAttr(u,a,b)},w=function(a){return"span"===r.name(a)&&n.has(a,u)},l={span:function(a){k.removeAttribute(a,u)}},x=function(a,b){return f.queryAttrIs(u,a,b)},y=function(b,f){a.generic(f,c.noop,void 0,function(a){p.add(a,d.styleSpan());n.set(a,u,b)});return e.none()};return{run:function(a,d,f){return b.detect(d,c.curry(x,f)).fold(function(){return e.none()},function(a){var b=["[",u,'="',f,'"]'].join("");s.closest(a.startContainer(),
b).each(q.unwrap);return e.none()},function(a){return y(f,d)},function(b){return m.doRemoveAll(a,l,b)},function(b){return h.run(d.doc(),a,b,{nu:c.curry(v,f),matches:w,purifiers:c.constant(l)})})},queryValue:function(a){return f.queryAttrSame(u,a)},name:c.constant(t)}}});l("eb",["7","t","n1","n2","n3"],function(c,e,d,a,b){var g=a("bold","strong",["strong","b"],"font-weight","bold","normal"),f=a("italic","em",["em","i"],"font-style","italic","normal"),h=a("underline","span",["u"],"text-decoration",
"underline","none");a=a("strikethrough","span",["s","strike","del"],"text-decoration","line-through","none");b=b("language","lang");var k=d("superscript","sup",["sup","sub"],{"font-size":"smaller","vertical-align":"super"});d=d("subscript","sub",["sub","sup"],{"font-size":"smaller","vertical-align":"sub"});var m={bold:g,italic:f,underline:h,strikethrough:a,language:b,superscript:k,subscript:d};return{bold:c.constant(g),italic:c.constant(f),underline:c.constant(h),strikethrough:c.constant(a),language:c.constant(b),
superscript:c.constant(k),subscript:c.constant(d),search:function(a){return void 0!==m[a]?e.some(m[a]):e.none()}}});l("b6",["7","eb"],function(c,e){var d=function(a,b){return a.query(b)};return{bold:c.curry(d,e.bold()),italic:c.curry(d,e.italic()),underline:c.curry(d,e.underline()),strikethrough:c.curry(d,e.strikethrough()),superscript:c.curry(d,e.superscript()),subscript:c.curry(d,e.subscript()),language:c.curry(function(a,b){return a.queryValue(b)},e.language())}});l("7p",["7m","2w","b6"],function(c,
e,d){var a=e.immutable("bold","italic","underline","strikethrough","superscript","subscript"),b=function(a,b){return a.on(function(a){return b(a)?c.on(!0):c.off()}).getOrThunk(c.off)};return{read:function(c){return a(b(c,d.bold),b(c,d.italic),b(c,d.underline),b(c,d.strikethrough),b(c,d.superscript),b(c,d.subscript))}}});l("15q",["2w"],function(c){return c.immutable("startContainer","startOffset","endContainer","endOffset")});l("16l",["2w"],function(c){var e=c.immutable("item","start","finish","text"),
d=c.immutable("items","abort"),a=function(a,b){var c=a.property().getText(b);return e(b,0,c.length,c)},b=function(a,b,c){return d([],!0)},g=function(a,b,c){return d([],!1)},f=function(a,b,c){var f=a.property().getText(b);return c(f).fold(function(){return d([e(b,0,f.length,f)],!1)},function(a){a=a[0]===a[1]?[]:[e(b,a[0],a[1],f.substring(a[0],a[1]))];return d(a,!0)})};return{detail:a,fromItem:function(b,c){return b.property().isText(c)?a(b,c):e(c,0,0,"")},decide:function(a,c,d,e){return(a.property().isBoundary(c)?
b:a.property().isEmptyTag(c)?b:e(a,c)?b:a.property().isText(c)?f:g)(a,c,d)}}});l("q2",["7"],function(c){return{all:function(e,d){for(var a=d.term(),b=[],g=a.exec(e);g;){var f=g.index+d.prefix(g),g=g[0].length-d.prefix(g)-d.suffix(g);b.push({start:c.constant(f),finish:c.constant(f+g)});a.lastIndex=f+g;g=a.exec(e)}return b}}});l("q3",["b","6","q2","r"],function(c,e,d,a){var b=function(b){b=a.prototype.slice.call(b,0);b.sort(function(a,b){return a.start()<b.start()?-1:b.start()<a.start()?1:0});return b};
return{search:function(a,f){var h=c.bind(f,function(b){var f=d.all(a,b.pattern());return c.map(f,function(a){return e.merge(b,{start:a.start,finish:a.finish})})});return b(h)}}});l("i5",["q2","q3"],function(c,e){return{findall:function(d,a){return c.all(d,a)},findmany:function(c,a){return e.search(c,a)}}});l("10r",["7","t","6q","i5","6r"],function(c,e,d,a,b){var g=new b(d.wordbreak()+"+","g"),f=c.constant(0),h=function(b){b=a.findall(b,d.custom(d.wordbreak(),f,f,e.none()));return e.from(b[b.length-
1]).map(function(a){return a.start()})},k=function(a){a=a.search(g);return-1<a?e.some(a):e.none()};return{firstWord:function(a){return k(a).map(function(b){return a.substring(0,b+1)})},lastWord:function(a){return h(a).map(function(b){return a.substring(b)})},leftBreak:h,rightBreak:k,hasBreak:function(a){return k(a).isSome()}}});l("17b",["j3","10r"],function(c,e){var d=c.walkers(),a=d.left(),d=d.right();return{left:{sibling:a.sibling,first:a.first,slicer:function(a){return e.leftBreak(a).map(function(c){return[c+
1,a.length]})}},right:{sibling:d.sibling,first:d.first,slicer:function(a){return e.rightBreak(a).map(function(a){return[0,a]})}}}});l("16r",["b","j3","16l","17b"],function(c,e,d,a){var b=function(a,f,h,k,m){f=e.walk(a,f,h,k).map(function(c){var e=d.decide(a,c.item(),k.slicer,m);c=e.abort()?[]:b(a,c.item(),c.mode(),k,m);return e.items().concat(c)}).getOr([]);return c.filter(f,function(a){return 0<a.text().trim().length})};return{creepLeft:function(c,d,h){return b(c,d,e.sidestep,a.left,h)},creepRight:function(c,
d,h){return b(c,d,e.sidestep,a.right,h)},flatten:function(a,b){return a.property().isText(b)?[d.detail(a,b)]:c.map(a.down().predicate(b,a.property().isText),function(b){return d.detail(a,b)})},isEmpty:function(a,b){return a.property().isText(b)?!1:0===a.down().predicate(b,a.property().isText).length}}});l("16m",["7","t"],function(c,e){var d=function(a,b){return a.up().closest(b,"[lang]",c.constant(!1)).map(function(b){return a.attrs().get(b,"lang")})};return{nu:function(a){var b=[],d=[],f=[],h=a,
k=function(a){a.each(function(a){b.push(a)})},m=function(a){a.each(function(a){b=b.slice(0,b.length-1)})},n=function(){0<f.length&&d.push({lang:c.constant(h),details:c.constant(f)})},p=function(a){n();f=[];h=a},r=function(c){return c.or(e.from(b[b.length-1])).getOr(a)};return{openInline:function(a,b){var c=r(a);c!==h&&p(c);k(a)},closeInline:function(a,b){m(a)},addDetail:function(a){var b=r(e.none());b!==h&&p(b);f.push(a)},addEmpty:function(a){a=r(e.none());p(a)},openBoundary:function(a,b){k(a);var c=
r(a);p(c)},closeBoundary:function(a,b){m(a);var c=r(a);p(c)},done:function(){n();return d.slice(0)}}},calculate:d,softBounder:function(a){return function(b,c){var f=d(b,c);return!e.equals(a,f)}},strictBounder:function(a,b){return function(c,e){var h=d(c,e).getOr(a);return b!==h}}}});l("15r",["b","7","16r","16l","16m"],function(c,e,d,a,b){var g=function(b,c,g,m){var n=d.creepLeft(b,c,m);m=d.creepRight(b,g,m);c=0<n.length?n[n.length-1]:a.fromItem(b,c);b=0<m.length?m[m.length-1]:a.fromItem(b,g);n=0===
n.length&&0===m.length;return{left:e.constant(c),right:e.constant(b),isEmpty:e.constant(n)}};return{byBoundary:function(a,b){var c=e.constant(!1),c=g(a,b,b,c),m=c.isEmpty()&&d.isEmpty(a,b);return{left:c.left,right:c.right,isEmpty:e.constant(m)}},getEdges:g,byLanguage:function(f,g){var k=b.calculate(f,g),m=b.softBounder(k),n=d.creepLeft(f,g,m),m=d.creepRight(f,g,m),p=f.property().isText(g)?[a.detail(f,g)]:[],r=c.reverse(n).concat(p).concat(m);return{all:e.constant(r),left:e.constant(n),middle:e.constant(p),
right:e.constant(m),lang:e.constant(k)}}}});l("134","87 b 7 t 15q 15r".split(" "),function(c,e,d,a,b,g){var f=function(a,b,f,n){n=a.property().getText(b);var p=e.filter(n.substring(0,f),function(a){return a!==c.zeroWidth()}).length,r=e.filter(n.substring(f,n.length),function(a){return a===c.zeroWidth()}).length;a=g.byLanguage(a,b);b=0===p&&0===a.left().length;f=f+r===n.length&&0===a.right().length;return{all:a.all,leftEdge:d.constant(b),rightEdge:d.constant(f),text:d.constant(n)}};return{before:function(c,
d,e,g,p){c=f(c,d,e,p);c.rightEdge()?d=a.none():(c=c.all(),0===c.length?d=a.none():(c=c[c.length-1],d=a.some(b(d,g,c.item(),c.finish()))));return d},after:function(c,d,e,g,p){c=f(c,d,e,p);c.leftEdge()?d=a.none():(c=c.all(),0===c.length?d=a.none():(c=c[0],d=a.some(b(c.item(),c.start(),d,g))));return d},both:function(c,d,e,f,g,r){return f===g?a.none():a.some(b(d,f,d,g))},neither:function(c,d,e,g){c=f(c,d,e,g);c.leftEdge()||c.rightEdge()?c=a.none():(d=c.all(),0===d.length?c=a.none():(c=d[0],d=d[d.length-
1],c=a.some(b(c.item(),c.start(),d.item(),d.finish()))));return c}}});l("15s",["2w"],function(c){return c.immutable("before","after")});l("135",["t","15s","10r"],function(c,e,d){return{around:function(a,b){var g=a.substring(0,b),f=d.leftBreak(g).map(function(a){return a+1}),g=a.substring(b),g=d.rightBreak(g).map(function(a){return b+a}),h=e(f,g),k=e(c.some(b),c.some(b));return g.bind(function(a){return b===a?c.some(k):c.none()}).getOrThunk(function(){return f.bind(function(a){return b===a?c.some(k):
c.none()}).getOr(h)})}}});l("105",["t","134","135"],function(c,e,d){return{word:function(a,b,g,f){if(!a.property().isText(b))return c.none();var h=a.property().getText(b),k=d.around(h,g);return k.before().fold(function(){return k.after().fold(function(){return e.neither(a,b,g,f)},function(c){return e.after(a,b,g,c,f)})},function(c){return k.after().fold(function(){return e.before(a,b,g,c,f)},function(d){return e.both(a,b,g,c,d,f)})})}}});l("vm",["105"],function(c){return{word:function(e,d,a,b){return c.word(e,
d,a,b)}}});l("n5",["6s","vm"],function(c,e){var d=c();return{word:function(a,b,c){return e.word(d,a,b,c)}}});l("ef",["84","7","n5"],function(c,e,d){var a=function(a,c,f){d.word(c,f,e.constant(!1)).each(function(c){a.setSelection(c.startContainer(),c.startOffset(),c.endContainer(),c.endOffset())})};return{expand:function(b){b.getSelection().each(function(d){c.isCollapsed(d.startContainer(),d.startOffset(),d.endContainer(),d.endOffset())&&a(b,d.startContainer(),d.startOffset())})},expandWord:a}});l("ei",
"87 8a t ee eg eb ej 1b 2n 2o 1c 2q 3c 21 2s 33 m b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w){var l=function(a,c){var d=b.fussy(c,0,c,w.children(c).length-1);A(a,c,d)},x=function(a){a=w.children(a);return 1===a.length&&q.isText(a[0])&&v.get(a[0])===c.zeroWidth()},y=function(b,c){return t.closest(b,"."+a.styleSpan()).bind(function(b){return t.closest(c,"."+a.styleSpan()).filter(function(a){return n.eq(b,a)})})},A=function(b,c,e){m.remove(c,a.styleSpan());return h.has(c,a.overrideSpan())?
B(b,c,e):d.some(e)},B=function(a,c,e){return C(c).bind(function(f){if(f.isStyled(c)){f=f.nu;var g=w.owner(c),g=f(g);p.before(c,g);r.append(g,w.children(c));s.remove(c);f=n.eq(c,e.start())?g:e.start();g=n.eq(c,e.finish())?g:e.finish();f=d.some(b.fussy(f,e.soffset(),g,e.foffset()))}else f=D(a,c,f.purifiers(),e,f.matches);return f})},C=function(b){b=h.get(b,a.overrideSpan());return g.search(b).map(function(a){return a.deferred()})},D=function(c,e,g,h,m){e=w.owner(e);var n=b.fromFussy(h);f.doRemoveUpto(c,
g,n,m);c="["+a.overrideSpan()+"]";return u.one(c,e).bind(function(a){s.unwrap(a);return k.inBody(h.start())&&k.inBody(h.finish())?d.some(h):d.none()})};return{clean:function(a,b){x(b)?s.unwrap(b):l(a,b)},cleanNonEmpty:l,isTransient:x,withinTransient:y,handleOverride:B,apply:function(a,c,f,g,h){var k=b.fussy(c,f,g,h);return y(c,g).bind(function(c){if(x(c)){var f=w.children(c),f=n.eq(c,k.start())?b.fussy(f[0],0,f[0],e.getEnd(f[0])):k;s.unwrap(c);c=d.some(f)}else c=A(a,c,k);return c})}}});l("eh","8a t n6 ef eg ei ej 2q 2s 2b".split(" "),
function(c,e,d,a,b,g,f,h,k,m){var n=function(a,b){return a.action().run(a.isRoot(),a.environment())};return{override:function(a,d){var f=a.temp();g.handleOverride(a.isRoot(),f,b.fussy(f,0,f,c.getEnd(f)));return e.some(d)},insertAfter:function(a,b){h.after(a.temp(),a.cursor());return e.some(b)},insertBefore:function(a,b){h.before(a.temp(),a.cursor());return e.some(b)},insertAt:function(a,b){var c=a.original();d.atStartOf(c.startContainer(),c.startOffset(),a.cursor());return e.some(b)},apply:n,applyIfOffCursor:function(a,
c){var d=a.action().deferred().isStyled(a.temp()),f=a.cursor(),g=e.some(b.fussy(f,1,f,1));d?d=g:(a.environment().setSelection(f,0,f,0),d=n(a,c));return d},clearCursor:function(a,c){var d=a.cursor(),g=a.action().deferred();f.doRemoveUpto(a.isRoot(),g.purifiers(),b.hare(d,0,d,1),g.matches);return e.some(b.fussy(d,1,d,1))},applyOverCursor:function(a,c){var d=a.cursor();a.environment().setSelection(d,0,d,1);n(a,c);return e.some(b.fussy(d,1,d,1))},regrab:function(c,d){var e=c.environment(),f=c.original();
e.setSelection(f.startContainer(),f.startOffset(),f.endContainer(),f.endOffset());a.expand(e);return e.getSelection().map(b.fromHare)},clearSelection:function(a,c){var d=a.action().deferred();return f.doRemoveUpto(a.isRoot(),d.purifiers(),b.fromFussy(c),d.matches)},applyIfOffRange:function(a,b){var c;a.action().deferred().isStyled(a.temp())?c=e.some(b):(a.environment().setSelection(b.start(),b.soffset(),b.finish(),b.foffset()),c=n(a,b));return c},unwrap:function(a,d){var f=a.temp(),g=m.children(f);
k.unwrap(f);return 0===g.length?e.none():e.some(b.fussy(g[0],0,g[g.length-1],c.getEnd(g[g.length-1])))}}});l("7q","87 b ec 8a 7 t 2w ed ee ef eg eb eh ei ej 1b 1c l".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v){var w=f.immutable("environment","isRoot","cursor","temp","action","original"),l=function(c,e){return d.lastCursor(c).fold(b.constant(!0),function(b){return u.eq(b,e.startContainer())&&a.getEnd(b)===e.startOffset()})},x=function(a,c){return d.firstCursor(a).fold(b.constant(!0),function(a){return u.eq(a,
c.startContainer())&&0===c.startOffset()})},y=function(a,b,d,f,h){var m=t.get(f,k.overrideSpan()),p=h.collapsed(),s=v.fromText(c.zeroWidth()),u=l(f,h),y=x(f,h),m=a.name()===m,J=w(d,b,s,f,a,h);a=m&&q.isTransient(f)?[r.unwrap]:p&&m&&u?[r.insertAfter,r.override,r.applyIfOffCursor]:p&&m&&y?[r.insertBefore,r.override,r.applyIfOffCursor]:p&&m?[r.insertAt,r.override,r.clearCursor]:p&&u?[r.insertAt,r.override,r.applyOverCursor]:p&&y?[r.insertBefore,r.override,r.applyOverCursor]:p?[r.insertAt,r.override,r.applyOverCursor]:
m?[r.override,r.regrab,r.clearSelection,r.applyIfOffRange]:[r.override,r.regrab,r.apply];return e.foldl(a,function(a,b){return a.bind(function(a){return b(J,a)})},g.some(n.fromHare(h)))};f=function(a,b,c){m.expand(c);var d=c.getSelection().bind(function(d){return q.withinTransient(d.startContainer(),d.endContainer()).filter(function(a){return t.has(a,k.overrideSpan())}).fold(function(){return a.run(b,c)},function(e){return y(a,b,c,e,d)})});return h.inlineFrom(d)};return{bold:b.curry(f,p.bold()),italic:b.curry(f,
p.italic()),underline:b.curry(f,p.underline()),strikethrough:b.curry(f,p.strikethrough()),superscript:b.curry(f,p.superscript()),subscript:b.curry(f,p.subscript()),removeformat:function(a,b){m.expand(b);var c=b.getSelection().bind(function(b){var c=s.allRules();return s.doRemoveAll(a,c,b)});return h.inlineFrom(c)},language:b.curry(function(a,b,c,d){c.getSelection().each(function(a){q.apply(b,a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset()).each(function(a){c.setSelection(a.start(),
a.soffset(),a.finish(),a.foffset())})});m.expand(c);a=a.run(b,c,d);return h.inlineFrom(a)},p.language()),cleanup:q.clean,cleanupNonEmpty:q.cleanNonEmpty,isTransient:q.isTransient,withinTransient:q.withinTransient}});l("5f","7 7n 7o 7e 7p 74 7f 7m 58 4a 7q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(p){var r=p.content(),q=p.shortcuts(),s=p.undo(),t=m.create({analytics:k(["message","properties"])}),u=function(a,d){var e=b.read(r);(void 0!==e[a]?e[a]():h.unchanged()).fold(d.deselect,
c.noop,d.select)},v=function(a){var b=function(b){return a(r.isRoot,b)};return function(){d.cata(p.selections().get(),c.noop,e.multiple(r,s,b),e.single(r,s,b));r.uiChanged()}},w=v(n.bold),l=v(n.italic),x=v(n.underline),y=v(n.strikethrough),A=v(n.subscript),B=v(n.superscript),v=v(n.removeformat);q.events.bold.bind(w);q.events.italic.bind(l);q.events.underline.bind(x);return{ui:g.ui({"bold.general":{toggle:!0,value:"bold",textkey:a.key("action.bold"),action:w,updateGeneral:c.curry(u,"bold"),icon:!0,
tooltip:f.get},"italic.general":{toggle:!0,value:"italic",textkey:a.key("action.italic"),action:l,updateGeneral:c.curry(u,"italic"),icon:!0,tooltip:f.get},"underline.general":{toggle:!0,value:"underline",textkey:a.key("action.underline"),action:x,updateGeneral:c.curry(u,"underline"),icon:!0,tooltip:f.get},"strikethrough.general":{toggle:!0,value:"strikethrough",textkey:a.key("action.strikethrough"),action:y,updateGeneral:c.curry(u,"strikethrough"),icon:!0,tooltip:f.get},"removeformat.general":{toggle:!1,
value:"removeformat",textkey:a.key("action.removeformat"),action:v,updateGeneral:c.identity,icon:!0,tooltip:f.get},"subscript.general":{toggle:!0,value:"subscript",textkey:a.key("action.subscript"),action:A,updateGeneral:c.curry(u,"subscript"),icon:!0,tooltip:f.get},"superscript.general":{toggle:!0,value:"superscript",textkey:a.key("action.superscript"),action:B,updateGeneral:c.curry(u,"superscript"),icon:!0,tooltip:f.get}}),events:t.registry,destroy:c.noop}}});l("ek",["b","du"],function(c,e){return{multiple:function(d,
a,b,g){return function(f,h){e.runTransaction(d,a,function(){c.each(h,b)},g)}},single:function(c,a,b,g){return function(f,h){e.runTransaction(c,a,function(){b(h)},g)}}}});l("nb",["mm"],function(c){var e=function(a,b,c){c=a.create().nu(c);var d=a.property().children(b);a.insert().append(b,c);a.insert().appendAll(c,d);return c},d=function(a,b,c){c=a.create().nu(c);var d=a.property().children(b);a.attrs().copyTo(b,c);a.insert().before(b,c);a.insert().appendAll(c,d);a.remove().remove(b);return c};return{blockTransform:function(a,
b,g){return(c.isFormatting(a,b)?d:e)(a,b,g)},nest:e,replace:d}});l("nc",["7"],function(c){return{tags:c.constant("address article aside audio blockquote canvas dd div dl fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 header hgroup hr li noscript ol output p pre section table tbody td tfoot th thead tr ul video".split(" "))}});l("ew",["b","7","t","nc"],function(c,e,d,a){return function(b){var g=function(a,g,k,m){var n=k.join(",");a=b.up().closest(a,n,m);g=b.up().closest(g,n,m);return a.isSome()&&
g.isSome()?(m=a.getOrDie("Just checked it was some."),g=g.getOrDie("Just checked it was some."),b.eq(m,g)?(k=c.find(k,e.curry(b.is,m)),k=void 0!==k&&null!==k?d.some(k):d.none()):k=d.none(),k):d.none()};return{query:function(b,c,d){c=c.concat(a.tags());return g(b.startContainer(),b.endContainer(),c,d)},queryAll:g}}});l("el","6s b nb et mu ew".split(" "),function(c,e,d,a,b,g){var f=c(),h=g(f);return{query:function(a,b,c){return h.query(a,b,c)},apply:function(f,g,h,p,r,q){return a.applyOn(f,b,g,h,p,
r,function(a){return e.map(a,function(a){return d.blockTransform(c(),a,q)})})}}});l("em",["nd","ef","1b","2o"],function(c,e,d,a){return{background:function(a,d,f){c.style(a,{"background-color":d},e.expand,f)},addClass:function(b,d,f){c.generic(b,e.expand,f,function(b){a.add(b,d)})},foreground:function(a,d,f){c.style(a,{color:d},e.expand,f)},addAttribute:function(a){return function(g,f,h){c.generic(g,e.expand,h,function(c){d.set(c,a,f)})}},face:function(a,d,f){c.style(a,{"font-family":d},e.expand,
f)},size:function(a,d,f){c.style(a,{"font-size":d},e.expand,f)}}});l("7r","b 7 t du dv ek dx dy 7o 7z el em 1b 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=function(a,c,e,g,m){c=function(b,c,d,f){return a(e.isRoot,b,c,d,f)};var n=b.multiple(e,g,c),p=b.single(e,g,c,h.spot,f.update);return k.cata(m.get(),d.none,function(a,b){return d.some(n(a,b))},function(a,b){return d.some(p(a,b))})};return{transform:function(a,b,c,d,e){return s(function(a,b,c,d,f){return n.apply(a,b,c,d,f,e)},a,b,c,
d)},setClass:function(b,d,f,g,h,m){var n=function(b){q.closest(b,h).each(function(b){a.runTransaction(d,f,function(){r.set(b,"class",m)},d.toEditing)})};k.cata(g.get(),e.noop,function(a,b){c.each(a,n)},function(a,b){n(a.startContainer())})},inline:function(a,b,c,d,f){a=function(a){p.addClass(a,f,m.isAnnotation)};k.cata(d.get(),e.noop,g.multiple(b,c,a,b.toEditing),g.single(b,c,a,b.toEditing))},list:function(a,b,c,d,e){return s(a,b,c,d,e)}}});l("7s","b 6 t 7e 2w 6x".split(" "),function(c,e,d,a,b,g){var f=
b.immutable("label","items"),h=function(b,c){return 0<c.length?[f(d.some(a.key(b)),c)]:[]};return{groups:function(a,b,n){var p=a.divisions(),r=c.map(p.blocks().concat(p.classblocks()),a.toCandidate),q=c.map(p.inlines(),a.toCandidate);a=c.map(p.objects(),a.toCandidate);a=c.foldr(a,function(a,d){var f;g.closest(b,d.base(),n)?(f=d.base(),f=c.contains(["a"],f)?e.merge(a,{link:a.link.concat([d])}):c.contains(["embed","img","object"],f)?e.merge(a,{media:a.media.concat([d])}):c.contains(["hr"],f)?e.merge(a,
{line:a.line.concat([d])}):c.contains(["li","ol","ul"],f)?e.merge(a,{list:a.list.concat([d])}):c.contains(["table","tr","td","th"],f)?e.merge(a,{table:a.table.concat([d])}):a):f=a;return f},{link:[],media:[],line:[],list:[],table:[]});return c.flatten([[f(d.none(),r)],h("block.label.inline",q),h("block.label.link",a.link),h("block.label.media",a.media),h("block.label.line",a.line),h("block.label.list",a.list),h("block.label.table",a.table)])}}});l("7u",[],function(){var c=function(c,d){return{fold:d}};
return{inline:function(e,d,a){return c("inline",function(b,c,f,h){return b(e,d,a)})},object:function(e,d,a,b){return c("object",function(c,f,h,k){return f(e,d,a,b)})},block:function(e,d,a){return c("block",function(b,c,f,h){return f(e,d,a)})},classblock:function(e,d,a,b){return c("classed block",function(c,f,h,k){return k(e,d,a,b)})},cata:function(c,d,a,b,g){return c.fold(d,a,b,g)}}});l("en","b 7 t p 7u 7e".split(" "),function(c,e,d,a,b,g){var f="h1 h2 h3 h4 h5 h6 div p pre".split(" "),h="a embed hr img li object ol table td tr ul th".split(" "),
k=function(a){var b=a.indexOf("."),c;-1<b?(c=a.substring(0,b),a=a.substring(b+1),c=-1===a.indexOf(".")?d.some({tag:e.constant(c),clazz:e.constant(a)}):d.none()):c=d.none();return c},m=function(d,e){var g=d.tag(),k=d.clazz(),m=c.contains(f,g),n=c.contains(h,g);return(m?a.value(b.classblock):n?a.value(b.object):a.error("Rule must have object tag or block tag.")).map(function(a){var b=r(e,d,m);return a(g,k,b,e.style)})},n=function(a){return a.text.getOrThunk(function(){return g.key("block."+a.name)})},
p=function(a,b){return a.text.getOrThunk(function(){return g.pkey("tag.inline.class",[b])})},r=function(a,b,c){return a.text.getOrThunk(function(){var a=(c?"block":"tag")+"."+b.tag(),a=(g.has(a)?g.translate(a):b.tag())+" ("+b.clazz()+")";return g.raw(a)})};return{decipher:function(d){return k(d.name).fold(function(){return c.contains(f,d.name)?a.value(b.block(d.name,n(d),d.style)):a.error("Invalid style name: "+d.name)},function(c){return 0<c.tag().length?m(c,d):a.value(b.inline(c.clazz(),p(d,c.clazz()),
d.style))})}}});l("7t","b 1q 7 t en 7u 7e 2w".split(" "),function(c,e,d,a,b,g,f,h){return function(k){var m=h.immutable("base","value","textkey","icon","styles","tag");k=c.map(k.styles,function(b){return{name:b.rule,text:a.from(b.text).map(f.raw),style:void 0===b.style?{}:b.style}});var n={};c.each(k,function(a){b.decipher(a).each(function(b){n[a.name]=b})});k=d.constant(!0);var p=d.constant(!1),r=function(a,b,c,d){return function(e){return g.cata(e,a,b,c,d)}},q=e.values(n),s=c.filter(q,r(p,p,p,k)),
t=c.filter(q,r(p,p,k,p)),u=c.filter(q,r(p,k,p,p)),v=c.filter(q,r(k,p,p,p));k=function(){var a=s.concat(u).concat(t).concat(v);return c.map(a,function(a){return g.cata(a,function(a,b,c){return"."+a},function(a,b,c,d){return a+"."+b},function(a,b,c){return a},function(a,b,c,d){return a+"."+b})})}();var w=function(b){return void 0!==n[b]?a.some(n[b]):a.none()},l=function(b){return g.cata(b,function(b,c,d){return m("span","."+b,c,a.none(),d,"span")},function(b,c,d,e){return m(b,b+"."+c,d,a.none(),e,"span")},
function(b,c,d){return m(b,b,c,a.none(),d,b)},function(b,c,d,e){return m(b,b+"."+c,d,a.none(),e,b)})},p=function(){var a=e.values(n);return c.map(a,l)}();return{candidateByName:function(a){return w(a).map(l)},toCandidate:l,ruleByName:w,divisions:function(){return{classblocks:d.constant(s),blocks:d.constant(t),objects:d.constant(u),inlines:d.constant(v)}},backup:function(b){return m(b,b,f.key("block."+b),a.none(),{},"span")},selectors:d.constant(k),everything:d.constant(p)}}});l("ep",["7","7e"],function(c,
e){return{text:function(d){var a=e.get(d.textkey()),b=e.cata(d.textkey(),c.constant(!0),c.constant(!1),c.constant(!1));d=b&&void 0===a?d.value():a;return{text:c.constant(d),unknown:c.constant(b)}}}});l("7v","52 eo ep 7e 59 2o 4e 2p l 2q".split(" "),function(c,e,d,a,b,g,f,h,k,m){return{format:function(d){var e=k.fromText(a.get(d.textkey())),f=c.div();g.add(f,b.resolve("format-element-"+d.tag()));h.setAll(f,d.styles());d=c.div();g.add(d,b.resolve("format-element-container"));m.append(f,e);m.append(d,
f);return d},face:function(a){var c=d.text(a),g=c.text(),g=e(g).element();h.setAll(g,{"font-family":a.value()});a=c.unknown()?[b.resolve("font-face-unknown")]:[];f.add(g,a);return g}}});l("ne","8e fp aq 52 7 t 7e 59 7m 58 4a 1b 2o 2p 3y l 2q 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v){var w=function(b,d){var e=t.fromTag(b);c.hidden(e,!0);q.set(e,"list-style-type",d);for(var f=h.resolve("list-style-content"),g=0;3>g;g++){var k=t.fromTag("li"),m=a.span();r.add(m,f);u.append(k,m);u.append(e,
k)}return e},l=function(b,c){var d=f.translate(c),e=t.fromText(d),g=a.span();r.add(g,h.resolve("list-style-default"));p.set(b,"data-"+h.resolve("list-style"),"default");p.set(b,"title",d);u.append(g,e);return g};return function(a,q,A){var B=A(void 0===q||"default"===q?g.none():g.some(q)),C=t.fromTag("div");r.add(C,h.resolve("list-style-option"));A=void 0===q||"default"===q?l(C,"ul"===a?"list.unordered.default":"list.ordered.default"):w(a,q);u.append(C,A);a=f.translate(("ul"===a?"list.unordered.":
"list.ordered.")+q);p.set(C,"title",a);c.label(C,a);c.menuItemCheckbox(C);var D=d.describe(C,f.translate("aria.widget.navigation"));u.append(C,D);var F=n.create({action:m(["type","element"])}),E=function(){e.checked(C,!0);r.add(C,h.resolve("list-style-selected"))},G=function(){e.checked(C,!1);r.remove(C,h.resolve("list-style-selected"))},H=s.bind(C,"click",function(a){F.trigger.action(B,g.some(C))});return{element:b.constant(C),instance:B,style:q,update:function(a){(B.query(a)&&B.queryStyle(a)?k.on(!0):
k.off()).fold(G,b.noop,E)},select:E,deselect:G,events:F.registry,destroy:function(){H.unbind();v.remove(C);v.remove(D)}}}});l("eq","b h2 92 52 7 t ne 59 58 4a 1b 2o 2q 2s 33 1u".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){var u="data-"+h.resolve("list-style");return function(v,w,l){var x=m.create({action:k(["type"])}),y=a.div();p.add(y,h.resolve("list-style-palette"));var A=c.map(v,function(a){return f("bullist"===w?"ul":"ol",a,l)});c.each(A,function(a){a.events.action.bind(function(a){a.element().each(D);
x.trigger.action(a.type())});r.append(y,a.element())});var B=function(){var a=t.floor(A.length/4)+(0<A.length%4?1:0);return d.grid(y,{cell:b.constant("."+h.resolve("list-style-option"))},a,4,e.grid({trigger:function(a){a.dom().click();return g.some(a)}}))}(),C=function(a){a=c.find(A,a);return g.from(a)},D=function(a){s.sibling(a,"["+u+'="default"]').filter(function(b){return b!==a}).bind(function(b){n.remove(b,u);n.set(a,u,"default")})};return{enter:B.enter,element:b.constant(y),update:function(a){c.each(A,
function(b){b.update(a)})},events:x.registry,destroy:function(a){B.isFocused()&&B.exit();B.destroy();c.each(A,function(a){a.destroy()});q.remove(y)},findDefault:function(){return C(function(a){return n.has(a.element(),u)}).map(function(a){return a.instance})}}}});l("7w","c ar 7 dt 7r eq 7f 7m 58 4a 30 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){return function(r){var q=r.region(),s=r.content(),t=r.undo(),u=r.keyboard(),v=r.listConstructor(),w=r.type(),l=r.styles(),x=r.textkey(),y=r.menuTextkey(),
A=v("default"),B=c.detect(),C=u.all();C.swallowKeys([e.ESCAPE()]);var D=m.create({abort:k([]),done:k([]),close:k([]),analytics:k(["message"])});C.events.escape.bind(function(a){D.trigger.abort()});var F=function(c,d){var e=b.list(function(b,e,f,g,h){return c.apply(b,e,f,g,h,a(q),d)},q,s,t,r.selections());D.trigger.done();s.focus();return e},E=function(){p.descendant(G.element(),'[data-ephox-polish-list-style="default"]').each(function(a){n.focus(a)})},G=g(l,w,v);G.events.action.bind(function(a){F(a.type(),
!1)});return{action:function(){var a=G.findDefault().getOr(A);F(a,!0)},element:G.element,shortcut:!1,textkey:d.constant(x),menuTextkey:d.constant(y),label:d.constant(!1),name:d.constant(w),tooltip:f.get,toggle:!0,value:w,updateWidget:function(a){s.getSelection().each(function(b){var c=A.query(b)?h.on(!0):h.off();c.fold(a.deselect,d.noop,a.select);c.fold(a.release,d.noop,a.press);G.update(b)})},open:function(){B.deviceType.isTouch()||E();C.on()},close:function(){C.off();D.trigger.close()},icon:!0,
events:D.registry,enter:G.enter,destroy:function(){C.off();C.destroy();G.destroy()}}}});l("nf",["6","4o"],function(c,e){var d=e.generate([{mine:["element"]},{other:["element"]},{paragraphs:["elements"]}]);return c.merge(d,{cata:function(a,b,c,d){return a.fold(b,c,d)}})});l("ng","b t fo nf 2p 21 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(a,c,d){var e=g.name(a);return b.getRaw(a,"list-style-type").fold(function(){return e===c&&d.isNone()},function(a){return d.exists(function(b){return e===
c&&a===b})})};return{categorise:function(b,e,g){b=c.groupBy(b,function(a){return d.isList(a)?!0:f.parent(a).map(function(a){return a.dom()}).getOr(!1)});return c.bind(b,function(b){return c.forall(b,d.isList)?c.map(b,function(b){return h(b,e,g)?a.mine(b):a.other(b)}):[a.paragraphs(b)]})}}});l("er","b ec 8a 7 t e3 nb nf ng 1b 2p l 2q 3c 21 69 4h".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u){return function(v,w,l){var x=function(a){if("p"===s.name(a))return f.replace(v,a,"li");var b=p.fromTag("li");
r.before(a,b);r.append(b,a);return b},y=function(a){var c=p.fromTag(w);l.each(function(a){n.set(c,"list-style-type",a)});r.before(a[0],c);q.append(c,a);b.from(m.get(a[0],"dir")).each(function(a){m.set(c,"dir",a)});return c},A=function(a){var b=t.mutate(a,w);l.fold(function(){n.remove(b,"list-style-type")},function(a){n.set(b,"list-style-type",a)});return b},B=function(b){var c=a.constant(!0),d=a.constant(!1);return b.fold(c,d,d)},C=function(a,c){return function(f){return h.cata(f,function(f){var h=
u.descendants(f,"li");return 0<h.length?(f=h[0],h=h[h.length-1],f=e.firstCursor(f).getOr(f),h=e.lastCursor(h).getOr(h),g.outdent(a,f,0,h,d.getEnd(h),c).map(function(a){return a.all()})):b.none()},b.none,b.none).getOr([])}},D=function(a){return h.cata(a,function(a){return[a]},function(a){return[A(a)]},function(a){a=c.map(a,x);y(a);return a})};return{apply:function(a,b,d){d=k.categorise(d,w,l);a=c.forall(d,B)?C(a,b):D;return c.bind(d,a)}}}});l("es","6s b 7 t fo nh ni nj 21 33".split(" "),function(c,
e,d,a,b,g,f,h,k,m){var n=function(a){return f.cata(a,function(a){return h.wrap(a)},function(a){return[a]},function(a,c){return b.isList(a)?[a]:e.bind(c,n)},function(a){return h.wrap([a])})};return{isRootContainer:function(a){return function(c){return a(c)||b.isContainer(c)&&"li"!==k.name(c)}},extract:n,isCapable:b.isBlock,canUse:d.constant(!1),quasi:function(){return a.some(g.nu(c()))},ascend:function(a,b){return m.closest(a,"ol,ul",b).getOr(a)}}});l("eu","ms nk nl 2p l 21".split(" "),function(c,
e,d,a,b,g){var f=function(d,e,f){var g=b.fromTag(e);f.each(function(b){a.set(g,"list-style-type",b)});return c.list(d,g)};return{hasSameType:function(a,b){return g.name(a)===b},hasSameStyle:function(b,c){var d=a.getRaw(b,"list-style-type");return c.fold(function(){return d.isNone()},function(a){return d.is(a)})},convertOr:function(a,b,c,d,e){return function(g){return d(g.list(),a)&&e(g.list(),b)?c(g):f(g,a,b)}},topContext:function(a,b,c){return d.context(a,b,d.topmost,e.groupWrite,c)},context:function(a,
b,c){return d.context(a,b,d.immediate,e.groupWrite,c)},unapply:function(a){return c.level(a,-1*a.level())}}});l("80","6s b 7 t er es et eu ev ew 2p 21 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var q=c(),s=m(q),t=function(b){b=e.map(b,function(a){return r.ancestor(a,"ul,ol")});var c=e.map(b,function(a){return a.fold(function(){return"-"},function(a){return p.name(a)+"-"+n.get(a,"list-style-type")})}),d=c[0];return e.forall(c.slice(1),function(a){return a===d})?b[0]:a.none()};c=function(a,
c,e){var m=b(q,a,e),n=function(a,b,c,d,e,h){return f.applyOn(a,g,b,c,d,e,function(b){return m.apply(a,h,b)})},p=function(b,c,d){b=b.selected();return 0<b.length&&t(b).map(function(b){return c(b,a)&&d(b,e)}).getOr(!1)};return{query:function(b){return s.queryAll(b.startContainer(),b.endContainer(),["ul","ol"],c).exists(function(b){return b===a})},queryStyle:function(a){var b=e.fold(function(){return":not([style])"},function(a){return'[style*="list-style-type: '+a+';"]'});return q.up().closest(a.startContainer(),
"ol, ul",c).exists(function(d){return q.up().closest(a.endContainer(),"ol, ul",c).exists(function(a){return d.dom()===a.dom()?q.is(d,b):!1})})},apply:function(b,c,f,g,m,r,q){var t=q?d.constant(!0):h.hasSameStyle,s=function(){return n(b,c,f,g,m,r)},v=function(b,d){return k.executeUsing(b,c,f,g,m,function(){return h.convertOr(a,e,d,h.hasSameType,t)})},l=function(){return h.topContext(c,g,b).fold(s,function(a){return v(a,h.unapply)})};return h.context(c,g,b).fold(s,function(a){return p(a,h.hasSameType,
t)?l():v(a,d.identity)})}}};return{unordered:d.curry(c,"ul"),ordered:d.curry(c,"ol")}});l("7x","7 t dt 7r 7e 7f 7m 80".split(" "),function(c,e,d,a,b,g,f,h){var k=function(h,k,m,q){return function(m){var r=q(m.content().isRoot,e.none());return{toggle:!0,value:h,textkey:b.key(k),icon:!0,tooltip:g.get,updateGeneral:function(a){m.content().getSelection().each(function(b){(r.query(b)?f.on(!0):f.off()).fold(a.deselect,c.noop,a.select)})},action:function(){a.list(function(a,b,c,e,f){return r.apply(a,b,c,
e,f,d(m.region()))},m.region(),m.content(),m.undo(),m.selections());m.content().focus()}}}},m=k("bullist","action.bullist","ul",h.unordered);return{ol:k("numlist","action.numlist","ol",h.ordered),ul:m}});l("7y",["b","7m","2w","el"],function(c,e,d,a){var b=d.immutable("tag"),g=function(a,b){return c.contains(["label","li","td","th","normal"],b)?e.on(a.backup(b)):e.off()},f=function(b,c,d){return a.query(b,c.selectors(),d).fold(function(){return b.collapsed()?g(c,"normal"):e.off()},function(a){return c.candidateByName(a).map(e.on).getOrThunk(function(){return g(c,
a)})})};return{read:function(a,c){var d=a.getSelection().fold(function(){return e.off()},function(b){return f(b,c,a.isRoot)});return b(d)}}});l("5g","b c 7 t 7r 7o 7s 7t 7u 7i 7v 7w 7x 7e 7y 7z 74 7f 58 4a 2w 80 1b 2p 33 q 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,w,l,x,y,A,B,C,D,F){var E=e.detect();return function(e,D){var L=l.create({analytics:w(["message"])}),I=h(D),J=e.region(),K=e.content(),N=e.undo(),M=a.some(n.format),O=K.isRoot,S=function(a){E.deviceType.isiOS()&&c.each(c.groupBy(c.filter(c.map(a,
function(a){return C.ancestor(a,"ul,ol",O).getOr(!1)}),d.identity),function(a){return a.dom()}),function(a){var b=B.get(a[0],"list-style-type");B.set(a[0],"list-style-type","none");F(function(){B.set(a[0],"list-style-type",b)},0)})},P=function(){return g.cata(e.selections().get(),d.constant([]),function(a){return 0<a.length?f.groups(I,a[0]):[]},function(a,b){return f.groups(I,a.startContainer(),O)})},U=function(b){var c=t.hasSelection(K),d=s.read(K,I),e=P();b.populate(e);m.updateMenu(b,d.tag(),c.content(),
I.everything(),a.none())},Q=function(a){I.ruleByName(a).each(function(a){k.cata(a,function(a,c,d){b.inline(J,K,N,e.selections(),a)},function(a,c,d,f){b.setClass(J,K,N,e.selections(),a,c)},function(a,d,f){b.transform(J,K,N,e.selections(),a).each(function(a){c.each(a,function(a){A.remove(a,"class")});S(a)})},function(a,d,f,g){b.transform(J,K,N,e.selections(),a).each(function(a){c.each(a,function(a){A.set(a,"class",d)});S(a)})});K.uiChanged()})},V=x.immutableBag("region content undo selections keyboard listConstructor type styles textkey menuTextkey".split(" "),
[]),W=V({region:J,content:K,undo:N,selections:e.selections(),keyboard:e.keyboard(),listConstructor:d.curry(y.unordered,O),type:"bullist",styles:["default","disc","circle","square"],textkey:q.key("action.bullist"),menuTextkey:q.key("list.unordered.menu")}),V=V({region:J,content:K,undo:N,selections:e.selections(),keyboard:e.keyboard(),listConstructor:d.curry(y.ordered,O),type:"numlist",styles:"default decimal upper-alpha lower-alpha upper-roman lower-roman lower-greek".split(" "),textkey:q.key("action.numlist"),
menuTextkey:q.key("list.ordered.menu")}),Y=function(a){return q.translate("block.describe",q.get(a.textkey()))},W=d.curry(p,W),V=d.curry(p,V);return{ui:u.ui({"blocktag.dropdown":function(){return{name:"blocktag",textkey:q.key("block.styles"),menuTextkey:q.key("block.menu"),updateDropdown:U,action:Q,values:I.everything(),render:M,tooltip:v.get,toggle:!1,describe:Y}},"bullist.widget":W,"numlist.widget":V,"bullist.general":d.constant(r.ul(e)),"numlist.general":d.constant(r.ol(e))},d.identity),events:L.registry,
destroy:d.noop}}});l("nm","b 7 fo mt ni p5 nj 21".split(" "),function(c,e,d,a,b,g,f,h){var k=["li"],m=function(a,c){return b.cata(a,function(a){return!0===c?[]:f.wrap(a)},function(a){return[a]},function(a,b){return"table"===h.name(a)?[a]:f.handleContainer(k,a,b,m)},function(a){return!0===c?[]:f.wrap([a])})};return{isRootContainer:a.isRootOrContainer,extract:function(a){return m(a,!1)},isCapable:function(a){return g.isBlock(a)||c.contains(k,h.name(a))},canUse:function(a){return d.isFormatting(a)||
c.contains(k,h.name(a))},quasi:e.curry(f.handleRoot,k),ascend:e.identity}});l("nn",["1b"],function(c){return function(e,d){return{is:function(a){return c.get(a,e)===d},remove:function(a){c.remove(a,e)},set:function(a){c.set(a,e,d)}}}});l("ex","b 7 mk nm et nn 2p bx 33".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b){return k.closest(b,'[dir="rtl"],[dir="ltr"]').filter(a).isSome()},n=function(k,n,p){var t=g(n,p),u=function(a){t.set(a);f.reflow(a)},v=function(a){return h.getDirection(a)===
p};return{run:function(d,e,f,g,h){return b.applyOn(d,a,e,f,g,h,function(a){c.each(a,u);return a})},query:function(a,b){return d.bothMatch(a,b,e.curry(m,v))},name:e.constant(k)}},p=n("DirRtl","dir","rtl"),n=n("DirLtr","dir","ltr");return{dirLtr:e.constant(n),dirRtl:e.constant(p)}});l("81","7 dw dx dy 7o ex 3w".split(" "),function(c,e,d,a,b,g,f){var h=function(g){return function(h){var n=function(a,b,c,d){return g.run(h.content().isRoot,a,b,c,d)};b.cata(h.selections().get(),c.noop,e.multiple(h.content(),
h.undo(),n),e.single(h.content(),h.undo(),n,a.spot,d.update));f(function(){h.content().uiChanged()},0)}};return{dirRtl:h(g.dirRtl()),dirLtr:h(g.dirLtr())}});l("82",["7m","2w","ex","33"],function(c,e,d,a){var b=e.immutable("ltrdir","rtldir"),g=function(a,b){return b.query(a.startContainer(),a.endContainer())?c.on(!0):c.off()},f=function(b){return a.closest(b.startContainer(),"[dir]").isSome()||a.closest(b.endContainer(),"[dir]").isSome()};return{readDir:function(a){return a.getSelection().filter(f).map(function(a){return b(g(a,
d.dirLtr()),g(a,d.dirRtl()))})}}});l("5h","7 81 7e 82 74 7m 58 4a".split(" "),function(c,e,d,a,b,g,f,h){return function(k){var m=k.content(),n=h.create({analytics:f(["message","properties"])}),p=function(b,d){a.readDir(m).map(function(a){return a[b]}).fold(g.unchanged,c.apply).fold(d.deselect,c.noop,d.select)};return{ui:b.ui({"ltrdir.general":{value:"ltrdir",textkey:d.key("directionality.ltrdir"),action:c.curry(e.dirLtr,k),updateGeneral:c.curry(p,"ltrdir"),toggle:!0},"rtldir.general":{value:"rtldir",
textkey:d.key("directionality.rtldir"),action:c.curry(e.dirRtl,k),updateGeneral:c.curry(p,"rtldir"),toggle:!0}}),events:n.registry,destroy:c.noop}}});l("vn",["ec","7","t","2b"],function(c,e,d,a){var b=function(a,b,c){a=a.createRange();a.selectNode(b.dom());a.collapse(c);return a},g=function(d,f,g){var n=d.createRange();n.selectNode(f.dom());var n=n.getBoundingClientRect(),p=g-n.left<n.right-g;g=p?a.firstChild:a.lastChild;return(p?c.firstCursor:c.lastCursor)(f).orThunk(e.curry(g,f)).map(function(a){return b(d,
a,p)})},f=function(a,c,e){var f=c.dom().getBoundingClientRect();return d.some(b(a,c,e-f.left<f.right-e))};return{search:function(b,c,d){return(0===a.children(c).length?f:g)(b,c,d)}}});l("106",["1u"],function(c){return{inRect:function(c,d,a){return d>=c.left&&d<=c.right&&a>=c.top&&a<=c.bottom},searchForPoint:function(e,d,a,b,g){if(0===g)return 0;if(d===b)return g-1;for(var f=1;f<g;f++){var h=e(f),k=c.abs(d-h.left);if(!(a>h.bottom)){if(a<h.top||k>b)return f-1;b=k}}return 0}}});l("vo","106 t k 2w 21 b3 2b 1u".split(" "),
function(c,e,d,a,b,g,f,h){var k=a.immutable("node","doc","x","y","fullrect"),m=function(a){var b=function(b){var c=a.doc().createRange();c.setStart(a.node().dom(),b);c.collapse(!0);return c},d=g.get(a.node()).length,e=a.x(),f=a.y(),h=a.fullrect().right,d=c.searchForPoint(function(a){return b(a).getBoundingClientRect()},e,f,h,d);return b(d)},n=function(a,b,f,g){var h=a.createRange();h.selectNode(b.dom());h=h.getClientRects();return d.findMap(h,function(a){return c.inRect(a,f,g)?e.some(a):e.none()}).map(function(c){return k(b,
a,f,g,c)})},p=function(a,g,h,k){if(b.isText(g))return n(a,g,h,k);var m=a.createRange();g=f.children(g);return d.findMap(g,function(b){m.selectNode(b.dom());return c.inRect(m.getBoundingClientRect(),h,k)?p(a,b,h,k):e.none()})};return{search:function(a,b,c,d){var e=a.createRange();e.selectNode(b.dom());e=e.getBoundingClientRect();c=h.max(e.left,h.min(e.right,c));d=h.max(e.top,h.min(e.bottom,d));return p(a,b,c,d).map(m)}}});l("no","vn vo t l 21 2b".split(" "),function(c,e,d,a,b,g){return{searchForRange:function(f,
h,k){return d.from(f.elementFromPoint(h,k)).map(a.fromDom).map(function(c){return"html"===b.name(c)?a.fromDom(f.body):c}).bind(function(a){var b=function(){return c.search(f,a,h)};return 0===g.children(a).length?b():e.search(f,a,h,k).orThunk(b)})}}});l("ey",["ez","no","t","q"],function(c,e,d,a){var b=function(a,b,c){return d.from(a.caretPositionFromPoint(b,c)).bind(function(b){if(null===b.offsetNode)return d.none();var c=a.createRange();c.setStart(b.offsetNode,b.offset);c.collapse();return d.some(c)})},
g=function(a,b,c){return d.from(a.caretRangeFromPoint(b,c))},f=a.caretPositionFromPoint?b:a.caretRangeFromPoint?g:e.searchForRange;return{find:function(a,b,d){return f(a.document,b,d).map(c.writeFromNative)}}});l("83",["ey"],function(c){return{find:c.find}});l("gz",["6","4o"],function(c,e){var d=e.generate([{blob:["id","blob","objurl","data"]},{url:["id","url","raw"]}]);return c.merge(d,{cata:function(a,b,c){return a.fold(b,c)}})});l("np",["2j"],function(c){return function(){return new (c.getOrDie("FileReader"))}});
l("he",["2j"],function(c){return{createObjectURL:function(e){return c.getOrDie("URL").createObjectURL(e)},revokeObjectURL:function(e){c.getOrDie("URL").revokeObjectURL(e)}}});l("f5","b 31 c gz 3v np he 1b".split(" "),function(c,e,d,a,b,g,f,h){d=d.detect();var k=function(a){var b=f.createObjectURL(a);return m(a,b)},m=function(c,d){return b.nu(function(b){var f=g();f.onload=function(f){var g=e.generate("image");f=a.blob(g,c,d,f.target);b(f)};f.readAsDataURL(c)})},n=function(a){return 1===a.length&&
c.contains(a,"Files")},p=function(a){return!c.contains(a,"text/_moz_htmlcontext")},r=function(a){return c.contains(a,"Files")},q=function(a){return!0};return{multiple:function(a){return 0===a.length?b.pure([]):b.mapM(a,k)},toFiles:function(a){return a.raw().target.files||a.raw().dataTransfer.files},isFiles:d.browser.isChrome()||d.browser.isSafari()||d.browser.isOpera()?r:d.browser.isFirefox()?p:d.browser.isIE()?n:q,fromImages:function(d){d=c.map(d,function(b){var c=e.generate("image");return a.url(c,
h.get(b,"src"),b)});return b.pure(d)},single:k,singleWithUrl:m}});l("f4","b f5 58 4a 2o 3y".split(" "),function(c,e,d,a,b,g){return{register:function(f,h,k){var m=a.create({dragover:d(["original"]),dragleave:d(["original"]),drop:d(["original"]),dragndropimages:d(["original","files"]),dragndrophtml:d(["original"])});h.each(function(a){var c=function(b){return function(){b(f,a)}};m.registry.dragover.bind(c(b.add));m.registry.dragleave.bind(c(b.remove));m.registry.drop.bind(c(b.remove))});var n=g.bind(f,
"dragover",function(a){!0===k?(a.prevent(),m.trigger.dragover(a)):a.kill()}),p=g.bind(f,"dragleave",m.trigger.dragleave),r=g.bind(f,"drop",function(a){m.trigger.drop(a);a.kill();if(e.isFiles(a.raw().dataTransfer.types)){var b=e.toFiles(a);m.trigger.dragndropimages(a,b)}else c.contains(a.raw().dataTransfer.types,"text/html")&&m.trigger.dragndrophtml(a)});return{destroy:function(){n.unbind();p.unbind();r.unbind()},events:m.registry}}}});l("85",["f4","f5","58","4a"],function(c,e,d,a){return{forImages:function(b,
g,f){b=c.register(b,g,f);var h=a.create({dragover:d(["original"]),dragleave:d(["original"]),drop:d(["original"]),dragndropimages:d(["assets","x","y"]),dragndrophtml:d(["html","x","y"])});g=function(a,b){a.bind(function(a){b(a.original())})};b.events.dragndropimages.bind(function(a){var b=a.original();e.multiple(a.files()).get(function(a){h.trigger.dragndropimages(a,b.x(),b.y())})});b.events.dragndrophtml.bind(function(a){a=a.original();var b=a.raw().dataTransfer.getData("text/html");h.trigger.dragndrophtml(b,
a.x(),a.y())});g(b.events.dragover,h.trigger.dragover);g(b.events.dragleave,h.trigger.dragleave);g(b.events.drop,h.trigger.drop);return{destroy:b.destroy,events:h.registry}}}});l("nq",["6u"],function(c){return{resolve:c.create("ephox-arcade").resolve}});l("f6",["nq","b","1b","21"],function(c,e,d,a){var b="data-"+c.resolve("no-merge"),g="data-"+c.resolve("atomic");return{doNotMerge:function(c){a.isElement(c)&&d.set(c,b,"true")},shouldMerge:function(c){return a.isElement(c)&&!1===d.has(c,b)},setAtomic:function(b){a.isElement(b)&&
d.set(b,g,"true")},isAtomic:function(b){return a.isElement(b)&&"true"===d.get(b,g)},clear:function(c){a.isElement(c)&&e.each([b,g],function(a){d.remove(c,a)})}}});l("vp",["7","t","l","2q","2b"],function(c,e,d,a,b){return{addAfter:function(g){return function(f,h){var k=h.all(),m=g(f,h);e.from(k[k.length-1]).each(function(e){b.nextSibling(e).fold(function(){var b=d.fromTag("p");a.append(b,d.fromTag("br"));a.after(e,b)},c.noop)});return m}}}});l("rc",["7"],function(c){return function(e,d,a,b){return{context:e,
profile:d,action:a,label:c.constant(b)}}});l("107","b zv us l 2q 21 2s 4h 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(e){var f=k.owner(e);e=h.descendants(e,"td,th");c.each(e,function(c){d.needsCursor(c).each(function(d){b.append(c,a.fromTag("br",f.dom()))})})},n=function(a){d.vacate(a);d.needsCursor(a).each(function(b){f.remove(a)})};return{populate:function(b){d.vacate(b);d.needsCursor(b).each(function(b){var c=a.fromTag("span");e.forceAddBr(b,c)})},purge:function(a){("table"===g.name(a)?
m:n)(a)}}});l("vw",["b","fo","107","2b"],function(c,e,d,a){var b=function(a,b){var e=g(a),e=c.filter(e,b);c.each(e,d.purge)},g=function(b){var c=function(a){return[a]},d=a.prevSibling(b).map(c).getOr([]),c=a.nextSibling(b).map(c).getOr([]);return d.concat([b]).concat(c)};return{purge:function(a){b(a,e.isBlock)},purgeBy:b}});l("vx","vw b fo 2p 21 6o 4h b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a){c.purgeBy(a,function(a){var c=d.isBlock(a)||"li"===b.name(a)||"ol"===b.name(a)||"ul"===
b.name(a);if("li"===b.name(a)){var e;if(!(e=0===f.descendants(a,"ul,ol").length)){e=f.descendants(a,"ul,ol,li");var h=f.descendants(a,"*");a=g.descendants(a,b.isText);e=e.length===h.length&&0===a.length}a=e}else a=!0;return c&&a})};return{purge:m,purgeAll:function(a){var b=f.descendants(a,"ol,ul,li");e.each([a].concat(b),m)},nesting:function(c){c=("li"===b.name(c)?[c]:[]).concat(f.descendants(c,"li"));e.each(c,function(c){var d=k.children(c);e.exists(d,function(a){return b.isText(a)?0<h.get(a).length:
!e.contains(["ol","ul"],b.name(a))})||a.set(c,"list-style-type","none")})}}});l("109","87 7 t l 2q 2s 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(b,f){var h=a.fromText(c.zeroWidth());b(f,h);return d.some({element:e.constant(h),cleanup:function(){g.remove(h)},splits:e.constant([])})},k=function(a,b){return a.map(function(a){return{element:e.constant(a),cleanup:e.noop,splits:e.constant(void 0!==b?b:[])}})},m=function(a,c){return h(b.before,a)},n=function(a,c){return h(b.after,a)},p=function(a,
c){return h(b.append,a)},r=function(a,c){return h(b.prepend,a)},q=function(a,b){return function(c,e){return a(c,e).fold(function(){return b(c,e)},d.some)}},s=function(a,b,c){return k(d.some(b),void 0!==b&&void 0!==c?[{first:b.dom(),second:c.dom()}]:[])};return{before:{text:{none:d.none,start:q(function(a,b){return k(f.prevSibling(a))},m),middle:s,end:s},element:{hasPrevious:function(a,b){return k(f.child(a,b-1))},rightEdge:p,first:r,empty:m,otherwise:r}},after:{text:{none:d.none,start:s,middle:function(a,
b,c){return k(d.some(c),void 0!==b&&void 0!==c?[{first:b.dom(),second:c.dom()}]:[])},end:q(function(a,b){return k(f.nextSibling(a))},n)},element:{hasNext:function(a,b){return k(f.child(a,b+1))},rightEdge:p,first:r,empty:n,otherwise:p}}}});l("wm",["7","vf","109","r"],function(c,e,d,a){return{prefix:c.curry(e.prefix,d),postfix:c.curry(e.postfix,d)}});l("10t","7 t oi w2 2q 37 2s 69".split(" "),function(c,e,d,a,b,g,f,h){var k=function(b){return!g.descendant(b,function(b){return a.hasCursor(b,["hr","img"])})},
m=function(a){var c=h.shallowAs(a,"p");b.before(a,c);f.remove(a);return e.some(c)};return{cleanup:function(a){var b=a.second(),b=(d.isHeading(b)&&k(b)?m(b):e.none()).getOr(a.second());return{first:a.first,second:c.constant(b),mark:a.mark,splits:a.splits}}}});l("wk","87 b 9s ec 8a 7 t n6 fo zv wm ur us 10t zw oi 1c l 2q 21 b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,v,l,z,x,y){var A=function(a){return z.isElement(a)&&k.isInline(a)&&0===y.children(a).length},B=function(a){var b=v.fromText(c.zeroWidth());
l.append(a,b);return b},C=function(a,b,c){return n.prefix(b,c).bind(function(b){var c=p.breakPath(b.element(),t.stopAt(a));return c.second().map(function(d){return{first:g.constant(a),second:g.constant(d),mark:g.constant(b),splits:g.constant(c.splits().concat(b.splits()))}})})};return{soft:function(c,e,m){var n=function(a){var d;z.isText(a)?(d=x.get(a),d=-1===d.indexOf("\u00a0")&&0===d.trim().length):d=!1;return d?y.nextSibling(a).forall(n):!b.isStart(c,e)&&k.isBlock(a)},p=v.fromTag("br");h.atStartOf(c,
e,p);y.nextSibling(p).fold(function(){return b.getEnd(c)===e&&t.findBlock(c,m).bind(a.lastCursor).fold(g.constant(!1),function(a){var b="br"===z.name(a)?p:c;return u.eq(b,a)})},n)&&l.after(p,v.fromTag("br"));return f.some({start:g.constant(d.after(p)),finish:g.constant(d.after(p))})},hard:function(a,b,c,f,h){return C(a,b,c).map(q.cleanup).map(function(a){e.each([f.getOr(a.first()),a.second()],function(b){r.postprocess(b,a.mark().element(),h)});t.findValidHardBreak(a.second(),h).orThunk(function(){m.rootBr(a.second(),
a.mark().element())});var b=s.plunge(a.second(),g.constant(!1)),b=A(b)?B(b):b;a.mark().cleanup();return{start:g.constant(d.on(b,0)),finish:g.constant(d.on(b,0))}})},rupture:C}});l("wj",["9s","7","t","l","2q"],function(c,e,d,a,b){var g=function(a,b,c){return d.some({start:e.constant(a(b,c)),finish:e.constant(a(b,c))})};return{doubleBr:function(d){b.after(d,a.fromTag("br"));var e=a.fromTag("br");b.after(d,e);return g(c.after,e,0)},emptyParagraph:function(d){var e=a.fromTag("p"),k=a.fromTag("br");b.append(e,
k);b.after(d,e);return g(c.on,k,0)}}});l("136",[],function(){return{box:function(c){return[c]}}});l("10u",["7","136","oi"],function(c,e,d){return{processes:function(a){return{stopper:d.stopAt(a),wrapper:e.box,post:c.noop}}}});l("10v","b t 136 oi 3c 21 2s 2b".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,c,d){e.from(d[d.length-1]).each(function(a){b.append(a,m(h.children(c)));f.empty(c)})},m=function(b){return c.filter(b,function(b){return!(g.isElement(b)&&a.isList(b)&&0===h.children(b).length)})};
return{processes:function(b){return{stopper:a.stopAt(b),wrapper:d.box,post:k}}}});l("10w","b 7 fo zv us oi 1b 2p l 2q 3c 21 37 2s 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=function(a,b){q.remove(a);return b},u=function(c,d){var e=k.fromTag("p");n.append(e,d);m.before(c,e);q.remove(c);b.needsCursor(e).each(function(b){a.forceAddBr(b,k.fromTag("span"))});return[e]},v=function(a){var b=s.children(a),b=(r.descendant(a,d.isFormatting)?t:u)(a,b);c.each(b,function(b){p.isElement(b)&&(f.transfer(a,
b,["dir"]),h.transfer(a,b,["text-align"]))});return b};return{processes:function(a){return{stopper:g.stopAt(a),wrapper:v,post:e.noop}}}});l("wl","b 9s 7 ur us 10u 10v 10w 3c 21 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return{exit:function(p,r){return n.ancestor(p,"ol,ul",r).bind(function(q){var s=n.ancestor(q,"li,ol,ul",r).fold(function(){return h.processes(q)},function(a){return"li"===m.name(a)?f.processes(a):g.processes(q)}),t=a.breakPath(p,s.stopper);return t.second().map(function(a){var f=
t.first(),g=s.wrapper(p);k.before(a,g);s.post(f,a,g);c.each([f,a],b.lists);return{start:d.constant(e.on(g[0],0)),finish:d.constant(e.on(g[0],0))}})})}}});l("oh","t wj wk wl oi 33".split(" "),function(c,e,d,a,b,g){var f=function(e,f,m,n){return g.closest(f,"li",n).fold(function(){return d.hard(e,f,m,c.none(),n)},function(e){e=b.exitList(e)?a.exit(e,n):d.hard(e,f,m,c.some(e),n);return e})};return{hard:function(a,g,m){return b.findValidHardBreak(a,m).fold(function(){return b.findAnchorBreak(a,m).fold(function(){return d.soft(a,
g,m)},function(f){return!0===b.isRightEdge(f,a,g)?e.doubleBr(f):d.hard(f,a,g,c.none(),m)})},function(b){return f(b,a,g,m)})},soft:d.soft,rupture:d.rupture}});l("wn",["2w"],function(c){return c.immutable("cursor","blocks")});l("oj","b 9s 7 t wm us wk oi wn vg 1c".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a,c,f,g){return b.postfix(a,c,f,g).map(function(b){var h=m.leftEdge(a,c,f,g);m.makeTo(h.element(),h.offset(),b.element()).deleteContents();return{start:d.constant(e.before(b.element())),
finish:d.constant(e.before(b.element())),mark:b.element}})},r=function(a,b,c,d){return p(a,b,c,d).bind(function(a){return f.soft(a.mark(),0)})},q=function(b,c,d,e,g){return p(b,c,d,e).bind(function(b){return h.findValidHardBreak(b.mark(),g).bind(function(c){return f.hard(c,b.mark(),0,a.none(),g)})})},s=function(a,b){c.each(a,function(a){g.postprocess(a,b)})};return{soft:r,hard:function(a,b,c,e,f){var g=h.findValidHardBreak(a,f),m=h.findValidHardBreak(c,f),l=g.fold(function(){var d=r(a,b,c,e);return k(d,
[])},function(d){return m.fold(function(){var f=r(a,b,c,e);return k(f,[d])},function(g){var h=n.eq(d,g)?q(a,b,c,e,f):p(a,b,c,e);return k(h,[d,g])})});return l.cursor().map(function(a){var b=l.blocks(),c;c=a.start().fold(d.identity,d.identity,d.identity);s(b,c);return a})},rupture:function(a,b,c,d,e){return p(a,b,c,d).bind(function(a){return h.findValidHardBreak(a.mark(),e).bind(function(b){return f.rupture(b,a.mark(),0)})})}}});l("108","wm wk oh oi oj q".split(" "),function(c,e,d,a,b,g){return{point:function(a,
b,c){return d.rupture(a,b,c)},range:function(a,c,d,e,g){return b.rupture(a,c,d,e,g)},ruptureUntil:function(b,d,k,m,n,p){var r=c.postfix(b,d,k,m);return function(b,c){return a.findValidHardBreak(b,n).map(p).bind(function(a){return e.rupture(a,b,c)})}(b,d).bind(function(a){return r.map(function(b){var c=g.createRange();c.setStartAfter(a.first().dom());c.setEndBefore(b.element().dom());c.deleteContents();b.cleanup();a.mark().cleanup();return a.first()})})}}});l("vq","vw vx b t n6 108 3c 2b".split(" "),
function(c,e,d,a,b,g,f,h){var k=function(c,d,e){if(0<c.length){var g=c[0],h=c.slice(1);b.atStartOf(d,e,g);f.after(g,h);return a.some(c[c.length-1])}return a.none()};return{split:function(b,k,p){var r=void 0===p?c.purge:p;return g.point(b.block(),b.element(),b.offset()).bind(function(b){var c=k.all();f.before(b.second(),c);b.mark().cleanup();r(b.first());r(b.second());d.each([b.first(),b.second()],e.nesting);b=d.reverse(c);b=d.find(b,function(a){return h.parent(a).isSome()});return a.from(b)})},merge:function(a,
b){var c=h.children(b.single());return k(c,a.element(),a.offset())},nest:function(a,b){return k(b.all(),a.element(),a.offset())},insertMany:k,insertChildren:function(a,b){var c=h.children(a);return k(c,b.element(),b.offset())},fallback:function(a,b,c){return k(c,b.startContainer(),b.startOffset())}}});l("vs",["b","7","t","33"],function(c,e,d,a){return{lists:function(b){return c.foldr(b,function(b,c){return b.bind(function(b){return a.closest(c,"ol,ul").map(function(a){return[a].concat(b)})})},d.some([])).map(function(a){return{all:e.constant(a)}})},
from:function(a){return{all:e.constant(a)}}}});l("vt","6 ec 7 t fo 2w 1c 21 4j 33 b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=g.immutable("left","right"),q=function(a){return b.isFormatting(a)||b.isContainer(a)},s=function(a,b,c,d){return k.closest(c,a,b)},t=function(a){return function(b,c,d){return a(b,c.element(),c.offset()).bind(function(c){return a(b,d.element(),d.offset()).map(function(a){return r(c,a)})})}},u=function(a){var b=t(a);return function(a,c,d){return b(a,c,d).filter(function(a){return f.eq(a.left(),
a.right())})}};return{inline:function(b,c,d){return k.closest(c,q,b).fold(function(){return a.some(c)},function(d){return b(d)?a.some(c):a.none()})},formatter:d.curry(s,b.isFormatting),container:function(a,c,e){return k.closest(c,b.isContainer,a).filter(d.not(a))},inListItem:function(a,b,c){return m.closest(b,"li",a)},inList:function(a,b,c){return m.closest(b,"ol,ul",a)},inTableCell:function(a,b,c){return m.closest(b,"td,th",a)},setBlock:function(a,b){return c.deepMerge(a,{block:d.constant(b)})},
both:t,shared:u,sharedPredicate:function(a){a=d.curry(s,a);return u(a)},entireRoot:function(a,b,c){return k.closest(b.element(),a).filter(function(c){var d=function(a){return f.eq(a,b.element())};return a(b.element())&&0===b.offset()||h.isText(b.element())&&0===b.offset()&&e.firstCursor(c).map(d).getOr(!1)}).filter(function(b){var d=function(a){return f.eq(a,c.element())};return a(c.element())&&c.offset()>=p.children(b).length-1||h.isText(c.element())&&c.offset()>=n.get(c.element()).length&&e.lastCursor(b).map(d).getOr(!1)}).map(function(a){return r(a,
a)})}}});l("vr","vx vq vs vt 6x 4h 33".split(" "),function(c,e,d,a,b,g,f){return{insertOne:function(a,f){var m=g.children(f.single(),"li");return 1!==m.length||b.descendant(m[0],"ol,ul")?e.split(a,d.from(m),c.purge):e.insertChildren(m[0],a)},insertMany:function(b,d){return f.ancestor(b.block(),"ol,ul",b.isRoot).bind(function(f){f=a.setBlock(b,f);return e.split(f,d,c.purgeAll)})}}});l("vu",["b","7","t","21"],function(c,e,d,a){var b=function(a){return function(b){return(1===b.length?d.some(b[0]):d.none()).filter(a).map(function(a){return{single:e.constant(a)}})}},
g=function(a){return function(b){var g=c.find(b,a);return(void 0!==g&&null!==g?d.some(b):d.none()).map(function(a){return{all:e.constant(a)}})}};return{oneOf:b,anyOf:g,noneOf:function(a){return function(b){var g=c.find(b,a);return(void 0===g||null===g?d.some(b):d.none()).map(function(a){return{all:e.constant(a)}})}},allOf:function(a){return function(b){return c.forall(b,a)?d.some({all:e.constant(b)}):d.none()}},any:d.some,oneOfTag:function(c){return b(function(b){return a.name(b)===c})},anyOfTag:function(b){return g(function(c){return a.name(c)===
b})},single:function(a){return d.some({single:e.constant(a)})},all:function(a){return d.some({all:e.constant(a)})}}});l("vv","b 7 t fo 21 4h 33".split(" "),function(c,e,d,a,b,g,f){var h=function(a){return 1===a.length?f.closest(a[0],"ol,ul").map(function(a){return{single:e.constant(a)}}):d.none()};return{list:h,listItem:function(a){return h(a).bind(function(a){a=g.descendants(a.single(),"li");return 1===a.length?d.some({single:e.constant(a[0])}):d.none()})},partialList:function(f){if(2!==f.length)return d.none();
var g=f[0],h=f[1];return a.isFormatting(g)||a.isContainer(g)||c.contains(["ol","ul","li"],b.name(g))||!c.contains(["ol","ul"],b.name(h))?d.none():d.some({all:e.constant(f),list:e.constant(h),inline:e.constant(g)})}}});l("nr","vp rc f6 vq vr vs vt vu vv 7 fo".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=f.formatter,r=f.inline,q=f.container,s=function(a){return n.isFormatting(a)&&!1===d.shouldMerge(a)};c=[e(f.inListItem,k.list,b.insertOne,"List"),e(f.inListItem,g.lists,b.insertMany,"Many lists"),
e(r,h.anyOf(s),a.nest,"Copying formatting (NO MERGE) into root"),e(r,h.oneOf(n.isFormatting),a.merge,"Copying formatting into root"),e(p,h.anyOfTag("hr"),a.split,"insert hr into formatter"),e(p,h.anyOf(s),a.split,"Copying one formatting block (NO MERGE) into formatting"),e(p,h.oneOf(n.isFormatting),a.merge,"Copying one formatting block into formatting"),e(p,h.anyOf(n.isFormatting),a.split,"Copying many formatting blocks into formatting"),e(p,h.anyOfTag("table"),c.addAfter(a.split),"Copying tables into formatting"),
e(p,h.anyOf(n.isContainer),a.split,"Copying container blocks into formatting"),e(q,h.all,a.nest,"Fallback pasting into container.")];return{context:function(a,b,c){return b.context(a.isRoot,c.startContainer(),c.startOffset()).map(function(b){return{block:m.constant(b),element:c.startContainer,offset:c.startOffset,isRoot:a.isRoot}})},rules:m.constant(c),fallback:a.fallback}});l("vy",["7","fg","e5"],function(c,e,d){return{force:function(a){var b=d.after(a.startContainer(),a.startOffset(),a.endContainer(),
a.endOffset()),g=b?e.point(a.endContainer(),a.endOffset()):e.point(a.startContainer(),a.startOffset());a=b?e.point(a.startContainer(),a.startOffset()):e.point(a.endContainer(),a.endOffset());return{left:c.constant(g),right:c.constant(a)}}}});l("vz","vw b ec 7 t 108 wm vg 1c l 3c 2s 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var q=function(a,c){var d=a.original(),e=f.postfix(d.left().element(),d.left().offset(),d.right().element(),d.right().offset()),g=c.all();return e.bind(function(c){h.makeTo(d.left().element(),
d.left().offset(),c.element()).deleteContents();c.cleanup();n.append(a.left(),g);c=r.children(a.right());n.append(a.left(),c);p.remove(a.right());return b.from(g[g.length-1])})},s=function(a,c){if(!k.eq(a.left(),a.right()))throw"replaceContents used in the wrong context";var e=a.left();p.empty(e);var f=c.all();n.append(e,f);return d.lastCursor(e).or(b.from(f[f.length-1]))};return{replace:function(a,c){if(k.eq(a.left(),a.right())){var d=c.all();a.replaceSelection(d);return b.from(d[d.length-1])}return q(a,
c)},replaceContents:s,replaceContentsWrapP:function(b,c){var d=m.fromTag("p");n.append(d,c.all());return s(b,{all:a.constant([d])})},replaceWhole:function(a,c){var d=c.all();n.after(a.left(),d);p.remove(a.left());return b.from(d[d.length-1])},merge:function(a,c){var d=r.children(c.single());a.replaceSelection(d);return b.from(d[d.length-1])},split:function(a,d,f){var h=void 0===f?c.purge:f;f=a.original().left();var k=a.original().right();return g.range(f.element(),f.offset(),k.element(),k.offset(),
a.isRoot).bind(function(a){var c=d.all();n.before(a.second(),c);a.mark().cleanup();e.each([a.first(),a.second()],h);return b.from(c[c.length-1])})},fallback:function(a,d,e){a.replaceSelection(e);b.from(e[0]).each(c.purge);b.from(e[e.length-1]).each(c.purge);return b.from(e[e.length-1])}}});l("w0","t l 2q 3c 21 33 2b".split(" "),function(c,e,d,a,b,g,f){return{insertAll:function(b,d){var e=d.all();a.after(b,e);return c.from(e[e.length-1])},insertChildren:function(b,d){var e=f.children(d.single());a.after(b,
e);return c.some(e[e.length-1])},insertSingle:function(a,b){d.after(a,b.single());return c.some(b.single())},insertFlat:function(b,f){var g=e.fromTag("li");a.append(g,[f.inline(),f.list()]);d.after(b,g);return c.some(f.list())},insertNested:function(f,k){var m=e.fromTag("li");a.append(m,[k.inline(),k.list()]);var n=g.ancestor(f,"ol,ul").fold(function(){var a=e.fromTag(b.name(k.list()));d.append(a,m);return a},function(){return m});d.after(f,n);return c.some(k.list())}}});l("w1","vx b 7 108 4h 2b".split(" "),
function(c,e,d,a,b,g){var f=function(b,c,e,f){f=void 0!==f?f:d.identity;var g=c.original(),q=g.left(),g=g.right();return a.ruptureUntil(q.element(),q.offset(),g.element(),g.offset(),c.isRoot,f).bind(function(a){var c=b(a,e);h(a);return c},void 0!==f?f:d.identity)},h=function(a){var d=b.ancestors(a,"ol,ul");0<d.length&&e.each([c.purgeAll,c.nesting],function(a){a(d[d.length-1])})};return{postprocess:h,onList:function(a,b,c){return f(a,b,c,function(a){return g.parent(a).getOr(a)})},onItem:function(a,
b,c){return f(a,b,c,d.identity)}}});l("ns","rc f6 vw vx vt vu vy vv vz w0 w1 b 7 fo w2 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){var u=b.formatter,v=r.curry(n.onItem,m.insertSingle),l=r.curry(n.onList,m.insertAll),z=r.curry(n.onItem,m.insertChildren),x=r.curry(n.onItem,m.insertFlat);m=r.curry(n.onItem,m.insertNested);c=[c(b.sharedPredicate(e.isAtomic),g.all,k.replaceWhole,"selection: inside something atomic, so just replace the whole thing"),c(b.shared(b.inListItem),h.listItem,function(a,
b){return k.merge(a,b)},"selection: same item, paste: singleton"),c(b.shared(b.inListItem),h.list,function(b,c){return k.split(b,{all:r.constant(t.children(c.single()))},a.purgeAll)},"selection: same item, paste: single list"),c(b.shared(b.inListItem),h.partialList,m,"selection: same item, paste: partial"),c(b.shared(b.inListItem),g.noneOf(q.isBlock),k.replace,"selection: same item, paste: no blocks"),c(b.shared(b.inListItem),g.anyOf(q.isHeading),function(a,b){var c=k.replace(a,b);p.each(b.all(),
function(a){d.purgeBy(a,s.isVacantText)});return c},"selection: same item, paste: heading"),c(b.shared(b.inListItem),g.all,l,"selection: same item, paste: any"),c(b.both(b.inListItem),h.listItem,v,"selection: diff items, paste: singleton"),c(b.both(b.inListItem),h.list,z,"selection: diff items, paste: single list"),c(b.both(b.inListItem),h.partialList,x,"selection: diff items, paste: partial"),c(b.both(b.inListItem),g.all,l,"selection: diff items, paste: any"),c(b.both(u),g.anyOfTag("hr"),k.split,
"selection: inside formatter, paste: split"),c(b.both(u),g.noneOf(q.isBlock),k.replace,"range no blocks"),c(b.both(u),g.anyOf(function(a){return q.isFormatting(a)&&!1===e.shouldMerge(a)}),k.split,"range 1 formatting block"),c(b.both(u),g.oneOf(q.isFormatting),k.merge,"range 1 formatting block"),c(b.both(u),g.all,k.split,"range anything > formatters"),c(b.entireRoot,g.noneOf(q.isBlock),k.replaceContentsWrapP,"complete body, not inserting a block: wrap in P and replace the contents"),c(b.entireRoot,
g.all,k.replaceContents,"complete body: replace the contents")];return{context:function(a,b,c){var d=f.force(c);return b.context(a.isRoot,d.left(),d.right()).map(function(b){return{left:b.left,right:b.right,original:r.constant(d),isRoot:a.isRoot,replaceSelection:a.replaceSelection}})},rules:r.constant(c),fallback:k.fallback}});l("f7","nr ns b 8a 7 t fg".split(" "),function(c,e,d,a,b,g,f){var h=function(a,c,e,f,h){return d.foldl(a,function(a,d){return a.orThunk(function(){return f(c,d,e).bind(function(a){return d.profile(h).map(function(c){return{action:d.action,
target:b.constant(c),ctx:b.constant(a)}})})})},g.none())},k=function(b){var c=a.getEnd(b);return f.point(b,c)},m=function(a,b,d,f,g,m){var u={getSelection:a,replaceSelection:b,isRoot:d};return u.getSelection().bind(function(a){var b=a.collapsed()?c:e,d=a.collapsed()?g.concat(b.rules()):m.concat(b.rules());return h(d,u,a,b.context,f).fold(function(){return b.fallback(u,a,f)},function(a){return a.action(a.ctx(),a.target())}).map(k)})};return{insertAtCursor:function(a,b,c,d){return m(a,b,c,d,[],[])},
insertAtCursorWith:m}});l("86","f6 f7 b ez 9s 84 t k 1b 21 4j".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a){return m.isElement(a)&&"false"===k.get(a,"contenteditable")},r=function(a){return a().map(function(a){a=d.map([a.startContainer(),a.endContainer()],function(a){return n.closest(a,p)});return h.cat(a)}).getOr([])},q=function(a,b,e){d.each(a,b);b=e();d.each(a,c.clear);return b},s=function(a,b){return q(a,c.setAtomic,b)},t=function(a,b,c,d,f,g){var h=r(a);return s(h,function(){return e.insertAtCursorWith(a,
b,c,d,f,g)})},u=function(a,b,c,d){b=t(a.getSelection,a.replaceSelection,a.isRoot,b,c,d);a.domChanged();a.undoChanged();return b},l=function(a,b){return u(a,b,[],[])};return{insertAtCursorWith:u,insertAtCursor:l,insertAtCursorWithInstructions:function(a,b,c){return q(c,a,function(){return l(b,c)})},insertAt:function(c,d,e){e=t(function(){return f.some(d)},function(e){c.win().each(function(c){var f=a.write(b.on(d.startContainer(),d.startOffset()),b.on(d.endContainer(),d.endOffset()));g.replaceRange(c,
f,e)})},c.isRoot,e,[],[]);c.domChanged();c.undoChanged();return e}}});l("5i","83 84 85 t 86 58 4a 3l".split(" "),function(c,e,d,a,b,g,f,h){return function(k){var m=f.create({insertAssets:g(["assets"]),insertHtml:g(["html"])}),n=k.content(),p=a.none(),r=function(a){n.win().each(function(b){c.find(b,a.x(),a.y()).each(function(a){e.set(b,a)})})},q=function(a){r(a);m.trigger.insertAssets(a.assets())},s=function(a){r(a);a=a.html();k.undo().save();a=h.fromHtml(a);b.insertAtCursor(n,a)};n.events.ready.bind(function(b){var c=
a.none();p=a.some(d.forImages(b.api().canvas(),c,!0));p.each(function(a){a.events.dragndropimages.bind(q);a.events.dragndrophtml.bind(s)})});return{events:m.registry,destroy:function(a){p.each(function(a){a.destroy()})}}}});l("89",["3v","7","p"],function(c,e,d){var a=e.compose(c.pure,d.value);c=e.compose(c.pure,d.error);return{pure:a,failed:c,foldSync:function(a,c,d){return a.map(function(a){return a.fold(c,d)})},bindSync:function(a,c){return a.map(function(a){return a.bind(c)})},bindAsync:function(a,
c){return a.bind(function(a){return a.bind(c)})},mapSync:function(a,c){return a.map(function(a){return a.map(c)})},handle:function(a,c,d){return a.get(function(a){return a.fold(c,d)})}}});l("fb",["20"],function(c){return{now:function(){return(new c).getTime()}}});l("f8",["a","1q","fb","t","2w"],function(c,e,d,a,b){return function(g,f){var h=void 0!==f?f:36E5,k=b.immutable("result","timestamp"),m={},n=function(a,b,c){m[a]=k(b,c)},p=function(a){var b=d.now();e.map(a,function(a,c){b-a.timestamp<h&&n(c,
a.result,a.timestamp)})};c.isObject(g)&&p(g);return{set:n,get:function(b,c){return a.from(m[c]).filter(function(a){return b-a.timestamp()<h}).map(function(a){return a.result()})},dump:function(){return e.map(m,function(a){return{result:a.result(),timestamp:a.timestamp()}})}}}});l("c6",["r","x"],function(c,e){var d=function(a){return function(b){if(null===b)b="null";else{var d=typeof b;b="object"===d&&c.prototype.isPrototypeOf(b)?"array":"object"===d&&e.prototype.isPrototypeOf(b)?"string":d}return b===
a}};return{isString:d("string"),isObject:d("object"),isArray:d("array"),isNull:d("null"),isBoolean:d("boolean"),isUndefined:d("undefined"),isFunction:d("function"),isNumber:d("number")}});l("w9",["c6","r","n"],function(c,e,d){var a=function(a){return function(){for(var b=new e(arguments.length),c=0;c<b.length;c++)b[c]=arguments[c];if(0===b.length)throw new d("Can't merge zero objects");for(var c={},k=0;k<b.length;k++){var m=b[k],n;for(n in m)m.hasOwnProperty(n)&&(c[n]=a(c[n],m[n]))}return c}},b=a(function(a,
d){return c.isObject(a)&&c.isObject(d)?b(a,d):d}),a=a(function(a,b){return b});return{deepMerge:b,merge:a}});l("w6",["9","ke"],function(c,e){var d=function(a){return{is:function(c){return a===c},isValue:c.constant(!0),isError:c.constant(!1),getOr:c.constant(a),getOrThunk:c.constant(a),getOrDie:c.constant(a),or:function(c){return d(a)},orThunk:function(c){return d(a)},fold:function(c,d){return d(a)},map:function(c){return d(c(a))},each:function(c){c(a)},bind:function(c){return c(a)},exists:function(c){return c(a)},
forall:function(c){return c(a)},toOption:function(){return e.some(a)}}},a=function(b){return{is:c.constant(!1),isValue:c.constant(!1),isError:c.constant(!0),getOr:c.identity,getOrThunk:function(a){return a()},getOrDie:function(){return c.die(b)()},or:function(a){return a},orThunk:function(a){return a()},fold:function(a,c){return a(b)},map:function(c){return a(b)},each:c.noop,bind:function(c){return a(b)},exists:c.constant(!1),forall:c.constant(!0),toOption:e.none}};return{value:d,error:a}});l("c8",
["ke","1a"],function(c,e){var d=function(){var a=e.keys,b=function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);return b};return void 0===a?b:a}(),a=function(a,b){for(var c=d(a),e=0,f=c.length;e<f;e++){var g=c[e];b(a[g],g,a)}},b=function(b,c){var d={};a(b,function(a,e){var f=c(a,e,b);d[f.k]=f.v});return d},g=function(b,c){var d=[];a(b,function(a,b){d.push(c(a,b))});return d},f=function(a){return g(a,function(a){return a})};return{bifilter:function(b,c){var d={},e={};a(b,function(a,b){(c(a,
b)?d:e)[b]=a});return{t:d,f:e}},each:a,map:function(a,c){return b(a,function(a,b,d){return{k:b,v:c(a,b,d)}})},mapToArray:g,tupleMap:b,find:function(a,b){for(var e=d(a),f=0,g=e.length;f<g;f++){var r=e[f],q=a[r];if(b(q,r,a))return c.some(q)}return c.none()},keys:d,values:f,size:function(a){return f(a).length}}});l("wb","c7 c8 c6 r n o".split(" "),function(c,e,d,a,b,g){return{generate:function(f){if(!d.isArray(f))throw new b("cases must be an array");if(0===f.length)throw new b("there must be at least one case");
var h=[],k={};c.each(f,function(m,n){var p=e.keys(m);if(1!==p.length)throw new b("one and only one name per case");var r=p[0],q=m[r];if(void 0!==k[r])throw new b("duplicate key detected:"+r);if("cata"===r)throw new b("cannot have a case named cata (sorry)");if(!d.isArray(q))throw new b("case arguments must be an array");h.push(r);k[r]=function(){var d=arguments.length;if(d!==q.length)throw new b("Wrong number of arguments to case "+r+". Expected "+q.length+" ("+q+"), got "+d);for(var k=new a(d),d=
0;d<k.length;d++)k[d]=arguments[d];return{fold:function(){if(arguments.length!==f.length)throw new b("Wrong number of arguments to fold. Expected "+f.length+", got "+arguments.length);return arguments[n].apply(null,k)},match:function(a){var d=e.keys(a);if(h.length!==d.length)throw new b("Wrong number of arguments to match. Expected: "+h.join(",")+"\nActual: "+d.join(","));if(!c.forall(h,function(a){return c.contains(d,a)}))throw new b("Not all branches were specified when using match. Specified: "+
d.join(", ")+"\nRequired: "+h.join(", "));return a[r].apply(null,k)},log:function(a){g.log(a,{constructors:h,constructor:r,params:k})}}}});return k}}});l("wa",["wb","c7"],function(c,e){var d=c.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);return{partition:function(a){var b=[],c=[];e.each(a,function(a){a.fold(function(a){b.push(a)},function(a){c.push(a)})});return{errors:b,values:c}},compare:function(a,
b){return a.fold(function(a){return b.fold(function(b){return d.bothErrors(a,b)},function(b){return d.firstError(a,b)})},function(a){return b.fold(function(b){return d.secondError(a,b)},function(b){return d.bothValues(a,b)})})}}});l("ql",["c7","9","w9","w6","wa"],function(c,e,d,a,b){var g=function(b){return e.compose(a.error,c.flatten)(b)};return{consolidateObj:function(c,e){var k=b.partition(c);return 0<k.errors.length?g(k.errors):a.value(d.deepMerge.apply(void 0,[e].concat(k.values)))},consolidateArr:function(c){c=
b.partition(c);return 0<c.errors.length?g(c.errors):a.value(c.values)}}});l("qm",["c7","c8"],function(c,e){return{narrow:function(d,a){var b={};c.each(a,function(a){void 0!==d[a]&&d.hasOwnProperty(a)&&(b[a]=d[a])});return b},exclude:function(d,a){var b={};e.each(d,function(d,e){c.contains(a,e)||(b[e]=d)});return b},indexOnKey:function(d,a){var b={};c.each(d,function(c){b[c[a]]=c});return b}}});l("qn",["ke"],function(c){var e=function(d){return function(a){return a.hasOwnProperty(d)?c.from(a[d]):c.none()}};
return{readOpt:e,readOr:function(c,a){return function(b){return e(c)(b).getOr(a)}},readOptFrom:function(c,a){return e(a)(c)},hasKey:function(c,a){return c.hasOwnProperty(a)&&void 0!==c[a]&&null!==c[a]}}});l("qo",["c7"],function(c){return{wrap:function(c,d){var a={};a[c]=d;return a},wrapAll:function(e){var d={};c.each(e,function(a){d[a.key]=a.value});return d}}});l("ir",["ql","qm","qn","qo"],function(c,e,d,a){return{narrow:function(a,c){return e.narrow(a,c)},exclude:function(a,c){return e.exclude(a,
c)},readOpt:function(a){return d.readOpt(a)},readOr:function(a,c){return d.readOr(a,c)},readOptFrom:function(a,c){return d.readOptFrom(a,c)},wrap:function(b,c){return a.wrap(b,c)},wrapAll:function(b){return a.wrapAll(b)},indexOnKey:function(a,c){return e.indexOnKey(a,c)},hasKey:function(a,c){return d.hasKey(a,c)},consolidate:function(a,d){return c.consolidateObj(a,d)}}});l("16s",[],function(){return"undefined"!==typeof window?window:Function("return this;")()});l("15t",["16s"],function(c){var e=function(a,
b){for(var d=void 0!==b?b:c,e=0;e<a.length&&void 0!==d&&null!==d;++e)d=d[a[e]];return d},d=function(a,b){for(var d=void 0!==b?b:c,e=0;e<a.length;++e){var h=a[e];if(void 0===d[h]||null===d[h])d[h]={};d=d[h]}return d};return{path:e,resolve:function(a,b){var c=a.split(".");return e(c,b)},forge:d,namespace:function(a,b){var c=a.split(".");return d(c,b)}}});l("137",["15t"],function(c){return{getOrDie:function(e,d){var a=c.resolve(e,d);if(void 0===a)throw e+" not available on this browser";return a}}});
l("10c",["137"],function(c){return{parse:function(e){return c.getOrDie("JSON").parse(e)},stringify:function(e,d,a){return c.getOrDie("JSON").stringify(e,d,a)}}});l("w5",["c7","c8","c6","10c"],function(c,e,d,a){return{formatObj:function(b){return d.isObject(b)&&100<e.keys(b).length?" removed due to size":a.stringify(b,null,2)},formatErrors:function(a){a=10<a.length?a.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):a;return c.map(a,function(a){return"Failed path: ("+
a.path.join(" > ")+")\n"+a.getErrorInfo()})}}});l("10a",["w5","w6"],function(c,e){var d=function(a,b){return e.error([{path:a,getErrorInfo:b}])};return{missingStrict:function(a,b,e){return d(a,function(){return'Could not find valid *strict* value for "'+b+'" in '+c.formatObj(e)})},missingKey:function(a,b){return d(a,function(){return'Choice schema did not contain choice key: "'+b+'"'})},missingBranch:function(a,b,e){return d(a,function(){return'The chosen schema: "'+e+'" did not exist in branches: '+
c.formatObj(b)})},unsupportedFields:function(a,b){return d(a,function(){return"There are unsupported fields: ["+b.join(", ")+"] specified"})},custom:function(a,b){return d(a,function(){return b})},toString:function(a){return"Failed path: ("+a.path.join(" > ")+")\n"+a.getErrorInfo()}}});l("nw",["wb","9"],function(c,e){var d=c.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]);return{strict:d.strict,asOption:d.asOption,
defaulted:function(a){return d.defaultedThunk(e.constant(a))},defaultedThunk:d.defaultedThunk,asDefaultedOption:function(a){return d.asDefaultedOptionThunk(e.constant(a))},asDefaultedOptionThunk:d.asDefaultedOptionThunk,mergeWith:function(a){return d.mergeWithThunk(e.constant(a))},mergeWithThunk:d.mergeWithThunk}});l("10b",["wb"],function(c){var e=c.generate([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]}]);c=c.generate([{field:["name",
"presence","type"]},{state:["name"]}]);return{typeAdt:e,fieldAdt:c}});l("w4","nw ir ql qn qo 10a 10b wb c7 9 w9 c8 ke w6 c6".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=h.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),u=function(b,c,d){return a.readOptFrom(c,d).fold(function(){return g.missingStrict(b,d,c)},q.value)},l=function(b,c,d){c=a.readOptFrom(b,c).fold(function(){return d(b)},m.identity);return q.value(c)},w=function(b,c,d){c=a.readOptFrom(b,
c).map(function(a){return!0===a?d(b):a});return q.value(c)},z=function(c,d,e,f){return e.fold(function(e,g,h,k){var p=function(a){return k.extract(c.concat([e]),f,a).map(function(a){return b.wrap(g,f(a))})},t=function(a){return a.fold(function(){var a=b.wrap(g,f(r.none()));return q.value(a)},function(a){return k.extract(c.concat([e]),f,a).map(function(a){return b.wrap(g,f(r.some(a)))})})};return function(){return h.fold(function(){return u(c,d,e).bind(p)},function(a){return l(d,e,a).bind(p)},function(){return q.value(a.readOptFrom(d,
e)).bind(t)},function(a){return w(d,e,a).bind(t)},function(a){var b=a(d);return l(d,e,m.constant({})).map(function(a){return n.deepMerge(b,a)}).bind(p)})}()},function(a,c){var e=c(d);return q.value(b.wrap(a,f(e)))})},x=function(a,b,c,e){c=k.map(c,function(c){return z(a,b,c,e)});return d.consolidateObj(c,{})},y=function(a){return{extract:function(b,c,d){return a(d).fold(function(a){return g.custom(b,a)},q.value)},toString:function(){return"val"},toDsl:function(){return f.typeAdt.itemOf(a)}}},A=function(a){var b=
p.keys(a);return k.filter(b,function(b){return e.hasKey(a,b)})},B=function(a){return{extract:function(b,c,d){return x(b,d,a,c)},toString:function(){return"obj{\n"+k.map(a,function(a){return a.fold(function(a,b,c,d){return a+" -> "+d.toString()},function(a,b){return"state("+a+")"})}).join("\n")+"}"},toDsl:function(){return f.typeAdt.objOf(k.map(a,function(a){return a.fold(function(a,b,c,d){return f.fieldAdt.field(a,c,d)},function(a,b){return f.fieldAdt.state(a)})}))}}},C=function(a){return{extract:function(b,
c,e){e=k.map(e,function(d,e){return a.extract(b.concat(["["+e+"]"]),c,d)});return d.consolidateArr(e)},toString:function(){return"array("+a.toString()+")"},toDsl:function(){return f.typeAdt.arrOf(a)}}};h=y(q.value);var D=m.compose(C,B);return{anyValue:m.constant(h),value:y,obj:B,objOnly:function(a){var b=B(a),c=k.foldr(a,function(a,b){return b.fold(function(b){return n.deepMerge(a,e.wrap(b,!0))},m.constant(a))},{});return{extract:function(a,d,f){var h=s.isBoolean(f)?[]:A(f),h=k.filter(h,function(a){return!e.hasKey(c,
a)});return 0===h.length?b.extract(a,d,f):g.unsupportedFields(a,h)},toString:b.toString,toDsl:b.toDsl}},arr:C,setOf:function(a,b){var d=function(b,c){return C(y(a)).extract(b,m.identity,c)};return{extract:function(a,e,f){var g=p.keys(f);return d(a,g).bind(function(d){d=k.map(d,function(a){return t.field(a,a,c.strict(),b)});return B(d).extract(a,e,f)})},toString:function(){return"setOf("+b.toString()+")"},toDsl:function(){return f.typeAdt.setOf(a,b)}}},arrOfObj:D,state:t.state,field:t.field,output:function(a,
b){return t.state(a,m.constant(b))},snapshot:function(a){return t.state(a,m.identity)}}});l("w3",["ir","10a","w4","10b","c8"],function(c,e,d,a,b){var g=function(a,b,g,m,n){return c.readOptFrom(m,n).fold(function(){return e.missingBranch(a,m,n)},function(c){return d.obj(c).extract(a.concat(["branch: "+n]),b,g)})};return{choose:function(d,h){return{extract:function(a,b,n){return c.readOptFrom(n,d).fold(function(){return e.missingKey(a,d)},function(c){return g(a,b,n,h,c)})},toString:function(){return"chooseOn("+
d+"). Possible values: "+b.keys(h)},toDsl:function(){return a.typeAdt.choiceOf(d,h)}}}}});l("nt","w3 w4 w5 9 w6 n".split(" "),function(c,e,d,a,b,g){var f=e.value(b.value),h=e.arr,k=e.obj,m=e.objOnly,n=e.setOf,p=function(a,c,d,e){return c.extract([a],d,e).fold(function(a){return b.error({input:e,errors:a})},b.value)},r=function(b,c,d){return p(b,c,a.constant,d)},q=function(b,c,d){return p(b,c,a.identity,d)},s=function(b){return b.fold(function(a){throw new g(t(a));},a.identity)},t=function(a){return"Errors: \n"+
d.formatErrors(a.errors)+"\n\nInput object: "+d.formatObj(a.input)};return{anyValue:a.constant(f),arrOfObj:function(a){return e.arrOfObj(a)},arrOf:h,arrOfVal:function(){return e.arr(f)},valueOf:function(a){return e.value(a)},setOf:n,objOf:k,objOfOnly:m,asStruct:r,asRaw:q,asStructOrDie:function(a,b,c){return s(r(a,b,c))},asRawOrDie:function(a,b,c){return s(q(a,b,c))},getOrDie:s,formatError:t,choose:function(a,b){return c.choose(a,b)}}});l("10d",["3v","np"],function(c,e){return function(d){return c.nu(function(a){var b=
e();b.onload=function(b){a(b.target.result)};b.readAsText(d)})}});l("10e",["2j"],function(c){return function(){return new (c.getOrDie("XMLHttpRequest"))}});l("w7","a 1q 6 10d 3v 10e t p w o".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"};return{ajax:function(p,r,q,s){var t=d.merge({url:p,contentType:"application/json",processData:!1,type:"GET"},s),u=g();u.open(t.type.toUpperCase(),
t.url,!0);"blob"===t.responseType&&(u.responseType=t.responseType);c.isString(t.contentType)&&u.setRequestHeader("Content-Type",t.contentType);var l=t.dataType;s=c.isString(l)&&"*"!==l?n[l]+", "+n["*"]+"; q=0.01":n["*"];u.setRequestHeader("Accept",s);void 0!==t.xhrFields&&!0===t.xhrFields.withCredentials&&(u.withCredentials=!0);c.isObject(t.headers)&&e.each(t.headers,function(a,b){c.isString(b)||c.isString(a)?u.setRequestHeader(b,a):m.error("Request header data was not a string: ",b," -> ",a)});var w=
function(){var c;c="blob"===t.responseType?f.from(u.response).map(a).getOr(b.pure("no response content")):b.pure(u.responseText);c.get(function(a){0===u.status?q("Unknown HTTP error (possible cross-domain request)",u.status,a):q('Could not load url "'+p+'": '+u.statusText,u.status,a)})},z=function(){var a;if("json"===l)try{a=h.value(JSON.parse(u.response))}catch(b){a=h.error({status:u.status,statusText:"Response was not JSON",responseText:u.responseText})}else a=h.value(u.response);a.fold(w,function(a){r(a)})};
u.onerror=w;u.onload=function(){0===u.status?k.startsWith(t.url,"file:")?z():w():100>u.status||400<=u.status?w():z()};void 0===t.data?u.send():u.send(t.data)}}});l("w8",["2j"],function(c){return{parse:function(e){return c.getOrDie("JSON").parse(e)},stringify:function(e,d,a){return c.getOrDie("JSON").stringify(e,d,a)}}});l("nu",["6","w7","w8"],function(c,e,d){var a=function(a){return function(b,c,e){var m;try{m=void 0===e||""===e?e:d.parse(e)}catch(n){m={contents:e}}a(b,c,m)}},b=function(b,d,h,k,m){e.ajax(b,
h,a(k),c.merge({dataType:"json",type:d},m))};return{get:function(a,c,d,e){b(a,"GET",c,d,e)},post:function(a,e,h,k,m){b(a,"POST",h,k,c.merge({data:d.stringify(e)},m))},ajax:b}});$("fe",encodeURIComponent);l("f9","nt a 1q nu 3v p w fe x".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b){var c=-1===a.indexOf("?")?"?":"&";return b?a+c+"apiKey="+h(b):a},n=function(a){return a.hasOwnProperty("tiny-api-key")?a["tiny-api-key"]:a.hasOwnProperty("tinymce-api-key")?a["tinymce-api-key"]:a["textbox-api-key"]};
return{get:function(h,r,q,s){var t=n(s),u={headers:s};return{execute:function(n){n=c.asRawOrDie(h+".ajax.service.get",r,n);n=d.map(n,function(a){return e.isBoolean(a)?k(a):a});var s=m(f.supplant(q,n),t);return b.nu(function(b){a.get(s,function(a){b(g.value(a))},function(a,c,d){a=e.isObject(d)?d:a;b(g.error(a))},u)})}}},post:function(d,f,h,k){var t=n(k),u={headers:k};return{execute:function(k){var n=c.asRawOrDie(d+".ajax.service.post",f,k);return b.nu(function(b){a.post(m(h,t),n,function(a){b(g.value(a))},
function(a,c,d){a=e.isObject(d)?d:a;b(g.error(a))},u)})}}}}});l("nv",["ir","b","6"],function(c,e,d){return{partition:function(a,b,g,f,h){return!0===h?{known:{},unknown:g}:e.foldl(g,function(e,g){var h=f(g);return a(b,h).fold(function(){return{known:e.known,unknown:e.unknown.concat([g])}},function(a){a=c.wrap(h,a);return{known:d.merge(e.known,a),unknown:e.unknown}})},{known:{},unknown:[]})}}});l("fa",["1q","6","89","nv","t"],function(c,e,d,a,b){var g=function(a,b,g,m,n,p,r){a=a(m,r);return d.mapSync(a,
function(a){a=n(a);c.each(a,function(a,c){b.set(c,a,p)});return e.deepMerge(g,a)})};return{single:function(a,c,e,g,n){return(!0===n?b.none():c.get(g,e)).fold(function(){return a(e,n).map(function(a){return a.map(function(a){c.set(e,a,g);return a})})},function(a){return d.pure(a)})},multiple:function(b,c,e,m,n,p,r){e=a.partition(c.get,p,e,n,r);return 0===e.unknown.length?d.pure(e.known):g(b,c,e.known,e.unknown,m,p,r)}}});l("nx",["nw","w4","w6","c6"],function(c,e,d,a){var b=function(a,b){return e.field(a,
a,c.strict(),b)};return{strict:function(a){return e.field(a,a,c.strict(),e.anyValue())},strictOf:b,strictObjOf:function(a,b){return e.field(a,a,c.strict(),e.obj(b))},strictArrayOf:function(a,c){return b(a,c)},strictArrayOfObj:function(a,b){return e.field(a,a,c.strict(),e.arrOfObj(b))},strictFunction:function(b){return e.field(b,b,c.strict(),e.value(function(b){return a.isFunction(b)?d.value(b):d.error("Not a function")}))},forbid:function(a,b){return e.field(a,a,c.asOption(),e.value(function(c){return d.error("The field: "+
a+" is forbidden. "+b)}))},option:function(a){return e.field(a,a,c.asOption(),e.anyValue())},optionOf:function(a,b){return e.field(a,a,c.asOption(),b)},optionObjOf:function(a,b){return e.field(a,a,c.asOption(),e.obj(b))},optionObjOfOnly:function(a,b){return e.field(a,a,c.asOption(),e.objOnly(b))},defaulted:function(a,b){return e.field(a,a,c.defaulted(b),e.anyValue())},defaultedOf:function(a,b,d){return e.field(a,a,c.defaulted(b),d)},defaultedObjOf:function(a,b,d){return e.field(a,a,c.defaulted(b),
e.obj(d))},field:function(a,b,c,d){return e.field(a,b,c,d)},state:function(a,b){return e.state(a,b)}}});l("ny",["b","7","p"],function(c,e,d){var a=function(a){return"["+a.join(", ")+"]"},b=["iframely","oembed","fallback"],g=function(e,g,k){return c.exists(g,function(a){return c.contains(e,a)})?d.error("Embed response source: "+a(e)+" contains more than one of "+a(b)):d.value(k)};return{iframely:e.constant("iframely"),oembed:e.constant("oembed"),fallback:e.constant("fallback"),identify:function(e){return c.contains(e,
"iframely")?g(e,["oembed","fallback"],"iframely"):c.contains(e,"oembed")?g(e,["iframely","fallback"],"oembed"):c.contains(e,"fallback")?g(e,["iframely","oembed"],"fallback"):d.error("Embed response source: "+a(e)+" did not contain any of: "+a(b))}}});l("fd","nw nx nt a ny 7 p".split(" "),function(c,e,d,a,b,g,f){var h=d.objOf([e.strict("url"),e.strict("maxWidth"),e.defaulted("fresh",!1)]),k=d.objOf([e.strict("status_code"),e.strict("sub_code"),e.strict("msg")]);c=d.objOf([e.strict("html"),e.strictObjOf("rels",
[e.field("source","source",c.strict(),d.valueOf(function(c){return a.isArray(c)?b.identify(c):f.error("Sources was not an array: "+c)}))])]);return{requestOne:g.constant(h),responseFailed:g.constant(k),responseSucceeded:g.constant(c)}});l("fc",["nt","fd","7","p"],function(c,e,d,a){return{failed:function(b){return c.asStruct("EmbedResponse.failure",e.responseFailed(),b).fold(function(b){return a.error({code:d.constant(600),subcode:d.constant(0),msg:d.constant(c.formatError(b))})},function(b){return a.error({code:b.status_code,
subcode:b.sub_code,msg:b.msg})})},success:function(b){return c.asStruct("EmbedResponse.success",e.responseSucceeded(),b).fold(function(b){return a.error({code:d.constant(601),subcode:d.constant(0),msg:d.constant(c.formatError(b))})},function(b){return a.value({recommended:d.constant({html:b.html,source:b.rels().source})})})}}});l("88","89 f8 f9 fa fb fc fd fe".split(" "),function(c,e,d,a,b,g,f,h){return function(k,m,n){var p=e(n),r=d.get("ephox.media.service.one",f.requestOne(),k+"/1/embed?url=${url}&maxWidth=${maxWidth}",
m);return{checkOne:function(d,e,f){var k=b.now();f=a.single(function(a,b){return r.execute({url:h(d),maxWidth:e,fresh:b})},p,e+"&"+d,k,void 0!==f?f:!1);return c.foldSync(f,g.failed,g.success)},dumpCache:p.dump}}});l("8b",["7","59","d3"],function(c,e,d){var a=e.resolve("embed-checking");return{configure:function(b){b.add(b.input(),a,d.removeClass(a));b.add(b.output(),a,d.removeClass(a));b.add(b.history(),a,d.removeClass(a));b.add(b.internal(),a,d.removeClass(a))},embedChecking:c.constant(a)}});l("8c",
["7","7e","1u"],function(c,e,d){var a=function(){return e.translate("link.anchor.top")},b=function(){return e.translate("link.anchor.bottom")},g=function(){var c={};c[a().toLowerCase()]="top";c[b().toLowerCase()]="bottom";return c};return{bookmarkDataAttr:c.constant("data-textbox-bookmark"),bookmarkAnchorDataAttr:c.constant("data-textbox-bookmark-anchor"),topAnchorUrl:a,bottomAnchorUrl:b,top:c.constant("top"),bottom:c.constant("bottom"),reservedUrls:g,isReservedUrl:function(a){return g().hasOwnProperty(a.toLowerCase())},
getReservedUrl:function(c){var d={};d.top=a();d.bottom=b();return d[c.toLowerCase()]}}});l("wc",["2q"],function(c){return{setCss:function(e,d,a){e.dom().styleSheet?e.dom().styleSheet.cssText=d:c.append(e,a)}}});l("10f",[],function(){return{escape:function(c){return c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}}});l("wd",["1q","10f","6r"],function(c,e,d){var a=function(a,c,f){c=new d("url\\(\\s*['\"]?"+e.escape(c)+"(.*?)['\"]?\\s*\\)","g");return a.replace(c,'url("'+f+'$1")')};return{replace:a,replaceMany:function(b,
d){var e=b;c.each(d,function(b,c){e=a(e,c,b)});return e}}});l("nz","1b l 2q 33 wc wd r".split(" "),function(c,e,d,a,b,g,f){return{stylesheets:function(a){a=a.dom().styleSheets;return f.prototype.slice.call(a)},inject:function(f,k,m){var n=e.fromTag("style",m.dom());c.set(n,"type","text/css");f=void 0===k?f:g.replaceMany(f,k);b.setCss(n,f,e.fromText(f,m.dom()));m=a.descendant(m,"head").getOrDie();d.append(m,n)}}});$("we",CSSRule);l("o0",["b","2w","we"],function(c,e,d){var a=e.immutable("selector",
"style","raw"),b=function(e){return c.bind(e.cssRules,function(c){if(c.type===d.IMPORT_RULE)return b(c.styleSheet);if(c.type===d.STYLE_RULE){var e=c.selectorText,g=c.style.cssText;if(void 0===g)throw"WARNING: Browser does not support cssText property";return[a(e,g,c.style)]}return[]})};return{extract:b,extractAll:function(a){return c.bind(a,b)}}});l("o1",[],function(){return function(c,e,d,a){(function(a){"object"===typeof e&&"undefined"!==typeof d?d.exports=a():"function"===typeof c&&c.amd?c([],
a):("undefined"!==typeof window?window:"undefined"!==typeof b?b:"undefined"!==typeof self?self:this).EphoxContactWrapper=a()})(function(){return function k(b,c,d){function e(g,s){if(!c[g]){if(!b[g]){var l="function"==typeof a&&a;if(!s&&l)return l(g,!0);if(f)return f(g,!0);l=Error("Cannot find module '"+g+"'");throw l.code="MODULE_NOT_FOUND",l;}l=c[g]={exports:{}};b[g][0].call(l.exports,function(a){var c=b[g][1][a];return e(c?c:a)},l,l.exports,k,b,c,d)}return c[g].exports}for(var f="function"==typeof a&&
a,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a=function(){var a;a=function(a){var b=a,c,d={a:0,b:0,c:0},e=[];c=function(c,f){var g,k,m,n,p,s;if(c.test(b))for(g=b.match(c),k=0,m=g.length;k<m;k+=1)d[f]+=1,n=g[k],p=b.indexOf(n),s=n.length,e.push({selector:a.substr(p,s),type:f,index:p,length:s}),b=b.replace(n,Array(s+1).join(" "))};(function(){var a=function(a){var c,d,e;if(a.test(b))for(a=b.match(a),c=0,d=a.length;c<d;c+=1)e=a[c],b=b.replace(e,Array(e.length+1).join("A"))};a(/\\[0-9A-Fa-f]{6}\s?/g);
a(/\\[0-9A-Fa-f]{1,5}\s/g);a(/\\./g)})();(function(){var a=/:not\(([^\)]*)\)/g;a.test(b)&&(b=b.replace(a,"     $1 "))})();(function(){var a=/{[^]*/gm,c,d,e;if(a.test(b))for(a=b.match(a),c=0,d=a.length;c<d;c+=1)e=a[c],b=b.replace(e,Array(e.length+1).join(" "))})();c(/(\[[^\]]+\])/g,"b");c(/(#[^\#\s\+>~\.\[:]+)/g,"a");c(/(\.[^\s\+>~\.\[:]+)/g,"b");c(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c");c(/(:[\w-]+\([^\)]*\))/gi,"b");c(/(:[^\s\+>~\.\[:]+)/g,"b");b=b.replace(/[\*\s\+>~]/g,
" ");b=b.replace(/[#\.]/g," ");c(/([^\s\+>~\.\[:]+)/g,"c");e.sort(function(a,b){return a.index-b.index});return{selector:a,specificity:"0,"+d.a.toString()+","+d.b.toString()+","+d.c.toString(),specificityArray:[0,d.a,d.b,d.c],parts:e}};return{calculate:function(b){var c,d,e,f=[];b=b.split(",");d=0;for(e=b.length;d<e;d+=1)c=b[d],0<c.length&&f.push(a(c));return f},compare:function(b,c){var d,e,f;if("string"===typeof b){if(-1!==b.indexOf(","))throw"Invalid CSS selector";d=a(b).specificityArray}else if(Array.isArray(b)){if(4!==
b.filter(function(a){return"number"===typeof a}).length)throw"Invalid specificity array";d=b}else throw"Invalid CSS selector or specificity array";if("string"===typeof c){if(-1!==c.indexOf(","))throw"Invalid CSS selector";e=a(c).specificityArray}else if(Array.isArray(c)){if(4!==c.filter(function(a){return"number"===typeof a}).length)throw"Invalid specificity array";e=c}else throw"Invalid CSS selector or specificity array";for(f=0;4>f;f+=1){if(d[f]<e[f])return-1;if(d[f]>e[f])return 1}return 0}}}();
"undefined"!==typeof c&&(c.calculate=a.calculate,c.compare=a.compare)},{}],2:[function(a,b,c){a=a("specificity");b.exports={boltExport:a}},{specificity:1}]},{},[2])(2)});var b=function(){return this}(),g=b.EphoxContactWrapper,f=g.boltExport;delete g.boltExport;delete b.EphoxContactWrapper;if(void 0===f)throw Error("Module ephox.wrap-specificity.Specificity did not export anything");return f}(void 0,void 0,void 0,void 0)});l("ff","b 2w 1b 2p 4h w nz o0 o1".split(" "),function(c,e,d,a,b,g,f,h,k){var m=
e.immutable("selector","raw"),n=function(a,b){var d={};c.each(a,function(e){if(void 0!==a[e]){var f=b.dom().style;c.contains(f,e)||(d[e]=a[e])}});return d},p=function(e,f){var g=c.bind(f,function(d){var f=b.descendants(e,d.selector());c.each(f,function(b){var c=n(d.raw(),b);a.setAll(b,c)});return f});c.each(g,function(a){d.remove(a,"class")})},r=function(a,b){var d=function(a){return-1!==a.selector().indexOf(",")},e=c.bind(c.filter(a,d),function(a){var b=a.selector().split(",");return c.map(b,function(b){b=
b.trim();return m(b,a.raw())})}),e=c.filter(a,function(a){return!d(a)}).concat(e);e.sort(function(a,b){return k.compare(a.selector(),b.selector())}).reverse();p(b,e)};return{inlineStyles:function(a,b,c){a=f.stylesheets(a);a=h.extractAll(a).map(function(a){var b=a.selector(),b=c.hasOwnProperty(b)?c[b]:b;return m(b,a.raw())});r(a,b)},inlinePrefixedStyles:function(a,b,d){a=f.stylesheets(a);a=h.extractAll(a);a=c.filter(a,function(a){return g.startsWith(a.selector(),d)});r(a,b)}}});l("8d",["ff"],function(c){return{inlineStyles:function(e,
d,a){c.inlineStyles(e,d,a)},inlinePrefixedStyles:function(e,d,a){c.inlinePrefixedStyles(e,d,a)}}});l("5j","87 b 88 89 2c 8a 8b 8c 1b 2o 1c l 2q 21 2s 3m 2b 8d".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,l){return function(w,z,x){var y=f.embedChecking(),A=w.internalevents(),B=w.communication(),C=d(x.url,B.mediatorHeaders(),z.cache),D=w.undo(),F=w.content();w=w.filter();f.configure(w);var E=["img","video","audio"],G=function(a,b){r.after(a,b);s.remove(a)},H=function(b,c){m.add(b,y);var d=
C.checkOne(c,400);a.handle(d,function(a){m.remove(b,y)},function(a){m.remove(b,y);D.save();var d=p.fromHtml(a.recommended().html().trim());e.contains(E,q.name(d))||k.set(d,"data-ephox-embed-iri",c);var f=p.fromTag("div");r.append(f,d);x.inlineStyles&&F.doc().each(function(a){l.inlinePrefixedStyles(a,f,".ephox-summary-card")});F.getSelection().fold(function(){G(b,d)},function(a){G(b,d);var c=u.nextSibling(d).filter(g.isCursorPosition).getOrThunk(function(){var a=p.fromTag("br");r.after(d,a);return a});
u.parent(d).each(function(b){a.collapsed()&&(n.eq(a.startContainer(),b)||n.contains(b,a.startContainer()))&&F.setSelection(c,0,c,0)})})})},L=function(a){var d=a.command(),f=a.data();k.has(f,h.bookmarkAnchorDataAttr())||"insertLink"!==d&&"updateLink"!==d||u.parent(f).each(function(a){var d=t.get(a).replace(c.zeroWidth(),""),g=k.get(f,"href");if(d===g||"http://"+d===g)H(f,g);else{var d=u.children(a),h=e.find(e.reverse(d),function(a){return"br"===q.name(a)&&b.documentPositionPreceding(f.dom(),a.dom())});
a=e.find(d,function(a){return"br"===q.name(a)&&b.documentPositionPreceding(a.dom(),f.dom())});d=void 0!==h?d.slice(e.indexOf(d,h)+1,d.length):d;a=void 0!==a?d.slice(0,e.indexOf(d,a)):d;a=e.foldl(a,function(a,b){return a+t.get(b)},"");a!==g&&"http://"+a!==g||H(f,g)}})};A.events.internal.bind(L);return{destroy:function(){A.events.internal.unbind(L)},state:function(){return{cache:C.dumpCache()}}}}});l("8f",["3y"],function(c){return{handle:function(e,d){return c.bind(e,"click",d)}}});l("8g",["7","7e"],
function(c,e){return{editor:function(d,a){var b=c.curry(e.translate,a?"aria.label.fullscreen":"aria.label.editor");return d.fold(c.identity,b)}}});l("6b",["6","7","t"],function(c,e,d){return function(a){var b=function(){return c.merge(null===a.project.apiKey?{}:{headers:{"textbox-api-key":a.project.apiKey}},{xhrFields:{withCredentials:!0}})},g=function(a){var b=a+(-1===a.indexOf("?")?"?":"&")+"url=";return function(a){return d.some(b+encodeURIComponent(a))}},g=void 0===a.imageEdit.proxy?d.none:g(a.imageEdit.proxy);
return{headers:b,mediatorHeaders:function(){var a=b().headers;return void 0===a?{}:a},proxy:g,destroy:e.noop}}});l("bv",["2j"],function(c){return{atob:function(e){return c.getOrDie("atob")(e)},requestAnimationFrame:function(e){c.getOrDie("requestAnimationFrame")(e)}}});l("ie",["6e","3w"],function(c,e){return{adaptable:function(c,a){var b=null,g=null;return{throttle:function(){g=arguments;null===b&&(b=e(function(){c.apply(null,g);g=b=null},a))}}},first:function(c,a){var b=null;return{throttle:function(){var g=
arguments;null===b&&(b=e(function(){c.apply(null,g);g=b=null},a))}}},last:function(d,a){var b=null;return{throttle:function(){var g=arguments;null!==b&&c(b);b=e(function(){d.apply(null,g);g=b=null},a)}}}}});l("ae",["ie"],function(c){return c.adaptable});l("13m","bv 7 ae 2b b4 2u 2v 36".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,b){var c=f(b,500);return function(){g(c)}},m=function(b,c){var d=new h.MutationObserver(c);d.observe(a.owner(b).dom(),{attributes:!0,subtree:!0,childList:!0,attributeFilter:["style",
"class"]});return function(){d.disconnect()}},n=void 0!==h.MutationObserver&&null!==h.MutationObserver?m:k;return{onShow:function(a,f){if(b.isVisible(a))return c.requestAnimationFrame(f),e.noop;var g=d(function(){b.isVisible(a)&&(h(),c.requestAnimationFrame(f))},100),h=n(a,g.throttle);return h}}});l("15u",["b","t","1c"],function(c,e,d){var a=[],b=function(b){return c.findIndex(a,function(a){return d.eq(a.element,b)})};return{begin:function(c,d){if(-1===b(c)){var e=d();a.push({element:c,unbind:e})}},
query:function(c){c=b(c);return-1===c?e.none():e.some(a[c])},end:function(c){c=b(c);if(-1!==c){var d=a[c];a.splice(c,1);d.unbind()}}}});l("138","b bv 7 t 1c 3y l 5a 13m b4 2t 15u 3w 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=function(a){return{element:a,handlers:[],lastWidth:n.get(a),lastHeight:h.get(a)}},t=[],u=function(a){return c.findIndex(t,function(c){return b.eq(c.element,a)})},l=function(a){var b=n.get(a.element),e=h.get(a.element);if(b!==a.lastWidth||e!==a.lastHeight)a.lastWidth=
b,a.lastHeight=e,c.each(a.handlers,d.apply)},w=function(a){var b=a.element;m.isVisible(b)?l(a):p.begin(b,function(){return k.onShow(b,function(){p.end(b);l(a)})})},z=!1,x=function(){z=!1;c.each(t,w)},y=function(){z||(z=!0,e.requestAnimationFrame(x))},A=a.none(),B=function(){A.each(function(b){b.unbind();A=a.none()})};return{bind:function(d,e){var h=c.find(t,function(a){return b.eq(a.element,d)});void 0===h&&(h=s(d),t.push(h));h.handlers.push(e);A.isNone()&&(A=a.some(g.bind(f.fromDom(q),"resize",y)));
r(function(){-1!==u(h.element)&&w(h)},100)},unbind:function(a,b){p.end(a);var d=u(a);if(-1!==d){var e=c.indexOf(t[d].handlers,b);-1!==e&&(t[d].handlers.splice(e,1),0===t[d].handlers.length&&t.splice(d,1),0===t.length&&B())}}}});l("10g","b c 4d 3v 7 p 58 4a 1b 2o 1c 3y l 30 2g 4j 138 q 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,l,w){var z=e.detect();return function(e){var y="true"===k.get(e,"contenteditable");k.set(e,"contenteditable","true");var A=p.bind(e,"keydown",function(a){Q.trigger.keydown(a)}),
B=p.bind(e,"keyup",function(a){Q.trigger.keyup(a)}),C=p.bind(e,"keypress",function(a){Q.trigger.keypress(a)}),D=p.bind(e,"mousedown",function(a){Q.trigger.mousedown(a)}),F=p.bind(e,"mouseout",function(a){Q.trigger.mouseout(a)}),E=p.bind(e,"mouseup",function(a){Q.trigger.mouseup(a)}),G=p.bind(e,"contextmenu",function(a){Q.trigger.contextmenu(a)}),H=p.bind(e,"cut",function(a){Q.trigger.cut(a)}),L=p.bind(e,"copy",function(a){Q.trigger.copy(a)}),I=p.bind(e,"paste",function(a){Q.trigger.paste(a)}),J=p.bind(r.fromDom(l),
"selectionchange",function(a){Q.trigger.selectionchange(a)}),K=function(){Q.trigger.paint()},N=p.capture(e,"load",K);u.bind(e,K);var M=z.browser.isFirefox()?"focus":"focusin",O=p.bind(e,M,function(a){Q.trigger.focus(a)}),S=p.bind(e,"focusout",function(a){Q.trigger.focusOut(a)}),P=p.bind(e,"dblclick",function(a){Q.trigger.dblclick(a)}),U=function(a){return n.eq(e,a)},M={loaded:a.pure(g.error("no iframe in inline mode"))},Q=h.create({keydown:f(["original"]),keyup:f(["original"]),keypress:f(["original"]),
mousedown:f(["original"]),mouseup:f(["original"]),mouseout:f(["original"]),contextmenu:f(["original"]),cut:f(["original"]),copy:f(["original"]),paste:f(["original"]),focus:f(["original"]),dblclick:f(["original"]),focusOut:f(["original"]),selectionchange:f(["original"]),paint:f([])});return{win:b.constant(w),doc:b.constant(r.fromDom(l)),body:b.constant(e),get:function(){return s.get(e)},set:function(a){s.set(e,a)},focus:function(){z.browser.isIE()?e.dom().setActive(!0):q.focus(e)},focused:function(){return l.activeElement===
e.dom()},blur:function(){e.dom().blur()},destroy:function(){y||k.remove(e,"contenteditable");c.each([A,B,C,D,E,F,G,H,L,I,O,S,P,J,N],function(a){a.unbind()});u.unbind(e,K)},events:Q.registry,futures:M,background:b.noop,foreground:b.noop,hasRange:function(a){return t.closest(a.startContainer(),U).isSome()&&t.closest(a.endContainer(),U).isSome()},isActive:function(){return m.has(e,d.active())}}}});l("139","c 83 ez 9s 84 7 fh 4o 1c l 30 2q 21 33 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=
g.constant(!1),u=c.detect(),l=u.browser.isIE()||u.browser.isSpartan()?2:5,w=h.generate([{above:["element"]},{below:["element"]}]),z=function(a,c,d){return function(c){return b.bounds(a,c).fold(t,d)}},x=function(a,b){return z(a,b,function(a){return b>a.top+a.height-l})},y=function(a,b){return z(a,b,function(a){return b<a.top+l})};return function(c,h,t){var l=g.curry(k.eq,h),v=function(a){var b=f.freefallRtl(h).element();return q.ancestor(b,"table",l).filter(x(c,a)).map(w.above)},z=function(a,d){a.kill();
b.set(c,d);t()};return function(b){var g=b.y();v(g).orThunk(function(){var a=f.freefallLtr(h).element();return q.ancestor(a,"table",l).filter(y(c,g)).map(w.below)}).fold(function(){if("html"===r.name(b.target())){var f=b.x(),g=b.y();e.find(c,f,g).each(function(c){var e=function(a){return q.closest(a,'[contenteditable="false"]',l).isSome()},f=c.start().fold(e,e,e),e=c.finish().fold(e,e,e);(f||e)&&u.browser.isIE()||n.focus(h);if(u.browser.isIE()&&1===s.childNodesCount(h)&&(f=s.children(h)[0],"p"===
r.name(f)&&0===s.childNodesCount(f))){p.append(f,m.fromTag("br"));z(b,d.write(a.on(f,0),a.on(f,0)));return}z(b,c)})}},function(c){var e=m.fromHtml("<p><br /></p>");c.fold(function(a){p.after(a,e)},function(a){p.before(a,e)});z(b,d.write(a.on(e,0),a.on(e,0)))})}}});l("13f",["ez","84","k2"],function(c,e,d){return{clearAll:function(a){e.clearAll(a)},get:function(a){return e.get(a).map(function(a){return d(a.start(),a.soffset(),a.finish(),a.foffset())})},set:function(a,b){e.setExact(a,b.startContainer(),
b.startOffset(),b.endContainer(),b.endOffset())},setExact:function(a,b,c,d,h){e.setExact(a,b,c,d,h)},setRelative:function(a,b,d){b=c.write(b,d);e.set(a,b)},replace:function(a,b){e.replace(a,b)}}});l("13a",["13f","58","4a","6e","3w"],function(c,e,d,a,b){return function(g){var f=null,h=function(){f=null;c.get(g.win()).each(function(a){a.collapsed()&&g.focused()&&k.trigger.loiter(a.startContainer(),a.startOffset())})},k=d.create({loiter:e(["node","offset"])});return{reset:function(){null!==f&&(a(f),
f=null);f=b(h,1E3)},destroy:function(){null!==f&&(a(f),f=null)},events:k.registry}}});l("13b","7 t k bw 58 4a 2n 1c 21 4j m".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a,b){var e=c.curry(h.eq,f.body()),g=b.join(", ");return d.findMap(a,function(a){return m.ancestor(a,function(a){return n.is(a,g)},e)}).isSome()};return function(c,d){var m=e.none(),n=a.tap(function(){n.control.block();var a=c();a.filter(function(a){return f.inBody(a.startContainer())}).each(function(a){var b=function(){u.trigger.nodeChanged(a.startContainer(),
a.startOffset(),m.map(function(a){return a.startContainer()}))};m.fold(b,function(c){var e=h.eq,f=a.startContainer(),g=a.endContainer(),m=c.startContainer(),n=c.endContainer(),r=c.startOffset()!==a.startOffset();c=c.endOffset()!==a.endOffset();e(m,f)&&e(n,g)&&!(!k.isText(f)&&r||!k.isText(g)&&c)||!1!==p([a.startContainer()],d)||b()})});m=a;n.control.unblock()}),u=g.create({nodeChanged:b(["node","offset","prev"])});return{update:function(){n.instance()},clear:function(){m=e.none()},destroy:function(){m=
e.none();n.control.block()},events:u.registry}}});l("13c",["7","1c","l","30"],function(c,e,d,a){var b=function(b,d){return{toEditor:b,toOld:c.curry(a.focus,d),isSet:function(){return a.active().exists(function(a){return e.eq(a,d)})}}},g=function(a,e,g,m){m=m.dom().activeElement;return a()?{toEditor:e,toOld:c.noop,isSet:c.constant(!0)}:void 0===m||null===m?{toEditor:g,toOld:c.noop,isSet:c.constant(!1)}:b(g,d.fromDom(m))};return{build:g,toEditor:function(a,b,c,d){g(a,b,c,d).toEditor()}}});l("13d",["t"],
function(c){return function(){var e=c.none();return{get:function(){return e},restore:function(c){e.each(c)},update:function(c){e=c.or(e)},clear:function(){e=c.none()}}}});l("13e",["9s","13f","6x","33"],function(c,e,d,a){var b=function(a){return d.closest(a.startContainer(),'[contenteditable="false"]')&&d.closest(a.endContainer(),'[contenteditable="false"]')};return{focus:function(d,f,h){f=f().filter(b);f.each(function(b){a.closest(b.endContainer(),'[contenteditable="false"]').each(function(a){e.setRelative(d.win(),
c.after(a),c.after(a))})});d.focus();f.each(function(a){h(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})}}});l("10h","c 139 13a 13b 13c 13d 13e 13f 7 fh 58 4a 4b 3n 3y l o q 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,l,w){var z=c.detect();return function(c,y){var A=function(){return K().orThunk(D.get)},B=s.bind(c.body(),"click",e(c.win(),c.body(),k.noop)),C=a(A,y),D=g(),F=function(){C.update();J()},E=function(){D.restore(function(a){N(a.startContainer(),a.startOffset(),
a.endContainer(),a.endOffset())})};C.events.nodeChanged.bind(function(a){W.trigger.nodeChanged(a.node(),a.offset(),a.prev());W.trigger.uiStale()});c.events.keyup.bind(function(a){W.trigger.keyup(a.original());F();G.reset();W.trigger.interaction()});c.events.mouseout.bind(function(a){J()});c.events.mouseup.bind(function(a){W.trigger.mouseup(a.original());F();G.reset();W.trigger.interaction()});var G=d(c);G.events.loiter.bind(function(a){W.trigger.loiter(a.node(),a.offset())});var H=function(){K().isNone()?
E():J()},L=function(){c.isActive()&&(H(),f.focus(c,A,O))},I=function(){W.trigger.domChanged()},J=function(){var a=K();D.update(a)},K=function(){return h.get(w).filter(c.hasRange)},N=function(a,b,c,d){try{h.setExact(w,a,b,c,d)}catch(e){u.log("Skipping restoring invalid cursor position")}},M=function(a){P(function(b){c.isActive()&&a();F()},b.build(c.focused,H,L,t.fromDom(l)))},O=function(a,b,c,d){M(function(){N(a,b,c,d)})},S=function(a,b){var c=h.get(w);E();var d=a(b);b.toOld();c.each(function(a){N(a.startContainer(),
a.startOffset(),a.endContainer(),a.endOffset());z.browser.isSpartan()&&(b.isSet()||b.toOld())});return d},P=function(a,b){var c=a(b);b.toOld();return c},U=function(a){var d=b.build(c.focused,H,L,t.fromDom(l));return(K().isSome()?P:S)(a,d)},Q=function(a){return function(){var b=arguments;return U(function(c){c.toEditor();return a(b)})}}(function(a){l.execCommand.apply(l,a);J()}),V=function(a,b){return q(a,b)},W=p.create({nodeChanged:n(["node","offset","prev"]),loiter:n(["node","offset"]),uiStale:n([]),
domChanged:n([]),interaction:n([]),keyup:n(["original"]),mouseup:n(["original"]),keydown:r(["original"],c.events.keydown),keypress:r(["original"],c.events.keypress),mousedown:r(["original"],c.events.mousedown),contextmenu:r(["original"],c.events.contextmenu),cut:r(["original"],c.events.cut),copy:r(["original"],c.events.copy),paste:r(["original"],c.events.paste),focus:r(["original"],c.events.focus),focusOut:r(["original"],c.events.focusOut),dblclick:r(["original"],c.events.dblclick),selectionchange:n(["original"]),
paint:r([],c.events.paint)});c.events.selectionchange.bind(function(a){K().each(function(){W.trigger.selectionchange(a.original())})});return{win:c.win,doc:c.doc,body:c.body,canvas:c.body,getContent:c.get,setContent:c.set,resetContent:function(a){c.set(a);D.clear();C.clear();a=m.freefallLtr(c.body());O(a.element(),a.offset(),a.element(),a.offset());I()},blur:c.blur,focus:function(){b.toEditor(c.focused,H,L,t.fromDom(l))},uiChanged:function(){U(function(){W.trigger.uiStale()})},domChanged:I,clearSelection:function(){h.clearAll(w)},
getSelection:A,setSelection:O,setRelativeSelection:function(a,b){M(function(){h.setRelative(w,a,b)})},backupSelection:J,replaceSelection:function(a){K().fold(function(){E();K().each(function(){h.replace(w,a);F()})},function(b){h.replace(w,a);F()})},execCommand:Q,destroy:function(){c.destroy();G.destroy();B.unbind();C.destroy()},events:W.registry,futures:c.futures,background:c.background,foreground:c.foreground,translateScreen:V,translateLocation:V}}});l("10i",["b","2w","1c","51"],function(c,e,d,a){var b=
e.immutable("doc","href");return function(){var e=[],f=function(a,b){return function(c){return d.eq(a,c.doc())&&b===c.href()}};return{addLinkIfMissing:function(d,k){c.find(e,f(d,k))||(e.push(b(d,k)),a.addStylesheet(k,d))}}}});l("10j",["b","r"],function(c,e){return function(){var d=null,a=[],b=function(){return null!==d},g=function(){c.each(a,function(a){f(a)})},f=function(a){setTimeout(function(){a.apply(null,d)},0)};return{get:function(c){b()?f(c):a.push(c)},set:function(){d=e.prototype.slice.call(arguments);
g();a=[]},isSet:b}}});l("wf","b 8e 10g 10h 10i 10j 7 1b 2p l 2g 21 2s 2b 6r".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=b();return function(b,p,s){var l=m.fromTag("div");e.presentation(l);k.set(l,"display","none");var x=n.get(b);(function(a){var d=q.owner(b);c.each(a,function(a){t.addLinkIfMissing(d,a)})})(p);p=g();var y=d(b),A=a(y,s);p.set(A);return{element:function(){return b},onCanvas:function(a){a(A.canvas())},initial:f.constant(x),placeholder:function(){return l},tabindex:function(a){h.set(b,
"tabindex",a)},destroy:function(){r.remove(l);A.destroy()},loaded:p.get,isInline:f.constant(!0)}}});l("13g",["7"],function(c){return function(e,d){var a=e.doc();return{execCommand:function(b){var e=arguments,f=b.toLowerCase(),h=c.die("This should not be in hare."),h={fontsize:h,forecolor:h,fontname:h,bgcolor:h,inserthtml:h,blockquote:h};(void 0!==h[f]?h[f]:function(){a.dom().execCommand.apply(a.dom(),e)})();d.update()}}}});l("13h",["13e","k2","13f","7","6x"],function(c,e,d,a,b){return function(b){var f=
function(){return d.get(b.win())},h=function(a,c,f,h){a=e(a,c,f,h);d.set(b.win(),a)};return{clearSelection:function(){d.clearAll(b.win())},getSelection:f,replaceSelection:function(a){d.replace(b.win(),a)},setSelection:h,setRelativeSelection:function(a,c){d.setRelative(b.win(),a,c)},restore:a.noop,backup:a.noop,nativeCall:a.apply,focus:function(){c.focus(b,f,h)},destroy:a.noop,clear:a.noop}}});l("13i","k2 13f 7 t 3y 30 o q".split(" "),function(c,e,d,a,b,g,f,h){var k=function(){f.log("The previous selection could not be restored. Defaulting to the current selection.")};
return function(f,n){var p=a.none(),r=b.bind(n,"blur",function(a){s()}),q=function(){p=a.none()},s=function(){e.get(f.win()).fold(d.noop,function(b){p=a.some(b)})},t=function(b,c){try{c(f.win(),b),p=a.some(b)}catch(d){k()}},u=function(a){t(a,e.set)},l=function(){p.each(u)},w=function(a){var b=h.activeElement;a=a();null!==b&&void 0!==b&&b!==h.activeElement&&void 0!==b.focus&&b.focus();return a};return{clearSelection:function(){g.hasFocus(n)&&e.clearAll(f.win())},getSelection:function(){return g.hasFocus(n)?
e.get(f.win()):p},replaceSelection:function(a){g.hasFocus(n)||l();e.replace(f.win(),a)},setSelection:function(a,b,e,f){w(function(){var h=c(a,b,e,f);g.hasFocus(n)?u(h):t(h,d.noop)})},setRelativeSelection:function(a,b){w(function(){q();try{e.setRelative(f.win(),a,b)}catch(c){k()}s()})},restore:l,backup:s,nativeCall:function(a){return w(function(){g.hasFocus(n)||l();return a()})},focus:function(){if(h.activeElement!==n.dom()){var a=p;f.focus();a.each(u)}else e.get(f.win()).fold(l,d.noop)},destroy:function(){r.unbind()},
clear:q}}});l("10k","c 139 13a 13b 13g 13h 13i ae fh 58 4a 4b 3y 3o 2a".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return function(t,u,l){var w=c.detect(),z=w.browser.isIE()||w.browser.isSpartan()?f(t,u):g(t),x=r.bind(t.doc(),"click",e(t.win(),t.body(),z.backup)),y=function(){return z.getSelection()},A=a(y,l),B=b(t,A);(w.browser.isChrome()||w.browser.isSafari())&&B.execCommand("defaultParagraphSeparator",!1,"p");A.events.nodeChanged.bind(function(a){H.trigger.nodeChanged(a.node(),a.offset(),
a.prev());H.trigger.uiStale()});t.events.keyup.bind(function(a){z.backup();A.update(a)});var C=h(A.update,300);t.events.mouseup.bind(function(a){z.backup();C.throttle(a)});var D=d(t);D.events.loiter.bind(function(a){H.trigger.loiter(a.node(),a.offset())});l=function(){D.reset();H.trigger.interaction()};t.events.keyup.bind(l);t.events.mouseup.bind(l);var F=function(){H.trigger.domChanged()},E=function(a,b,c,d){z.setSelection(a,b,c,d);A.update()},G=function(a,b){return q.absolute(u).translate(a,b)},
H=n.create({nodeChanged:m(["node","offset","prev"]),loiter:m(["node","offset"]),uiStale:m([]),domChanged:m([]),interaction:m([]),keydown:p(["original"],t.events.keydown),keyup:p(["original"],t.events.keyup),keypress:p(["original"],t.events.keypress),mousedown:p(["original"],t.events.mousedown),mouseup:p(["original"],t.events.mouseup),contextmenu:p(["original"],t.events.contextmenu),cut:p(["original"],t.events.cut),copy:p(["original"],t.events.copy),paste:p(["original"],t.events.paste),focus:p(["original"],
t.events.focus),focusOut:p(["original"],t.events.focusOut),dblclick:p(["original"],t.events.dblclick),selectionchange:p(["original"],t.events.selectionchange),paint:p([],t.events.paint)});return{win:t.win,doc:t.doc,body:t.body,canvas:t.doc,getContent:t.get,setContent:t.set,resetContent:function(a){t.set(a);z.clear();A.clear();a=k.freefallLtr(t.body());E(a.element(),a.offset(),a.element(),a.offset());F()},blur:t.blur,focus:function(){z.focus()},uiChanged:function(){H.trigger.uiStale()},domChanged:F,
clearSelection:function(){z.clearSelection()},getSelection:y,setSelection:E,setRelativeSelection:function(a,b){z.setRelativeSelection(a,b);A.update()},backupSelection:function(){z.backup()},replaceSelection:function(a){z.replaceSelection(a);A.update()},execCommand:function(){var a=arguments;z.nativeCall(function(){B.execCommand.apply(null,a);H.trigger.uiStale()})},destroy:function(){z.destroy();t.destroy();D.destroy();x.unbind();A.destroy()},events:H.registry,futures:t.futures,background:t.background,
foreground:t.foreground,translateScreen:G,translateLocation:function(a,b){var c=s.get(t.doc());return G(a,b).translate(-c.left(),-c.top())}}}});l("16t",["7","ae","t"],function(c,e,d){return function(a){return{background:c.noop,foreground:c.noop,focus:c.noop,keydown:c.noop,mousedown:d.some,mouseup:d.some,selectionchange:function(a){return e(a,300).throttle}}}});l("17c",["7","2a"],function(c,e){return{unbound:function(){return{unbind:c.noop}},saveScroll:function(c,a){var b=e.get(c);a();var g=e.get(c);
b.top()===g.top()&&b.left()===g.left()||c.dom().defaultView.scrollTo(b.left(),b.top())}}});l("16u","17c 7 t l 2b q 36".split(" "),function(c,e,d,a,b,g,f){return function(h,k){return{background:e.noop,foreground:e.noop,focus:function(d,e,h){c.saveScroll(a.fromDom(g),function(){c.saveScroll(b.owner(h),function(){k.browser.isSpartan()&&f.getSelection().removeAllRanges();h.dom().focus()})})},keydown:e.noop,mousedown:d.some,mouseup:d.some,selectionchange:e.constant(e.noop)}}});l("16v",["17c","7","t","21",
"2b"],function(c,e,d,a,b){return function(c){var f=function(b){return"body"===a.name(b.target())||"html"===a.name(b.target())?d.none():d.some(b)};return{background:function(a,c,d){b.owner(c).dom().defaultView.focus()},foreground:function(a,b,c){void 0!==a.focus&&a.focus()},focus:e.noop,keydown:function(a){void 0!==a.focus&&a.focus()},mousedown:function(a){return f(a)},mouseup:function(a){return f(a)},selectionchange:e.constant(e.noop)}}});l("15v",["c","16t","16u","16v"],function(c,e,d,a){var b=c.detect(),
g=b.deviceType.isiOS()?a:b.deviceType.isAndroid()?e:d;return{get:function(a){return g(a,b)}}});l("15w",["t","l"],function(c,e){var d=function(a){a=a.dom();try{var b=a.contentWindow?a.contentWindow.document:a.contentDocument;return void 0!==b&&null!==b?c.some(e.fromDom(b)):c.none()}catch(d){return console.log("Error reading iframe: ",a),console.log("Error was: "+d),c.none()}};return{doc:function(a){return d(a).fold(function(){return a},function(a){return a})}}});l("if","2m 3v p 3y 6e 3w".split(" "),
function(c,e,d,a,b,g){var f=function(c,e,f,n){return c(function(c){var h=a.bind(e,f,function(a){b(q);h.unbind();c(d.value(a))}),q=g(function(){h.unbind();c(d.error("Event "+f+" did not fire within "+n+"ms"))},n)})};return{cWaitFor:function(a,b,d){return f(c.nu,a,b,d)},waitFor:function(a,b,c){return f(e.nu,a,b,c)}}});l("13j","b c 4d 15v 7 15w 58 4a 4e 3y if 2g 33 q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=e.detect();return function(e,u){var l=e.dom().contentWindow,w=g.doc(e),z=r.descendant(w,
"body").getOrDie();k.add(z,[d.base(),d.active()].concat(u.autoresize?[d.autoresize()]:[]));var x=s.browser.isFirefox(),y=h.create({keydown:f(["original"]),keyup:f(["original"]),keypress:f(["original"]),mousedown:f(["original"]),mouseup:f(["original"]),contextmenu:f(["original"]),cut:f(["original"]),copy:f(["original"]),paste:f(["original"]),focus:f(["original"]),dblclick:f(["original"]),focusOut:f(["original"]),paint:f([]),selectionchange:f(["original"])}),A=a.get(y),B={loaded:n.cWaitFor(e,"load",
1E3)},C=m.bind(w,"keydown",function(a){A.keydown(l);y.trigger.keydown(a)}),D=m.bind(w,"keyup",function(a){y.trigger.keyup(a)}),F=m.bind(w,"keypress",function(a){y.trigger.keypress(a)}),E=m.bind(w,"mousedown",function(a){A.mousedown(a).fold(function(){a.kill()},y.trigger.mousedown)}),G=m.bind(w,"mouseup",function(a){A.mouseup(a).fold(function(){a.kill()},y.trigger.mouseup)}),H=m.bind(w,"contextmenu",function(a){y.trigger.contextmenu(a)}),L=m.bind(w,"cut",function(a){y.trigger.cut(a)}),I=m.bind(w,"copy",
function(a){y.trigger.copy(a)}),J=m.bind(w,"paste",function(a){y.trigger.paste(a)}),K=m.bind(w,x?"focus":"focusin",function(a){y.trigger.focus(a)}),N=m.bind(w,"focusout",function(a){y.trigger.focusOut(a)}),M=m.bind(w,"dblclick",function(a){y.trigger.dblclick(a)}),O=A.selectionchange(function(a){y.trigger.mouseup(a)}),S=m.bind(w,"selectionchange",function(a){O(a);y.trigger.selectionchange(a)}),P=m.bind(w,"touchstart",function(a){y.trigger.mousedown(a)}),U=m.bind(w,"touchend",function(a){y.trigger.mouseup(a);
Y()}),Q=function(){y.trigger.paint()},V=m.capture(w,"load",Q),W=function(){l.addEventListener("resize",Q,!1);return{unbind:function(){l.removeEventListener&&l.removeEventListener("resize",Q,!1)}}}(),Y=function(){A.foreground(l,e,z)};return{win:b.constant(l),doc:b.constant(w),body:b.constant(z),get:function(){return p.get(z)},set:function(a){p.set(z,a)},focus:function(){A.focus(l,e,z)},focused:function(){return q.activeElement===e.dom()},blur:function(){z.dom().blur()},destroy:function(){c.each([C,
D,F,E,G,H,L,I,J,K,N,S,M,P,U,V,W],function(a){a.unbind()})},events:y.registry,futures:B,background:function(){A.background(l,e,z)},foreground:Y}}});l("13k",["6u"],function(c){return{resolve:c.create("ephox-hare").resolve}});l("13l",["15w","2n"],function(c,e){return{write:function(d,a){if(!e.inBody(d))throw"Internal error: attempted to write to an iframe that is not in the DOM";var b=c.doc(d).dom();b.open("text/html","replace");b.writeln(a);b.close()}}});l("10l","b 13j 13k 10j 7 t 13l 1b 2n 2o 3y l 2s 13m".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=function(a){var d=a.base.fold(b.constant(""),function(a){return'<base href="'+a+'" />'}),e=a.editorStyles.concat(a.stylesheets),e=c.map(e,function(a){return'<link rel="stylesheet" type="text/css" href="'+a+'" />'});a=0===a.documentStyles.length?"":'<style type="text/css">'+a.documentStyles+"</style>";return"<!doctype html><html><head>"+d+e.join("")+a+'</head><body contenteditable="true" spellcheck="false"></body></html>'};return function(c){var u=p.fromTag("iframe");
m.add(u,d.resolve("content-iframe"));var l=g.none(),w=a(),z=n.bind(u,"load",function(){z.unbind();f.write(u,s(c));var a=q.onShow(u,function(){l.each(b.apply);l=g.none();k.inBody(u)&&w.set(e(u,c))});l=g.some(a)});return{element:function(){return u},tabindex:function(a){h.set(u,"tabindex",a)},destroy:function(){r.remove(u);z.unbind();l.each(b.apply)},loaded:w.get}}});l("wg","10k 10l 10j 7 5a 3w".split(" "),function(c,e,d,a,b,g){return function(f,h){var k=e(f),m=d(),n=a.noop;k.loaded(function(d){var e=
c(d,k.element(),h);d=function(a){a=b.get(e.body());var c=b.get(k.element());a!==c&&b.set(k.element(),a)};f.autoresize&&(e.events.uiStale.bind(a.curry(d,"uiStale")),e.events.domChanged.bind(a.curry(d,"domChanged")),e.events.paint.bind(a.curry(d,"paint")));g(function(){m.set(e);n=e.destroy},0)});return{element:k.element,onCanvas:function(a){m.get(function(b){a(b.canvas())})},initial:a.constant(""),placeholder:k.element,tabindex:k.tabindex,destroy:function(){n();k.destroy()},loaded:m.get,isInline:a.constant(!1)}}});
l("o2","c wf wg 7 t bw 58 4a 3n".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(d){var e=b.none(),m=g.tap(function(a,b,c){y.trigger.nodeChanged(a,b,c)});d.loaded(function(a){var d=function(){try{return null!==a.win().window&&void 0!==a.win().window}catch(b){return!1}};if(d()){e=b.some(a);if(c.detect().browser.isFirefox()){try{a.execCommand("enableObjectResizing",!1,!1)}catch(f){}try{a.execCommand("enableInlineTableEditing",!1,!1)}catch(g){}}a.events.nodeChanged.bind(function(a){m.instance(a.node(),
a.offset(),a.prev())});a.events.loiter.bind(function(a){y.trigger.loiter(a.node(),a.offset())});a.events.uiStale.bind(function(){y.trigger.uiStale()});a.events.domChanged.bind(function(){y.trigger.domChanged()});a.events.interaction.bind(function(){y.trigger.interaction()});a.events.keyup.bind(function(a){y.trigger.keyup(a.original())});a.events.keydown.bind(function(a){y.trigger.keydown(a.original())});a.events.keypress.bind(function(a){y.trigger.keypress(a.original())});a.events.mousedown.bind(function(a){y.trigger.mousedown(a.original())});
a.events.mouseup.bind(function(a){y.trigger.mouseup(a.original())});a.events.contextmenu.bind(function(a){y.trigger.contextmenu(a.original())});a.events.cut.bind(function(a){y.trigger.cut(a.original())});a.events.copy.bind(function(a){y.trigger.copy(a.original())});a.events.paste.bind(function(a){y.trigger.paste(a.original())});a.events.focus.bind(function(a){y.trigger.focus(a.original())});a.events.focusOut.bind(function(a){y.trigger.focusOut(a.original())});a.events.dblclick.bind(function(a){y.trigger.dblclick(a.original())});
a.events.selectionchange.bind(function(a){y.trigger.selectionchange(a.original())});a.futures.loaded.get(function(){d()&&y.trigger.loaded()});a.events.paint.bind(function(){y.trigger.paint()});a.resetContent(t);d()&&y.trigger.ready(a);a.uiChanged()}else a.destroy()});var q=function(){return e.map(function(a){return a.win()})},s=function(){return e.map(function(a){return a.doc()})},t=d.initial(),u=function(){e.each(function(a){a.focus()})},l=function(){return e.bind(function(a){return a.getSelection()})},
w=function(a,b,c,d){e.each(function(e){e.setSelection(a,b,c,d)})},z=function(a,b){e.each(function(c){c.setRelativeSelection(a,b)})},x=function(){var a=arguments;e.each(function(b){b.execCommand.apply(null,a)})},y=h.create({nodeChanged:f(["node","offset","prev"]),loiter:f(["node","offset"]),uiStale:f([]),domChanged:f([]),interaction:f([]),keydown:f(["original"]),keyup:f(["original"]),keypress:f(["original"]),mousedown:f(["original"]),mouseup:f(["original"]),contextmenu:f(["original"]),cut:f(["original"]),
copy:f(["original"]),paste:f(["original"]),focus:f(["original"]),focusOut:f(["original"]),dblclick:f(["original"]),selectionchange:f(["original"]),paint:f([]),ready:f(["api"]),loaded:f([])});return{element:d.element,tabindex:d.tabindex,onCanvas:d.onCanvas,win:q,doc:s,body:function(){return e.map(function(a){return a.body()})},getContent:function(){return e.fold(function(){return t},function(a){return a.getContent()})},setContent:function(a){e.fold(function(){t=a},function(b){b.setContent(a)})},resetContent:function(a){e.fold(function(){t=
a},function(b){b.resetContent(a)})},blur:function(){e.each(function(a){a.blur()})},focus:u,uiChanged:function(){e.each(function(a){a.uiChanged()})},domChanged:function(){e.each(function(a){a.domChanged()})},clearSelection:function(){e.each(function(a){a.clearSelection()})},getSelection:l,setSelection:w,setRelativeSelection:z,backupSelection:function(){e.each(function(a){a.backupSelection()})},replaceSelection:function(a){e.each(function(b){b.replaceSelection(a)})},execCommand:x,lockdown:function(a){var b=
m.control.isBlocked();m.control.block();a();b||m.control.unblock()},destroy:function(){d.destroy();e=b.none()},events:y.registry,background:function(){e.fold(a.identity,function(a){a.background()})},foreground:function(){e.fold(a.identity,function(a){a.foreground()})},on:function(b){return q().bind(function(c){return s().map(function(d){return b({win:a.constant(c),doc:a.constant(d),execCommand:x,getSelection:l,setSelection:w,setRelativeSelection:z,focus:u})})})},translateScreen:function(a,b){return e.fold(function(){return k(a,
b)},function(c){return c.translateScreen(a,b)})},translateLocation:function(a,b){return e.fold(function(){return k(a,b)},function(c){return c.translateLocation(a,b)})},placeholder:d.placeholder,isInline:d.isInline}};return{frame:function(a,b){var c=d(a,b);return m(c)},detached:function(a,b,c){a=e(a,b,c);return m(a)}}});l("jb","a 1q 84 7 56 2p l 2g 2q 2s 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a,b){if(void 0!==a&&c.isFunction(a.setData))try{return e.each(b,function(b,c){a.setData(c,
b())}),!0}catch(d){return!1}else return!1},r=function(a,b,c){var e=f.fromTag("div",a.doc().dom());g.setAll(e,{position:"absolute",top:"-1000px"});b=b["text/html"]();h.set(e,b);k.append(a.body(),e);var p=a.getSelection();d.selectElementContents(a.win(),e);n(function(){m.remove(e);p.each(function(b){a.setSelection(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())});n(c,0)},0)},q=function(a){return function(b,d,e){var f=b.raw();if(!c.isString(f.type)||"copy"!==f.type.toLowerCase()&&
"cut"!==f.type.toLowerCase())throw"Can only set the clipboard with a cut or copy event";if(!c.isFunction(d["text/html"]))throw"Must provide at least text/html data function when setting clipboard contents";p(f.clipboardData,d)?(b.kill(),n(e,0)):a(d,e)}},s=b.exactly(["doc","win","body","getSelection","setSelection"]);return{register:function(b){s(b);b=a.curry(r,b);return{setClipboard:q(b)}},textMime:a.constant("text/plain"),htmlMime:a.constant("text/html")}});l("o3",["21","cf"],function(c,e){var d=
e(c.isComment,"comment");return{get:function(a){return d.get(a)},getOption:function(a){return d.getOption(a)},set:function(a,b){d.set(a,b)}}});l("ja","b 7 s t k jb o3 21 w".split(" "),function(c,e,d,a,b,g,f,h,k){var m={clipboardType:e.constant("x-textbox/html"),findClipboardTags:function(d){d=b.cat(c.map(d,function(b){if(h.isComment(b)){var c=f.get(b);if(k.contains(c,"x-textbox/html"))return a.some(b)}return a.none()}));return 0===d.length?a.none():a.some(d)}};return{intraFlag:e.constant(m),buildClipboardContents:function(a,
b){var c={};c["x-textbox/html"]=e.constant("true");c[g.textMime()]=d.cached(a);c[g.htmlMime()]=d.cached(function(){return"\x3c!-- x-textbox/html --\x3e"+b()});return c},ignoreSelectors:e.constant([".ephox-sloth-bin"])}});l("fi","o2 7 ja 59 4e 2p 2q 33 o".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b){return{editable:e.constant(a),connect:b}},n=function(a,b){var e=c.frame(b,d.ignoreSelectors());e.events.ready.bind(function(b){b=b.api().body();a.updateUi(b)});return m(e,function(a){f.append(a,
e.element())})},p=function(n,p){0!==p.stylesheets.length&&k.log("You have attempted to declare the following stylesheets for use in textbox.io: ["+p.stylesheets.join(", ")+"]. User stylesheets are not used in inline editing mode and have been ignored.");0!==p.documentStyles.length&&k.log('You have attempted to declare the following document styles for use in textbox.io: "'+p.documentStyles+'". Document styles are not used in inline editing mode and have been ignored.');p.base.fold(e.noop,function(a){k.log('You have attempted to declare the following content base URL for use in textbox.io: "'+
a+'". Content base URL is not used in inline editing mode and has been ignored.')});var s=c.detached(p.inline,p.editorStyles,d.ignoreSelectors());return m(s,function(c){f.append(c,s.placeholder());c=h.ancestor(c,".ephox-polish-editor-container").getOr(c);g.set(s.placeholder(),"display","none");b.add(c,[a.resolve("inline-editor-container"),a.resolve("layer-editor")])})};return{build:function(a,b){return(void 0!==b.inline?p:n)(a,b)}}});l("fj",["t","2a"],function(c,e){return function(d){var a=c.none(),
b=c.none(),g=function(){a.each(function(a){d.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())});b.each(function(a){d.win().each(function(b){b.scrollTo(a.left(),a.top())})})},f=function(){a=c.none();b=c.none()};return{restore:function(){g();f()},save:function(){a=d.getSelection();b=d.doc().map(e.get)},get:function(){return a},clear:f,attempt:function(b){a=b.or(a)}}}});l("o4","87 b c l 2q 2b".split(" "),function(c,e,d,a,b,g){var f=d.detect().browser.isFirefox(),h=function(d){e.each(d,
function(d){g.nextSibling(d).isNone()&&b.after(d,a.fromText(c.zeroWidth()))})};return{configure:function(a){f&&a.addSelector(a.input(),"a",h)}}});l("fk","b 8a 7 fh o4 59 fo d3 ee 7q 1b 2o l 2q 2s 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){var u=g.resolve("content-eph-wrapper"),l=g.resolve("content-eph-extra"),w=g.resolve("content-eph-general"),z=function(a){c.each(a,function(a){p.remove(a,k.styleSpan());n.remove(a,k.overrideSpan());n.hasNone(a)?s.unwrap(a):m.isTransient(a)&&s.remove(a)})},
x=function(a){c.each(a,function(a){p.remove(a,k.quasiBlock())})},y=function(a){c.each(a,function(a){var b=n.get(a,"style");n.set(a,"style",b.replace(/"/g,"'"))})},A=function(b){return e.isCursorPosition(b)||f.isBlock(b)||e.isCursorPosition(a.freefallLtr(b).element())},B=function(a){c.each(a,function(a){if(0===c.filter(t.children(a),A).length){var b=r.fromTag("br");q.append(a,b)}})};return{configure:function(a){a.add(a.internal(),u,h.unwrap);a.add(a.internal(),l,h.remove);a.add(a.internal(),w,h.remove);
a.add(a.internal(),k.quasiBlock(),x);a.add(a.output(),u,h.unwrap);a.add(a.output(),l,h.remove);a.add(a.output(),w,h.remove);a.add(a.output(),k.styleSpan(),z);a.add(a.output(),k.quasiBlock(),x);a.addExcludedContext(["."+u,"."+l,"."+w,"."+k.styleSpan()]);a.addSelector(a.input(),"[style]",y);a.addSelector(a.input(),"td,th",B);a.addSelector(a.paste(),"[style]",y);a.addSelector(a.paste(),"td,th",B);a.addSelector(a.output(),"strong,b,em,i,u,s,strike,del,sup,sub",h.removeIfEmpty);b.configure(a)},markerWrapper:d.constant(u),
markerExtra:d.constant(l),markerGeneral:d.constant(w)}});l("13n",["6u"],function(c){return{resolve:c.create("ephox-cereal").resolve}});l("10m","13n b 7 1b 2o 4e 33 e9".split(" "),function(c,e,d,a,b,g,f,h){var k=c.resolve("start-cursor"),m=c.resolve("finish-cursor"),n="data-"+c.resolve("start-offset"),p="data-"+c.resolve("finish-offset"),r=function(b){a.remove(b,n);a.remove(b,p);g.remove(b,[k,m]);""===a.get(b,"class")&&a.remove(b,"class")},q=function(b,c){var d=a.get(b,c);return h(d,10)};return{setInfo:function(c,
d,f,g){e.each([c,d],r);b.add(c,k);b.add(d,m);a.set(c,n,f);a.set(d,p,g)},clearInfo:r,findStart:function(a){return f.descendant(a,"."+k).map(function(a){return{token:d.constant(a),offset:d.constant(q(a,n))}})},findFinish:function(a){return f.descendant(a,"."+m).map(function(a){return{token:d.constant(a),offset:d.constant(q(a,p))}})}}});l("13o",["2w"],function(c){return c.immutable("token","remove","extra")});l("10n",["10m","13o","7"],function(c,e,d){return{use:function(a,b){return e(b,d.noop,[])},extract:function(a){return{remove:d.curry(c.clearInfo,
a),element:d.constant(a)}}}});l("10o","13o 13n 7 t 2o 2p l 2q 2s 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=e.resolve("pre-cursor-token"),p=e.resolve("post-cursor-token"),r=e.resolve("first-cursor-token"),q=function(){var a=f.fromTag("span");g.set(a,"display","none");return a},s=function(a){var b=d.curry(k.remove,a);return c(a,b,[a])},t=function(c){return b.has(c,n)?m.nextSibling(c):b.has(c,p)?m.prevSibling(c):b.has(c,r)?m.parent(c):a.none()};return{pre:function(a,c){var d=q();h.before(c,
d);b.add(d,n);return s(d)},post:function(a,c){var d=q();h.after(c,d);b.add(d,p);return s(d)},first:function(a,c){var d=q();h.prepend(a,d);b.add(d,r);return s(d)},extract:function(a){return t(a).map(function(b){return{remove:d.curry(k.remove,a),element:d.constant(b)}})}}});l("13p",["2w"],function(c){var e=c.immutable("element","offset");c=c.immutable("startContainer","startOffset","endContainer","endOffset");return{point:e,range:c}});l("13q","13n 7 2o l 2q 4h 2b".split(" "),function(c,e,d,a,b,g,f){var h=
c.resolve("text-node-wrapper"),k=function(a){return d.has(a,h)};return{create:function(){var b=a.fromTag("span");d.add(b,h);return b},findIn:function(a){return g.children(a,"."+h)},isWrap:k,inWrap:function(a){return f.parent(a).fold(e.constant(!1),function(a){return k(a)})},child:function(c){return f.child(c,0).fold(function(){var d=a.fromText("");b.append(c,d);return d},e.identity)}}});l("13r","13q b l 2q 2s 2b".split(" "),function(c,e,d,a,b,g){var f=function(f){f=c.findIn(f);e.each(f,function(c){0===
g.children(c).length&&a.before(c,d.fromText(""));b.unwrap(c)})},h=function(a){g.parent(a).each(b.unwrap)};return{unwrap:function(a){(c.inWrap(a)?h:f)(a)}}});l("10p","10m 13p 13q 13r 10n 10o 7 1c e5 21 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a,c,d,e){return h.eq(a,c)?g.first(a,c):m.isElement(c)&&!e(c)?b.use(a,c):d(a,c)};return{extractFrom:function(b,c){b.remove();c.remove();var g=function(b){var c=d.isWrap(b)?n.unwrap:a.unwrap,e=d.isWrap(b)?d.child(b):b;return{target:f.constant(e),
unwrap:f.curry(c,b)}},h=g(b.element()),k=g(c.element()),m=e.range(h.target(),b.offset(),k.target(),c.offset());return{remove:function(){h.unwrap();k.unwrap()},getSelection:function(){return m}}},same:function(a,b,d,e,f){a=p(a,b,g.pre,f);c.setInfo(a.token(),a.token(),d,e);return[a]},diff:function(a,b,d,e,f,h){var m=k.after(b,d,e,f),n=m?g.pre:g.post;b=p(a,b,m?g.post:g.pre,h);a=p(a,e,n,h);c.setInfo(b.token(),a.token(),d,f);return[b,a]}}});l("13s","13q b 7 2q 21 2b".split(" "),function(c,e,d,a,b,g){var f=
function(a){return g.parent(a).fold(d.constant(!1),function(a){return c.isWrap(a)})},h=function(d){return e.foldr(d,function(d,e){if(b.isText(e)&&!f(e)){var g=c.create();a.wrap(e,g);return[g].concat(d)}return d},[])};return{wrap:function(a){var b=g.children(a),b=0<b.length?b:[a];return c.isWrap(a)?[]:h(b)}}});l("10q",["10m","13r","13s","b","7"],function(c,e,d,a,b){var g=function(a){a.remove()};return{combine:function(f,h){var k=a.bind(f,d.wrap),m=a.bind(h,function(a){return a.extra()});return{extra:b.constant(m),
wrappers:b.constant(k),remove:function(){a.each(h,function(a){c.clearInfo(a.token())});a.each(f,e.unwrap);a.each(h,g)}}}}});l("wh","10m 10n 10o 10p 10q 7 1c".split(" "),function(c,e,d,a,b,g,f){var h=function(c,d,e,f,g,h){var k=[d,f];c=a.diff(c,d,e,f,g,h);return b.combine(k,c)},k=function(c,d,e,f,g,h){f=[d];c=a.same(c,d,e,g,h);return b.combine(f,c)},m=function(a,b){return b(a).map(function(a){var b=d.extract(a.token()).getOrThunk(function(){return e.extract(a.token())});return{remove:b.remove,offset:a.offset,
element:b.element}})},n=function(a){return m(a,c.findStart).bind(function(b){return m(a,c.findFinish).map(function(a){return{startMarker:g.constant(b),finishMarker:g.constant(a)}})})};return{insertAt:function(a,b,c,d,e,g){return(f.eq(b,d)?k:h)(a,b,c,d,e,g)},extract:function(b){return n(b).map(function(b){return a.extractFrom(b.startMarker(),b.finishMarker())})}}});l("o5",["wh"],function(c){return{insert:function(e,d,a){e=c.insertAt(e,d.startContainer(),d.startOffset(),d.endContainer(),d.endOffset(),
a);return{extra:e.extra,wrappers:e.wrappers,remove:e.remove}},extract:function(e){return c.extract(e).map(function(c){return{remove:c.remove,getSelection:c.getSelection}})}}});l("bt",["1s","a","b","1q","1a"],function(c,e,d,a,b){var g=function(c){var d=b.create(null);a.each(c,function(a,b){d[b]=a});return d},f=g({img:!0,br:!0,hr:!0,input:!0}),h=g({script:!0,style:!0,noscript:!0}),k=/[<>&\u00A0]/g,m={"<":"&lt;",">":"&gt;","&":"&amp;","\u00a0":"&nbsp;"},n=/["<>&]/g,p={'"':"&quot;","<":"&lt;",">":"&gt;",
"&":"&amp;"},r=function(a,b,c){return a.replace(b,function(a){return c[a]||a})},q=function(a,b){for(var c="<"+a,d="",e=0;e<b.length;e++){var f=b[e];f.specified&&"_moz_dirty"!==f.name&&(d+=" "+f.name+'="'+r(f.value,n,p)+'"')}return c+d},s=function(a){var b="";d.each(a,function(a){b+=u(a)});return b},t=function(a){var b="";d.each(a,function(a){b+=a.textContent});return b},u=function(a){var b=a.nodeType;if(b===c.ELEMENT){var b=a.nodeName.toLowerCase(),d=a.childNodes;a=a.attributes;0===d.length&&f[b]?
b=q(b,a)+" />":(d=h[b]?t(d):s(d),b=q(b,a)+">"+d+"</"+b+">");return b}if(b===c.TEXT)return r(a.textContent,k,m);if(b==c.COMMENT)return"\x3c!--"+a.data+"--\x3e";throw"unsupported node type "+a.nodeType;};return{writeNode:function(a){if(!e.isObject(a))throw"sugarNode parameter must be an object";return u(a.dom())},writeChildren:function(a){if(!e.isObject(a))throw"sugarNode parameter must be an object";return s(a.dom().childNodes)}}});l("fl","o5 b ez 9s 8a 7 fk 1b 2o o6 2g 69 2b bt 1u".split(" "),function(c,
e,d,a,b,g,f,h,k,m,n,p,r,q,s){var t=function(a,b){e.each(a,function(a){k.add(a,b)})},u=function(a){var b=function(){return r.parent(a).map(function(a){return"false"===h.get(a,"contenteditable")}).getOr(!1)};return"false"===h.get(a,"contenteditable")||b()};return{extract:function(a){return c.extract(a)},getSelection:function(c){var e=c.getSelection();c=e.startContainer();var f=e.startOffset(),g=e.endContainer(),e=e.endOffset(),h=b.getEnd(c),k=b.getEnd(g);return 0<=f&&f<=h&&0<=e&&e<=k?d.write(a.on(c,
f),a.on(g,e)):d.write(a.before(c),a.before(c))},remove:function(a){a.remove()},serialise:function(a,b){return m.path(a,b.startContainer()).bind(function(d){return m.path(a,b.endContainer()).bind(function(e){var h=p.deep(a);return m.follow(h,d).bind(function(a){return m.follow(h,e).map(function(d){d={startContainer:g.constant(a),startOffset:g.constant(b.startOffset()),endContainer:g.constant(d),endOffset:g.constant(b.endOffset())};d=c.insert(h,d,u);t(d.wrappers(),f.markerWrapper());t(d.extra(),f.markerExtra());
return q.writeChildren(h)})})})})}}});l("13t",["2w"],function(c){return c.immutable("word","left","right")});l("13u",["b","t","13t"],function(c,e,d){var a=["'","\u2018","\u2019"],b=c.bind(a,function(a){return c.map(["twas"],function(b){return a+b})}),g=function(a){var b=a.word();return d(b.substring(1),e.some(b.charAt(0)),a.right())},f=function(b){return c.contains(a,b)},h=function(a){var d=a.word(),e=c.exists(b,function(a){return-1<d.indexOf(a)})?2:1,h=d.substring(0,e);return c.forall(h,f)&&!f(d.charAt(e))?
g(a):a},k=function(a){var b=a.word();2<=b.length&&f(b.charAt(b.length-1))&&!f(b.charAt(b.length-2))&&(b=a.word(),a=d(b.substring(0,b.length-1),a.left(),e.some(b.charAt(b.length-1))));return h(a)};return{scope:k,text:function(a){a=d(a,e.none(),e.none());return k(a).word()}}});l("10s","b t 6q i5 13t 13u 6r".split(" "),function(c,e,d,a,b,g,f){return{words:function(f){var k=d.unsafetoken(d.wordchar()+"+"),k=a.findall(f,k),m=f.length;return c.map(k,function(a){var c=a.start(),d=a.finish();a=f.substring(c,
d);c=0<c?e.some(f.charAt(c-1)):e.none();d=d<m?e.some(f.charAt(d)):e.none();a=b(a,c,d);return g.scope(a)})}}});l("wi",["10r","10s"],function(c,e){return{identify:function(c){return e.words(c)},isWord:function(d,a){return!c.hasBreak(a)}}});l("o7",["6s","wi"],function(c,e){var d=c();return{identify:function(a){return e.identify(a)},isWord:function(a){return e.isWord(d,a)}}});l("fm","c t fg o7 ef 21 2b".split(" "),function(c,e,d,a,b,g,f){var h=c.detect(),k=function(a,b){return g.isText(a)?e.some(d.point(a,
b)):0===f.children(a).length?e.none():f.child(a,b).bind(function(a){return k(a,0)})},m=function(a,c,d){a.on(function(a){b.expandWord(a,c,d)})},n=function(b,c){var d=b.dom().createRange();d.setStart(c.startContainer().dom(),c.startOffset());d.setEnd(c.endContainer().dom(),c.endOffset());return a.isWord(d.cloneContents().textContent)};return{correct:function(a){a.getSelection().each(function(b){a.doc().each(function(c){n(c,b)&&k(b.startContainer(),b.startOffset()).each(function(c){(!b.collapsed()||
a.isInline()&&h.browser.isIE())&&m(a,c.element(),c.offset())})})})},expand:function(a){a.on(b.expand);a.backupSelection()}}});l("67",["87","bt","6r"],function(c,e,d){return{output:function(a,b){a.filterDom(a.output(),b);var g=e.writeChildren(b),f=new d(c.zeroWidth(),"g");return g.replace(f,"")}}});$("o9",Image);l("o8","58 4a 1b 3y l o9".split(" "),function(c,e,d,a,b,g){return function(){var a=e.create({fail:c(["url","image"]),success:c(["url","image"]),start:c(["url"])}),h=function(a,b,c){var d=a.dom();
d.addEventListener(b,c,!1);return{unbind:function(){d.removeEventListener(b,c,!1)}}},k=function(b){var c=d.get(b,"src"),e=h(b,"load",function(){e.unbind();g.unbind();(!0===b.dom().complete?a.trigger.success:a.trigger.fail)(c,b)}),g=h(b,"error",function(){e.unbind();g.unbind();a.trigger.fail(c,b)})};return{go:function(c){a.trigger.start(c);var d=new g;d.src=c;k(b.fromDom(d))},monitor:k,events:a.registry}}});l("hf",["b","3v","7","p"],function(c,e,d,a){var b=function(a,b){return a.bind(function(a){return a.fold(function(){return e.pure(a)},
function(a){return b(a)})})},g=function(b){return e.pure(a.value(b))},f=function(b){return e.nu(function(c){b.then(function(b){c(a.value(b))},function(b){c(a.error(b))})})},h=function(b){return b.map(a.value)};return{fromPromise:f,error:function(b){return e.pure(a.error(b))},map:function(a,b){return a.map(function(a){return a.map(b)})},bind:b,pure:g,fromChain:function(a){return function(d){return c.foldl(a,function(a,c){return b(a,function(a){return c(a)})},g(d))}},fromFuture:h,pToFR:function(a){return d.compose(f,
a)},fToFR:function(a){return d.compose(h,a)},effect:function(a){return function(b){b.each(function(){a()});return b}}}});l("fn","o8 3v p hf 1b o9".split(" "),function(c,e,d,a,b,g){var f=function(a){return e.nu(function(b){if(!0===a.dom().complete)b(d.value(a));else{var e=c();h(e,b);e.monitor(a)}})},h=function(a,b){a.events.success.bind(function(a){b(d.value(a.image()))});a.events.fail.bind(function(a){b(d.error("Unable to download image "+a.url()))})};return{load:function(a){return e.nu(function(b){var d=
c();h(d,b);d.go(a)})},loadIfNeeded:function(c){return!0===c.dom().complete||void 0===b.get(c,"src")?a.pure(c):f(c)}}});l("8h","f6 87 c 9s 84 3v 7 t fg fh bw 86 3k fi fj fk fl fm 67 fn cw 58 4a 4b fo 1b 2o 1c 3y l 3l 2q 21 4j 2s 69 4h m b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,l,w,z,x,y,A,B,C,D,F,E,G,H,L,I,J,K,N,M,O,S,P,U){var Q=d.detect();return function(d,W,Y,X,Z){t.configure(d);var ea=h.none(),aa={inline:Y.inline,base:h.from(Y.base),editorStyles:[Y.css+"/content.css"],stylesheets:Y.stylesheets,
documentStyles:Y.documentStyles,autoresize:Y.autoresize};X=q.build(X,aa);var R=X.editable();null!==Y.tabindex&&R.tabindex(Y.tabindex);void 0!==Z.raw&&R.setContent(Z.raw);R.events.ready.bind(function(){if(void 0!==Z.raw){var a=R.getContent();Z.raw===a&&Z.marked!==Z.raw&&ja(Z.marked,!1)}a=R.body().getOrDie();ea=h.some(G.bind(a,"dblclick",function(a){l.correct(R)}))});R.events.ready.bind(function(a){x.addClasses(a.api().body())});var ga=function(){return R.getSelection().bind(function(a){var b=R.body().getOrDie("content should not return a selection if body is not yet available");
return u.serialise(b,a)}).getOr(R.getContent())},ja=function(a,b){R.body().each(function(c){R.setContent(a);u.extract(c).fold(function(){var a=m.freefallLtr(c);R.setSelection(a.element(),a.offset(),a.element(),a.offset())},function(a){var b=u.getSelection(a);u.remove(a);R.setRelativeSelection(b.start(),b.finish())});if(!Q.deviceType.isiOS()){var d=O.descendants(c,"img");b?g.mapM(d,z.loadIfNeeded).get(function(){$()}):$()}})},fa=A.create({nodeChanged:y(["node","offset","prev"]),undoChanged:y([]),loiter:B(["node",
"offset"],R.events.loiter),uiStale:B([],R.events.uiStale),domChanged:B([],R.events.domChanged),interaction:B([],R.events.interaction),keydown:B(["original"],R.events.keydown),keyup:B(["original"],R.events.keyup),keypress:B(["original"],R.events.keypress),mousedown:B(["original"],R.events.mousedown),mouseup:B(["original"],R.events.mouseup),contextmenu:B(["original"],R.events.contextmenu),copy:B(["original"],R.events.copy),paste:B(["original"],R.events.paste),focus:B(["original"],R.events.focus),focusOut:B(["original"],
R.events.focusOut),dblclick:B(["original"],R.events.dblclick),selectionchange:B(["original"],R.events.selectionchange),paint:B([],R.events.paint),ready:B(["api"],R.events.ready),loaded:B([],R.events.loaded),background:y([]),foreground:y([]),scrollToCursor:y([]),scrollToElement:y(["element"]),toEditing:y([]),toReading:y([])});R.events.nodeChanged.bind(function(a){fa.trigger.nodeChanged(a.node(),a.offset(),a.prev());a.prev().fold(ia,function(b){K.ancestor(b,C.isBlock).each(function(b){K.ancestor(a.node(),
C.isBlock).each(function(a){E.eq(a,b)||ia()})})})});var ha=n.tap(function(){fa.trigger.undoChanged()}),ia=function(){ha.instance()},ba=function(a){ha.instance();var b=ha.control.isBlocked();ha.control.block();a=a();b||ha.control.unblock();ha.instance();return a},$=function(){fa.trigger.scrollToCursor()},da=n.tap(function(){R.focus()});Y=function(a){return function(){var b=arguments;U.parent(R.element()).fold(function(){a.apply(null,b)},function(c){var d=c.dom().scrollTop;a.apply(null,b);c.dom().scrollTop=
d})}}(R.execCommand);var ca=function(a){return J.isText(a)&&(Q.browser.isSafari()||0===P.get(a).length)||J.isElement(a)&&!C.isEmptyTag(a)&&!C.isBlock(a)},T=function(a){var b=H.fromText(e.zeroWidth());I.after(a,b);return b},ka=function(a,b){var c=U.children(a);if(b>=c.length)return k.point(a,b);var d=c[b];return J.isElement(d)&&!C.isEmptyTag(d)?ka(c[b],0):k.point(a,b)},ma=function(b){b=ca(b)?T(b):b;R.setRelativeSelection(a.after(b),a.after(b));R.getSelection().each(function(a){a=ka(a.startContainer(),
a.startOffset());R.setSelection(a.element(),a.offset(),a.element(),a.offset())})},na=function(){return la.getSelection().bind(function(a){if(a.collapsed())return h.none();a=b.cloneFragment(la.win().getOrDie(),a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset());return h.some(a)})},oa=function(a){return w.output(d,a)},la={onCanvas:R.onCanvas,element:R.element,isInline:R.isInline,win:R.win,doc:R.doc,body:R.body,getContent:R.getContent,setContent:R.setContent,resetContent:R.resetContent,
focus:function(){da.instance()},blur:R.blur,uiChanged:R.uiChanged,domChanged:R.domChanged,undoChanged:ia,clearSelection:R.clearSelection,getSelection:R.getSelection,getSelectionStart:function(){return R.getSelection().map(function(a){return a.startContainer()})},setSelection:R.setSelection,setRelativeSelection:R.setRelativeSelection,backupSelection:R.backupSelection,replaceSelection:R.replaceSelection,replaceElement:function(a,b){var c=la.getSelection().filter(function(b){var c=f.curry(E.eq,a);return K.closest(b.startContainer(),
c)||K.closest(b.endContainer(),c)}).isSome();I.before(a,b);N.remove(a);c&&ma(b);la.domChanged();ia()},findTagAtCursor:function(a){var b=function(a,b,c){a=U.child(a,b).getOr(a);return K.closest(a,function(a){return S.is(a,c)&&d.includeContext(a)})};return la.getSelection().bind(function(c){return b(c.startContainer(),c.startOffset(),a).orThunk(function(){return b(c.endContainer(),c.endOffset(),a)})})},getFilteredAttributes:function(a){a=M.shallow(a);var b=H.fromTag("div");I.append(b,a);d.filterDom(d.output(),
b);return D.clone(a)},execCommand:Y,insertHtmlAtCursor:function(a){var b=L.fromHtml(a);ba(function(){p.insertAtCursorWithInstructions(c.doNotMerge,la,b).each(function(a){var c=a.element();U.parent(c).each(function(a){ma(c);W.input(b)})})})},on:R.on,destroy:function(){ea.each(function(a){a.unbind()});R.destroy()},events:fa.registry,state:function(){return{raw:R.getContent(),marked:ga()}},serialize:ga,deserialize:function(a){ja(a,!0)},background:function(){R.background();fa.trigger.background()},foreground:function(){R.foreground();
fa.trigger.foreground()},isRoot:function(a){return R.body().fold(f.constant(!1),function(b){return E.eq(b,a)})},selectWord:function(){l.expand(R)},cursor:function(){return s(R)},activate:function(){da.control.unblock()},deactivate:function(){da.control.block()},cursorIntoView:$,elementIntoView:function(a){fa.trigger.scrollToElement(a)},placeholder:R.placeholder,connect:X.connect,translateScreen:R.translateScreen,translateLocation:R.translateLocation,runOrOnLoaded:function(a){R.body().fold(function(){R.events.ready.bind(function(b){a(b.api().body())})},
function(b){a(b)})},getSelectedText:function(){return na().map(function(a){a=U.children(a);return r.toText(a)})},getSelectedHtml:function(){return na().map(function(a){var b=H.fromTag("div");I.append(b,a);return oa(b)})},getFilteredContents:oa,toEditing:function(){fa.trigger.toEditing()},toReading:function(){fa.trigger.toReading()},undoOperation:ba,markAsEphemeral:function(a){F.add(a,t.markerGeneral())},hideInlineSelection:function(){R.isInline()&&(R.backupSelection(),R.clearSelection())}};return la}});
l("fr",["7"],function(c){return{get:c.constant({onShortcut:function(c,d){c.bind(d)}})}});l("oa",["h0","59","1b"],function(c,e,d){var a="data-"+e.resolve("context-type");return{nu:function(b,e,f){b=c.item(b,f.value(),f.text());d.set(b,a,e);d.setAll(b,f.attrs());return b},type:function(b){return d.get(b,a)}}});l("ob","7g b 8e h0 l2 t oa 4e".split(" "),function(c,e,d,a,b,g,f,h){return{derive:function(k,m,n){m=e.map(m,function(a){var b=n[a],m=b.primary(),s=b.submenus();return e.map(m,function(b){var e=
f.nu(k,a,b),m=s.hasOwnProperty(b.value())&&void 0!==s[b.value()]?[c.resolve("menu-more")]:[],n=void 0!==s[b.value()];d.menuItem(e,g.some(b.text()),g.some(n));h.add(e,m);return e})});m=e.filter(m,function(a){return 0<a.length});return e.flatten(b.intersperseThunk(m,function(){return[a.separator(k)]}))}}});l("oc","b 8e h0 t oa 7e 3c".split(" "),function(c,e,d,a,b,g,f){return{derive:function(h,k,m){return c.bind(k,function(k){var p=m[k].secondary();return c.map(p,function(m){var p=d.submenu(h,m.value(),
[]);e.menu(p,g.get(m.textkey()));m=c.map(m.items(),function(c){var d=b.nu(h,k,c);e.menuItem(d,a.some(c.text()),a.none());return d});f.append(p,m);return p})})}}});l("fs","b 1q 8e h0 6 t oa ob oc 7e 59 4n 2o 3c 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return function(t){var u=p({}),l=p([]),w={},z=g.none();return{structure:u.get,all:l.get,main:function(){return l.get()[0]},update:function(f){c.each(l.get(),function(a){s.remove(a)});z=g.some(f);var p=e.keys(w);e.each(w,function(a){a.assign(z)});
var A=e.tupleMap(w,function(a,b){return{k:b,v:a.situation(f)}}),B=h.derive(t,p,A),C=k.derive(t,p,A),p=c.foldr(p,function(a,c){return b.merge(a,A[c].submenus())},{});if(0===B.length)l.set([]);else{var D=a.mainmenu(t,n.resolve("main-context-menu"),[]);q.append(D,B);d.menu(D,m.translate("aria.context.menu.generic"));B=[D].concat(C);c.each(B,function(a){r.add(a,n.resolve("layer-menus"))});l.set(B);u.set(p)}},handle:function(a){var b=f.type(a),b=w[b];void 0!==b&&b.handle(a)},register:function(a,b){w[a]=
b}}}});l("od",["l6"],function(c){return{mainmenu:function(e,d,a,b,g,f){return c.main(e,d,a,b,g,f)},submenu:function(e,d,a,b,g){return c.submenu(e,d,a,b,g)}}});l("ft","od 7 gt 78 of oe og 3n q".split(" "),function(c,e,d,a,b,g,f,h,k){return{makeshift:function(c,k,p,r,q,s,t,u,l){return{recalculate:e.noop,isAnchored:e.constant(!1),place:function(e){var z=k.uiOrigin(),x=c.isInline()?h(p,r):g.translate(z,p,r),y=a(x.left(),x.top(),q,s),x=t.isRtl()?b.allRtl():b.all(),z=d.box(y,z);e=e.panel();f.simple(z,e,
u,x,void 0===l?{}:l)}}},mainmenu:function(a,b,d,e){return c.mainmenu(a.uiContainer,a.bounds,b,d,e)},submenu:function(a,b,d){return c.submenu(a.uiContainer,a.bounds,b,d)}}});l("8i","ao ap b fp c 52 7 t fq fr fs 7l ft b2 fu 2w 3n 2p 3o 21 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,u,l,w,z,x){var y=t.immutable("target","x","y"),A=b.detect().browser,B=function(b,t,B,E,G,H){B=t.doc().getOrDie();var L=n(B),I=u(0,0);B=m.get();var J=k.fromUnsafe(t),K=c.menuSystem(G.uiContainer,f.constant("context"),
e.menu({focusActive:!0})),N=c.popup(K.sandbox,G.bounds,b,[],q.editorContainer());H=g.div();var M=N.initMenu(H),O=function(a){L.update(a.target());var b=V(),c=[K.sandbox()];if(0<b.all.length){var d=a.x(),e=a.y();I=u(d,e);M.setContent(b.main);U(M);M.open();K.open(c,b.main);return h.some(a)}return h.none()},S=function(a){return t.getSelection().bind(function(a){return function(){return p.selectionContains(a).fold(function(){return z.isText(a.startContainer())?x.parent(a.startContainer()):h.some(a.startContainer())},
function(a){return h.some(a)})}().map(function(a){var b=w.viewport(a),b=t.translateScreen(b.left(),b.top());return y(a,b.left(),b.top())})})},P=function(a){var b;b=a.original();b=A.isIE()&&10>=A.version.major?u(b.raw().clientX,b.raw().clientY):u(b.x(),b.y());b=t.translateScreen(b.left(),b.top());return y(a.original().target(),b.left(),b.top())},U=function(a){var c;c=s(14,10);c=r.makeshift(t,G,I.left(),I.top(),0,0,b.uiDirection(),c);G.show(a,c)},Q=function(){M.close();var a=V();d.each(a.all,function(a){l.set(a,
"display","none")});J.end()};M.events.close.bind(function(){K.close()});var V=function(){var a=L.all();return{all:a,main:a[0],submenus:a.slice(1)}};t.events.contextmenu.bind(function(a){var b=P(a);O(b).orThunk(function(){return S().bind(O)}).each(function(b){a.original().raw().preventDefault()})});B.onShortcut(E.events.context,function(){S().each(O)});K.events.open.bind(function(){var a=L.structure(),b=V();K.update(a);N.registerMenus(b.submenus);U(M);K.setActiveMenu(b.main)});K.events.itemAction.bind(function(a){L.handle(a.item())});
K.events.itemHover.bind(function(a){J.begin()});K.events.reveal.bind(function(b){a.expanded(b.trigger());N.expandMenu(b.menu(),b.trigger(),M);U(M)});K.events.collapse.bind(function(b){N.hideMenu(b.menu());b.item().each(a.collapsed)});K.events.itemAction.bind(Q);K.events.escaped.bind(function(){Q();t.focus()});t.events.mousedown.bind(Q);return{register:L.register,destroy:function(){M.destroy();K.destroy()}}};return function(a,b,c,e,g){var h=[],k={register:function(a,b){h=h.concat([{name:a,feature:b}])},
destroy:f.noop};b.events.ready.bind(function(f){k=B(a,b,c,e,g);d.each(h,function(a){k.register(a.name,a.feature)})});return{register:function(a,b){k.register(a,b)},destroy:function(){k.destroy()}}}});l("8j",["b","7","l","2q","2s"],function(c,e,d,a,b){var g=function(c){b.empty(c);a.append(c,d.fromTag("br"))};return function(a,b,d,m){var n=function(d){b.get().fold(e.noop,function(b){d.stopper();m.transaction(function(){c.each(b,g)});a.domChanged();a.toEditing()},e.noop)},p=d.editor();p.events.del.bind(n);
p.events.backspace.bind(n);p.on();return{destroy:function(){p.off()}}}});l("fv","c 7 t 1b l 2q 21 2s 2b 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=c.detect().browser,p=function(a){var c=b.fromHtml("<p><br></p>");g.append(a,c);return d.some(c)},r=function(a){var b=k.children(a);return 0===b.length?p(a):1===b.length&&"br"===f.name(b[0])?(h.empty(a),p(a)):d.none()},q=function(b){return 1===b.dom().childNodes.length?k.firstChild(b).fold(e.constant(!1),function(b){return"br"===f.name(b)&&a.has(b,
"_moz_editor_bogus_node")}):!1},s=function(a){return r(a).orThunk(function(){var b;n.isFirefox()&&q(a)?(h.empty(a),b=p(a)):b=d.none();return b})};return{listen:function(a){a.events.nodeChanged.bind(function(b){b=b.node();a.isRoot(b)&&s(b).each(function(b){a.setSelection(b,0,b,0)})})}}});l("fw",[],function(){return function(){var c=!0;return{isHandled:function(){return c},handle:function(){c=!1}}}});l("8q",["7","7q","2b"],function(c,e,d){return{onNodeChange:function(a,b){a.events.nodeChanged.bind(function(c){c.prev().each(function(c){e.withinTransient(c,
c).each(function(c){b.atomic(function(){e.cleanup(a.isRoot,c)})})})});return{destroy:c.noop}},preLinebreak:function(a){a.getSelection().each(function(b){d.parent(b.startContainer()).each(function(b){e.withinTransient(b,b).each(function(b){e.cleanupNonEmpty(a.isRoot,b)})})})}}});l("ak",["b","ar","7"],function(c,e,d){var a=function(a,b){var d=b.original(),d=d.raw().which||d.raw().keycode;return c.contains(a,d)},b=d.curry(a,e.ENTER()),g=d.curry(a,e.SPACE()),f=d.curry(a,e.BACKSPACE()),h=d.curry(a,e.DEL()),
k=d.curry(a,e.LEFT().concat(e.UP())),m=d.curry(a,e.RIGHT().concat(e.DOWN())),n=d.curry(a,e.TAB());e=d.curry(a,e.ESCAPE());return{isEnter:b,isSpace:g,isBackspace:f,isDel:h,isTab:n,isLeftOrUp:k,isRightOrDown:m,isEscape:e}});l("fx",["oh","oi","oj"],function(c,e,d){var a=function(a,c,d,h){return e.isCollapsed(a)?c(a.startContainer(),a.startOffset(),h):d(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset(),h)};return{soft:function(b,e){return a(b,c.soft,d.soft,e)},hard:function(b,e){return a(b,
c.hard,d.hard,e)}}});l("8k","7 fv fw 8q 7z ak 58 4a fx".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n){var p=h.create({preLinebreak:f(["handler"]),postLinebreak:f([])});e.listen(m);var r=function(b){n.save();m.getSelection().each(function(c){var e=d();p.trigger.preLinebreak(e);m.getSelection().each(function(c){e.isHandled()&&(a.preLinebreak(m),(b?k.soft:k.hard)(c,m.isRoot).each(function(a){m.setRelativeSelection(a.start(),a.finish());m.domChanged();m.cursorIntoView()}));p.trigger.postLinebreak()})})},
q=b.isTextArea;m.events.keydown.bind(function(a){g.isEnter(a)&&!q(a.original().target())&&(a.original().raw().preventDefault(),r(a.original().raw().shiftKey))});return{linebreak:r,destroy:c.noop,events:p.registry}}});l("fy",["4h"],function(c){return function(e,d){return{find:function(a){return c.descendants(a,e)},cleaner:d}}});l("i6",["b","l","bt"],function(c,e,d){var a=function(a,d){c.each(d,function(c){var d=c.find(a);c.cleaner(d,a)})};return{filterHtml:function(b,c){var f=e.fromTag("div");f.dom().innerHTML=
b;a(f,c);return d.writeChildren(f)},filterDom:a}});l("ok",[],function(){return function(){var c=[];return{add:function(e){c.push(e)},get:function(){return c.slice(0)}}}});l("fz",["t","i6","ok"],function(c,e,d){return function(){var a={},b=function(b){return c.from(a[b])};return{get:b,getOrInit:function(b){var c=a[b];void 0===c&&(a[b]=d(),c=a[b]);return c},filterDom:function(a,c){b(a).each(function(a){e.filterDom(c,a.get())})},filterHtml:function(a,c){return b(a).fold(function(){return c},function(a){return e.filterHtml(c,
a.get())})}}}});l("g0",["6o"],function(c){return function(e,d){return{find:function(a){return c.descendants(a,e)},cleaner:d}}});l("8l","b 7 70 fy fz g0 m".split(" "),function(c,e,d,a,b,g,f){return function(h){var k=b(),m=e.constant("output"),n=e.constant("input"),p=e.constant("history"),r=e.constant("internal"),q=e.constant("paste"),s=[],t=function(b,c,d){b=k.getOrInit(b);c=a(c,d);b.add(c)},l=function(a,b,c){a=k.getOrInit(a);b=g(b,c);a.add(b)};h=d(h,t,l);return{add:function(a,b,c){t(a,"."+b,c)},addSelector:t,
addPredicate:l,filterHtml:k.filterHtml,filterDom:k.filterDom,internal:r,output:m,input:n,paste:q,history:p,customFilters:e.constant(h),state:h.state,destroy:e.noop,addExcludedContext:function(a){s=s.concat(a)},includeContext:function(a){return!c.exists(s,e.curry(f.is,a))}}}});l("8m","7 7e 74 7f 58 4a".split(" "),function(c,e,d,a,b,g){return function(f,h,k){var m=!1,n=g.create({maximize:b(["layout"]),restore:b(["layout"]),analytics:b(["message"]),select:b([]),deselect:b([])}),p=function(){n.trigger.maximize(k.alternate)},
r=function(){n.trigger.restore(k.alternate)},q=function(a){m?a.select():a.deselect()},s=function(){n.trigger.analytics("fullscreen_"+(m?"off":"on"));f.focus();(m?r:p)()},t=function(b,c){var d=e.key(m?"action.toggle.fullscreen":"action.fullscreen");return a.get(d,c)};h.events.fullscreen.bind(s);h=d.ui({"fullscreen.general":function(){return{toggle:!0,value:"fullscreen",textkey:e.key("action.fullscreen"),tooltip:t,action:s,updateGeneral:q,icon:!0,shortcut:!0,selected:m}}},c.identity);var l=d.actions({maximize:p,
restore:r});return{ui:h,actions:l,select:function(){m=!0},deselect:function(){m=!1},destroy:c.noop,events:n.registry}}});l("wo",["87","b","t","2w","6r"],function(c,e,d,a,b){var g=a.immutable("ch","offset"),f=function(a,b){return g(a.charAt(b),b)};return{previous:function(a,b){for(var e=b.getOr(a.length)-1;0<=e;e--)if(a.charAt(e)!==c.zeroWidth())return d.some(f(a,e));return d.none()},next:function(a,b){for(var e=b.getOr(0)+1;e<a.length;e++)if(a.charAt(e)!==c.zeroWidth())return d.some(f(a,e));return d.none()},
rfind:function(a,b){b.lastIndex=-1;var c=e.reverse(a).join(""),f=c.match(b);return void 0!==f&&null!==f&&0<=f.index?d.some(c.length-1-f.index):d.none()},lfind:function(a,b){b.lastIndex=-1;var c=a.match(b);return void 0!==c&&null!==c&&0<=c.index?d.some(c.index):d.none()}}});l("wp","7 t fg mf j3 ot mm 4o".split(" "),function(c,e,d,a,b,g,f,h){var k=b.walkers().left(),m=b.walkers().right(),n=h.generate([{abort:[]},{kontinue:[]},{finish:["info"]}]),p=h.generate([{aborted:[]},{edge:["element"]},{success:["info"]}]),
r=function(a,b){return f.isEmptyTag(a,b)||a.property().isBoundary(b)},q=function(a,c,d,f,g,h,k){var m=function(){return k.fold(p.aborted,p.edge)},s=function(f){return b.walk(a,c,d,h).fold(m,function(b){return q(a,b.item(),b.mode(),e.none(),g,h,f)})};if(r(a,c))return m();if(a.property().isText(c)){var t=a.property().getText(c);return g(a,n,c,t,f).fold(m,function(){return s(e.some(c))},p.success)}return s(k)},s=function(b,c,f,h){f=a.toLeaf(b,c,f);return b.property().isText(c)?e.none():g.left(b,f.element(),
b.property().isText,h).map(function(a){return d.point(a,b.property().getText(a).length)})},t=function(b,c,f,h){f=a.toLeaf(b,c,f);return b.property().isText(c)?e.none():g.right(b,f.element(),b.property().isText,h).map(function(a){return d.point(a,0)})},l=function(a,b,e){var f=c.curry(r,a);return s(a,b,e,f).orThunk(function(){return t(a,b,e,f)}).getOr(d.point(b,e))};return{repeatLeft:function(a,c,d,f){c=l(a,c,d);return q(a,c.element(),b.sidestep,e.some(c.offset()),f,k,e.none())},repeatRight:function(a,
c,d,f){c=l(a,c,d);return q(a,c.element(),b.sidestep,e.some(c.offset()),f,m,e.none())}}});l("ol","7 t fg j3 wo wp 56".split(" "),function(c,e,d,a,b,g,f){var h=f.exactly(["regex","attempt"]),k=function(a,b,c,d){return g.repeatLeft(a,b,c,d)},m=function(a,b,c,d){return g.repeatRight(a,b,c,d)},n=function(b,f,g){var h=c.constant(!1);if(!b.property().isText(f))return e.none();var k=b.property().getText(f);return g<=k.length?e.some(d.point(f,g)):a.seekRight(b,f,b.property().isText,h).bind(function(a){return n(b,
a,g-k.length)})};return{previousChar:function(a,c){return b.previous(a,c)},nextChar:function(a,c){return b.next(a,c)},repeatLeft:k,repeatRight:m,expandLeft:function(a,c,d,e){var f=h(e);return k(a,c,d,function(a,c,d,e,g){a=g.getOr(e.length);return b.rfind(e.substring(0,a),f.regex()).fold(function(){return c.kontinue()},function(a){return f.attempt(c,d,e,a)})})},expandRight:function(a,c,d,e){var f=h(e);return m(a,c,d,function(a,c,d,e,g){var h=g.getOr(0);return b.lfind(e.substring(h),f.regex()).fold(function(){return c.kontinue()},
function(a){return f.attempt(c,d,e,h+a)})})},scanRight:n}});l("j4",["6s","ol"],function(c,e){var d=c();return{previousChar:function(a,b){return e.previousChar(a,b)},nextChar:function(a,b){return e.nextChar(a,b)},repeatLeft:function(a,b,c){return e.repeatLeft(d,a,b,c)},repeatRight:function(a,b,c){return e.repeatRight(d,a,b,c)},expandLeft:function(a,b,c){return e.expandLeft(d,a,b,c)},expandRight:function(a,b,c){return e.expandRight(d,a,b,c)},scanRight:function(a,b){return e.scanRight(d,a,b)}}});l("g1",
"84 7 t fg fh 6q j4 2w 1c 21 2b 6r".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=h.immutable("before","after"),q=function(a,b,c,d,e){return x(c).fold(function(){var c=C(a,b,d);return r(c,e)},function(f){var g=D(c,f);return g.length>a?r(d,e):y(b).fold(function(){var b=B(a-g.length,f,e+g);return r(d,b)},function(c){var h=D(c,b);return h.length>a-g.length?r(d,e+g):q(a-g.length-h.length,c,f,h+d,e+g)})})};h=function(b,c,d,e){return b.finish(a.point(c,e))};var s={regex:function(){return new p(g.wordchar(),
"i")},attempt:h},t={regex:function(){return new p(g.wordbreak(),"i")},attempt:h},l=function(a,b){return a.offset()===b.offset()&&k.eq(a.element(),b.element())},v=function(b){return a.point(b,m.value(b).length)},w=function(b){return a.point(b,0)},z=function(a,b,c){var e=function(b){b=c(b);return l(a,b)?d.none():d.some(b)};return b(a.element(),a.offset(),s).fold(d.none,e,function(a){return b(a.element(),a.offset(),t).fold(d.none,e,function(a){return d.some(a)})})},x=function(a){return z(a,f.expandRight,
v)},y=function(a){return z(a,f.expandLeft,w)},A=function(a,b,c,d,f,g){return a(c).fold(e.constant(d),function(e){var h=f(c,e);return h.length+d.length>b||0===h.length?d:A(a,b,e,g(d,h),f,g)})},B=function(a,b,c){return A(x,a,b,c,D,function(a,b){return a+b})},C=function(a,b,c){return A(y,a,b,c,function(a,b){return D(b,a)},function(a,b){return b+a})},D=function(a,b){var d=n.defaultView(a.element()).dom();return c.stringAt(d,a.element(),a.offset(),b.element(),b.offset())};return{beforeAfter:r,anchorText:function(a,
c){var d=b.freefallLtr(c);return x(d).map(function(b){var c=D(d,b);return c+B(a-c.length,b,"")}).getOr("")},flankingText:function(a,c){if(0===a)return r("","");var d=b.freefallLtr(c),e=b.freefallRtl(c);return q(a,d,e,"","")},extendRightAndLeft:q,extendWordsSearch:A,extendWordsRight:B,extendWordsLeft:C,wordSearch:z,wordLeft:y,wordRight:x,pointEq:l,boundaryPointRight:v,boundaryPointLeft:w,textBetweenPoints:D,wordSeeker:s,wordBreakSeeker:t}});l("ab","b t fh g1 7l fo 2w 1b 1c l 69 33 m 3m 2b 1u".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t){var l=function(a,b){try{return a()}catch(c){if(12===c.code)return b();throw c;}},v=function(a){return p.closest(a,"a[href]")},w=function(a,b){return v(a).bind(function(a){return v(b).filter(function(b){return k.eq(a,b)})})},z=f.immutable("element","innerText","before","after"),x=function(a){return r.is(a,"a[href]")?[a]:r.all("a[href]",a)};return{contentLink:function(a){return a.getSelection().bind(function(a){return b.detect(a).fold(function(){return w(a.startContainer(),
a.endContainer())},function(a){return e.some(a.image()).bind(v)})})},sharedLink:w,sharedLinkOrClosest:function(a,b){var c=d.toLeaf(a.startContainer(),a.startOffset()),e=d.toLeaf(a.endContainer(),a.endOffset());return w(c.element(),e.element()).orThunk(function(){return p.closest(c.element(),"a[href]",b)})},findLinkTargets:function(a){return r.all("h1,h2,h3,h4,h5,h6,div[id],p[id],span[id],a[id],a[name]",a)},linkTargetText:function(b,c){var d=q.get(c).length,e=n.deep(c),d=a.anchorText(d,e);if(g.isBlock(c))return z(c,
d,"","");e=a.flankingText(t.max(0,b-d.length),c);return z(c,d,e.before(),e.after())},linkTargetFastText:function(a,b){var c=q.get(b),c=50<c.length?c.substr(0,50):c;return z(b,c,"","")},all:x,many:function(a){return c.bind(a,x)},hrefUrl:function(a,b){return l(function(){return r.all('a[href="'+b+'"]',a)},function(){var d=x(a);return c.filter(d,function(a){return h.get(a,"href")===b})})},anchorTarget:function(a,b){return l(function(){return r.one("#"+b+',a[name="'+b+'"]',a)},function(){var d=s.owner(a).dom();
return e.from(d.getElementById(b)).map(m.fromDom).orThunk(function(){var d=r.all("[name]",a);return e.from(c.find(d,function(a){return h.get(a,"id")===b||h.get(a,"name")===b}))})})}}});l("8n","b 7 t ab 58 4a n".split(" "),function(c,e,d,a,b,g,f){return function(){var h={inputLinks:"insertLink"},k=g.create({internal:b(["command","data"])}),m=function(a,b){d.from(h[a]).fold(function(){throw new f("invalid internal event:",a);},function(a){c.each(b,function(b){k.trigger.internal(a,b)})})};return{input:function(b){b=
a.many(b);m("inputLinks",b)},destroy:e.noop,events:k.registry}}});l("g2",["b","om","3y","q"],function(c,e,d,a){return function(a,g,f){var h=e(),k=[d.bind(g,"keydown",h.keydown),d.bind(g,"keypress",h.keypress),d.bind(f,"keydown",h.keydown),d.bind(f,"keypress",h.keypress)],m=function(a){h.keydown(a.original())},n=function(a){h.keypress(a.original())};a.events.keydown.bind(m);a.events.keypress.bind(n);return{off:h.off,on:h.on,swallowShortcuts:h.swallowShortcuts,yieldShortcuts:h.yieldShortcuts,swallowChars:h.swallowChars,
yieldChars:h.yieldChars,swallowKeys:h.swallowKeys,yieldKeys:h.yieldKeys,destroy:function(){c.each(k,function(a){a.unbind()});a.events.keydown.unbind(m);a.events.keypress.unbind(n)},events:h.events}}});l("g3",["om"],function(c){return function(e){var d=c(),a=function(a){d.keydown(a.original())},b=function(a){d.keypress(a.original())};e.events.keydown.bind(a);e.events.keypress.bind(b);return{off:d.off,on:d.on,swallowShortcuts:d.swallowShortcuts,yieldShortcuts:d.yieldShortcuts,swallowChars:d.swallowChars,
yieldChars:d.yieldChars,swallowKeys:d.swallowKeys,yieldKeys:d.yieldKeys,events:d.events,destroy:function(){e.events.keydown.unbind(a);e.events.keypress.unbind(b)}}}});l("g4",["om","3y"],function(c,e){return function(d){var a=c(),b=e.bind(d,"keydown",a.keydown),g=e.bind(d,"keypress",a.keypress);return{off:a.off,on:a.on,swallowShortcuts:a.swallowShortcuts,yieldShortcuts:a.yieldShortcuts,swallowChars:a.swallowChars,yieldChars:a.yieldChars,swallowKeys:a.swallowKeys,yieldKeys:a.yieldKeys,destroy:function(){b.unbind();
g.unbind()},events:a.events}}});l("8o",["7","g2","g3","g4"],function(c,e,d,a){return function(b,g){return{all:function(){return e(b,g.element(),g.uiContainerParent())},container:function(b){return a(b)},editor:function(){return d(b)},destroy:c.noop}}});l("g5",["k2","fg","j4","21"],function(c,e,d,a){var b=function(b,c){var h=e.point(b,c);return a.isText(b)?d.scanRight(b,c).getOr(h):h};return{handle:function(a){var d=b(a.startContainer(),a.startOffset());a=b(a.endContainer(),a.endOffset());return c(d.element(),
d.offset(),a.element(),a.offset())}}});l("13v",["8a","4o","21","2b"],function(c,e,d,a){var b=e.generate([{onText:["element","offset"]},{firstText:["parent","child","offset"]},{beforeText:["parent","child","offset"]},{afterText:["parent","child"," offset"]},{lastText:["parent","child","offset"]},{onElement:["element","offset"]}]);return{detect:function(e,f){if(d.isText(e))return b.onText(e,f);var h=a.children(e);return 0===h.length?b.onElement(e,f):0===f&&d.isText(h[0])?(0,b.firstText)(e,h[0],0):f===
h.length&&d.isText(h[h.length-1])?(h=h[f-1],(0,b.lastText)(e,h,c.getEnd(h))):f<h.length&&d.isText(h[f])?(0,b.beforeText)(e,h[f],0):0<f&&d.isText(h[f-1])?(h=h[f],(0,b.afterText)(e,h,c.getEnd(h))):b.onElement(e,f)},cata:function(a,b,c,d,e,n,p){return a.fold(b,c,d,e,n,p)}}});l("15x",["7","t"],function(c,e){return function(d){return{backup:c.identity,restore:c.constant(e.none()),element:c.constant(d)}}});l("15y",["2w"],function(c){return c.immutable("startContainer","startOffset","endContainer","endOffset")});
l("13z",["6u"],function(c){return{resolve:c.create("ephox-newt").resolve}});l("10y",["13z","2o","2p","l"],function(c,e,d,a){var b=c.resolve("cursor-marker");return{generator:function(c){var f=null;return{getOrInit:function(){var h;null===f?(h=a.fromTag("span",c.dom()),e.add(h,b),d.set(h,"display","none")):h=f;return f=h}}},isCursor:function(a){return e.has(a,b)}}});l("13w","b 15x 15y 10y 7 t 1c 2q 2s 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(a,c){return{element:b.constant(c),backup:b.identity,
restore:function(){var b=d(a,0,a,0);return g.some(b)}}},p=function(d){d=m.children(d);return c.filter(d,b.not(a.isCursor))},r=function(a,c){return{element:b.constant(c),backup:b.identity,restore:function(){var b=p(a).length,b=d(a,b,a,b);return g.some(b)}}},q=function(a){return m.parent(a).bind(function(b){var e=p(b),e=c.findIndex(e,function(b){return f.eq(a,b)});return-1<e?g.some(d(b,e,b,e)):g.none()})},s=function(a,c){return{backup:function(){h.before(a,c)},restore:function(){var a=m.nextSibling(c);
k.remove(c);return a.map(function(a){return q(a).getOrThunk(function(){return d(a,0,a,0)})})},element:b.constant(c)}};return{place:function(a,b,c){var d=m.children(a);return 0===d.length?n(a,c):d.length===b?r(a,c):0===b?n(a,c):b>d.length?e(c):s(d[b],c)}}});l("13x",["15y","10y","7","t"],function(c,e,d,a){var b=function(a,b){return b().fold(function(){return e.generator(a).getOrInit()},function(a){return a.element()})},g=function(b){b=b();b.backup();return a.some(b)},f=function(a,b){var d=a.or(b),e=
b.or(a);return d.bind(function(a){return e.map(function(b){return c(a.startContainer(),a.startOffset(),b.startContainer(),b.startOffset())})})};return{ltr:function(c,e,m){var n=a.none(),p=a.none();return{backup:function(){p=g(e);n=g(m)},restore:function(){return n.bind(function(a){return p.bind(function(b){var c=a.restore();b=b.restore();return f(c,b)})})},element:d.curry(b,c,function(){return p})}},rtl:function(c,e,m){var n=a.none(),p=a.none();return{backup:function(){n=g(m);p=g(e)},restore:function(){return p.bind(function(a){return n.bind(function(b){var c=
a.restore();b=b.restore();return f(b,c)})})},element:d.curry(b,c,function(){return n})}}}});l("13y","15x 15y 8a 7 jq i2 2q 2s".split(" "),function(c,e,d,a,b,g,f,h){var k=function(c,d,g){return{backup:function(){f.before(d,g)},restore:function(){var a=b.after(g,c).map(function(a){return e(a,0,a,0)});h.remove(g);return a},element:a.constant(g)}},m=function(c,g,k){return{backup:function(){f.after(g,k)},restore:function(){var a=b.before(k,c).map(function(a){var b=d.getEnd(a);return e(a,b,a,b)});h.remove(k);
return a},element:a.constant(k)}};return{place:function(a,b,d,e){b=g.split(b,d);return g.position(b).fold(function(){return c(e)},function(b){return k(a,b,e)},function(b,c){return m(a,b,e)},function(b){return m(a,b,e)})}}});l("qe",["2w"],function(c){return c.immutable("result","cursor")});l("10x","13v 13w 13x 13y qe 10y e5 2b".split(" "),function(c,e,d,a,b,g,f,h){var k=function(b,d,f){var g=function(c,d,e){return a.place(b,d,e,f)};return c.cata(d,function(c,d){return a.place(b,c,d,f)},g,g,g,g,function(a,
b){return e.place(a,b,f)})},m=function(a,b,d,e){e=e.getOrInit();b=c.detect(b,d);return k(a,b,e)},n=function(a,c){a.backup();var d=c(a.element());return b(d,a.restore())};return{inspect:m,runOnRange:function(a,b,c,e,k,l){var v=h.owner(b),w=(f.after(b,c,e,k)?d.rtl:d.ltr)(v,function(){return m(a,e,k,g.generator(v))},function(){return m(a,b,c,g.generator(v))});return n(w,l)},runOnCursor:n}});l("wv",["10x","10y","1c","2b"],function(c,e,d,a){var b=function(a,b,d,e,g,p){return c.runOnRange(a,b,g>d?d:g,b,
g>d?g:d,p)},g=c.runOnRange;return{point:function(b,d,g,m){var n=a.owner(d),n=e.generator(n);b=c.inspect(b,d,g,n);return c.runOnCursor(b,m)},range:function(a,c,e){return(d.eq(c.startContainer(),c.endContainer())?b:g)(a,c.startContainer(),c.startOffset(),c.endContainer(),c.endOffset(),e)}}});l("on","wv qe t 2n 2o 30 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(a,b){return function(a,c){var f=c(b);return e(f,d.none())}},k=function(a,b){return function(d,e){return c.point(a,b.startContainer(),
b.startOffset(),n(d,e))}},m=function(a,b){return function(d,e){return c.range(a,b,n(d,e))}},n=function(a,c){return function(d){b.add(d,a);return c(d)}};return{diagnose:function(b,c){var d=c.startContainer(),e=c.endContainer(),n=f.owner(d);return a.inBody(d)&&a.inBody(e)&&g.active(n).forall(a.inBody)?c.collapsed()?k(b,c):m(b,c):h(b,c.startContainer())}}});l("g6",["7","on","59","d3","2n"],function(c,e,d,a,b){return function(g,f){var h=d.resolve("ops-eph-cursor");g.add(g.internal(),h,a.remove);g.add(g.output(),
h,a.remove);g.addExcludedContext(["."+h]);var k=function(a){var c=function(c){c=e.diagnose(f.isRoot,c)(h,a);c.cursor().each(function(a){b.inBody(a.startContainer())&&b.inBody(a.endContainer())&&f.getSelection().each(function(b){f.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})});return c.result()};return function(){return f.getSelection().fold(a,c)}};return{destroy:c.noop,run:function(a){return k(a)()}}}});l("8p","7 d4 g5 g6 7l 1c 21".split(" "),function(c,e,d,a,
b,g,f){return function(h,k){var m=a(h,k),n=function(a,b){var c=a(),e=d.handle(b);k.getSelection().forall(function(a){return!g.eq(a.startContainer(),e.startContainer())||!g.eq(a.endContainer(),e.endContainer())||a.startOffset()!==e.startOffset()||a.endOffset()!==e.endOffset()})&&k.setSelection(e.startContainer(),e.startOffset(),e.endContainer(),e.endOffset());return c},p=function(a){return f.isText(a)||"br"===f.name(a)};return{destroy:function(){},run:m.run,preserve:c.curry(e.preserve,k),lightweightWith:function(a,
c){return p(c.startContainer())&&p(c.endContainer())||b.detect(c).isSome()?n(a,c):m.run(a)},adapt:function(a){k.getSelection().each(function(b){m.run(function(){a(b.startContainer(),b.endContainer())})})},pure:function(a){k.getSelection().each(function(b){a(b.startContainer(),b.endContainer())})},atomic:function(a){return m.run(a)}}}});l("oo",["7","7e","74","58","4a"],function(c,e,d,a,b){return function(){var g=b.create({back:a([]),abort:a([])});return{ui:d.ui({"back.general":{toggle:!1,value:"mobile-back",
textkey:e.key("toolbar.backbutton"),action:function(){g.trigger.back()},updateGeneral:c.noop,icon:!0,label:!0}}),events:g.registry,destroy:c.noop}}});l("10z",["7","p"],function(c,e){return function(d,a){return e.error({small:c.constant(d),big:c.constant(a)})}});l("110",["b","p"],function(c,e){return{fold:function(d,a){return c.foldr(d,function(b,c){return b.bind(function(b){return a(c).map(function(a){return[a].concat(b)})})},e.value([]))}}});l("111",["a","1q","10z","110","p"],function(c,e,d,a,b){var g=
function(a,c){var f=c.groups(),g=f[a];return void 0===g?d("Unknown group: "+a,["No binding for group: "+a+". Known groups: "+e.keys(f)]):b.value(g)},f=function(a,d){var e=c.isArray(a)?{label:"",items:a}:a;return b.value(e)},h=function(b,c,d,e,f){return a.fold(c,function(a){return f.item(a,d,e,f)}).map(function(a){return{category:b,items:a}})};return{build:function(a,b,d,e){return(c.isString(a)?g:f)(a,b).bind(function(a){return h(a.label,a.items,b,d,e)})}}});l("112",["a","1q","10z","p"],function(c,
e,d,a){var b=function(b,c,f,g){c=c.commands();f=c[b];return void 0===f?d("Unknown command: "+b,["No binding for command: "+b+". Known commands: "+e.keys(c)]):a.value(f)},g=function(a,b,c,d){return(void 0===a.items?f:d.menu)(a,b,c,d)},f=function(a,b,c,e){return void 0===c?d("You need a custom action factory to use this",[]):c(a)};return{build:function(a,d,e,f){return(c.isString(a)?b:g)(a,d,e,f)}}});l("113","a b 10z 110 p w8".split(" "),function(c,e,d,a,b,g){var f=function(a){return e.forall(a,c.isArray)?
b.value(a):e.exists(a,c.isArray)?d("Menu items must be a single array or an array where every element is an array",["Menu items must be a single array or an array where every element is an array.","Contents of menu: "+g.stringify(a)]):b.value([a])};return{build:function(b,c,e,n){if(void 0===b.label||void 0===b.items||0===b.items.length)return d("Invalid toolbar configuration for menu",["Invalid menu. Must be an object containing label and items.","Contents of menu: "+g.stringify(b)]);var p=b.menuLabel?
b.menuLabel:b.label;return f(b.items).bind(function(b){return a.fold(b,function(a){return n.group(a,c,e,n)})}).map(function(a){return{name:b.id,textkey:b.label,menuTextkey:p,type:"submenu",contentFocus:!1,enabled:!0,icon:b.icon,commands:a}})}}});l("ww","a b 1q 10z 110 111 112 113 p w8".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=d.map({group:g.build,item:f.build,menu:h.build},function(a,b){return function(){if(4!==arguments.length)throw"Incorrect usage of builder ["+b+"]. Only given: "+arguments.length;
return a.apply(null,arguments)}}),p=function(b){if(void 0===b.items)return a("Invalid group, no items specified",["Invalid group, no items specified: "+b.label]);var d=b.items;return c.isArray(d)?(b=e.bind(d,function(a,b){return c.isString(a)||c.isArray(a)||void 0!==a.label&&c.isArray(a.items)?[]:["Invalid group at index: "+b+". Must be either a string, an array or an object containing label and items. Was: "+m.stringify(a)]}),0===b.length?k.value(d):a("Invalid toolbar configuration for groups",b)):
a("Invalid toolbar, items is not an array",["Invalid toolbar, items is not an array: "+m.stringify(b)])};return{build:function(a,c,d){return p(a).bind(function(a){return b.fold(a,function(a){return n.group(a,c,d,n)})})}}});l("x0",["b","7","j0"],function(c,e,d){var a=function(){return d.isSmallTouch()},b=function(a,b){return{feature:a.feature,command:a.command,type:"pre_flatmenu",items:b}};return{shouldFlatten:a,never:e.constant("never_flatten"),streamline:function(a){var b=function(a){return c.bind(a,
function(a){return"never_flatten"===a.flatten?[a]:"submenu"===a.type?c.bind(a.commands,function(a){return b(a.items)}):"pre_flatmenu"===a.type?c.map(a.items,function(b){return{feature:a.feature,type:"general",command:b}}):[a]})};return c.map(a,function(a){var c=b(a.items);return{category:a.category,items:c}})},setup:function(c,f){var h=b(c,f);return d.choice([{predicate:a,value:e.constant(h)}],c)},make:b}});l("wx",["7","t","7e","x0","j0"],function(c,e,d,a,b){var g=function(a,b){return{predicate:a,
value:c.constant(b)}};return function(c,h,k,m,n){var p=function(a,b){return a()?b:{feature:e.none()}};k=p(function(){return!c&&b.isLargeDesktop()},{feature:k.ui(),command:"fullscreen",type:"general",unsupported:"Fullscreen is not supported in inline mode"});n=b.choice([g(b.isLargeDesktop,{feature:m.fileupload().ui(),command:"fileupload",type:"general"}),g(b.isLargeTouch,{feature:m.fileupload().ui(),command:"fileupload",type:"menu"})],a.make({feature:m.fileupload().ui(),command:"fileupload"},n.allowLocalImages?
["camera"]:[]));var r=p(b.isLargeDesktop,{feature:m.accessibility().ui(),command:"a11ycheck",type:"general"}),p=p(b.isLarge,{feature:m.specialchar().ui(),command:"specialchar",type:"general"}),q=b.choice([g(b.isLarge,{feature:m.blocktag().ui(),command:"bullist",type:"split-widget"})],{feature:m.blocktag().ui(),command:"bullist",type:"general"}),s=b.choice([g(b.isLarge,{feature:m.blocktag().ui(),command:"numlist",type:"split-widget"})],{feature:m.blocktag().ui(),command:"numlist",type:"general"}),
t={feature:m.formatting().ui(),command:"superscript",type:"general"},l={feature:m.formatting().ui(),command:"subscript",type:"general"},v={feature:m.formatting().ui(),command:"strikethrough",type:"general"},w={feature:m.font().ui(),command:"fontface",type:"dropdown"},z=b.choice([g(b.isTouch,{feature:m.font().ui(),command:"fontsize",type:"general"})],{feature:m.font().ui(),command:"fontsize",type:"inline-widget"}),x={feature:m.font().ui(),command:"fontcolor",type:"widget"},y={feature:m.spelling().hasAutocorrect()?
m.macros().ui():e.none(),command:"autocorrect",type:"general"},A={feature:m.spelling().ui(),command:"spelling",type:m.spelling().hasDropdown()?"dropdown":"general"},B={feature:m.macros().ui(),command:"capitalisation",type:"general"},C={feature:m.help().ui(),command:"help",type:"general"},D={feature:m.wordcount().ui(),command:"wordcount",type:"general"};return{link:{feature:m.link().ui(),command:"link",type:"general"},wordcount:D,media:{feature:m.media().ui(),command:"media",type:"general"},hr:{feature:m.horizontalrule().ui(),
command:"horizontalrule",type:"general"},specialchar:p,fileupload:n,table:{feature:m.table().ui(),command:"table",type:"widget"},undo:{feature:h.ui(),command:"undo",type:"general"},redo:{feature:h.ui(),command:"redo",type:"general"},styles:{feature:m.blocktag().ui(),command:"blocktag",type:"dropdown"},language:{feature:m.parlance().ui(),command:"parlance",type:"dropdown"},ltrdir:{feature:m.directionality().ui(),command:"ltrdir",type:"general"},rtldir:{feature:m.directionality().ui(),command:"rtldir",
type:"general"},bold:{feature:m.formatting().ui(),command:"bold",type:"general"},italic:{feature:m.formatting().ui(),command:"italic",type:"general"},underline:{feature:m.formatting().ui(),command:"underline",type:"general"},strikethrough:v,superscript:t,subscript:l,ul:q,ol:s,removeformat:{feature:m.formatting().ui(),command:"removeformat",type:"general"},alignment:{feature:m.alignindent().ui(),command:"alignment",type:"dropdown"},outdent:{feature:m.alignindent().ui(),command:"outdent",type:"general"},
indent:{feature:m.alignindent().ui(),command:"indent",type:"general"},blockquote:{feature:m.alignindent().ui(),command:"blockquote",type:"general"},"font-menu":{name:"font",textkey:d.key("font.menu-button"),menuTextkey:d.key("font.menu"),type:"submenu",contentFocus:!0,commands:[{category:"Font-menu",items:[w,z,x,t,l,v]}]},"font-face":w,"font-size":z,"font-color":x,fullscreen:k,find:{feature:m.findreplace().ui(),command:"find",type:"general"},accessibility:r,usersettings:{name:"usersettings",textkey:d.key("cog.menu-button"),
menuTextkey:d.key("cog.menu"),type:"submenu",flatten:a.never(),contentFocus:!0,commands:[{category:"a",items:[D]},{category:"b",items:[A,y,B]},{caetgory:"",items:[C]}]}}}});l("wy","a 1q 10z w8 7 t p l3 7e".split(" "),function(c,e,d,a,b,g,f,h,k){return function(){return{make:function(m){var n=function(b){return d(k.translate("errors.toolbar.missing.custom.string",b),['The required property "'+b+'" for a custom command must be a string. It was: '+a.stringify(m[b]),"Properties specified in custom command: "+
e.keys(m).join(", "),"Definition specified for custom command: "+a.stringify(m)])};if(!c.isString(m.id))return n("id");if(!c.isString(m.text))return n("text");n={};n[m.id]=b.constant({general:function(){return{toggle:!1,value:h.cssSanitise(m.id),textkey:k.raw(m.text),action:m.action,updateGeneral:b.identity,icon:void 0!==m.icon?m.icon:!1}}});return f.value({feature:g.some(n),command:m.id,type:"general"})}}}});l("wz",["7e"],function(c){return function(){var e={id:"insert",label:c.key("insert.menu-button"),
menuLabel:c.key("insert.menu"),items:[["link","fileupload","media","table"],["specialchar","hr"]]};return{undo:{label:c.key("category.undo"),items:["undo","redo"]},insert:{label:c.key("category.insert"),items:[e]},style:{label:c.key("category.style"),items:["styles"]},language:{label:c.key("category.language"),items:["language","ltrdir","rtldir"]},emphasis:{label:c.key("category.emphasis"),items:["bold","italic","underline"]},align:{label:c.key("category.align"),items:["alignment"]},listindent:{label:c.key("category.listindent"),
items:["ul","ol","outdent","indent","blockquote"]},format:{label:c.key("category.format"),items:["font-menu","removeformat"]},tools:{label:c.key("category.tools"),items:["find","accessibility","fullscreen","usersettings"]},"table-tools":{label:c.key("category.table"),items:["table-tools"]},"image-tools":{label:c.key("category.image"),items:["image-tools","crop-tools"]}}}});l("op","ww c 6 7 wx wy wz x0".split(" "),function(c,e,d,a,b,g,f,h){var k=g(),m=function(a,b){return a.bind(function(a){return b.map(function(b){return a.concat(b)})})};
return{config:function(g,p,r){return function(q,s,t,l){q=b(q,s,t,l,r);q=d.deepMerge(q,p);l={"table-tools":{feature:l.table().ui(),command:"cell",type:"palette"},"image-tools":{feature:l.imageEdit().ui(),command:"edit",type:"palette"},"crop-tools":{feature:l.imageEdit().ui(),command:"crop",type:"palette"}};q={forItems:a.constant({commands:a.constant(q),groups:f}),forContextual:a.constant({commands:a.constant(l),groups:f})};l=c.build({items:g.items},q.forItems(),k.make);q=c.build({items:g.contextual},
q.forContextual(),k.make);s=e.detect().deviceType.isTouch()?h.streamline:a.identity;return m(l,q).map(s)}}}});l("140","b 7 l 30 21 3w".split(" "),function(c,e,d,a,b,g){var f=function(a){return function(a){g(function(){a()},0)}};return{resume:function(g){g.focus();var k=d.fromDom(g.document.body);(a.active().exists(function(a){return c.contains(["input","textarea"],b.name(a))})?f(k):e.apply)(function(){a.active().each(a.blur);a.focus(k)})}}});l("141",["1b","1w","e9"],function(c,e,d){return{safeParse:function(a,
b){var g=d(c.get(a,b),10);return e(g)?0:g}}});l("142",["b","84","8a","l","2b"],function(c,e,d,a,b){var g=function(a){return{left:a.left,top:a.top,width:2,height:a.height}},f=function(f){if(f.collapsed){var k=a.fromDom(f.startContainer);return b.parent(k).bind(function(a){return e.rectangleAt(f.startContainer.ownerDocument.defaultView,k,f.startOffset,a,d.getEnd(a)).map(g).map(c.pure)}).getOr([])}return f.getClientRects()};return{getRectangles:function(a){a=a.getSelection();return void 0!==a&&0<a.rangeCount?
f(a.getRangeAt(0)):[]}}});l("143",["6u"],function(c){return{resolve:c.create("ephox-nomad").resolve}});l("114","140 141 142 143 7 t 1b 3y l 1u 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p="data-"+a.resolve("last-outer-height"),r=function(a){return{top:b.constant(a.top),bottom:b.constant(a.top+a.height)}},q=function(a){a=d.getRectangles(a);return 0<a.length?g.some(a[0]).map(r):g.none()},s=function(a){a=e.safeParse(a,p);var b=n.innerHeight;return a>b?g.some(a-b):g.none()};return{setup:function(a,
b){var d=k.fromDom(b.document.body),e=h.bind(k.fromDom(a),"resize",function(){s(d).each(function(a){q(b).each(function(c){c=c.top()>b.innerHeight||c.bottom()>b.innerHeight?m.min(a,c.bottom()-b.innerHeight+50):0;0!==c&&b.scrollTo(b.pageXOffset,b.pageYOffset+c)})});f.set(d,p,n.innerHeight)});f.set(d,p,n.innerHeight);return{toEditing:function(){c.resume(b)},destroy:function(){e.unbind()}}}}});l("pa",["2j"],function(c){return function(e){return new (c.getOrDie("Event"))(e)}});l("h1",["pa"],function(c){var e=
function(d){var a=c("Event");a.initEvent(d,!0,!0);return a};return{event:function(c,a){var b=e(a);c.target().dom().dispatchEvent(b)},target:function(c,a){var b=e(a);c.dom().dispatchEvent(b)}}});l("hy",["h1"],function(c){return function(e){return{closeMenus:function(d){d=d?d.target():e;c.target(d,"mousedown")}}}});l("115","7 t 58 4a 3y l 1u 2u 2v 36".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(){var a=m.matchMedia("(orientation: portrait)").matches;return{isPortrait:c.constant(a)}};return{get:n,
onChange:function(){var c=a.create({ready:d(["orientation"]),change:d(["orientation"])}),f=g.fromDom(m),q=null,s=b.bind(f,"orientationchange",function(){h(q);var a=n();c.trigger.change(a);t(function(){c.trigger.ready(a)})}),t=function(a){h(q);var b=m.innerHeight,c=0;q=k(function(){b!==m.innerHeight?(h(q),a(e.some(m.innerHeight))):20<c&&(h(q),a(e.none()));c++},50)};return{onAdjustment:t,events:c.registry,destroy:function(){s.unbind()}}}}});l("116",["1b","l","2q","33"],function(c,e,d,a){return{tag:function(){var b=
a.first("head").getOrDie(),g=a.first('meta[name="viewport"]').getOrThunk(function(){var a=e.fromTag("meta");c.set(a,"name","viewport");d.append(b,a);return a}),f=c.get(g,"content");return{maximize:function(){c.set(g,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){void 0!==f&&null!==f&&0<f.length?c.set(g,"content",f):c.remove(g,"content")}}}}});l("117",["7","3y"],function(c,e){return function(d){return function(a,b){var g=e.bind(d,"touchmove",
a.move),f=e.bind(d,"touchend",a.drop);return{element:c.constant(d),start:c.noop,stop:c.noop,destroy:function(){g.unbind();f.unbind()}}}}});l("144","7 t 2p 33 2t 1u".split(" "),function(c,e,d,a,b,g){var f=function(a,c){var d=b.get(a);return g.floor(c/100*d)},h=function(b,c){return a.ancestor(c,"td,th").fold(function(){return f(b,98)},function(a){return f(a,94)})},k=function(a,b,c){var d=b.dom().width;a=h(a,b);return g.max(0,g.min(a,d+c))},m=function(a,b,c){return b.dom().height+c};return{compare:function(a,
b){var d=b.deltaX()-a.deltaX(),e=b.deltaY()-a.deltaY(),f=b.deltaDistance()-a.deltaDistance();return{deltaX:c.constant(d),deltaY:c.constant(e),deltaDistance:c.constant(f)}},extract:function(a){var b=a.raw().touches;if(2>b.length)return e.none();a=g.abs(b[0].clientX-b[1].clientX);var b=g.abs(b[0].clientY-b[1].clientY),d=g.sqrt(g.pow(a,2)+g.pow(b,2));return e.some({deltaX:c.constant(a),deltaY:c.constant(b),deltaDistance:c.constant(d)})},resize:function(a,c,e){var f=d.getRaw(c,"height"),s=d.getRaw(c,
"width"),t=0<e.deltaDistance()?1:-1,l=t*g.abs(e.deltaX()),v=t*g.abs(e.deltaY());e=k(a,c,l);t=m(a,c,v);l=g.abs(l)>g.abs(v);d.setAll(c,{height:l?"auto":t+"px",width:l?e+"px":"auto",transform:"translate3d(0, 0, 0)"});b.get(c)>h(a,c)&&(f.each(function(a){d.set(c,"height",a)}),s.each(function(a){d.set(c,"width",a)}))}}});l("118","xx j7 t 144 4n 2p 3y 21".split(" "),function(c,e,d,a,b,g,f,h){return function(k,m,n,p){var r=b(d.none());n=c.mode({compare:a.compare,extract:a.extract,sink:n,mutate:function(b,
c){r.get().each(function(b){a.resize(m,b,c)})}});var q=e.transform({},{mode:n}),s=f.bind(k,"touchstart",function(a){"img"===h.name(a.target())&&2===a.raw().touches.length&&(r.set(d.some(a.target())),q.on(),q.go(m))});q.events.stop.bind(function(){r.get().each(function(a){g.remove(a,"transform")});p()});return{destroy:function(){s.unbind();q.destroy()}}}});l("x1","b c 114 hy 115 116 7 t 7c 117 118 2o 2p 3y l 30 q 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,l,v){var w=6<=e.detect().os.version.major;
return function(e,x,y){var A=y.toolbar.element(),B=g.tag(),C=[],D=s.fromDom(l),F=a(A),E=null,G=k.api(),H=h.none(),L=function(){G.run(function(a){a.toEditing()})},I=function(){F.closeMenus()},J=function(){e.getSelection().each(function(a){a=a.collapsed()?"0px":"23px";r.set(A,"margin-top",a)})},K=function(a){r.set(A,"margin-top","0px")},N=function(){var a=[q.bind(A,"touchmove",F.closeMenus)];C=e.doc().map(function(a){return x||!0===w?[]:[q.bind(a,"selectionchange",J),q.bind(D,"focusin",K)]}).getOr([]).concat(a)},
M=function(){c.each(C,function(a){a.unbind()})};return{enter:function(){e.body().each(function(a){e.doc().each(function(c){e.win().each(function(g){t.focus(a);E=b.onChange();var k=m(c),k=n(c,a,k,f.noop);H=h.some(k);g=d.setup(v,g);G.set(g);e.events.toEditing.bind(L);E.events.change.bind(I)})})});p.add(A,"ephox-polish-mobile-show");y.toolbar.refresh();B.maximize();N()},exit:function(){G.clear();e.events.toEditing.unbind(L);E.events.change.unbind(I);null!==E&&E.destroy();B.restore();M()},destroy:function(){H.each(function(a){a.destroy()});
M()}}}});l("x2","b 8e 52 7 7e 59 58 4a 2o 2p 3y l 2q 2s 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s){return function(){var s=p.fromTag("div");k.add(s,g.resolve("disabled-mask"));var l=!1,v=d.div();k.add(v,g.resolve("content-container"));var w=d.div();e.hidden(w,!0);k.add(w,g.resolve("tap-icon"));r.append(v,w);var z=d.div();k.add(z,g.resolve("disclosure"));r.append(z,p.fromText(b.translate("taptoedit")));r.append(v,z);r.append(s,v);e.textButton(s,v);var x=h.create({fullscreen:f([])}),y=function(a){var b=
s.dom().getClientRects()[0];return c.forall(a,function(a){return a.pageY>=b.top&&a.pageY<=b.top+b.height&&a.pageX>=b.left&&a.pageX<=b.left+b.width})},A=[n.bind(s,"touchmove",function(a){l=!0}),n.bind(s,"touchend",function(a){var b=a.raw().changedTouches;y(b)&&!l&&(a.kill(),x.trigger.fullscreen())}),n.bind(s,"touchstart",function(a){l=!1}),n.bind(s,"click",function(a){a.kill();x.trigger.fullscreen()})];return{element:a.constant(s),events:x.registry,destroy:function(){c.each(A,function(a){a.unbind()});
q.remove(w);q.remove(z);q.remove(v);q.remove(s)},show:function(){m.remove(s,"display")},hide:function(){m.set(s,"display","none")}}}});l("oq","d4 59 x1 x2 2o 30 2q".split(" "),function(c,e,d,a,b,g,f){return function(h,k,m,n,p,r){var q=r.element(),s=d(h,p.fillscreen,r),t=function(){s.enter();n.actions().maximize()},l=function(){var b=a();f.append(r.element(),b.element());b.events.fullscreen.bind(function(a){n.actions().maximize()})};return{init:function(){r.socket(h);h.events.scrollToCursor.bind(function(){c.cursorIntoView(h)})},
loaded:function(){var a=!0===p.fillscreen;(b.has(q,e.resolve("fullscreen-maximized"))||a?t:l)()},restoreEditor:function(){n.actions().restore();s.exit()},destroy:function(){h.body().each(g.blur)}}}});l("g7",["7","oo","op","oq"],function(c,e,d,a){return function(b,g,f,h,k){var m=h.toolbar.items,n=function(c){var n=a(b,g,f,k,h,c),q=e();c=d.config({items:[["back"]].concat(m),contextual:[]},{back:{feature:q.ui(),command:"back",type:"general"}},{allowLocalImages:h.allowLocalImages});q.events.back.bind(function(){n.restoreEditor()});
return{init:n.init,loaded:n.loaded,config:c,destroy:function(){n.destroy();q.destroy()}}};return{tabbed:n,full:n,destroy:c.noop}}});l("g8",["7","op","oq"],function(c,e,d){return function(a,b,g,f,h){var k=f.toolbar.items,m=function(c){var m=d(a,b,g,h,f,c);c=e.config({items:k,contextual:[]},{},{allowLocalImages:f.allowLocalImages});return{init:m.init,loaded:m.loaded,config:c,destroy:function(){m.destroy()}}};return{tabbed:m,full:m,destroy:c.noop}}});l("g9",["7","d4","op"],function(c,e,d){return function(a,
b,g,f){b=function(b){return{init:function(){b.socket(a);a.events.scrollToCursor.bind(function(){e.cursorIntoView(a)});a.events.toEditing.bind(a.focus)},loaded:c.noop,config:d.config(f.toolbar,{},{allowLocalImages:f.allowLocalImages}),destroy:c.noop}};return{tabbed:b,full:b,destroy:c.noop}}});l("119",["b","1b","2p","4h"],function(c,e,d,a){var b=function(a){return a.body().map(function(a){a=d.get(a,"background-color");return void 0!==a&&""!==a?"background-color:"+a+"!important":"background-color:rgb(255,255,255)!important;"}).getOr("background-color:rgb(255,255,255)!important;")};
return{clobberStyles:function(d,f){var h=function(a){return function(b){var c=e.get(b,"style"),c=void 0===c?"no-styles":c.trim();c!==a&&(e.set(b,"data-ephox-mobile-fullscreen-style",c),e.set(b,"style",a))}},k=a.ancestors(d,"*"),m=c.bind(k,function(b){return a.siblings(b,"*")}),n=b(f);c.each(m,h("display:none!important;"));c.each(k,h("position:absolute!important;top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;"+
n))},restoreStyles:function(){var b=a.all("[data-ephox-mobile-fullscreen-style]");c.each(b,function(a){var b=e.get(a,"data-ephox-mobile-fullscreen-style");"no-styles"!==b?e.set(a,"style",b):e.remove(a,"style");e.remove(a,"data-ephox-mobile-fullscreen-style")})}}});l("x3","116 7 t 59 x2 119 2o 2p q".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n){var p=c.tag(),r=d.none(),q=b();return{maximize:function(){r=d.some(k.body.scrollTop);h.set(q.element(),"display","none");f.add(m,a.resolve("fullscreen-maximized"));
g.clobberStyles(m,n);p.maximize()},restore:function(){g.restoreStyles();f.remove(m,a.resolve("fullscreen-maximized"));p.restore();h.remove(q.element(),"display");r=r.bind(function(a){k.body.scrollTop=a;return d.none()})},destroy:function(){q.destroy()},mask:e.constant(q)}}});l("145",["2p","l","30","2q","2s"],function(c,e,d,a,b){return{input:function(g,f){var h=e.fromTag("input");c.setAll(h,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"});a.append(g,h);d.focus(h);f(h);b.remove(h)}}});
l("ho",["30","3w"],function(c,e){return{refreshInput:function(d){var a=d.dom().selectionStart,b=d.dom().selectionEnd,g=d.dom().selectionDirection;e(function(){d.dom().setSelectionRange(a,b,g);c.focus(d)},50)},refresh:function(c){var a=c.getSelection();if(0<a.rangeCount){var b=a.getRangeAt(0);c=c.document.createRange();c.setStart(b.startContainer,b.startOffset);c.setEnd(b.endContainer,b.endOffset);a.removeAllRanges();a.addRange(c)}}}});l("146",["ho","1c","l","30"],function(c,e,d,a){return{resume:function(b,
g){a.active().each(function(b){e.eq(b,g)||a.blur(b)});b.focus();a.focus(d.fromDom(b.document.body));c.refresh(b)}}});l("11a","b hy 145 146 7 2n 3y 30 21".split(" "),function(c,e,d,a,b,g,f,h,k){return{stubborn:function(b,n,p,r,q){var s=e(q),t=function(){a.resume(b,p)},l=f.bind(n,"keydown",function(a){c.contains(["input","textarea"],k.name(a.target()))||(s.closeMenus(void 0),t())});return{toReading:function(){d.input(g.body(),h.blur)},toEditing:t,onToolbarTouch:function(a){},destroy:function(){l.unbind()}}},
timid:function(c,d,e,f,g){return{toReading:function(){h.blur(e)},toEditing:function(){a.resume(c,e)},onToolbarTouch:function(){h.blur(e)},destroy:b.noop}}}});l("147",["t","58","4a","3y"],function(c,e,d,a){return{touch:function(b){var g=d.create({touchstart:e(["raw"]),touchend:e(["raw"])}),f=!1,h=c.none(),k=a.capture(b,"touchstart",function(d){f=!0;h=c.some(a.capture(b,"touchend",function(a){f=!1;g.trigger.touchend(a.raw());m()}));g.trigger.touchstart(d.raw())}),m=function(){h.each(function(a){a.unbind()})};
return{isTouching:function(){return f},events:g.registry,destroy:function(){k.unbind();m()}}}}});l("15z","84 145 143 2n 3o 33 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(a){a=f.documentElement(a);var c=d.resolve("unfocused-selection");return g.descendant(a,"."+c).bind(function(a){return b.absolute(a).top})};return{switchSelection:function(b,d,f){var g=f.isActive,h=!1;return{on:function(){g()||(h=!1,f.update(),d.save(),c.clearAll(b))},off:function(){g()&&!h&&(f.clear(),d.restore())},fakeOut:function(){h=
!0;e.input(a.body(),d.restore)}}},inView:function(a,b,c){return function(){return h(b).map(function(b){var c=a.dom().scrollTop;return 0<b()-c})}}}});l("160",[],function(){return{onScroll:function(c,e,d,a){var b=function(){c()||g()},g=function(){a.events.touchend.unbind(b);a.isTouching()?a.events.touchend.bind(b):(d().getOr(!0)?e.off:e.fakeOut)()};return{start:function(){a.events.touchend.unbind(b);e.on()},stop:g,destroy:function(){a.events.touchend.unbind(b)}}}}});l("148",["15z","160"],function(c,
e){return{toFake:c.switchSelection,inView:c.inView,onScroll:e.onScroll}});l("16w",["t","k"],function(c,e){return{findDevice:function(d,a){return e.findMap([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,
landscape:460}}],function(b){return d<=b.width&&a<=b.height?c.some(b.keyboard):c.none()}).getOr({portrait:a/5,landscape:d/4})}}});l("161",["115","16w","2p","5a","36"],function(c,e,d,a,b){var g=e.findDevice(b.screen.width,b.screen.height),f=function(d){d=a.get(d);var e=c.get().isPortrait(),f=e?g.portrait:g.landscape;return d-((e?b.screen.height:b.screen.width)-b.innerHeight>f?0:f)};return{getGreenzone:f,updatePadding:function(b,c){var e=f(c),e=a.get(c)-e;d.set(b,"padding-bottom",e+"px")}}});l("14c",
"b 3p 141 161 143 7 4o 1b 2p 5a 4h 1w e9 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q){var s=f.generate([{fixed:["element","offsetY"]},{scroller:["element","offsetY"]}]),t="data-"+b.resolve("position-y-fixed"),l="data-"+b.resolve("scrolling"),v="data-"+b.resolve("last-window-height"),w=function(a){return d.safeParse(a,t)},z=function(a){var b=w(a);return("true"===h.get(a,l)?s.scroller:s.fixed)(a,b)},x=function(a){var b=h.get(a,"style");k.setAll(a,{position:"absolute",top:"0px"});h.set(a,t,"0px");
return{restore:function(){h.set(a,"style",b||"");h.remove(a,t)}}},y=function(a,b,c){var d=h.get(c,"style");e.register(c);k.setAll(c,{position:"absolute",height:b+"px",width:"100%",top:a+"px"});h.set(c,t,a+"px");h.set(c,l,"true");return{restore:function(){e.deregister(c);h.set(c,"style",d||"");h.remove(c,t);h.remove(c,l)}}},A=function(a,b){var c=q.innerHeight;h.set(a,v,c+"px");return c-b};return{findFixtures:function(a){a=n.descendants(a,"["+t+"]");return c.map(a,z)},takeover:function(b,c,e){var f=
x(e),n=m.get(e),p=A(b,n),r=y(n,p,b),n=function(){var a=q.innerHeight,c=d.safeParse(b,v);return a>c},s=function(){var d=m.get(e),f=A(b,d);h.set(b,t,d+"px");k.set(b,"height",f+"px");a.updatePadding(c,b)};a.updatePadding(c,b);return{setViewportOffset:function(a){h.set(b,t,a+"px");s()},isExpanding:n,isShrinking:g.not(n),refresh:s,restore:function(){f.restore();r.restore()}}},getYFixedData:w}});l("162",["t","1u","2u","2v"],function(c,e,d,a){var b=function(a,b,d){return e.abs(a-b)<=d?c.none():a<b?c.some(a+
d):c.some(a-d)};return{create:function(){var c=null;return{animate:function(f,h,k,m,n,p){d(c);var r=function(a){d(c);n(a)};c=a(function(){var a=f();b(a,h,k).fold(function(){d(c);n(h)},function(b){m(b,r);var k=f();if(k!==b||e.abs(k-h)>e.abs(a-h))d(c),n(h)})},p)}}},adjust:b}});l("14a","3v 141 14c 162 143 7 1b 2p 1u e9 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=a.create(),r="data-"+b.resolve("last-scroll-top"),q=function(a){a=h.getRaw(a,"top").getOr(0);return m(a,10)},s=function(a){return m(a.dom().scrollTop,
10)},t=function(a,b){var c=b+d.getYFixedData(a)+"px";h.set(a,"top",c)};return{moveScrollAndTop:function(a,b,d){return c.nu(function(c){var e=g.curry(s,a);p.animate(e,b,15,function(b){a.dom().scrollTop=b;h.set(a,"top",q(a)+15+"px")},function(e){a.dom().scrollTop=b;h.set(a,"top",d+"px");c(b)},10)})},moveOnlyScroll:function(a,b){return c.nu(function(c){var d=g.curry(s,a);f.set(a,r,d());var h=k.abs(b-d()),h=k.ceil(h/10);p.animate(d,b,h,function(b,c){e.safeParse(a,r)!==a.dom().scrollTop?c(a.dom().scrollTop):
(a.dom().scrollTop=b,f.set(a,r,b))},function(d){a.dom().scrollTop=b;f.set(a,r,b);c(b)},10)})},moveOnlyTop:function(a,b){return c.nu(function(c){var d=g.curry(q,a),e=function(b){h.set(a,"top",b+"px")},f=k.abs(b-d()),f=k.ceil(f/10);p.animate(d,b,f,e,function(a){e(b);c(b)},10)})},moveWindowScroll:function(a,b,d){return c.nu(function(c){var e=function(c){t(a,c);t(b,c);n.scrollTo(0,c)};p.animate(function(){return n.pageYOffset},d,15,e,function(a){e(a);c(a)},10)})}}});l("149",["ho","161","14a","7","e9"],
function(c,e,d,a,b){return{scrollIntoView:function(b,f,h,k){var m=e.getGreenzone(f);b=a.curry(c.refresh,b);h>m||k>m?d.moveOnlyScroll(f,f.dom().scrollTop-m+k).get(b):0>h&&d.moveOnlyScroll(f,f.dom().scrollTop+h).get(b)}}});l("14b","b 3v 14a 14c 2p e9".split(" "),function(c,e,d,a,b,g){var f=function(a,c){return a.fold(function(a,d){b.set(a,"top",c+d+"px");return e.pure(d)},function(a,e){var f=c+e,h=b.getRaw(a,"top").getOr(e),h=f-g(h,10),h=a.dom().scrollTop+h;return d.moveScrollAndTop(a,h,f)})};return{updatePositions:function(b,
d){var g=a.findFixtures(b),g=c.map(g,function(a){return f(a,d)});return e.par(g)}}});l("14d","b 142 146 143 2o 4e 2p 3y l 2q 3c 2s 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){return function(q,s){var t=q.document,l=k.fromTag("div");b.add(l,a.resolve("unfocused-selections"));m.append(k.fromDom(t.documentElement),l);var v=h.bind(l,"touchstart",function(a){a.prevent();d.resume(q,s);z()}),w=function(b){var c=k.fromTag("span");g.add(c,[a.resolve("layer-editor"),a.resolve("unfocused-selection")]);
f.setAll(c,{left:b.left+"px",top:b.top+"px",width:b.width+"px",height:b.height+"px"});return c},z=function(){p.empty(l)};return{update:function(){z();var a=e.getRectangles(q),a=c.map(a,w);n.append(l,a)},isActive:function(){return 0<r.children(l).length},destroy:function(){v.unbind();p.remove(l)},clear:z}}});l("14e",["2m","7","4n"],function(c,e,d){return function(a){var b=d(c.pure({}));return{start:function(d){var f=c.nu(function(b){return a(d).get(b)});f.get(e.identity);b.set(f)},idle:function(a){b.get().get(function(){a()})}}}});
l("11b","147 115 148 142 149 14a 14b 14c 14d 14e 7 ae t 2n 2p 3y l 1u 2u 6e o e9 2v 3w 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,t,l,v,w,z,x,y,A,B,C){var D=function(b,c,d,e,h,k){var q=m(function(a){return g.moveWindowScroll(b,c,a)}),s=function(){var b=a.getRectangles(k);return r.from(b[0]).bind(function(a){var b=a.top-c.dom().scrollTop;return b>C.innerHeight+5||-5>b?r.some({top:n.constant(b),bottom:n.constant(b+a.height)}):r.none()})},w=p(function(){q.idle(function(){f.updatePositions(d,
e.pageYOffset).get(function(a){s().each(function(a){c.dom().scrollTop=c.dom().scrollTop+a.top()});q.start(0);h.refresh()})})},1E3),v=t.bind(l.fromDom(e),"scroll",function(){0>e.pageYOffset||w.throttle()});f.updatePositions(d,e.pageYOffset).get(n.identity);return{unbind:v.unbind}};return{setup:function(a){var f=a.cWin(),m=a.ceBody(),p=a.socket(),r=a.toolstrip(),w=a.toolbar(),v=a.contentElement(),x=a.cursor(),y=a.keyboardType();a=a.isScrolling();var z=h.takeover(p,m,r),A=y(f,q.body(),v,r,w),B=e.onChange();
B.events.ready.bind(z.refresh);B.onAdjustment(function(){z.refresh()});var P=t.bind(l.fromDom(C),"resize",function(){z.isExpanding()&&z.refresh()}),U=D(r,p,q.body(),C,z,f),Q=k(f,v),V=function(){Q.clear()},r=d.toFake(f,x,Q),m=d.inView(p,m,w),W=c.touch(l.fromDom(f)),Y=d.onScroll(a,r,m,W);return{toEditing:function(){A.toEditing();V()},toReading:function(){A.toReading()},onToolbarTouch:function(a){A.onToolbarTouch(a)},refreshSelection:function(){Q.isActive()&&Q.update()},clearSelection:V,highlightSelection:function(){Q.update()},
scrollIntoView:function(a,c){b.scrollIntoView(f,p,a,c)},updateToolbarPadding:n.noop,setViewportOffset:function(a){z.setViewportOffset(a);g.moveOnlyTop(p,a).get(n.identity)},syncHeight:function(){s.set(v,"height",v.dom().contentWindow.document.body.scrollHeight+"px")},selectionScrollStarted:function(){Y.start()},selectionScrollStopped:function(){Y.stop()},destroy:function(){z.restore();B.destroy();U.unbind();P.unbind();A.destroy();Y.destroy();W.destroy();Q.destroy()}}}}});l("14f",["143","1b"],function(c,
e){var d="data-"+c.resolve("horizontal-scroll"),a=function(a){var b;(b=0<a.dom().scrollTop)||(a.dom().scrollTop=1,b=0!==a.dom().scrollTop,a.dom().scrollTop=0);return b},b=function(a){var b;(b=0<a.dom().scrollLeft)||(a.dom().scrollLeft=1,b=0!==a.dom().scrollLeft,a.dom().scrollLeft=0);return b};return{markAsHorizontal:function(a){e.set(a,d,"true")},hasScroll:function(c){return"true"===e.get(c,d)?b:a}}});l("11c",["14f","7","t","3y","33"],function(c,e,d,a,b){var g=function(a){var b=a.dom().scrollTop,
c=a.dom().scrollHeight;a=a.dom().offsetHeight;return 0>=b?d.some(1):b+a>=c?d.some(c-a-1):d.none()},f=function(a){g(a).each(function(b){a.dom().scrollTop=b})},h=function(b,c){return a.bind(b,"touchstart",function(a){c(a.target()).each(f)})};return{fixEdges:f,exclusive:function(d,f){return a.bind(d,"touchmove",function(a){b.closest(a.target(),f).filter(c.hasScroll).fold(function(){a.raw().preventDefault()},e.noop)})},link:function(a,b){return h(a,e.constant(b))},ancestor:function(a,c){return h(a,function(a){return b.closest(a,
c)})},indirect:h,markAsHorizontal:function(a){c.markAsHorizontal(a)}}});l("qf",["87","l","2q","2s","2b"],function(c,e,d,a,b){var g=function(a){return e.fromText(c.zeroWidth(),a.dom())};return{runAndRemove:function(c,h){var k=b.owner(c),m=e.fromTag("span",k.dom());d.append(m,g(k));d.prepend(c,m);k=h(m);a.remove(m);return k},enrichAndRemove:function(c,e){var k=g(b.owner(c));d.append(c,k);var m=e(c);a.remove(k);return m}}});l("ij","qe 7 t d0 qf on 2w 3n 2n 2p 5a 3o 21 2b b4 2t e9".split(" "),function(c,
e,d,a,b,g,f,h,k,m,n,p,r,q,s,l,u){var v=f.immutable("left","top","width","height","direction","absolute"),w=function(b){return{position:e.constant(a.find(b)),width:e.constant(l.getOuter(b)),height:e.constant(n.getOuter(b))}},z=function(a){var b=m.get(a,"display");return{backup:function(){m.set(a,"display","inline-block")},restore:function(){m.set(a,"display",b)}}},x={backup:e.noop,restore:e.noop},y=function(a){return r.isElement(a.startContainer())?d.some(a.startContainer()):r.isElement(a.endContainer())?
d.some(a.endContainer()):q.parent(a.startContainer()).filter(r.isElement).orThunk(function(){return q.parent(a.endContainer()).filter(r.isElement)})},A=function(b,c){return y(c).fold(function(){return v(0,0,0,b.uiDirection(),h(0,0))},function(c){var d=a.find(c),e=l.get(c),f=n.get(c),g=p.absolute(c);return v(d.left(),d.top(),e,f,b.directionAt(c),g)})},B=function(a,c,d,e){return g.diagnose(a,d)(e,function(a){var e=s.isVisible(a)||"br"===r.name(a)?x:z(a);e.backup();var f;if(k.inBody(a)){var g=b.enrichAndRemove(a,
w);f=g.position();var h=g.width(),g=g.height(),m=c.directionAt(a);a=p.absolute(a);f=v(f.left(),f.top(),h,g,m,a)}else f=A(c,d);e.restore();return f})},C=function(a,e,f,g){var h=f.startContainer(),k=f.startOffset();if("body"===r.name(h)&&0===k){var n=f.startContainer();a=u(m.get(n,"padding-top"),10);g=u(m.get(n,"padding-left"),10);var q=b.runAndRemove(n,w),h=q.position(),k=q.width(),q=q.height();e=e.directionAt(n);n=p.absolute(n);f=c(v(h.left()+g,h.top()+a,k,q,e,n),d.some(f))}else f=B(a,e,f,g);return f},
D=function(a,b,c,d,e){b.focus();a=C(b.isRoot,a,c,e);a.cursor().each(function(a){b.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())});a=a.result();d(a)};return{insertAt:D,insertAtCursor:function(a,b,c,d){b.getSelection().each(function(e){D(a,b,e,c,d)})}}});l("11d",["7","3y","21"],function(c,e,d){return function(a){return function(b,g){var f=e.bind(a,"touchmove",b.move),h=e.bind(a,"touchend",b.drop),k=e.bind(a,"gesturestart",function(a){"img"===d.name(a.target())&&a.prevent()});
return{element:c.constant(a),start:c.noop,stop:c.noop,destroy:function(){f.unbind();h.unbind();k.unbind()}}}}});l("x4","b 3p 83 84 11a 11b hy 115 11c ae t 8f 7c ij 59 118 11d 2w 2o 1c 2p 3y l 30 5a 3o 33 2u 6e q 2v 3w 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,s,l,u,v,w,z,x,y,A,B,C,D,F,E,G,H,L,I,J){return function(G,I,M,O,S,P,U,Q){var V=[],W=P.toolbar.element(),Y=P.banners(),X=P.viewport(),Z=n.none(),ea=f(W),aa=null,R=r.api(),ga=n.none(),ja=e.event(X),fa=v.immutableBag("cWin ceBody socket toolstrip toolbar contentElement cursor keyboardType isScrolling".split(" "),
[]),ha=function(){R.run(function(a){a.highlightSelection()})},ia=function(){R.run(function(a){a.refreshSelection()})},ba=function(a){var b=D.absolute(a).top()-X.dom().scrollTop;R.run(function(c){c.scrollIntoView(b,b+C.get(a))})},$=function(){q.insertAtCursor(O,G,function(a){var b=a.absolute().top()-X.dom().scrollTop;R.run(function(c){c.scrollIntoView(b,b+a.height())})})},da=function(a){$();R.run(function(a){a.syncHeight()})},ca=function(a){var b=C.get(W);R.run(function(a){a.setViewportOffset(b)});
ia();da()},T=function(a){ba(a.element())},ka=m(da,300),ma=function(){ea.closeMenus()},na=function(){qa();var a=L(function(){0===J.pageYOffset&&(E(a),da())},100)},oa=function(){R.run(function(a){a.clearSelection()})},la=function(){oa();ka.throttle()},Ea=function(){R.run(function(a){a.toEditing()})},Fa=function(){R.run(function(a){a.toReading()})},pa=function(a){R.run(function(b){b.onToolbarTouch(a)})},qa=function(){(h.get().isPortrait()?w.remove:w.add)(P.element(),s.resolve("mobile-landscape"))},ya=
function(a){var b=x.get(a,"background-color");void 0!==b&&""!==b&&x.set(a,"-webkit-tap-highlight-color",b)},sa=function(b){var c=G.win().getOrDie(),e=function(e){B.focus(b);e=e.raw().changedTouches[0];d.find(c,e.pageX,e.pageY).each(function(b){a.set(c,b)})},f=G.doc().map(function(a){var c=u(a),c=l(a,b,c,da);ga=n.some(c);var d=A.fromDom(a.dom().documentElement);return[y.bind(a,"touchend",function(a){(z.eq(d,a.target())||z.eq(b,a.target()))&&e(a)})]}).getOr([]),g=[y.capture(W,"touchstart",function(a){ha();
pa(a)}),y.bind(b,"touchstart",oa),p.handle(b,Ba),y.bind(W,"touchmove",ea.closeMenus)];V=f.concat(g)},Ba=function(a){a.kill()};return{exit:function(){G.body().each(function(a){x.remove(Y,"display");x.set(P.viewport(),"overflow","hidden");Z=Z.bind(function(a){a.unbind();return n.none()});w.remove(W,s.resolve("mobile-show"));R.clear();B.blur(a);x.remove(a,"padding-top");c.each(V,function(a){a.unbind()});U.restore();G.events.keyup.unbind(la);G.events.domChanged.unbind(ka.throttle);G.events.scrollToCursor.unbind(ka.throttle);
G.events.scrollToElement.unbind(T);G.events.domChanged.unbind(ia);G.events.nodeChanged.unbind(ia);G.events.toEditing.unbind(Ea);G.events.toReading.unbind(Fa);aa.events.change.unbind(ma);aa.events.ready.unbind(na);P.toolbar.events.transitionend.unbind(ca);null!==aa&&aa.destroy()})},enter:function(a){G.body().each(function(a){G.win().each(function(c){aa=h.onChange();U.maximize();sa(a);B.focus(a);Z=n.some(k.exclusive(M,"."+e.scrollable()));x.getRaw(W,"overflow-x").is("auto")&&F.descendant(W,".ephox-chameleon-toolbar").each(function(a){k.markAsHorizontal(a);
e.register(a)});ya(a);qa();H.body.scrollTop=0;w.add(W,s.resolve("mobile-show"));P.toolbar.refresh();x.set(Y,"display","block");F.descendant(W,".ephox-chameleon-toolbar").each(function(d){R.set(g.setup(fa({cWin:c,ceBody:a,socket:X,toolstrip:W,toolbar:d,contentElement:G.element(),cursor:G.cursor(),keyboardType:b.stubborn,isScrolling:ja.isScrolling})))});G.events.keyup.bind(la);G.events.domChanged.bind(ka.throttle);G.events.scrollToCursor.bind(ka.throttle);G.events.scrollToElement.bind(T);G.events.domChanged.bind(ia);
G.events.nodeChanged.bind(ia);G.events.toEditing.bind(Ea);G.events.toReading.bind(Fa);aa.events.change.bind(ma);aa.events.ready.bind(na);P.toolbar.events.transitionend.bind(ca);da()})})},destroy:function(){ga.each(function(a){a.destroy()});Z.each(function(a){a.unbind()});ja.destroy()}}}});l("or","7 x3 x4 l 30 2g 2q 2b q".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n,p,r,q){var s=e(q.element(),m),l=a.fromDom(k),u=m.element(),v=c.constant(!0===r.fillscreen),w=d(m,n,l,p,u,q,s,v),z=function(b){var c=
h.children(b),d;if(!(d=0===c.length)){if(c=1===c.length)c=g.get(b),c=10===c.charCodeAt(0)&&10===c.charCodeAt(1);d=c}d&&(c=a.fromHtml("<p><br></p>"),f.append(b,c));w.enter()},x=function(a){f.append(q.element(),s.mask().element());s.mask().events.fullscreen.bind(function(a){w.enter()})},y=function(a){(v()?z:x)(a)};return{init:function(){q.socket(m)},loaded:function(){m.body().each(y)},restoreEditor:function(){m.body().each(b.blur);m.element().dom().focus();m.element().dom().blur();w.exit();b.focus(s.mask().element())},
destroy:function(){m.body().each(b.blur);w.destroy();s.destroy()}}}});l("ga",["7","oo","op","or"],function(c,e,d,a){return function(b,g,f,h){var k=h.toolbar.items;return{tabbed:function(c){var n=a(b,g,f,h,c),p=e();c=d.config({items:[["back"]].concat(k),contextual:[]},{back:{feature:p.ui(),command:"back",type:"general"}},{allowLocalImages:h.allowLocalImages});p.events.back.bind(function(){n.restoreEditor()});return{init:n.init,loaded:n.loaded,config:c,destroy:function(){n.destroy();p.destroy()}}},
full:c.die("mobile does not support fullscreen layout"),destroy:c.noop}}});l("gb",["7","op","or"],function(c,e,d){return function(a,b,g,f){var h=f.toolbar.items;return{tabbed:function(c){var m=d(a,b,g,f,c);c=e.config({items:h,contextual:[]},{},{allowLocalImages:f.allowLocalImages});return{init:m.init,loaded:m.loaded,config:c,destroy:function(){m.restoreEditor();m.destroy()}}},full:c.die("mobile does not support fullscreen layout"),destroy:c.noop}}});l("8r","c g7 g8 g9 ga gb".split(" "),function(c,
e,d,a,b,g){var f=c.detect();return function(c,k,m,n,p){return(f.deviceType.isiOS()?!0===p.fillscreen?g:b:f.deviceType.isAndroid()?!0===p.fillscreen?d:e:a)(c,k,m,p,n)}});l("os",["1","w8","7","t","o"],function(c,e,d,a,b){var g=function(){try{var b=c.localStorage;b.setItem("__storage_test__","__storage_test__");b.removeItem("__storage_test__");return a.some(b)}catch(d){return a.none()}}().fold(function(){var a={};return{getItem:function(b){return a[b]},setItem:function(b,c){a[b]=c}}},function(a){return{getItem:function(b){return a.getItem("ephox.textboxio."+
b)},setItem:function(b,c){a.setItem("ephox.textboxio."+b,c)}}}),f=function(b,c){return a.from(g.getItem(b)).map(e.parse).getOr(c)},h=function(a){return f(a,{})},k=function(a,b){var c=e.stringify(b);g.setItem(a,c)};return{read:h,readOr:f,write:k,access:function(a){return{read:d.curry(h,a),write:d.curry(k,a)}}}});l("gc",["os","4n"],function(c,e){return function(d,a){var b=c.readOr(d,a),g=e(b),f=function(a){g.set(a)};return{setAndCache:function(a){f(a);c.write(d,a)},set:f,get:function(){return g.get()}}}});
l("8s",["7","gc"],function(c,e){return function(d){var a=e("native.spelling",d.nativeSpelling),b=e("spelling",d.spelling),g=e("autocorrect",d.autocorrect),f=e("linkpreviews",d.linkpreviews),h=e("capitalisation",d.capitalisation);return{spelling:c.constant(b),nativeSpelling:c.constant(a),autocorrect:c.constant(g),linkpreviews:c.constant(f),capitalisation:c.constant(h),state:function(){return{nativeSpelling:a.get(),spelling:b.get(),autocorrect:g.get(),linkpreviews:f.get(),capitalisation:h.get()}},destroy:c.noop}}});
l("gd",["87","9s","7","l","2q"],function(c,e,d,a,b){var g=function(b,d,e){d.body().each(function(g){e.save();var n=a.fromHtml(c.zeroWidth());b(g,n);d.setSelection(n,0,n,0)})};return{upOrLeft:function(a,c,k){a.setRelativeSelection(e.before(k),e.before(k));a.getSelection().fold(function(){g(b.prepend,a,c)},d.noop)},right:function(a,c,k){a.setRelativeSelection(e.after(k),e.after(k));a.getSelection().fold(function(){g(b.append,a,c)},d.noop)}}});l("ge","8a t jq 1c 6x 2b".split(" "),function(c,e,d,a,b,
g){return{left:function(a,h,k){return a(h)&&c.isStart(h,k)?e.none():c.isStart(h,k)?d.before(h,a).filter(function(a){return!b.ancestor(a,"head")}):a(h)&&0<k?g.child(h,k-1):e.none()},right:function(a,h,k){return a(h)&&c.isEnd(h,k)?e.none():c.isEnd(h,k)?d.after(h,a).filter(function(c){return a(c)||b.ancestor(c,"body")}):a(h)&&k<c.getEnd(h)?g.child(h,k+1):e.none()},isFirstInContent:function(b,c){return b.body().map(function(b){b=g.children(b);return a.eq(b[0],c)}).getOr(!1)},isLastInContent:function(b,
c){return b.body().map(function(b){b=g.children(b);return 0<b.length&&a.eq(b[b.length-1],c)}).getOr(!1)}}});l("gf",["b","t"],function(c,e){var d=function(a,c){return a.getSelection().bind(function(d){return d.collapsed()?c(a.isRoot,d.startContainer(),d.startOffset()):e.none()})},a=function(a,d){return c.foldr(a,function(a,b){return b(d).or(a)},e.none())};return{get:function(b,c,e){return d(b,e).bind(function(b){return a(c,b)})}}});l("8t",["gd","ge","gf","2s"],function(c,e,d,a){return function(b,g,
f){var h=g.all();h.on();var k=[];h.events.backspace.bind(function(){d.get(b,k,e.left).each(a.remove)});g=function(a){var g=a.stopper();d.get(b,k,e.left).each(function(a){g();c.upOrLeft(b,f,a)})};h.events.right.bind(function(a){var g=a.stopper();d.get(b,k,e.right).each(function(a){g();c.right(b,f,a)})});h.events.left.bind(g);h.events.up.bind(g);return{registerSkip:function(a){k.push(a)},destroy:function(){h.destroy()}}}});l("8u",["7","t","co","9a"],function(c,e,d,a){return function(b,g){(g.error?e.some(g.error):
e.none()).map(function(b){return d(a.get(b.name,[b]))}).each(b.displayBanner);return{destroy:c.noop}}});l("ow",["6u"],function(c){return{resolve:c.create("ephox-darwin").resolve}});l("gg",["ow","7"],function(c,e){var d=c.resolve("selected"),a="."+d,b=c.resolve("first-selected"),g="."+b,f=c.resolve("last-selected"),h="."+f;return{selected:e.constant(d),selectedSelector:e.constant(a),firstSelected:e.constant(b),firstSelectedSelector:e.constant(g),lastSelected:e.constant(f),lastSelectedSelector:e.constant(h)}});
l("ox",["2w"],function(c){return{response:c.immutable("selection","kill")}});l("gj",[],function(){var c=function(a){return function(b){return b===a}},e=c(38),d=c(40);return{ltr:{isBackward:c(37),isForward:c(39)},rtl:{isBackward:c(39),isForward:c(37)},isUp:e,isDown:d,isNavigation:function(a){return 37<=a&&40>=a}}});l("oy",["83","ez","84"],function(c,e,d){return function(a){return{getRect:function(a){return a.dom().getBoundingClientRect()},getRangedRect:function(b,c,e,h){return d.rectangleAt(a,b,c,
e,h)},getSelection:function(){return d.get(a)},fromSitus:function(b){return d.deriveExact(a,b)},situsFromPoint:function(b,d){return c.find(a,b,d)},clearSelection:function(){d.clearAll(a)},setSelection:function(b){d.setExact(a,b.start(),b.soffset(),b.finish(),b.foffset())},setRelativeSelection:function(b,c){d.set(a,e.write(b,c))},selectContents:function(b){d.selectElementContents(a,b)},getInnerHeight:function(){return a.innerHeight},getScrollY:function(){return a.scrollY},scrollBy:function(b,c){a.scrollBy(b,
c)}}}});l("11e",["7","t","r8"],function(c,e,d){var a=function(a,c){return c.column()>=a.startCol()&&c.column()+c.colspan()-1<=a.finishCol()&&c.row()>=a.startRow()&&c.row()+c.rowspan()-1<=a.finishRow()};return{inSelection:function(a,c){var d=c.column(),e=c.column()+c.colspan()-1,k=c.row(),m=c.row()+c.rowspan()-1;return d<=a.finishCol()&&e>=a.startCol()&&k<=a.finishRow()&&m>=a.startRow()},isWithin:a,isRectangular:function(b,g){for(var f=!0,h=c.curry(a,g),k=g.startRow();k<=g.finishRow();k++)for(var m=
g.startCol();m<=g.finishCol();m++)f=f&&d.getAt(b,k,m).exists(h);return f?e.some(g):e.none()}}});l("x6",["go","r8","11e","1c","1u"],function(c,e,d,a,b){var g=function(d,g,k){g=e.findItem(d,g,a.eq);var m=e.findItem(d,k,a.eq);return g.bind(function(a){return m.map(function(d){return c.bounds(b.min(a.row(),d.row()),b.min(a.column(),d.column()),b.max(a.row()+a.rowspan()-1,d.row()+d.rowspan()-1),b.max(a.column()+a.colspan()-1,d.column()+d.colspan()-1))})})};return{getAnyBox:g,getBox:function(a,b,c){return g(a,
b,c).bind(function(b){return d.isRectangular(a,b)})}}});l("x5","b 7 r8 11e x6 1c".split(" "),function(c,e,d,a,b,g){return{moveBy:function(a,b,c,e){return d.findItem(a,b,g.eq).bind(function(b){var g=0<c?b.row()+b.rowspan()-1:b.row();b=0<e?b.column()+b.colspan()-1:b.column();return d.getAt(a,g+c,b+e).map(function(a){return a.element()})})},intercepts:function(f,g,k){return b.getAnyBox(f,g,k).map(function(b){b=d.filterItems(f,e.curry(a.inSelection,b));return c.map(b,function(a){return a.element()})})},
parentCell:function(a,b){return d.findItem(a,b,function(a,b){return g.contains(b,a)}).bind(function(a){return a.element()})}}});l("p4","bq r7 r8 x5 x6 1c".split(" "),function(c,e,d,a,b,g){var f=function(a){a=e.fromTable(a);return d.generate(a)};return{moveBy:function(b,d,e){return c.table(b).bind(function(c){c=f(c);return a.moveBy(c,b,d,e)})},intercepts:function(b,c,d){b=f(b);return a.intercepts(b,c,d)},nestedIntercepts:function(b,c,d,e,p){var r=f(b);c=g.eq(b,d)?c:a.parentCell(r,c);b=g.eq(b,p)?e:
a.parentCell(r,e);return a.intercepts(r,c,b)},getBox:function(a,c,d){a=f(a);return b.getBox(a,c,d)}}});l("p3","b 7 t gn p4 1c 4h 33 m".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b){return h.ancestor(a,"table")},n=function(c,e,f){return g.eq(c,e)?d.some([c]):m(c,f).bind(function(d){return m(e,f).bind(function(k){return g.eq(d,k)?b.intercepts(d,c,e):g.contains(d,k)?b.nestedIntercepts(d,c,d,e,k):g.contains(k,d)?b.nestedIntercepts(k,c,d,e,k):a.ancestors(c,e).shared().bind(function(a){return h.closest(a,
"table",f).bind(function(a){return b.nestedIntercepts(a,c,d,e,k)})})})})},p=function(a,b){var e=c.find(a,function(a){return k.is(a,b)});return d.from(e)},r=function(a,b){return h.ancestor(a,"table").bind(function(c){return h.descendant(c,b).bind(function(b){return n(b,a).map(function(c){return{boxes:e.constant(c),start:e.constant(b),finish:e.constant(a)}})})})};return{identify:n,retrieve:function(a,b){var c=f.descendants(a,b);return 0<c.length?d.some(c):d.none()},shiftSelection:function(a,c,d,e,f){return p(a,
f).bind(function(a){return b.moveBy(a,c,d).bind(function(a){return r(a,e)})})},getEdges:function(b,c,d){return h.descendant(b,c).bind(function(c){return h.descendant(b,d).bind(function(b){return a.sharedOne(m,[c,b]).map(function(a){return{first:e.constant(c),last:e.constant(b),table:e.constant(a)}})})})}}});l("oz","ox p3 ez 9s 84 8a t 1c 33".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(b,k,m,q,s){return!h.eq(m,q)&&(k=e.identify(m,q,k).getOr([]),0<k.length)?(s(b,k,m,q),f.some(c.response(f.some(d.write(a.on(m,
0),a.on(m,g.getEnd(m)))),!0))):f.none()};return{sync:function(a,c,d,e,g,h,l){return b.isCollapsed(d,e,g,h)?f.none():k.closest(d,"td,th",c).bind(function(b){return k.closest(g,"td,th",c).bind(function(d){return m(a,c,b,d,l)})})},detect:m,update:function(a,b,c,d,f){return e.shiftSelection(d,a,b,f.firstSelectedSelector(),f.lastSelectedSelector()).map(function(a){f.clear(c);f.selectRange(c,a.boxes(),a.start(),a.finish());return a.boxes()})}}});l("11f",["2w"],function(c){var e=c.immutableBag(["left","top",
"right","bottom"],[]);return{nu:e,moveUp:function(c,a){return e({left:c.left(),top:c.top()-a,right:c.right(),bottom:c.bottom()-a})},moveDown:function(c,a){return e({left:c.left(),top:c.top()+a,right:c.right(),bottom:c.bottom()+a})},moveBottomTo:function(c,a){var b=c.bottom()-c.top();return e({left:c.left(),top:a-b,right:c.right(),bottom:a})},moveTopTo:function(c,a){var b=c.bottom()-c.top();return e({left:c.left(),top:a,right:c.right(),bottom:a+b})},getTop:function(c){return c.top()},getBottom:function(c){return c.bottom()},
translate:function(c,a,b){return e({left:c.left()+a,top:c.top()+b,right:c.right()+a,bottom:c.bottom()+b})},toString:function(c){return"("+c.left()+", "+c.top()+") -> ("+c.right()+", "+c.bottom()+")"}}});l("11g",["11f","8a","t","21"],function(c,e,d,a){var b=function(a){return c.nu({left:a.left,top:a.top,right:a.right,bottom:a.bottom})};return{getBoxAt:function(c,f,h){return a.isElement(f)?d.some(c.getRect(f)).map(b):a.isText(f)?(c=0<=h&&h<e.getEnd(f)?c.getRangedRect(f,h,f,h+1):0<h?c.getRangedRect(f,
h-1,f,h):d.none(),c.map(b)):d.none()},getEntireBox:function(c,f){return a.isElement(f)?d.some(c.getRect(f)).map(b):a.isText(f)?c.getRangedRect(f,0,f,e.getEnd(f)).map(b):d.none()}}});l("x8","11f 11g 7 t jq fo 4o 4j 1u".split(" "),function(c,e,d,a,b,g,f,h,k){var m=f.generate([{none:[]},{retry:["caret"]}]),n=function(a,b,c){return h.closest(b,g.isBlock).fold(d.constant(!1),function(b){return e.getEntireBox(a,b).exists(function(a){return c.left()<a.left()||1>k.abs(a.right()-c.left())||c.left()>a.right()})})};
f={point:c.getBottom,adjuster:function(a,b,d,e,f){var g=c.moveDown(f,5);return 1>k.abs(d.bottom()-e.bottom())?m.retry(g):d.top()>f.bottom()?m.retry(g):d.top()===f.bottom()?m.retry(c.moveDown(f,1)):n(a,b,f)?m.retry(c.translate(g,5,0)):m.none()},move:c.moveDown,gather:b.after};var p=function(b,c,d,f,g){return 0===g?a.some(f):b.situsFromPoint(f.left(),c.point(f)).bind(function(h){return h.start().fold(a.none,function(h,k){return e.getEntireBox(b,h,k).bind(function(e){return c.adjuster(b,h,e,d,f).fold(a.none,
function(a){return p(b,c,d,a,g-1)})}).orThunk(function(){return a.some(f)})},a.none)})},r=function(b,c,d){return b.point(c)>d.getInnerHeight()?a.some(b.point(c)-d.getInnerHeight()):0>b.point(c)?a.some(-b.point(c)):a.none()},q=function(a,b,c){var d=a.move(c,5),e=p(b,a,c,d,100).getOr(d);return r(a,e,b).fold(function(){return b.situsFromPoint(e.left(),a.point(e))},function(c){b.scrollBy(0,c);return b.situsFromPoint(e.left(),a.point(e)-c)})};return{tryUp:d.curry(q,{point:c.getTop,adjuster:function(a,
b,d,e,f){var g=c.moveUp(f,5);return 1>k.abs(d.top()-e.top())?m.retry(g):d.bottom()<f.top()?m.retry(g):d.bottom()===f.top()?m.retry(c.moveUp(f,1)):n(a,b,f)?m.retry(c.translate(g,5,0)):m.none()},move:c.moveUp,gather:b.before}),tryDown:d.curry(q,f),ieTryUp:function(a,b){return a.situsFromPoint(b.left(),b.top()-5)},ieTryDown:function(a,b){return a.situsFromPoint(b.left(),b.bottom()+5)},getJumpSize:d.constant(5)}});l("x9",["8a","gn","4o","1c","33"],function(c,e,d,a,b){var g=d.generate([{none:["message"]},
{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),f=function(a){return b.closest(a,"tr")};return{verify:function(d,k,m,n,p,r,q){return b.closest(n,"td,th",q).bind(function(m){return b.closest(k,"td,th",q).map(function(b){return a.eq(m,b)?a.eq(n,m)&&c.getEnd(m)===p?r(b):g.none("in same cell"):e.sharedOne(f,[m,b]).fold(function(){var a=d.getRect(b),c=d.getRect(m);return c.right>a.left&&c.left<a.right?g.success():r(b)},function(a){return r(b)})})}).getOr(g.none("default"))},cata:function(a,b,
c,d,e){return a.fold(b,c,d,e)},adt:g}});l("14g","b 7 t 2w 1c 4j 4h 33 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=a.immutable("ancestor","descendants","element","index"),n=a.immutable("parent","children","element","index"),p=function(a,f){var g=c.findIndex(a,e.curry(b.eq,f));return-1<g?d.some(g):d.none()};return{childOf:function(a,c){return g.closest(a,function(a){return k.parent(a).exists(function(a){return b.eq(a,c)})})},indexOf:p,indexInParent:function(a){return k.parent(a).bind(function(b){var c=
k.children(b);return p(c,a).map(function(d){return n(b,c,a,d)})})},selectorsInParent:function(a,b){return k.parent(a).bind(function(c){var d=f.children(c,b);return p(d,a).map(function(b){return n(c,d,a,b)})})},descendantsInAncestor:function(a,b,c){return h.closest(a,b).bind(function(b){var d=f.descendants(b,c);return p(d,a).map(function(c){return m(b,d,a,c)})})}}});l("11h","x9 ez 9s 8a t fg 14g 21 b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(a){return"br"===h.name(a)},p=function(a,
c,d){return c(a,d).bind(function(a){return h.isText(a)&&0===k.get(a).trim().length?p(a,c,d):b.some(a)})},r=function(a,b,c){return c.traverse(b).orThunk(function(){return p(b,c.gather,a)}).map(c.relative)},q=function(a,b){return m.child(a,b).filter(n).orThunk(function(){return m.child(a,b-1).filter(n)})},l=function(a,b,c,e){return q(b,c).bind(function(b){return e.traverse(b).fold(function(){return p(b,e.gather,a).map(e.relative)},function(a){return f.indexInParent(a).map(function(a){return d.on(a.parent(),
a.index())})})})};return{tryBr:function(a,b,c,d){return(n(b)?r(a,b,d):l(a,b,c,d)).map(function(a){return e.write(a,a)})},process:function(d){return c.cata(d,function(a){return b.none("BR ADT: none")},function(){return b.none()},function(a){return b.some(g.point(a,0))},function(c){return b.some(g.point(c,a.getEnd(c)))})}}});l("x7","11f 11g x8 x9 11h c 8a t fg 1c 21".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=g.detect(),r=function(c,d,e){return c.getSelection().bind(function(f){return b.tryBr(d,
f.finish(),f.foffset(),e).fold(function(){return h.some(k.point(f.finish(),f.foffset()))},function(g){g=c.fromSitus(g);g=a.verify(c,f.finish(),f.foffset(),g.finish(),g.foffset(),e.failure,d);return b.process(g)})})},q=function(b,d,e,g,k,n){return 0===n?h.none():u(b,d,e,g,k).bind(function(p){var r=b.fromSitus(p),r=a.verify(b,e,g,r.finish(),r.foffset(),k.failure,d);return a.cata(r,function(){return h.none()},function(){return h.some(p)},function(a){return m.eq(e,a)&&0===g?l(b,e,g,c.moveUp,k):q(b,d,
a,0,k,n-1)},function(a){return m.eq(e,a)&&g===f.getEnd(a)?l(b,e,g,c.moveDown,k):q(b,d,a,f.getEnd(a),k,n-1)})})},l=function(a,b,c,f,g){return e.getBoxAt(a,b,c).bind(function(b){return t(a,g,f(b,d.getJumpSize()))})},t=function(a,b,c){return p.browser.isChrome()||p.browser.isSafari()||p.browser.isFirefox()||p.browser.isSpartan()?b.otherRetry(a,c):p.browser.isIE()?b.ieRetry(a,c):h.none()},u=function(a,b,c,d,f){return e.getBoxAt(a,c,d).bind(function(b){return t(a,f,b)})};return{handle:function(a,b,c){return r(a,
b,c).bind(function(d){return q(a,b,d.element(),d.offset(),c,20).map(a.fromSitus)})}}});l("p0","ox oz x7 c ez 9s 7 t 1c 37 33 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var r=a.detect(),q=function(a,b){return m.ancestor(a,function(a){return p.parent(a).exists(function(a){return k.eq(a,b)})})},l=function(a,b,c,e,g){return n.closest(e,"td,th",b).bind(function(e){return n.closest(e,"table",b).bind(function(k){return q(g,k)?d.handle(a,b,c).bind(function(a){return n.closest(a.finish(),"td,th",b).map(function(b){return{start:f.constant(e),
finish:f.constant(b),range:f.constant(a)}})}):h.none()})})};return{navigate:function(a,d,e,f,k){return r.browser.isIE()?h.none():l(a,d,e,f,k).map(function(a){a=a.range();return c.response(h.some(b.write(g.on(a.start(),a.soffset()),g.on(a.finish(),a.foffset()))),!0)})},select:function(a,b,c,d,f,g,h){return l(a,c,d,f,g).bind(function(a){return e.detect(b,c,a.start(),a.finish(),h)})}}});l("p1",["p3","t","1c","33"],function(c,e,d,a){var b=function(b,c){return a.closest(b,"td,th",c)};return function(a,
f,h,k){var m=e.none(),n=function(){m=e.none()};return{mousedown:function(a){k.clear(f);m=b(a.target(),h)},mouseover:function(e){m.each(function(m){k.clear(f);b(e.target(),h).each(function(b){var e=c.identify(m,b,h).getOr([]);if(1<e.length||1===e.length&&!d.eq(m,b))k.selectRange(f,e,m,b),a.selectContents(b)})})},mouseup:function(){m.each(n)}}}});l("p2",["x8","x9","9s","jq","2b"],function(c,e,d,a,b){return{down:{traverse:b.nextSibling,gather:a.after,relative:d.before,otherRetry:c.tryDown,ieRetry:c.ieTryDown,
failure:e.adt.failedDown},up:{traverse:b.prevSibling,gather:a.before,relative:d.before,otherRetry:c.tryUp,ieRetry:c.ieTryUp,failure:e.adt.failedUp}}});l("gh","ox gj oy oz p0 p1 p2 p3 9s 7 t k 2w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var q=r.immutable("rows","cols");return{mouse:function(a,b,c,e){a=d(a);b=g(a,b,c,e);return{mousedown:b.mousedown,mouseover:b.mouseover,mouseup:b.mouseup}},keyboard:function(g,r,l,v){var w=d(g),z=function(){v.clear(r);return n.none()};return{keydown:function(d,
g,s,B,C,D){var F=d.raw().which,E=!0===d.raw().shiftKey;return h.retrieve(r,v.selectedSelector()).fold(function(){return e.isDown(F)&&E?m.curry(b.select,w,r,l,f.down,B,g,v.selectRange):e.isUp(F)&&E?m.curry(b.select,w,r,l,f.up,B,g,v.selectRange):e.isDown(F)?m.curry(b.navigate,w,l,f.down,B,g):e.isUp(F)?m.curry(b.navigate,w,l,f.up,B,g):n.none},function(b){var d=function(d){return function(){return p.findMap(d,function(c){return a.update(c.rows(),c.cols(),r,b,v)}).fold(function(){return h.getEdges(r,v.firstSelectedSelector(),
v.lastSelectedSelector()).map(function(a){var b=e.isDown(F)||D.isForward(F)?k.after:k.before;w.setRelativeSelection(k.on(a.first(),0),b(a.table()));v.clear(r);return c.response(n.none(),!0)})},function(a){return n.some(c.response(n.none(),!0))})}};return e.isDown(F)&&E?d([q(1,0)]):e.isUp(F)&&E?d([q(-1,0)]):D.isBackward(F)&&E?d([q(0,-1),q(-1,0)]):D.isForward(F)&&E?d([q(0,1),q(1,0)]):e.isNavigation(F)&&!1===E?z:n.none})()},keyup:function(b,c,d,f,g){return h.retrieve(r,v.selectedSelector()).fold(function(){var h=
b.raw().which;return!0===b.raw().shiftKey===!1?n.none():e.isNavigation(h)?a.sync(r,l,c,d,f,g,v.selectRange):n.none()},n.none)}}}}});l("gi",["b","1b","2o","6v","4h"],function(c,e,d,a,b){return{byClass:function(e){var f=a.addClass(e.selected()),h=a.removeClasses([e.selected(),e.lastSelected(),e.firstSelected()]),k=function(a){a=b.descendants(a,e.selectedSelector());c.each(a,h)};return{clear:k,selectRange:function(a,b,h,r){k(a);c.each(b,f);d.add(h,e.firstSelected());d.add(r,e.lastSelected())},selectedSelector:e.selectedSelector,
firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},byAttr:function(a){var d=function(b){e.remove(b,a.selected());e.remove(b,a.firstSelected());e.remove(b,a.lastSelected())},h=function(b){e.set(b,a.selected(),"1")},k=function(e){e=b.descendants(e,a.selectedSelector());c.each(e,d)};return{clear:k,selectRange:function(b,d,f,r){k(b);c.each(d,h);e.set(f,a.firstSelected(),"1");e.set(r,a.lastSelected(),"1")},selectedSelector:a.selectedSelector,firstSelectedSelector:a.firstSelectedSelector,
lastSelectedSelector:a.lastSelectedSelector}}}});l("gk",["p3","t","p4","1c","33"],function(c,e,d,a,b){return{retrieve:function(a,b){return c.retrieve(a,b)},retrieveBox:function(g,f,h){return c.getEdges(g,f,h).bind(function(c){var f=function(b){return a.eq(g,b)},h=b.ancestor(c.first(),"thead,tfoot,tbody,table",f),p=b.ancestor(c.last(),"thead,tfoot,tbody,table",f);return h.bind(function(b){return p.bind(function(f){return a.eq(b,f)?d.getBox(c.table(),c.first(),c.last()):e.none()})})})}}});l("gl",["b",
"gg","6v"],function(c,e,d){return{configure:function(a){c.each([a.output(),a.internal()],function(b){var g=[e.lastSelected(),e.firstSelected(),e.selected()],f=c.map(g,function(a){return"."+a}).join(",");a.addSelector(b,f,function(a){c.each(a,d.removeClasses(g))})})}}});l("gm","k2 8a jo t fg fh jq fo p5 1c e5 21 4j b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,l){return function(t){var u=function(a){return!t.isRoot(a)&&(k.isBlock(a)||"li"===p.name(a))},v=function(a){return p.isText(a)&&0===
q.get(a).trim().length},w=function(a,c,d,e){return r.closest(a,function(a){return l.parent(a).exists(t.isRoot)},t.isRoot).fold(function(){return b.point(a,c)},function(f){return d(f,a,c)?e(f):b.point(a,c)})},z=function(a,c){var g=function(d){return f.before(d,t.isRoot).fold(function(){return b.point(a,c)},function(a){return v(a)?g(a):b.point(a,e.getEnd(a))})};return r.closest(a,function(a){return u(a)&&l.prevSibling(a).isSome()},t.isRoot).fold(function(){return w(a,c,d.isAtLeftEdge,g)},function(e){return u(a)||
d.isAtLeftEdge(e,a,c)?g(e):b.point(a,c)})},x=function(a,c){var e=function(d){return f.after(d,t.isRoot).fold(function(){return b.point(a,c)},function(a){return v(a)?e(a):b.point(a,0)})};return r.closest(a,function(a){return u(a)&&l.nextSibling(a).isSome()},t.isRoot).fold(function(){return w(a,c,d.isAtRightEdge,e)},function(f){return u(a)||d.isAtRightEdge(f,a,c)?e(f):b.point(a,c)})};return{getSelection:function(d){return d.getSelection().bind(function(d){var f;f=d.startContainer();var k=d.endContainer();
m.eq(f,k)?(k=l.child(f,d.startOffset()),f=l.child(f,d.endOffset()),f=k.filter(h.isList).isSome()||f.filter(h.isList).isSome()):f=!0;if(f){if(n.after(d.startContainer(),d.startOffset(),d.endContainer(),d.endOffset()))return f=g.toLeaf(d.startContainer(),d.startOffset()),d=g.toLeaf(d.endContainer(),d.endOffset()),f=e.isStart(f.element(),f.offset())?z(f.element(),f.offset()):b.point(f.element(),f.offset()),d=e.isEnd(d.element(),d.offset())?x(d.element(),d.offset()):b.point(d.element(),d.offset()),a.some(c(f.element(),
f.offset(),d.element(),d.offset()));f=g.toLeaf(d.startContainer(),d.startOffset());d=g.toLeaf(d.endContainer(),d.endOffset());f=e.isEnd(f.element(),f.offset())?x(f.element(),f.offset()):b.point(f.element(),f.offset());d=e.isStart(d.element(),d.offset())?z(d.element(),d.offset()):b.point(d.element(),d.offset());return a.some(c(f.element(),f.offset(),d.element(),d.offset()))}return a.some(d)})}}}});l("gq",["50"],function(c){var e=function(a){return 0===a.button},d=function(a,b){return{bind:function(d,
e){return c.bind(d,a,b,e)}}};return{realClick:d("click",function(a){return 6===a.mozInputSource||0===a.mozInputSource?!1:void 0!==a.isTrusted&&!0!==a.isTrusted?!1:!0}),leftDown:d("mousedown",e),leftPressedOver:d("mouseover",function(a){return void 0===a.buttons?!0:0!==(a.buttons&1)}),leftUp:d("mouseup",e)}});l("8v","b gg gh gi gj gk c 8a 7 t 7o gl gm 58 4a gn 4n bq 3y gq 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,q,l,t,u,v,w,z,x){var y=f.detect();return function(f,B,C){p.configure(B);var D=
r(C),F=l.create({beforeScan:q([]),afterScan:q([])}),E=a.byClass(e);B=function(){C.body().each(function(a){C.getSelection().each(function(b){t.sharedOne(v.table,[b.startContainer(),b.endContainer()]).fold(function(){E.clear(a)},k.noop)})})};(y.browser.isChrome()||y.browser.isSafari())&&C.events.contextmenu.bind(B);C.events.nodeChanged.bind(B);var G=u([]);C.runOrOnLoaded(function(a){var c=x.defaultView(a).dom(),e=d.mouse(c,a,C.isRoot,E),g=d.keyboard(c,a,C.isRoot,E);G.set([z.leftDown.bind(a,e.mousedown),
z.leftPressedOver.bind(a,e.mouseover),z.leftUp.bind(a,e.mouseup),w.bind(a,"keyup",function(a){a.raw().shiftKey&&b.isNavigation(a.raw().which)&&C.getSelection().each(function(b){g.keyup(a,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset()).each(function(b){h(a,b)})},k.noop)}),w.bind(a,"keydown",function(a){C.getSelection().each(function(c){F.trigger.beforeScan();var d=f.directionAt(c.endContainer()).isRtl()?b.rtl:b.ltr;g.keydown(a,c.startContainer(),c.startOffset(),c.endContainer(),
c.endOffset(),d).each(function(b){h(a,b)});F.trigger.afterScan()})})]);var h=function(a,b){b.kill()&&a.kill();b.selection().each(function(a){C.setRelativeSelection(a.start(),a.finish())})}});var H=function(a){return{win:a.win,doc:a.doc,execCommand:a.execCommand,getSelection:function(){return D.getSelection(a)},setSelection:a.setSelection,setRelativeSelection:a.setRelativeSelection,focus:a.focus}},L=function(a,b){return{doc:b.doc,win:b.win,execCommand:b.execCommand,focus:b.focus,setSelection:k.noop,
setRelativeSelection:k.noop,getSelection:function(){return m.some(I(a))}}},I=function(a){return{startContainer:k.constant(a),startOffset:k.constant(0),endContainer:k.constant(a),endOffset:k.constant(h.getEnd(a))}};return{get:function(){return C.on(function(a){return C.body().fold(n.none,function(b){return g.retrieve(b,e.selectedSelector()).fold(function(){return C.getSelection().fold(n.none,function(b){return n.single(b,H(a))})},function(b){var d=c.map(b,function(b){return L(b,a)});return n.multiple(b,
d)})})}).getOrThunk(n.none)},surround:I,events:F.registry,destroy:function(){var a=G.get();c.each(a,function(a){a.unbind()})}}}});l("gr","b 6 om 7 3y l".split(" "),function(c,e,d,a,b,g){return function(f){f=e.merge({scopes:[g.fromDom(document)],shortcuts:[],swallow:!1},f);var h=d(f),k=[],m=[];c.each(f.scopes,function(a){k.push(b.bind(a,"keydown",h.keydown).unbind);m.push(b.bind(a,"keypress",h.keypress).unbind)});return{off:h.off,on:h.on,destroy:function(){c.each(k,a.apply);c.each(m,a.apply)},events:h.events,
swallowShortcuts:h.swallowShortcuts,yieldShortcuts:h.yieldShortcuts,swallowChars:h.swallowChars,yieldChars:h.yieldChars,swallowKeys:h.swallowKeys,yieldKeys:h.yieldKeys}}});l("8w","b c gr ar 7 t k 58 4a 2w".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(b){var c=e.detect(),d=c.os.isOSX(),f=c.os.isLinux(),g=d?a.META():a.CTRL(),c=[[g,"Z"]],h=d?[[a.META(),a.SHIFT(),"Z"]]:f?[[a.CTRL(),"Y"],[a.CTRL(),a.SHIFT(),"Z"]]:[[a.CTRL(),"Y"]],k=[[a.SHIFT(),121]],n=d?[[a.ALT(),121]]:[[121]],p=[[g,a.SHIFT(),
"F"]],f=d?[[a.META(),a.ALT(),"U"]]:f?[[a.CTRL(),a.ALT(),"U"]]:[[a.CTRL(),a.SHIFT(),"U"]],d=d?[[a.CTRL(),a.ALT(),"H"]]:[[a.CTRL(),a.SHIFT(),"H"]],l=[[g,"B"]],A=[[g,"I"]],B=[[g,"U"]],C=[[g,221],[g,"M"]],D=[[g,219],[g,a.SHIFT(),"M"]],F=[[g,a.SHIFT(),"9"]],E=[[g,"K"]],g=[[g,"F"]],G=m.immutable("keys","trigger");return{undo:G(c,b.trigger.undo),redo:G(h,b.trigger.redo),context:G(k,b.trigger.context),toolbar:G(n,b.trigger.toolbar),bold:G(l,b.trigger.bold),italic:G(A,b.trigger.italic),underline:G(B,b.trigger.underline),
indent:G(C,b.trigger.indent),outdent:G(D,b.trigger.outdent),link:G(E,b.trigger.link),search:G(g,b.trigger.search),blockquote:G(F,b.trigger.blockquote),help:G(d,b.trigger.help),fullscreen:G(p,b.trigger.fullscreen),plaincode:G(f,b.trigger.plaincode)}},p=function(a,b){return function(d){return c.contains(a,d)?g.some(b):g.none()}};return function(a,e){var m=k.create({undo:h([]),redo:h([]),context:h([]),toolbar:h([]),plaincode:h([]),bold:h([]),italic:h([]),underline:h([]),indent:h([]),outdent:h([]),link:h([]),
blockquote:h([]),search:h([]),help:h([]),fullscreen:h([])}),l=n(m),u=[l.undo,l.redo,l.context,l.toolbar],v=[l.plaincode,l.bold,l.italic,l.underline,l.indent,l.outdent,l.link,l.search,l.blockquote,l.help,l.fullscreen],u=(l=!0===e.features)?u.concat(v):u,w=c.bind(u,function(a){return a.keys()}),z=c.map(u,function(a){return p(a.keys(),a.trigger())}),x=g.none();a.onCanvas(function(a){a=d({scopes:[a],shortcuts:w});x=g.some(a);a.swallowShortcuts(w);a.events.command.bind(function(a){var c=a.command();f.findMap(z,
function(a){return a(c)}).each(b.apply)});a.on()});return{isHelpShortcutEnabled:b.constant(l),events:m.registry,destroy:function(){x.each(function(a){a.destroy()})}}}});l("p6",["b","t","2w"],function(c,e,d){var a=function(a){return function(b){return b.key()===a}},b=d.immutable("key","value");return{put:function(d,e,h,k,m){var n=void 0!==k?k:b,p=void 0!==m?m:a(e);d=c.foldl(d,function(a,b){var c=p(b)?n(e,h):b;return{updated:p(b)||a.updated,acc:a.acc.concat([c])}},{updated:!1,acc:[]});return d.updated?
d.acc:d.acc.concat([n(e,h)])},get:function(b,d,h){d=void 0!==h?h:a(d);b=c.find(b,d);return e.from(b)}}});l("p7",["2w"],function(c){return c.immutable("popup","anchor")});l("gs",["b","p6","p7","b4"],function(c,e,d,a){return function(){var b=[],g=function(){b=c.filter(b,function(b){return a.isVisible(b.popup().panel())})};return{recalculate:function(){g();c.map(b,function(a){a.anchor().recalculate(a.popup())})},dismiss:function(){g();c.map(b,function(a){a.anchor().isAnchored()||a.popup().close()})},
update:function(a,c){b=e.put(b,a,c,d,function(b){return b.popup()===a})},destroy:function(){}}}});l("gu",["3y","2a"],function(c,e){return{bind:function(d,a){var b=e.get(d);return{unbind:c.bind(d,"scroll",function(c){c=e.get(d);c.top()===b.top()&&c.left()===b.left()||a(c);b=c}).unbind}}}});l("8x","b ar 52 7 s gs 59 gt 1b 4e 3y 2s gu m".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l){return function(s,t,u,v){var w=g(),z=s.isInline()?a.noop:b.cached(function(){x=r.bind(s.doc().getOrDie(),function(a){w.dismiss();
s.focus()})}),x=null,y=d.div();m.add(y,[f.resolve("ui-container"),f.resolve("layer-above-editor")]);v.each(function(a){k.set(y,"data-ephox-editor",a)});var A=n.bind(y,"keydown",function(b){var d;if(d=c.contains(e.BACKSPACE(),b.raw().which))d=b.target(),d=a.curry(l.is,d),d=!c.exists(["textarea","input",'[contenteditable="true"]'],d);d&&b.kill()});return{uiContainer:a.constant(y),uiOrigin:function(){return h.relativeOrigin(y)},refresh:w.recalculate,bounds:t,show:function(a,b){z();w.update(a,b);b.place(a)},
destroy:function(){null!==x&&x.unbind();w.destroy();A.unbind();p.remove(y)}}}});l("gv","7 kp 58 4a 6e 3w".split(" "),function(c,e,d,a,b,g){return function(f,h,k){f=e(k,f);k=function(){var a=g(function(){b(a);m.trigger.expired()},h);return{clear:function(){b(a)}}};var m=a.create({expired:d([]),close:d([])}),n=0<h?k():{clear:c.noop};f.events.close.bind(function(){n.clear();m.trigger.close()});return{element:f.element,action:f.action,destroy:f.destroy,events:m.registry}}});l("8y","b 7 gv 82 59 2o 3y 6x".split(" "),
function(c,e,d,a,b,g,f,h){return function(k,m,n,p,r,l,s,t){var u=s.layout.build(k,m,n,p,r,l,s,t);m=function(a){h.closest(a.target(),'input,div[contenteditable="true"],textarea,.ephox-polish-dialog.ephox-polish-help-modal,select,.ephox-polish-bottom-bar,.ephox-polish-side-bar')||a.prevent()};var v=[f.bind(u.element(),"mousedown",m),f.bind(n.uiContainer(),"mousedown",m)];(function(){var c=g.toggler(u.element(),b.resolve("content-ltr")),d=g.toggler(u.element(),b.resolve("content-rtl")),f=g.toggler(u.uiContainerParent(),
b.resolve("content-ltr")),h=g.toggler(u.uiContainerParent(),b.resolve("content-rtl")),m=function(){c.off();f.off()},n=function(){c.on();f.on()},p=function(){d.off();h.off()},r=function(){d.on();h.on()},s=function(){var a=l.uiDirection().isRtl(),b=a?r:p;(a?m:n)();b()};k.events.uiStale.bind(function(){a.readDir(k).fold(s,function(a){a.ltrdir().fold(m,e.noop,n);a.rtldir().fold(p,e.noop,r);c.isOn()===d.isOn()&&s()})})})();return{element:u.element,connect:u.connect,viewport:u.viewport,uiContainerParent:u.uiContainerParent,
socket:u.socket,showMessage:function(a,b,c){a=d(a,b,c);b=e.curry(u.hideBanner,a);a.events.expired.bind(b);u.displayBanner(a);return b},displayBanner:u.displayBanner,hideBanner:u.hideBanner,init:u.init,refocus:u.tabstrip.refocus,tabstrip:u.tabstrip,refresh:u.refresh,position:u.position,state:u.state,destroy:function(){u.destroy();c.each(v,function(a){a.unbind()})}}}});l("gw",[],function(){return{isDefaultEmpty:function(c){return/^\s*<p>\s*<br\s?\/?>\s*<\/p>\s*$/.test(c)}}});l("xa",["t"],function(c){return function(e){var d=
void 0!==e?e.slice(0):[];return{pop:function(){return c.from(d.pop())},push:function(a){d.push(a)},peek:function(){return c.from(d[d.length-1])},pushAll:function(a){d=d.concat(a)},clear:function(){d=[]},isEmpty:function(){return 0===d.length},size:function(){return d.length},state:function(){return d.slice(0)}}}});l("p8",["b","xa","58","4a"],function(c,e,d,a){return function(b){var g=a.create({changed:d([]),reset:d([])}),f=b.initial,h=e(b.undo),k=e(b.redo),m=function(a){h.isEmpty()&&h.push(f);h.push(a);
g.trigger.changed()},n=function(a,b){b(h.peek().getOr(f),a)?(h.pop(),h.push(a)):(m(a),k.clear())};return{save:n,checkChanged:function(a,b){return!b(h.peek().getOr(f),a)},undo:function(a,b){n(a,b);return h.pop().bind(function(a){h.isEmpty()||(k.push(a),g.trigger.changed());return h.peek()})},redo:function(a,b){b(h.peek().getOr(f),a)||k.clear();return k.pop().bind(function(a){m(a);return h.peek()})},reset:function(a){f=a;h.clear();k.clear();g.trigger.reset()},state:function(){return{initial:f,undo:h.state(),
redo:k.state()}},rewrite:function(a){var b=a(f),d=c.map(h.state(),a);a=c.map(k.state(),a);f=b;h=e(d);k=e(a);h.isEmpty()&&k.isEmpty()||g.trigger.changed()},events:g.registry}}});l("gx",["p8"],function(c){return{fromInitial:function(e){return c({initial:e,undo:[],redo:[]})},fromState:function(e){return c(e)}}});l("8z","b 7 bw 7e gw 74 7f 58 4a 4b 2w 2n gx".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r){var l=n.immutable("raw","marked"),s=function(a){return l(a.raw,a.marked)},t=function(a,b){return{initial:b(a.initial),
undo:c.map(a.undo,b),redo:c.map(a.redo,b)}},u=function(a){return{raw:a.raw(),marked:a.marked()}};return function(c,n,z,x,y){var A=r.fromState(t(y,s)),B=k.create({changed:m([],A.events.changed),reset:m([],A.events.reset),undo:h([]),redo:h([])}),C=function(a,d){var e;if(!(e=""===a.raw()&&b.isDefaultEmpty(d.raw()))){e=c.filterHtml(c.internal(),a.raw());var f=c.filterHtml(c.internal(),d.raw());e=e===f}return e},D=function(){var a=c.filterHtml(c.history(),n.getContent()),b=c.filterHtml(c.history(),n.serialize());
return l(a,b)},F=function(a){return n.deserialize(a.marked())};y=function(){var a=D();A.undo(a,C).each(F);n.domChanged();n.toEditing();B.trigger.undo()};var E=function(){var a=D();A.redo(a,C).each(F);n.domChanged();n.toEditing();B.trigger.redo()},G=d.tap(function(a,b){if(a()){var c=D();A.save(c,b)}}),H=function(){G.instance(function(){return n.getSelectionStart().exists(p.inBody)},C)},L=function(a){var b=G.control.isBlocked();G.control.block();a=a();b||G.control.unblock();return a},I=z.editor();I.events.enter.bind(H);
I.on();x.events.undo.bind(y);x.events.redo.bind(E);n.events.undoChanged.bind(H);n.events.loiter.bind(H);z=g.ui({"undo.general":{toggle:!1,value:"undo",textkey:a.key("action.undo"),action:y,shortcut:!0,updateGeneral:e.identity,tooltip:f.get},"redo.general":{toggle:!1,value:"redo",textkey:a.key("action.redo"),action:E,shortcut:!0,updateGeneral:e.identity,tooltip:f.get}});return{undo:y,redo:E,save:H,checkChanged:function(){var a=D();return A.checkChanged(a,C)},reset:function(a){A.reset(l(a,a))},destroy:function(){I.off();
I.destroy()},state:function(){return t(A.state(),u)},rewrite:function(a,b){var c=function(c){return c.replace(a,b)};A.rewrite(function(a){return l(c(a.raw()),c(a.marked()))})},transaction:function(a){H();a=L(a);H();return a},disable:L,replaceTop:function(){G.instance(e.constant(!0),e.constant(!0))},ui:z,events:B.registry}}});l("ai",["4o"],function(c){c=c.generate([{aboveView:["item"]},{inView:["item"]},{belowView:["item"]}]);return{aboveView:c.aboveView,inView:c.inView,belowView:c.belowView,cata:function(c,
d,a,b){return c.fold(d,a,b)}}});l("90","b 7c 58 4a ai 3y 21 2b 6e 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(a,b){var c=null;return{throttle:function(){var d=arguments;null!==c&&k(c);c=m(function(){a.apply(null,d);d=c=null},b)},destroy:function(){null!==c&&(k(c),c=null)}}};return function(k){var m=e.unbindable(),l=a.create({onChange:d([])}),s=n(function(){l.trigger.onChange()},1E3),t=function(){k.runOrOnLoaded(function(a){k.doc().each(function(a){m.set(g.bind(a,"scroll",function(a){s.throttle()}));
s.throttle()})})};k.isInline()||t();var u=function(){return k.body().bind(function(a){return k.win().map(function(b){var d=b.innerHeight;b=h.children(a);var e=c.findIndex(b,function(a){if(!f.isElement(a))return!1;a=a.dom().getBoundingClientRect();return a.top<d&&0<a.bottom});if(-1===e)return[a];var g=c.findIndex(b.slice(e+1),function(a){if(!f.isElement(a))return!1;a=a.dom().getBoundingClientRect();return!(a.top<d&&0<a.bottom)});return b.slice(e,-1<g?e+1+g:b.length)})}).getOr([])};return{sections:function(){return u()},
setOn:t,setOff:function(){m.clear()},viewport:function(){return{assess:function(a){if(!f.isElement(a))return b.inView(a);var c=k.win().map(function(a){return a.innerHeight}).getOr(0),d=a.dom().getBoundingClientRect();c=0>d.bottom?b.aboveView:d.top>c?b.belowView:b.inView;return c(a)}}},destroy:function(){m.clear();s.destroy()},events:l.registry}}});l("5k","b 8e c 7 t 8f 8g 6b 8h 8i 8j 8k 8l 8m 8n 8o 6z 8p 8q 8r 8s 8t 8u 8v 8w 8x 8y 8z 90 57 7e 33 o".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,
s,t,u,v,w,z,x,y,A,B,C,D,F,E,G,H,L,I,J){return function(K,N,M){var O=h(K),S=x(M.profile),P=r(M.filters),U=s(),Q=k(P,U,K.content,N,M.content),V=B(N,P,Q),W=C(Q,K.shortcuts),Y=K.ui.layout.bounds(K.ui),X=D(Q,Y,N,K.ui.editorName),Z=!1!==K.fullscreen.bundled?l(Q,W,K.fullscreen):H.fullscreen(),ea=z(Q,X,N,Z,K.platform),aa=F(Q,W,X,ea,Z,N,K.ui,M.ui),R=t(Q,aa),ga=E(P,Q,R,W,M.undo),ja=n(Q,V,R,ga),fa=y(Q,R,ga),ha=v(P,Q),ia=p(Q,ga,K.editorcontext),ba=G(Q),$=A(aa,K.registration),da=m(N,Q,R,W,X,K.contextmenu),ca=
w.onNodeChange(Q,ha),T=u(M.laundry);ga.events.changed.bind(function(){T.setDirty(!0)});T.events.clean.bind(function(){Q.undoChanged()});Q.events.interaction.bind(function(a){!T.isDirty()&&ga.checkChanged()&&T.setDirty(!0)});var ka=d.detect(),ma=ka.deviceType.isTouch(),Y=W.isHelpShortcutEnabled();M=!Q.isInline()&&!ma&&K.ui.showHelpHint;K=f.editor(K.ui.editorName,K.ui.isFullScreen);var ka=L.translate(ka.os.isOSX()?"aria.help.mac":"aria.help.ctrl"),Y=Y?b.some(ka):b.none(),na=(Q.isInline()?e.inline:e.editor)(aa.element(),
Q.element(),K,Y,M),oa=b.none();Q.runOrOnLoaded(function(a){var c=g.handle(a,function(a){I.closest(a.target(),"a").each(function(b){I.closest(b,'[contenteditable="false"]').each(a.kill)})});oa=b.some(c);ma&&(e.label(a,L.translate("aria.label.content")),e.region(aa.viewport()),e.region(aa.tabstrip.element()))});return{region:a.constant(N),communication:a.constant(O),profile:a.constant(S),filter:a.constant(P),internalevents:a.constant(U),content:a.constant(Q),keyboard:a.constant(R),shortcuts:a.constant(W),
smartview:a.constant(X),undo:a.constant(ga),del:a.constant(ja),proximity:a.constant(fa),operations:a.constant(ha),context:a.constant(ia),fullscreen:a.constant(Z),platform:a.constant(ea),registration:a.constant($),contextmenu:a.constant(da),ui:a.constant(aa),selections:a.constant(V),insertFilteredHtmlAtCursor:function(a){a=P.filterHtml(P.input(),a);Q.insertHtmlAtCursor(a)},viewablearea:a.constant(ba),laundry:a.constant(T),state:function(){return{ui:aa.state(),undo:ga.state(),content:Q.state(),profile:S.state(),
laundry:T.state()}},destroy:function(){oa.each(function(a){a.unbind()});c.each([Q,ba,ca,da,$,ea,Z,ia,ha,fa,ga,ja,X,W,R,V,P,S,O,aa],function(a){a.destroy?a.destroy():J.log("Feature missing destroy method: ",a)});na.destroy()}}}});l("p9",["6u"],function(c){return{resolve:c.create("ephox-hermes").resolve}});l("gy","p9 f5 7 58 4a 1b 2o 3y l 34".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(){var n=b.create({upload:a(["files"])}),r=k.fromTag("input");f.add(r,c.resolve("hidden"));f.add(r,c.resolve("file-selector-input"));
g.setAll(r,{type:"file",accept:"image/*"});var l=h.bind(r,"change",function(a){a=e.toFiles(a);n.trigger.upload(a)});return{element:d.constant(r),open:function(){m.set(r,"");r.dom().click()},destroy:function(){l.unbind()},events:n.registry}};return{single:n,multiple:function(){var a=n();g.set(a.element(),"multiple","multiple");return{element:a.element,open:a.open,destroy:a.destroy,events:a.events}}}});l("91",["gy","f5","58","4a"],function(c,e,d,a){return function(){var b=c.single(),g=a.create({upload:d(["assets"])});
b.events.upload.bind(function(a){e.multiple(a.files()).get(function(a){g.trigger.upload(a)})});return{element:b.element,open:b.open,destroy:b.destroy,events:g.registry}}});l("93",["t","co","9a"],function(c,e,d){return function(a){var b=c.none(),g=function(d){f();d=e(d);d.events.close.bind(function(){b=c.none()});b=c.some(d);a().displayBanner(d)},f=function(){b.each(a().hideBanner);b=c.none()};return{show:g,showKey:function(a){var b=d.get.apply(void 0,arguments);g(b)},hide:f,reset:function(){b=c.none()}}}});
l("94","b gz 86 1b 3y l".split(" "),function(c,e,d,a,b,g){var f=function(d,f){return c.map(f,function(c){var f=g.fromTag("img"),k=b.bind(f,"load",function(){k.unbind();d.domChanged()});c=e.cata(c,function(a,b,c,d){return c},function(a,b,c){return b});a.set(f,"src",c);return f})};return{insertMobileAssets:function(a,b,c,e){var g=f(a,e);return a.undoOperation(function(){var f=d.insertAt(a,b,g);c.uploadAssets(e);return f})},insertAssets:function(a,b,c){var e=f(a,c);a.focus();a.undoOperation(function(){d.insertAtCursor(a,
e).each(function(b){a.setSelection(b.element(),b.offset(),b.element(),b.offset())});b.uploadAssets(c)})}}});l("xb",["6u"],function(c){return{resolve:c.create("ephox-gel").resolve}});l("sj","8e xb 6 58 4a 2o 2p l 2q 2s 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(p,r){var l=d.merge({layerClass:void 0,zindex:void 0,padding:"0px"},p),s=b.create({exiting:a([])}),t=h.fromTag("div");c.presentation(t);g.add(t,e.resolve("modal"));g.add(t,e.resolve("modal-hidden"));f.setAll(t,{position:"fixed",
left:l.padding,top:l.padding,right:l.padding,bottom:l.padding});void 0!==l.background&&f.set(t,"background",l.background);void 0!==l.zindex&&f.set(t,"z-index",l.zindex);void 0!==l.layerClass&&g.add(t,l.layerClass);var u=void 0!==r?r:n.first("body").getOrDie();k.append(u,t);return{element:function(){return t},content:function(a){m.empty(t);k.append(t,a)},show:function(){g.add(u,e.resolve("modal-active"));g.remove(t,e.resolve("modal-hidden"));g.add(t,e.resolve("modal-show"))},hide:function(){g.remove(u,
e.resolve("modal-active"));g.add(t,e.resolve("modal-hidden"));g.remove(t,e.resolve("modal-show"))},destroy:function(){m.remove(t);g.remove(u,e.resolve("modal-active"))},events:s.registry}}});l("xc","8e xb 6 115 7 58 4a 2o 2p 3y l 2q 2s 33 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,s){return function(t,u){var v=a.onChange(),w=f.create({exiting:g([])}),z=d.merge({layerClass:null,zindex:null,padding:"0px",background:"rgba(0, 0, 0, 0.5)"},t),x=n.fromTag("div");c.presentation(x);h.add(x,e.resolve("moodal"));
h.add(x,e.resolve("moodal-hidden"));k.setAll(x,{left:z.padding,top:z.padding,right:z.padding,bottom:z.padding});z.background&&k.set(x,"background",z.background);z.zindex&&k.set(x,"z-index",z.zindex);z.layerClass&&h.add(x,z.layerClass);var y=void 0!==u?u:l.first("body").getOrDie();p.append(y,x);var A=n.fromTag("div");c.presentation(A);h.add(A,e.resolve("moodal-flexor"));p.append(x,A);var B=function(){k.setAll(A,{top:s.scrollY+"px",height:s.innerHeight+"px"})},C=function(){D.unbind();v.destroy();r.remove(x);
h.remove(y,e.resolve("modal-active"))},D=m.bind(x,"click",function(){w.trigger.exiting();C()});v.events.ready.bind(function(){B()});return{element:b.constant(x),content:function(a){r.empty(A);p.append(A,a)},show:function(){h.add(y,e.resolve("moodal-active"));h.remove(x,e.resolve("moodal-hidden"));h.add(x,e.resolve("moodal-show"));B()},hide:function(){h.remove(y,e.resolve("moodal-active"));h.add(x,e.resolve("moodal-hidden"));h.remove(x,e.resolve("moodal-show"))},destroy:C,events:w.registry}}});l("pb",
"c sj xc xb 6 4a 4b 2o 2p 2q 2s 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){return function(r){var l=b.deepMerge({layerClass:void 0,zindex:void 0,modal:{}},r);r=void 0!==r.container?r.container:p.first("body").getOrDie();var s=(c.detect().os.isiOS()?d:e)(l.modal,r),t=s.element(),u=g.create({exiting:f([],s.events.exiting)});void 0!==l.zindex&&k.set(t,"z-index",l.zindex);void 0!==l.layerClass&&h.add(t,l.layerClass);h.add(t,a.resolve("centered-dialog"));m.append(r,t);return{content:s.content,show:function(){s.show()},
hide:function(){s.hide()},destroy:function(){n.remove(t);s.destroy()},events:u.registry}}});l("pc","8e 31 c 52 7e 59 58 4a 1b 2o 3y l 30 2q 3c 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,s,t){var u=d.detect().deviceType.isiOS();return function(){var d=function(a,b){m.add(a,g.resolve(b));return a},w=d(a.div(),"dialog"),z=d(a.div(),"top"),x=d(a.span(),"dialog-title"),y=d(a.span(),"dialog-close"),A=d(a.div(),"dialog-content"),B=d(a.div(),"dialog-controls");k.set(w,"tabindex",-1);k.set(y,"tabindex",
-1);c.button(y,b.translate("button.close"));var C=n.bind(y,"click",function(){D.trigger.close()});s.append(w,[z,A,B]);s.append(z,[x,y]);var D=h.create({close:f([])});return{element:function(){return w},focus:function(){r.focus(w)},setTitle:function(a){t.empty(x);l.append(x,p.fromText(a));u||(c.dialog(w,a),a=e.generate("ephox-aria"),k.set(x,"id",a),c.labelledBy(w,a))},setContent:function(a){t.empty(A);l.append(A,a);a=e.generate("ephox-aria");k.set(A,"id",a);c.describedBy(w,a)},setControls:function(a){t.empty(B);
l.append(B,a)},close:function(){D.trigger.close()},destroy:function(){t.remove(w);C.unbind()},events:D.registry}}});l("h3","c pb t pc 3p 59 2n 3y".split(" "),function(c,e,d,a,b,g,f,h){var k=c.detect();return function(c){var n=a(),p=d.none(),r=e({container:c,layerClass:g.resolve("layer-dialog"),modal:{layerClass:g.resolve("layer-below-dialog")}});r.content(n.element());r.events.exiting.bind(function(){b.unlock([f.body()]);n.close()});var l=function(){r.hide();b.unlock([f.body()])};return{element:n.element,
destroy:function(){n.destroy();p.each(function(a){a.unbind()});l();r.destroy()},setTitle:n.setTitle,setContent:n.setContent,setControls:n.setControls,show:function(){r.content(n.element());r.show();n.focus();k.deviceType.isTouch()&&(p=d.some(h.bind(n.element(),"click",function(a){a.stop()})));b.lock([f.body()])},hide:l,events:n.events}}});l("h4","h2 92 7 t 33 m".split(" "),function(c,e,d,a,b,g){var f=function(b){b.dom().click();return a.some(b)};return{setup:function(a,b,d){b=c.dialog({execute:function(a){a.dom().click()},
ok:b.ok().element(),cancel:b.cancel().element()});a=e.dialog(a.element(),d,b);return{enter:a.enter,exit:a.exit,destroy:a.destroy}},button:function(c){return(g.is(c,".ephox-pastry-button")?a.some(c):b.descendant(c,".ephox-pastry-button")).bind(f)},click:f,radio:function(a,b,f){b={item:d.constant(b),selected:d.constant(f)};return e.radio(a,b,c.radio({one:function(a,b){b.dom().click()}}))}}});l("96","8e c h2 h3 h4 7e h5 59 58 4a 2o 3y l 3w 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,s){return function(t,
u,v,w,z,x){var y=f.okCancel("file-upload"),A=w(z),B=null,C=e.detect(),D=m.create({close:k([]),analytics:k(["message"]),escaped:k([]),insertAssets:k(["assets"]),opened:k([])}),F=function(){B.unbind();G.hide();D.trigger.close();D.trigger.analytics("insert_image_closed");E()},E=function(){A.reset();y.ok().disable()},G=a(v);G.setTitle(g.translate("fileupload.title"));G.setContent(A.element());G.setControls(y.element());G.events.close.bind(F);n.add(G.element(),h.resolve("imageupload-dialog"));var H=x(G.element(),
A.keylayouts(),d.dialog({cancel:y.cancel().element(),ok:y.ok().element(),execute:b.click,index:0}));A.events.upload.bind(function(a){D.trigger.insertAssets(a.assets());F()});A.events.dragndrop.bind(function(a){D.trigger.insertAssets(a.assets());F()});A.events.success.bind(function(a){y.ok().enable()});A.events.lookup.bind(function(a){y.ok().disable()});A.events.setActive.bind(function(a){E()});y.events.ok.bind(function(){A.selected().each(function(a){D.trigger.insertAssets([a]);F()})});y.events.cancel.bind(F);
E();return{show:function(){C.deviceType.isiOS()&&(c.hidden(u.element(),!0),l(function(){A.focus();c.hidden(u.element(),!1)},250));G.show();H.enter();D.trigger.analytics("insert_image_opened");D.trigger.opened();var a=r.fromDom(s);B=p.bind(a,"orientationchange",function(){t.foreground()})},element:G.element,events:D.registry,destroy:function(){H.exit();H.destroy();G.hide();G.destroy();A.destroy();y.destroy()}}}});l("pd","gz p9 7 1b 2o 1u".split(" "),function(c,e,d,a,b,g){return{previewAsset:function(f,
g){c.cata(f,d.die("asset should not be a file type"),function(c,d,f){b.add(g,e.resolve("fluid-image"));a.set(g,"src",d)})}}});l("pe","8e 31 c o8 p9 f5 52 7 ae t 58 4a 1b 2o 3y l 30 2q 3c 34 o9".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,s,t,u,v,w,z,x){var y=d.detect();return function(d){var x=p.create({success:n(["assets"]),invalidUrl:n(["url"]),empty:n([]),lookup:n([])}),C=[],D=f.div(),F=l.toggler(D,b.resolve("url-indicator-loading")),E=a();E.events.start.bind(function(){F.on()});E.events.fail.bind(function(a){F.off();
x.trigger.invalidUrl(a.url());C=[]});E.events.success.bind(function(a){F.off();var b=z.get(I);a.url()===b?g.fromImages([a.image()]).get(function(a){C=a;x.trigger.success(C)}):E.go(b)});var G=f.div();l.add(G,b.resolve("url-selector"));var H=t.fromTag("label");d=t.fromText(d("fileupload.web.url"));var L=e.generate(b.resolve("input-id"));r.set(H,"for",L);l.add(H,b.resolve("url-input-label"));v.append(H,d);var I=t.fromTag("input");r.setAll(I,{id:L,type:"url",placeholder:"http://www.example.com/image.jpg"});
l.add(I,b.resolve("url-input"));y.os.isAndroid()&&r.set(I,"autofocus","true");y.browser.isSafari()&&r.setAll(I,{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"});c.required(I);d=t.fromHtml("<span role=presentation>*</span>");l.add(d,b.resolve("url-input-required"));v.append(H,d);w.append(G,[H,I,D]);var J=k(function(a){""!==a&&E.go(a)},1E3),K=s.bind(I,"input",function(){var a=z.get(I);""===a.trim()?(x.trigger.empty(),J.throttle("")):(x.trigger.lookup(),J.throttle(a))});
return{element:h.constant(G),input:h.constant(I),events:x.registry,reset:function(){F.off();z.set(I,"")},focus:function(){u.focus(I)},selected:function(){return m.from(C[0])},destroy:function(){K.unbind()}}}});l("h8","b 8e 31 p9 pd pe 52 7 58 4a 1b 2o l 2q 3c 2s o9".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,s,t,u){return function(u){var w=m.create({lookup:k([]),success:k([])}),z=f.span(),x=r.fromHtml('<div role=presentation><span role=presentation class="'+a.resolve("url-input-required")+'">*</span> '+
u("fileupload.weburlhelp")+"</div>"),y=d.generate(a.resolve("help-message"));n.set(x,"id",y);p.add(x,a.resolve("fileupload-weburl-help"));var A=r.fromHtml("<div role=presentation><div role=presentation>"+u("fileupload.invalid1")+"</div><div role=presentation>"+u("fileupload.invalid2")+"</div><div role=presentation>"+u("fileupload.invalid3")+"</div></div>");p.add(A,a.resolve("fileupload-weburl-help"));p.add(A,a.resolve("fileupload-weburl-help-invalid"));var B=function(a){t.empty(E);l.append(E,a)},
C=function(a){var c=r.fromTag("img");l.append(E,c);b.previewAsset(a,c)},D=f.div();p.add(D,a.resolve("web-url-container"));var F=g(u),E=f.div();p.add(E,a.resolve("image-preview-container"));u=d.generate("ephox-hermes-url-state");e.live(E,u,"polite");e.controls(F.input(),u);e.describedBy(F.input(),y);y=f.div();p.add(y,a.resolve("hbox"));s.append(y,[F.element(),E,x]);l.append(D,y);F.events.lookup.bind(function(a){w.trigger.lookup();t.empty(E)});F.events.success.bind(function(a){c.each(a.assets(),C);
w.trigger.success()});F.events.invalidUrl.bind(function(){B(A)});F.events.empty.bind(function(){B(z)});B(z);return{element:h.constant(D),selected:F.selected,input:F.input,events:w.registry,focus:F.focus,reset:function(){B(z);F.reset()},destroy:function(){F.destroy()}}}});l("h6","h8 h2 92 52 7 7e 58 4a 4b 2q".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(n){n=a.div();var p=c(g.translate),r=h.create({upload:f(["assets"]),dragndrop:f(["assets"]),dragover:f([]),dragleave:f([]),drop:f([]),setActive:f(["item"]),
lookup:k([],p.events.lookup),success:k([],p.events.success)}),l=[function(){var a=p.input();return d.input(a,e.input({}))}()];m.append(n,p.element());return{element:b.constant(n),events:r.registry,keylayouts:b.constant(l),reset:function(){p.reset()},focus:p.focus,selected:p.selected,destroy:function(){p.destroy()}}}});l("95","ao ap b 8e h0 91 92 6 h1 7 t 96 h6 7e 7f 58 4a l 3c q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,s,t,u,v,w,z){return function(x,y,A,B,C){var D=u.create({insertAsset:t(["asset"]),
open:t([]),done:t([]),abort:t([])}),F=v.fromDom(z);B=b.mainmenu(F,"file-upload-menu",[]);var E=function(c,d){var e=b.item(F,c,l.get(d)+"...");a.menuItem(e,n.some(l.get(d)),n.none());return e},G=E("from-url",l.key("image.from-url")),E=E("from-camera",l.key("image.from-camera")),G=!0===C.allowLocalImages?[G,E]:[G],H=g();H.events.upload.bind(function(a){n.from(a.assets()[0]).each(function(a){I();D.trigger.insertAsset(a)})});var L=function(a){a=a.assets();d.each(a,function(a){D.trigger.insertAsset(a)})},
I=function(){k.target(A.uiContainer(),"mousedown")};w.append(B,G);B={name:"image",textkey:l.key("image.menu-button"),menuTextkey:l.key("image.menu"),icon:n.none,tooltip:s.get,contentFocus:!1,toggle:!1};G=[[{handlers:m.constant({"from-url":function(a){D.trigger.open();var b=p(x,y,A.uiContainer(),r,C,f.dialog);b.events.insertAssets.bind(L);a=function(){x.focus();b.destroy()};b.events.opened.bind(I);b.events.close.bind(a);b.events.escaped.bind(a);b.show()},"from-camera":function(){D.trigger.open();H.open()}}),
destroyer:m.noop,refreshMenu:m.noop,structure:m.constant({}),submenus:m.constant([]),items:m.constant(G),events:D.registry}]];B=c.menu(B,G,l.get,e.menu({focusActive:!0}));G={label:m.constant(!1),hasDialog:!0};return h.merge(B,G)}});l("xd","ly lz t 1b 2o l".split(" "),function(c,e,d,a,b,g){return function(f){var h=g.fromTag("button");a.set(h,"type","button");b.add(h,e.resolve("independent-button"));return c(h,d.none(),f)}});l("pf","fp f4 gy p9 52 xd eo 7 t 2o l 30 2q 3c".split(" "),function(c,e,d,
a,b,g,f,h,k,m,n,p,r,l){return function(s){var t=d.multiple(),u=b.div();m.add(u,a.resolve("drop-container"));var v=e.register(u,k.some(a.resolve("drop-active")),!1),w=g();w.content(f(s("fileupload.chooseimage")));m.add(w.element(),a.resolve("default-action"));m.add(w.element(),a.resolve("file-selector-trigger"));var z=n.fromTag("p");m.add(z,a.resolve("help-text-drop-icon"));var x=n.fromTag("p");m.add(x,a.resolve("help-text-drop"));c.disable(x);r.append(x,n.fromText(s("fileupload.dropimages")));l.append(u,
[z,x,w.element(),t.element()]);return{container:h.constant(u),dropper:h.constant(v),picker:h.constant(t),button:h.constant(w),focus:function(){p.focus(w.element())},destroy:function(){t.destroy();v.destroy();w.destroy()}}}});l("h7","pf f5 7 58 4a 4b".split(" "),function(c,e,d,a,b,g){return function(f){var h=c(f);f=h.picker();var k=h.container(),m=h.dropper(),n=h.button(),p=b.create({upload:a(["assets"]),dragndrop:a(["assets"]),dragover:g([],m.events.dragover),dragleave:g([],m.events.dragleave),drop:g([],
m.events.drop)}),r=function(a){return function(b){e.multiple(b.files()).get(function(b){a(b)})}};f.events.upload.bind(r(p.trigger.upload));m.events.dragndropimages.bind(r(p.trigger.dragndrop));n.events.click.bind(f.open);return{element:d.constant(k),button:d.constant(n),input:f.element,focus:h.focus,events:p.registry,destroy:function(){h.destroy()}}}});l("h9","b 52 pg eo lz 7 58 4a 2w 1b 2o l 2q 3c".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,r,l){return function(s,t,u){var v=[],w=k.immutable("view",
"item","container"),z=h.create({setActive:f(["item"])}),x=e.div();n.add(x,b.resolve("tablayout-wrapper"));n.add(x,b.resolve("tablayout-wrapper-"+s));void 0!==u&&n.add(x,u);var y=e.div();n.add(y,b.resolve("tablayout-body"));var A=p.fromTag("div");n.add(A,b.resolve("tablayout-menu"));l.append(x,[A,y]);var B=function(c){var e=d(c);e.content(a(c));n.add(e.element(),b.resolve("tablayout-item"));return e},C=[],D=c.map(t,function(a){var c=B(a.heading());m.set(c.element(),"data-ephox-pastry-tablayout-tab",
a.heading());r.append(A,c.element());var d=p.fromTag("div");n.add(d,b.resolve("tablayout-content"));m.set(d,"data-ephox-pastry-tablayout-view",a.heading());r.append(y,d);C.push(d);var e=w(a,c,d);v.push(e);c.events.click.bind(function(){F(e)});return c}),F=function(a){c.each(v,function(c){var d=c.view(),e=c.item(),f=c.container();c===a?(n.add(f,b.resolve("tablayout-active")),e.select(),d.renderer().render(f),z.trigger.setActive(e)):(n.remove(f,b.resolve("tablayout-active")),e.deselect())})};F(v[0]);
return{element:function(){return x},tabs:g.constant(D),body:g.constant(y),menu:g.constant(A),tabContent:g.constant(C),destroy:function(){c.each(D,function(a){a.destroy()})},events:z.registry}}});l("ha",["2q","2s"],function(c,e){return function(d){return{render:function(a){e.empty(a);c.append(a,d)}}}});l("hb",["2w"],function(c){return c.immutable("heading","renderer")});l("hc",["7"],function(c){return{left:c.constant("left"),top:c.constant("top")}});l("97","b 8e 31 c h7 h8 h2 92 6 52 h9 ha hb hc 7 h4 7e 59 4a 4b 1b 2o 2q".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,r,l,s,t,u,v,w,z,x,y,A){return function(B){var C=m.div(),D=b(u.translate),F=g(u.translate),E=function(a,b){var c=u.translate(a),d=p(b);return r(c,d)},G=E("fileupload.tabweburl",F.element());B=(B.allowLocalImages?[E("fileupload.tablocal",D.element())]:[]).concat(G);var H=n(l.top(),B,"file-upload");e.hidden(D.input(),!0);E=function(){var b=D.button();y.add(b.element(),v.resolve("dialog-button-default"));var c=a.detect().browser.isFirefox(),d={execute:t.button},c=c?k.merge(d,
{process:s.noop}):d,c=f.button(c);return h.button(b.element(),c)}();e.tabList(H.menu());var G=function(){var a=F.input();return h.input(a,f.input({}))}(),L=h.flow(H.menu(),{item:s.constant(".ephox-pastry-statebutton")},f.flow({trigger:t.button,executeOnArrow:!0})),E=[L].concat(E).concat(G),I=H.tabs();c.each(H.tabContent(),function(a){e.tabPanel(a)});c.each(B,function(a,b){var c=I[b];e.tabButton(c.element(),a.heading());y.add(c.element(),v.resolve("tab-button"));c.events.click.bind(function(){L.clickFocus(c.element())})});
c.each(H.tabContent(),function(a,b){var c=I[b],f=d.generate("ephox-aria");x.set(c.element(),"id",f);e.labelledBy(a,f)});B=w.create({upload:z(["assets"],D.events.upload),dragndrop:z(["assets"],D.events.dragndrop),dragover:z([],D.events.dragover),dragleave:z([],D.events.dragleave),drop:z([],D.events.drop),lookup:z([],F.events.lookup),success:z([],F.events.success),setActive:z(["item"],H.events.setActive)});H.events.setActive.bind(function(a){a=x.get(a.item().element(),"data-ephox-pastry-tablayout-tab");
a===u.translate("fileupload.tablocal")?D.focus():a===u.translate("fileupload.tabweburl")&&F.focus()});A.append(C,H.element());return{element:s.constant(C),events:B.registry,focus:F.focus,keylayouts:s.constant(E),reset:function(){F.reset()},selected:F.selected,destroy:function(){H.destroy();D.destroy();F.destroy()}}}});l("98",["a","b","gz","7"],function(c,e,d,a){var b=["image"],g=function(a,d,g,m){return e.exists(b,function(a){return c.isString(d.type)&&-1<d.type.indexOf(a)})};return{validate:function(b){b=
e.foldl(b,function(b,c){return!1===d.cata(c,g,a.constant(!0))?{assets:b.assets,failure:!0}:{assets:b.assets.concat([c]),failure:b.failure}},{assets:[],failure:!1});return{assets:a.constant(b.assets),failure:a.constant(b.failure)}}}});l("hd",["f5"],function(c){return{multiple:function(e){return c.multiple(e)},single:function(e){return c.single(e)},singleWithUrl:function(e,d){return c.singleWithUrl(e,d)}}});l("xe",[],function(){function c(c,d,a){c.width=d;c.height=a;return c}return{create:function(e,
d){return c(document.createElement("canvas"),e,d)},resize:c,get2dContext:function(c){return c.getContext("2d")},get3dContext:function(c){var d=null;try{d=c.getContext("webgl")||c.getContext("experimental-webgl")}catch(a){}d||(d=null);return d}}});l("xf",[],function(){return{getWidth:function(c){return c.naturalWidth||c.width},getHeight:function(c){return c.naturalHeight||c.height}}});l("xg",[],function(){function c(a,b){return function(){a.apply(b,arguments)}}function e(d){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");
if("function"!==typeof d)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];h(d,c(a,this),c(b,this))}function d(a){var b=this;null===this._state?this._deferreds.push(a):k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)(b._state?a.resolve:a.reject)(b._value);else{var d;try{d=c(b._value)}catch(e){a.reject(e);return}a.resolve(d)}})}function a(d){try{if(d===this)throw new TypeError("A promise cannot be resolved with itself.");if(d&&("object"===typeof d||
"function"===typeof d)){var e=d.then;if("function"===typeof e){h(c(e,d),c(a,this),c(b,this));return}}this._state=!0;this._value=d;g.call(this)}catch(f){b.call(this,f)}}function b(a){this._state=!1;this._value=a;g.call(this)}function g(){for(var a=0,b=this._deferreds.length;a<b;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function f(a,b,c,d){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.resolve=c;this.reject=d}function h(a,b,c){var d=!1;
try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){d||(d=!0,c(e))}}if(window.Promise)return window.Promise;var k=e.immediateFn||"function"===typeof setImmediate&&setImmediate||function(a){setTimeout(a,1)},m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};e.prototype["catch"]=function(a){return this.then(null,a)};e.prototype.then=function(a,b){var c=this;return new e(function(e,g){d.call(c,new f(a,b,e,g))})};e.all=function(){var a=Array.prototype.slice.call(1===
arguments.length&&m(arguments[0])?arguments[0]:arguments);return new e(function(b,c){function d(f,g){try{if(g&&("object"===typeof g||"function"===typeof g)){var h=g.then;if("function"===typeof h){h.call(g,function(a){d(f,a)},c);return}}a[f]=g;0===--e&&b(a)}catch(k){c(k)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})};e.resolve=function(a){return a&&"object"===typeof a&&a.constructor===e?a:new e(function(b){b(a)})};e.reject=function(a){return new e(function(b,c){c(a)})};
e.race=function(a){return new e(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})};return e});l("xh",[],function(){return{guessMimeType:function(c){var e=document.createElement("a");e.href=c;c=e.pathname.split(".");(c=c[c.length-1])&&(c=c.toLowerCase());return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png"}[c]}}});l("q8",["xg","xe","xh","xf"],function(c,e,d,a){function b(a){return new c(function(b){function c(){a.removeEventListener("load",c);b(a)}a.complete?b(a):a.addEventListener("load",
c)})}function g(c){return b(c).then(function(b){var c;c=e.create(a.getWidth(b),a.getHeight(b));e.get2dContext(c).drawImage(b,0,0);return c})}function f(a){return new c(function(b){var c=new XMLHttpRequest;c.open("GET",a,!0);c.responseType="blob";c.onload=function(){200==this.status&&b(this.response)};c.send()})}function h(a){return new c(function(b){var c,d,e,f,g;a=a.split(",");(c=/data:([^;]+)/.exec(a[0]))&&(f=c[1]);c=atob(a[1]);if(window.WebKitBlobBuilder){g=new WebKitBlobBuilder;d=new ArrayBuffer(c.length);
for(e=0;e<d.length;e++)d[e]=c.charCodeAt(e);g.append(d);b(g.getBlob(f))}else{d=new Uint8Array(c.length);for(e=0;e<d.length;e++)d[e]=c.charCodeAt(e);b(new Blob([d],{type:f}))}})}function k(a){return new c(function(b){var c=new FileReader;c.onloadend=function(){b(c.result)};c.readAsDataURL(a)})}return{blobToImage:function(a){return new c(function(b){function c(){d.removeEventListener("load",c);b(d)}var d=new Image;d.addEventListener("load",c);d.src=URL.createObjectURL(a);d.complete&&c()})},imageToBlob:function(a){return b(a).then(function(a){var b=
a.src;return 0===b.indexOf("blob:")?f(b):0===b.indexOf("data:")?h(b):g(a).then(function(a){return h(a.toDataURL(d.guessMimeType(b)))})})},blobToDataUri:k,blobToBase64:function(a){return k(a).then(function(a){return a.split(",")[1]})},imageToCanvas:g,canvasToBlob:function(a,b){return h(a.toDataURL(b))},revokeImageUrl:function(a){URL.revokeObjectURL(a.src)},uriToBlob:function(a){return 0===a.indexOf("blob:")?f(a):0===a.indexOf("data:")?h(a):null}}});l("xi",[],function(){function c(a,c,d){a=parseFloat(a);
a>d?a=d:a<c&&(a=c);return a}function e(a,c){var d,e,k,m,n=[],p=Array(10);for(d=0;5>d;d++){for(e=0;5>e;e++)n[e]=c[e+5*d];for(e=0;5>e;e++){for(k=m=0;5>k;k++)m+=a[e+5*k]*n[k];p[e+5*d]=m}}return p}function d(a,d){d=c(d,0,1);return a.map(function(a,b){a=0===b%6?1-(1-a)*d:a*d;return c(a,0,1)})}var a=[0,0.01,0.02,0.04,0.05,0.06,0.07,0.08,0.1,0.11,0.12,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.25,0.27,0.28,0.3,0.32,0.34,0.36,0.38,0.4,0.42,0.44,0.46,0.48,0.5,0.53,0.56,0.59,0.62,0.65,0.68,0.71,0.74,0.77,
0.8,0.83,0.86,0.89,0.92,0.95,0.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];return{identity:function(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:d,multiply:e,adjustContrast:function(b,d){var f;d=c(d,-1,1);d*=100;0>d?f=127+d/100*127:(f=d%1,f=0===f?a[d]:a[Math.floor(d)]*(1-f)+a[Math.floor(d)+1]*f,f=127*f+127);return e(b,
[f/127,0,0,0,0.5*(127-f),0,f/127,0,0,0.5*(127-f),0,0,f/127,0,0.5*(127-f),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function(a,d){d=c(255*d,-255,255);return e(a,[1,0,0,0,d,0,1,0,0,d,0,0,1,0,d,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function(a,d){var f;d=c(d,-1,1);f=1+(0<d?3*d:d);return e(a,[0.3086*(1-f)+f,0.6094*(1-f),0.082*(1-f),0,0,0.3086*(1-f),0.6094*(1-f)+f,0.082*(1-f),0,0,0.3086*(1-f),0.6094*(1-f),0.082*(1-f)+f,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function(a,d){var f,h;d=c(d,-180,180)/180*Math.PI;
f=Math.cos(d);h=Math.sin(d);return e(a,[0.213+0.787*f+-0.213*h,0.715+-0.715*f+-0.715*h,0.072+-0.072*f+0.928*h,0,0,0.213+-0.213*f+0.143*h,0.715+f*(1-0.715)+0.14*h,0.072+-0.072*f+-0.283*h,0,0,0.213+-0.213*f+-0.787*h,0.715+-0.715*f+0.715*h,0.072+0.928*f+0.072*h,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function(a,d,f,h){d=c(d,0,2);f=c(f,0,2);h=c(h,0,2);return e(a,[d,0,0,0,0,0,f,0,0,0,0,0,h,0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function(a,g){g=c(g,0,1);return e(a,d([0.393,0.769,0.189,0,0,0.349,0.686,0.168,
0,0,0.272,0.534,0.131,0,0,0,0,0,1,0,0,0,0,0,1],g))},adjustGrayscale:function(a,g){g=c(g,0,1);return e(a,d([0.33,0.34,0.33,0,0,0.33,0.34,0.33,0,0,0.33,0.34,0.33,0,0,0,0,0,1,0,0,0,0,0,1],g))}}});l("ph",["xe","xf","q8","xi"],function(c,e,d,a){function b(a,b){return d.blobToImage(a).then(function(a){var f=c.create(e.getWidth(a),e.getHeight(a)),g=c.get2dContext(f);g.drawImage(a,0,0);m(a);a=g.getImageData(0,0,f.width,f.height);var h=a.data,k,n,l,z,x,y=b[0],A=b[1],B=b[2],C=b[3],D=b[4],F=b[5],E=b[6],G=b[7],
H=b[8],L=b[9],I=b[10],J=b[11],K=b[12],N=b[13],M=b[14],O=b[15],S=b[16],P=b[17],U=b[18],Q=b[19];for(x=0;x<h.length;x+=4)k=h[x],n=h[x+1],l=h[x+2],z=h[x+3],h[x]=k*y+n*A+l*B+z*C+D,h[x+1]=k*F+n*E+l*G+z*H+L,h[x+2]=k*I+n*J+l*K+z*N+M,h[x+3]=k*O+n*S+l*P+z*U+Q;g.putImageData(a,0,0);return d.canvasToBlob(f)})}function g(a,b){return d.blobToImage(a).then(function(a){var f=c.create(e.getWidth(a),e.getHeight(a)),g=c.get2dContext(f),h;g.drawImage(a,0,0);m(a);a=g.getImageData(0,0,f.width,f.height);h=g.getImageData(0,
0,f.width,f.height);h=function(a,b,c){function d(a,b,c){a>c?a=c:a<b&&(a=b);return a}var e,f,g,h,k,m,n,p,r,l,s,q,t,K;g=Math.round(Math.sqrt(c.length));h=Math.floor(g/2);e=a.data;f=b.data;t=a.width;K=a.height;for(k=0;k<K;k++)for(a=0;a<t;a++){for(l=m=n=p=0;l<g;l++)for(r=0;r<g;r++)s=d(a+r-h,0,t-1),q=d(k+l-h,0,K-1),s=4*(q*t+s),q=c[l*g+r],m+=e[s]*q,n+=e[s+1]*q,p+=e[s+2]*q;s=4*(k*t+a);f[s]=d(m,0,255);f[s+1]=d(n,0,255);f[s+2]=d(p,0,255)}return b}(a,h,b);g.putImageData(h,0,0);return d.canvasToBlob(f)})}function f(a){return function(b,
f){return d.blobToImage(b).then(function(b){var g=c.create(e.getWidth(b),e.getHeight(b)),h=c.get2dContext(g),k,p=Array(256);for(k=0;k<p.length;k++)p[k]=a(k,f);h.drawImage(b,0,0);m(b);b=h.getImageData(0,0,g.width,g.height);k=b.data;var l;for(l=0;l<k.length;l+=4)k[l]=p[k[l]],k[l+1]=p[k[l+1]],k[l+2]=p[k[l+2]];h.putImageData(b,0,0);return d.canvasToBlob(g)})}}function h(c){return function(d,e){return b(d,c(a.identity(),e))}}function k(a){return function(b){return g(b,a)}}var m=d.revokeImageUrl;return{invert:function(a){return function(c){return b(c,
a)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:h(a.adjustBrightness),hue:h(a.adjustHue),saturate:h(a.adjustSaturation),contrast:h(a.adjustContrast),grayscale:h(a.adjustGrayscale),sepia:h(a.adjustSepia),colorize:function(c,d,e,f){return b(c,a.adjustColors(a.identity(),d,e,f))},sharpen:k([0,-1,0,-1,5,-1,0,-1,0]),emboss:k([-2,-1,0,-1,1,1,0,1,2]),gamma:f(function(a,b){return 255*Math.pow(a/255,1-b)}),exposure:f(function(a,b){return 255*(1-Math.exp(-(a/255)*b))}),colorFilter:b,convoluteFilter:g}});
l("xj",["xg","q8","xe","xf"],function(c,e,d,a){function b(c,d,e){var m=a.getWidth(c),n=a.getHeight(c),m=d/m,p=e/n,n=!1;if(0.5>m||2<m)m=0.5>m?0.5:2,n=!0;if(0.5>p||2<p)p=0.5>p?0.5:2,n=!0;c=g(c,m,p);return n?c.then(function(a){return b(a,d,e)}):c}function g(b,e,g){return new c(function(c){var n=a.getWidth(b),p=a.getHeight(b),r=Math.floor(n*e),l=Math.floor(p*g),s=d.create(r,l);d.get2dContext(s).drawImage(b,0,0,n,p,0,0,r,l);c(s)})}return{scale:b}});l("pi",["q8","xe","xf","xj"],function(c,e,d,a){var b=
c.revokeImageUrl,g=function(a){return function(c){b(a);return c}};return{rotate:function(a,g){return c.blobToImage(a).then(function(k){var m=e.create(d.getWidth(k),d.getHeight(k)),n=e.get2dContext(m),p=0,r=0;g=0>g?360+g:g;90!=g&&270!=g||e.resize(m,m.height,m.width);if(90==g||180==g)p=m.width;if(270==g||180==g)r=m.height;n.translate(p,r);n.rotate(g*Math.PI/180);n.drawImage(k,0,0);b(k);return c.canvasToBlob(m,a.type)})},flip:function(a,g){return c.blobToImage(a).then(function(a){var f=e.create(d.getWidth(a),
d.getHeight(a)),n=e.get2dContext(f);"v"==g?(n.scale(1,-1),n.drawImage(a,0,-f.height)):(n.scale(-1,1),n.drawImage(a,-f.width,0));b(a);return c.canvasToBlob(f)})},crop:function(a,d,g,m,n){return c.blobToImage(a).then(function(a){var f=e.create(m,n);e.get2dContext(f).drawImage(a,-d,-g);b(a);return c.canvasToBlob(f)})},resize:function(b,d,e){return c.blobToImage(b).then(function(m){var n=g(m);return a.scale(m,d,e).then(function(a){return c.canvasToBlob(a,b.type)}).then(n,n)})}}});l("hg",["ph","pi"],function(c,
e){return{invert:function(d){return c.invert(d)},sharpen:function(d){return c.sharpen(d)},emboss:function(d){return c.emboss(d)},brightness:function(d,a){return c.brightness(d,a)},hue:function(d,a){return c.hue(d,a)},saturate:function(d,a){return c.saturate(d,a)},contrast:function(d,a){return c.contrast(d,a)},grayscale:function(d,a){return c.grayscale(d,a)},sepia:function(d,a){return c.sepia(d,a)},colorize:function(d,a,b,e){return c.colorize(d,a,b,e)},gamma:function(d,a){return c.gamma(d,a)},exposure:function(d,
a){return c.exposure(d,a)},flip:function(c,a){return e.flip(c,a)},crop:function(c,a,b,g,f){return e.crop(c,a,b,g,f)},resize:function(c,a,b){return e.resize(c,a,b)},rotate:function(c,a){return e.rotate(c,a)}}});l("9x",["hf","hg"],function(c,e){var d=function(a){return function(b){return e.rotate(b,a)}},a=function(a){return function(b){return e.flip(b,a)}},b=function(a){return function(b){return e.resize(b,a.width(),a.height())}},g=c.pToFR(e.sharpen),f=c.pToFR(d(-90)),d=c.pToFR(d(90)),h=c.pToFR(a("v")),
a=c.pToFR(a("h"));return{rotateLeft:f,rotateRight:d,flipVertical:h,flipHorizontal:a,sharpen:g,crop:function(a,b,d,f){return c.pToFR(function(c){return e.crop(c,a,b,d,f)})},resizeTo:function(a){return c.pToFR(b(a))}}});l("hh",["hf"],function(c){return{mapIfSet:function(e,d){return c.map(e,function(a){return a.map(d)})},applyIfSet:function(e){return function(d){return c.bind(e,function(a){return a.fold(function(){return c.pure(d)},function(a){return a(d)})})}}}});l("af",["b"],function(c){return{partition:function(e){var d=
[],a=[];c.each(e,function(b){b.fold(function(a){d.push(a)},function(b){a.push(b)})});return{errors:d,values:a}}}});l("pj",["2w"],function(c){return c.immutable("width","height")});l("xk",["4o","ps"],function(c,e){var d=c.generate([{special:["size"]},{regular:["value","size","unit"]}]);return{identify:function(a){a=a.match(/(\d*\.?\d*)(.*)/);return""!==a[1]?d.regular(a[0],e(a[1]),a[2]):d.special(a[0])}}});l("pk","t pj xk 2w 1b 2p 5a 2t e9".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,e){return g.getRaw(a,
e).orThunk(function(){return b.has(a,e)?c.some(b.get(a,e)):c.none()}).bind(function(a){return d.identify(a).fold(function(a){return c.none()},function(a,b,d){switch(d){case "":case "px":return c.some(k(b,10));default:return c.none()}})})},n=function(a,b,d){b=b(a);return 0<b?c.some(b):m(a,d)};return{get:function(a){return n(a,h.get,"width").bind(function(b){return n(a,f.get,"height").map(function(a){return e(b,a)})})},measure:n}});l("pl",[],function(){var c=function(a,b){var c=b/a;return 1>c?c:1},
e=function(a,b){var d=c(a.height,b.height);return 1===d?a:{width:a.width*d,height:b.height}},d=function(a,b){var d=c(a.width,b.width);return 1===d?a:{width:b.width,height:a.height*d}};return{max:function(a,b){var c=0<b.height?b.height:0,f=0<b.width?b.width:0;if(!(a.height>c||a.width>f)||c===f&&0===c)return a;var c={width:f,height:c},f=a.width>a.height,h=0<c.height,k=(h?a.height/c.height:0)>(0<c.width?a.width/c.width:0);return(c.width===c.height&&f||!h||!k?d:e)(a,c)}}});l("hi","he t pj hf pk fn pl".split(" "),
function(c,e,d,a,b,g,f){var h=function(b){var d=c.createObjectURL(b);return a.map(g.load(d),function(a){a=k(a);c.revokeObjectURL(d);return a})},k=function(a){return d(a.dom().naturalWidth,a.dom().naturalHeight)},m=function(a){var c=k(a);return b.get(a).filter(function(a){return a.width()!==c.width()||a.height()!==c.height()})};return{restrain:function(b){var c=b.width(),g=b.height(),k=function(a){var b=f.max({width:a.width(),height:a.height()},{width:c,height:g});return a.height()>g||a.width()>c?
e.some(d(b.width,b.height)):e.none()};return function(b){b=h(b);return a.map(b,k)}},changedBounds:function(b){return a.map(g.loadIfNeeded(b),m)}}});l("99","gz hd he 9x hf hh af hi o".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(b){b=g.mapIfSet(b,a.resizeTo);return g.applyIfSet(b)},n=function(a,c,d){return b.fromChain([m(a),d])(c)};return{instance:function(a){var f=h.restrain(a);return function(a){return c.cata(a,function(c,g,h,k){c=f(g);return n(c,g,function(c){if(c===g)return b.pure(a);
d.revokeObjectURL(h);return b.fromFuture(e.single(c))})},function(){return b.pure(a)})}},processResults:function(a){return function(b){b=f.partition(b);0<b.errors.length&&(a("imageedit.generic"),k.error("Image resample errors: ",b.errors));return b.values}},resampleAction:n}});l("5l","91 92 7 93 94 95 96 97 98 7e 99 9a 74 58 4a".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s){return function(t,u,v,w,z){var x=t.content(),y=t.smartview(),A=t.ui().tabstrip,B=a(t.ui),C=n.processResults(B.showKey),
D=function(a){t.undo().save();a=k.validate(a);(a.failure()?d.curry(B.showKey,"fileupload.invalidimages"):B.hide)();v.assets(a.assets()).map(C).get(function(a){b.insertAssets(x,u,a)})},F=function(a){D(a.assets())};w.events.insertAssets.bind(function(a){z.allowLocalImages?D(a.assets()):p.getOrLog("errors.dragdrop.images.disallowed")});var E=x.cursor();w=s.create({analytics:q(["message"])});return{ui:l.ui({"fileupload.general":d.constant({value:"image",textkey:m.key("insert.image"),icon:!0,updateGeneral:d.identity,
action:function(){var a=f(x,A,y.uiContainer(),h,z,e.dialog);a.events.insertAssets.bind(F);a.events.close.bind(function(){x.focus();a.destroy()});a.events.escaped.bind(function(){x.focus();a.destroy()});t.content().hideInlineSelection();a.show()},hasDialog:!0}),"fileupload.menu":function(){var a=g(x,A,y,t.ui(),z);a.events.insertAsset.bind(function(a){E.get().bind(function(c){b.insertMobileAssets(x,c,u,[a.asset()])})});a.events.open.bind(function(a){x.getSelection().each(E.save)});return a},"camera.general":function(){var a=
c();a.events.upload.bind(function(a){E.get().bind(function(c){b.insertMobileAssets(x,c,u,a.assets())})});return{value:"image",textkey:m.key("image.from-camera"),icon:!0,updateGeneral:d.identity,action:function(){x.getSelection().each(E.save);x.toReading();a.open()},hasDialog:!0}}},d.identity),events:w.registry,destroy:function(){}}}});l("9b",["7","59","d3"],function(c,e,d){var a=e.resolve("find-match");e=e.resolve("find-mark");var b="."+a+", ."+e;return{configure:function(a){a.addSelector(a.output(),
b,d.unwrap);a.addSelector(a.history(),b,d.unwrap);a.addSelector(a.internal(),b,d.unwrap)},matchClass:c.constant(a),markClass:c.constant(e),findIdAttr:c.constant("data-ephox-find-id"),shiftKeyState:function(a){return{isShift:c.constant(a)}}}});l("xl",[],function(){var c=function(c){return{fold:c}};return{created:function(e){return c(function(c,a){return a(e)})},preserved:function(e){return c(function(c,a){return c(e)})}}});l("11i",["2w"],function(c){return c.immutable("id","match","current")});l("14h",
["6u"],function(c){return{resolve:c.create("data.ephox.cram").resolve}});l("14i",["6u"],function(c){return{resolve:c.create("ephox-cram").resolve}});l("11j","14h 14i 7 t 1b 2o 4h 33 2b".split(" "),function(c,e,d,a,b,g,f,h,k){var m=c.resolve("highlight-id"),n=e.resolve("highlight-wrap"),p=function(a,b){return h.closest(a,"."+b)},l=function(c){return a.from(b.get(c,m))};return{marker:p,idMarker:function(a){return p(a,n)},id:l,set:function(a,c){b.set(a,m,c);g.add(a,c)},all:function(a){return l(a).fold(d.constant([a]),
function(b){var c=k.owner(a);return f.descendants(c,"."+b)})}}});l("pn",["2w"],function(c){return c.immutable("word","pattern")});l("16x",["b","7","vb","i4"],function(c,e,d,a){return{separate:function(b,g,f){var h=c.bind(f,function(a){return[a.start(),a.finish()]}),k=a.splits(g,h,function(a,c){return d.subdivide(b,a.element(),c)});return c.map(f,function(d){var f=a.sublist(k,d.start(),d.finish()),f=c.map(f,function(a){return a.element()}),g=c.map(f,b.property().getText).join("");return{elements:e.constant(f),
word:d.word,exact:e.constant(g)}})}}});l("163","b t pn fg 102 kh 16x 6q i4 i5".split(" "),function(c,e,d,a,b,g,f,h,k,m){var n=function(b,c){return k.generate(c,function(c,d){var f=d+b.property().getText(c).length;return e.from(a.range(c,d,f))})},p=function(a,d,e,h){d=b.group(a,d,h);return c.bind(d,function(b){b=g.justText(b);var d=c.map(b,a.property().getText).join(""),d=m.findmany(d,e);b=n(a,b);return f.separate(a,b,d)})};return{safeWords:function(a,b,e,f){e=c.map(e,function(a){var b=h.safeword(a);
return d(a,b)});return p(a,b,e,f)},safeToken:function(a,b,c,e){c=d(c,h.safetoken(c));return p(a,b,[c],e)},run:p}});l("14j",["163"],function(c){return{safeWords:function(e,d,a,b){return c.safeWords(e,d,a,b)},safeToken:function(e,d,a,b){return c.safeToken(e,d,a,b)},run:function(e,d,a,b){return c.run(e,d,a,b)}}});l("11k",["6s","14j"],function(c,e){var d=c();return{safeWords:function(a,b,c){return e.safeWords(d,a,b,c)},safeToken:function(a,b,c){return e.safeToken(d,a,b,c)},run:function(a,b,c){return e.run(d,
a,b,c)}}});l("xm","b 11i 11j 31 7 t 11k".split(" "),function(c,e,d,a,b,g,f){var h=function(f,h){var n=c.bind(f.elements(),function(a){return d.marker(a,h).fold(b.constant([]),function(a){return[a]})}),p=a.generate("ephox-cram");return e(p,f,g.from(n[0]))};return{matchWords:function(a,b,c){return f.safeWords(a,b,c)},matchToken:function(a,b,c){return f.safeToken(a,b,c)},matchPattern:function(a,b,c){return f.run(a,[b],c)},annotates:function(a,b){return c.map(a,function(a){return h(a,b)})}}});l("pm",
["b","xl","xm","7","i3"],function(c,e,d,a,b){var g=function(f,g,k,m){g=d.annotates(m,k.label());return c.bind(g,function(d){return d.current().fold(function(){var g=d.match();if(f.ignore(g))return[];g=b.wrapper(g.elements(),k.nu)||[];c.each(g,a.curry(k.tag,d));return[e.created(g)]},function(a){return[e.preserved(a)]})})};return{highlight:function(a,b,c,e){c=d.matchToken(b,c,a.optimise);return g(a,b,e,c)},highlightPattern:function(a,b,c,e){c=d.matchPattern(b,c,a.optimise);return g(a,b,e,c)}}});l("hj",
"b pm 7 t pn 6q 9b fo 1b 2o l 2q 21 2s 4h 3m 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u){var v=function(a,b){return l.isElement(b)&&h.isBlock(b)?0>t.get(b).toLowerCase().indexOf(a):!1},w=function(a){return{ignore:d.constant(!1),optimise:d.curry(v,a.toLowerCase())}},z=d.constant("."+f.matchClass()),x={label:f.matchClass,tag:function(a,b){m.add(b,f.matchClass());k.set(b,f.findIdAttr(),a.id())},nu:function(){var a=n.fromTag("span");return{element:d.constant(a),wrap:d.curry(p.append,a)}}},
y=function(a){c.each(a,function(a){m.add(a,f.markClass())})},A=function(a){c.each(a,function(a){m.remove(a,f.markClass())})},B=function(b,d){var e=c.groupBy(s.descendants(b,d),function(a){return k.get(a,f.findIdAttr())});return 0===e.length?a.none():a.some(e)},C=function(a,c){var e=g.custom(g.sanitise(a),d.constant(0),d.constant(0),c);return b(a,e)},D=function(a,b,d){return B(a,z()).map(function(e){var g=c.filter(e,function(a){return m.has(a[0],f.markClass())}),h=c.findIndex(e,function(a){return c.contains(g,
a)});return{pos:d(e,c.flatten(g),h,b(h,e.length)),all:B(a,z())}})},F=function(a,b,c,d){A(b);y(a[d]);return d},E=function(a,b){return a===b-1?0:a+1},G=function(a,b){return 0===a?b-1:a-1},H=function(a,b){return D(a,E,function(a,d,e,f){F(a,d,e,f);p.before(d[0],n.fromText(b));c.each(d,q.remove);return 0===f?f:e})};return{search:function(b,c,d){if(0===c.length)return a.none();var f=w(c),g=u.children(b);c=!0===d?C(c,a.none()):C(c,a.some("gi"));e.highlightPattern(f,g,c,x);return B(b,z()).map(function(b){y(b[0]);
return{all:a.some(b),pos:0}})},clear:function(b){b=s.descendants(b,z());c.each(b,q.unwrap);return a.none()},next:function(a){return D(a,E,F)},prev:function(a){return D(a,G,F)},replace:H,replaceAll:function(b,c){for(;H(b,c).isSome(););return a.none()}}});l("hk",["7","t","hj","2b"],function(c,e,d,a){return function(a,g,f){var h=function(){g.counter.update(0,0)},k=function(c){c.all.fold(h,function(d){g.counter.update(c.pos+1,d.length);d=d[c.pos][0];a.setSelection(d,0,d,0);f.element(d)})},m=function(){f.cursor();
h()},n=function(a,b,c){d.clear(a);d.search(a,b,c).fold(m,k);return e.some(b)},p=function(a,b){var c=(!0===b?d.prev:d.next)(a);c.fold(m,k);return c},l=function(c){a.body().each(function(e){d.replace(e,c).fold(m,k);a.domChanged();a.undoChanged()})},q=e.none(),s=function(){q=e.none()};g.events.search.bind(function(c){a.body().each(function(a){n(a,c.term(),c.matchcase())})});g.events.next.bind(function(){a.body().each(function(a){p(a,!1)})});g.events.prev.bind(function(){a.body().each(function(a){p(a,
!0)})});g.events.replace.bind(function(a){l(a.value())});g.events.replaceAll.bind(function(c){a.body().each(function(e){d.replaceAll(e,c.value()).fold(m,k);a.undoChanged()})});g.events.interactive.bind(function(c){a.body().each(function(a){q=n(a,c.term(),c.matchcase())})});g.events.encase.bind(function(c){a.body().each(function(a){q.each(function(b){n(a,b,c.matchcase())})})});g.events.clear.bind(function(c){a.body().each(function(a){d.clear(a);s()})});return{zeroCount:h,updateMatch:k,enterSearchAction:function(d,
e){a.body().each(function(a){var b=g.getCase();q=q.filter(function(a){return d===a}).fold(function(){return n(a,d,b)},function(f){return p(a,e.isShift()).fold(function(){return n(a,d,b)},c.constant(q))})});(0===d.length?g.counter.hide:g.counter.show)()},enterReplaceAction:l,clearLastSearch:s}}});l("hl",["c","7","d4"],function(c,e,d){var a=c.detect().deviceType.isiOS();return function(b){var c=b.content();b=function(a){c.elementIntoView(a)};var f=function(){c.cursorIntoView()};b={element:a?b:e.curry(d.elementIntoView,
c),cursor:a?f:e.curry(d.cursorIntoView,c)};return{get:e.constant(b)}}});l("pp","8e aq 52 hp eo m0 7 7e 59 58 4a 4b 1b 2n 2o 4e 2p 3y l 30 2q 3c j0 2s b4".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x,y,A,B,C){var D=function(a,b,d){a=a();var e=a.element();t.add(e,b);c.button(e,d);l.set(e,"tabindex","-1");a.events.click.bind(function(){z.focus(e)});return a},F=function(b,c){var d=D(a,b,c);l.set(d.element(),"title",c);return d},E=function(c,d){var e=k.resolve("inline-main-button"),e=
c.concat([e]),e=D(a,e,d);e.content(b(d));return e},G=function(a,b,c){var d=k.resolve("inline-main-button-toggle");a=a.concat([d]);c=D(g,a,c);l.set(c.element(),"title",b);return c},H=function(a,b,d){var e=w.fromTag("input");t.add(e,a);l.set(e,"placeholder",b);c.label(e,d);return{element:f.constant(e),destroy:f.curry(B.remove,e)}};return{counter:function(a){var b=d.div(),c=d.span();s.add(b,k.resolve("search-widget-counter"));s.add(c,k.resolve("search-widget-counter-text"));x.append(b,c);return{element:f.constant(b),
update:function(a,b){var d=h.translate("units.amount-of-total",a,b);B.empty(c);x.append(c,w.fromText(d));C.isVisible(c)&&e.speak(q.body(),d)},hide:function(){u.set(b,"display","none")},show:function(){u.remove(b,"display")},destroy:function(){B.remove(c);B.remove(b)}}},dummyCounter:function(a){a=d.div();s.add(a,k.resolve("search-widget-counter"));return{element:f.constant(a),update:f.noop,hide:f.noop,show:f.noop,destroy:f.curry(B.remove,a)}},searchField:function(){var a=d.span(),b=F([k.resolve("stepper-button"),
k.resolve("search-widget-previous")],h.translate("search.previous")),c=F([k.resolve("stepper-button"),k.resolve("search-widget-next")],h.translate("search.next")),e=G([k.resolve("search-widget-more")],h.translate("aria.label.more"),h.translate("aria.label.more"));s.add(a,k.resolve("search-widget-searchField"));var g=H([k.resolve("search-widget-input"),k.resolve("search-widget-input-search")].concat(A.isSmallTouch()?[k.resolve("search-widget-small-touch")]:[]),h.translate("search.search"),h.translate("search.field.search")),
l=n.create({next:p([],c.events.click),previous:p([],b.events.click),more:p([],e.events.click),input:m(["raw"])}),r=v.bind(g.element(),"input",l.trigger.input);y.append(a,[g.element(),b.element(),c.element(),e.element()]);return{events:l.registry,element:f.constant(a),input:g.element,focus:function(){z.focus(g.element())},previous:b.element,next:c.element,moreToggle:e,destroy:function(){r.unbind();g.destroy();b.destroy();c.destroy();e.destroy()}}},replaceDrawer:function(){var a=H([k.resolve("search-widget-input"),
k.resolve("search-widget-input-replace")],h.translate("search.replace"),h.translate("search.field.replace")),b=G([k.resolve("search-widget-matchcase")],h.translate("search.matchcase"),h.translate("search.matchcase")),e=E([k.resolve("search-widget-replace")],h.translate("search.replace")),g=E([k.resolve("search-widget-replace-all")],h.translate("search.replace-all")),m=w.fromTag("div");c.group(m);var n=d.div();s.add(m,k.resolve("search-widget-replace-drawer"));s.add(n,k.resolve("search-widget-replace-drawer-tools"));
y.append(n,[b.element(),e.element(),g.element()]);y.append(m,[a.element(),n]);return{element:f.constant(m),replace:e,replaceAll:g,input:a,matchcase:b,destroy:function(){b.destroy();e.destroy();g.destroy();B.remove(n);B.remove(m)}}},button:F,input:H}});l("hm","po 8e fp 52 7 ae pp 59 58 4a 4b 2o 2p 3y 5a 3c j0 2s 34".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w){var z=function(a,b,c){a?(d.expanded(b),e.hidden(c,!1)):(d.collapsed(b),e.hidden(c,!0))};return function(){var x=a.div();p.add(x,
h.resolve("search-widget"));var y=f.searchField(),A=(u.isSmallTouch()?f.dummyCounter:f.counter)(y.input()),B=f.replaceDrawer(),C=B.element(),D=m.create({next:n([],y.events.next),prev:n([],y.events.previous),replace:k(["value"]),replaceAll:k(["value"]),search:k(["term","matchcase","isShift"]),interactive:k(["term","matchcase"]),encase:k(["matchcase"]),clear:k([])});d.setPressed(B.matchcase.element(),B.matchcase.selected());var F=c(C);e.linkElements(y.moreToggle.element(),C);z(F.visible(),y.moreToggle.element(),
C);y.moreToggle.events.click.bind(function(){(F.visible()?F.hide:F.show)()});y.events.input.bind(function(){var a=w.get(y.input()),b=s.get(y.element());l.set(A.element(),"height",b+"px");3<=a.length?G.throttle(a):(D.trigger.clear(),A.hide(),A.update(0,0))});B.replace.events.click.bind(function(){var a=w.get(B.input.element());D.trigger.replace(a)});B.replaceAll.events.click.bind(function(){var a=w.get(B.input.element());D.trigger.replaceAll(a)});B.matchcase.events.click.bind(function(){d.setPressed(B.matchcase.element(),
B.matchcase.selected());D.trigger.encase(E())});var E=function(){return B.matchcase.selected()},G=g(function(a){A.show();D.trigger.interactive(a,E())},500),H=q.bind(C,"transitionend",function(a){"opacity"===a.raw().propertyName&&p.remove(C,"ephox-chameleon-toolbar-more-open");z(F.visible(),y.moreToggle.element(),C)});t.append(x,[A.element(),y.element(),B.element()]);return{element:b.constant(x),search:y,focus:function(){y.focus()},drawer:B,counter:A,getCase:E,destroy:function(){H.unbind();y.destroy();
B.destroy();A.destroy();F.destroy();v.remove(x)},events:D.registry}}});l("9c","h2 92 7 hj h4 hk 9b hl hm 58 4a 34".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){return function(l){var q=l.content(),s=k();l=h(l);var t=g(q,s,l.get()),u=function(a){var b=a.endContainer();a=a.endOffset();q.setSelection(b,a,b,a)};l=c.button({execute:b.button});l=[e.input(s.search.input(),c.input({execute:function(a,b){t.enterSearchAction(a,b)}})),e.button(s.search.previous(),l),e.button(s.search.next(),l),e.button(s.search.moreToggle.element(),
l),e.input(s.drawer.input.element(),c.input({execute:function(a,b){t.enterReplaceAction(a)}})),e.button(s.drawer.matchcase.element(),l),e.button(s.drawer.replace.element(),l),e.button(s.drawer.replaceAll.element(),l)];var v=n.create({done:m([])});return{element:s.element,anchorName:d.constant("search-widget-anchor"),textkey:d.constant("action.search"),dialogTextkey:d.constant("search.menu"),destroy:function(){s.destroy()},keylayouts:d.constant(l),openWidget:function(){t.enterSearchAction(p.get(s.search.input()),
f.shiftKeyState(!1))},closeWidget:function(){q.body().each(function(b){q.getSelection().each(u);a.clear(b)});t.clearLastSearch()},events:v.registry}}});l("hn",["4o"],function(c){return{text:c.generate([{text:["field","input"]}]).text,cata:function(c,d){return c.fold(d)}}});l("9d","7 hj hk 9b hl hn hm 58 4a 30 2q 34 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l){return function(q,s){var t=q.content(),u=f(),v=b(q),w=d(t,u,v.get()),v=k.create({toEditor:h([])}),z=g.text(u.search.element(),u.search.input());
return{element:u.element,addEscape:function(a){n.append(u.search.element(),a.element())},open:function(){w.enterSearchAction(p.get(u.search.input()),a.shiftKeyState(!1));l(u.focus,250)},close:function(){t.body().each(function(a){e.clear(a).fold(w.zeroCount,w.updateMatch)});w.clearLastSearch()},execute:function(b){if(m.hasFocus(u.search.input())){b=a.shiftKeyState(!0===b.raw().shiftKey);var c=p.get(u.search.input());w.enterSearchAction(c,b)}else b=p.get(u.drawer.input.element()),w.enterReplaceAction(b)},
type:c.constant(z),events:v.registry,destroy:function(){u.destroy()}}}});l("9e","7g b 8e c ho hp hq 7 s t hr hn 7e ak 59 58 4a 4n 56 1b 2o 3y l 30 2q 4j 4h 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x,y,A,B,C,D,F,E){var G=a.detect(),H=w.ensureWith("element addEscape open close execute type events destroy".split(" "),n.isFunctionOrEvents(["toEditor"]));return function(a,n){H(n);var w=a.content(),E=a.ui().tabstrip.element();x.add(n.element(),s.resolve("slick-widget"));G.browser.isSafari()&&
e.each(F.descendants(n.element(),"input,textarea"),function(a){z.setAll(a,{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"})});var N=p.cata(n.type(),function(a,c){x.add(a,s.resolve("slick-widget-field"));x.add(c,s.resolve("slick-widget-input"));var d=y.bind(n.element(),"keydown",function(a){var b={original:h.constant(a)};if(q.isEnter(b))n.execute(a),a.kill();else if(q.isTab(b)){var b=F.descendants(n.element(),"input,textarea"),c=e.findIndex(b,B.hasFocus);-1<c&&(c=(c+1)%
b.length,0<=c&&c<b.length&&B.focus(b[c]));a.kill()}else q.isEscape(b)&&(Q(),a.kill())}),f=y.bind(c,"blur",function(a){m.from(a.raw().relatedTarget).each(function(a){!0===D.ancestor(A.fromDom(a),function(a){return x.has(a,"ephox-polish-mobile-toolbar-hide")}).isSome()&&b.refreshInput(c)})});return{destroy:function(){d.unbind();f.unbind()}}}),M=g("shizniz"),O=l.translate("toolbar.backbutton"),S=f([c.resolve("icon")]);M.content(S);z.set(M.element(),"title",O);d.toolbarButton(M.element(),O,!1,!1);n.addEscape(M);
var P=v(!1);C.prepend(E,n.element());var U=u.create({done:t([]),abort:t([]),open:t([]),close:t([])}),Q=function(){W();w.toEditing()};n.events.toEditor.bind(Q);var V=k.cached(function(a){return F.children(E,"."+c.resolve("toolbar"))}),W=function(){n.close();P.set(!1);e.each(V(),function(a){x.remove(a,s.resolve("mobile-toolbar-hide"))});x.remove(n.element(),s.resolve("mobile-toolbar-show"));x.add(n.element(),s.resolve("mobile-toolbar-hide"));U.trigger.close()};w.events.mousedown.bind(W);W();M.events.click.bind(function(){Q();
U.trigger.abort()});return{element:n.element,destroy:function(){w.events.mousedown.unbind(W);N.destroy();n.destroy()},events:U.registry,open:function(){var a=y.bind(E,"transitionend",function(){n.open();U.trigger.open();a.unbind()});P.set(!0);e.each(V(),function(a){x.remove(a,s.resolve("mobile-toolbar-show"));x.add(a,s.resolve("mobile-toolbar-hide"))});x.remove(n.element(),s.resolve("mobile-toolbar-hide"));x.add(n.element(),s.resolve("mobile-toolbar-show"))},close:W,isOpen:function(){return P.get()}}}});
l("5m","c s 9b 9c 9d 7d 9e 7e 59 74 7f 58 4a 2o".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q){var s=k.resolve("toolbar-dialog"),t=function(b){var c=a(b);return g(b,c,"search",s)},u=function(a){var c=b(a);return f(a,c,s)},v=function(a){return(c.detect().deviceType.isTouch()?u:t)(a)};return function(a){var b=a.filter();d.configure(b);var c=l.create({analytics:p(["message"])}),f=e.cached(function(){var b=v(a);b.events.open.bind(function(){c.trigger.analytics("search_tool_open")});b.events.abort.bind(b.close);
return b}),b=function(){var a=f();(a.isOpen()?a.close:a.open)()};a.shortcuts().events.search.bind(b);return{ui:m.ui({"find.general":{toggle:!1,hasPopup:!1,value:"search",textkey:h.key("action.search"),action:b,updateGeneral:function(a){q.add(a.element(),k.resolve("search"))},icon:!0,tooltip:n.get}}),events:c.registry,destroy:function(){f().destroy()}}}});l("9f","7 ek 7o 7z ee em 1b".split(" "),function(c,e,d,a,b,g,f){var h=function(c){return a.isAnnotation(c)||f.has(c,b.overrideSpan())},k=function(a,
b,f,g,k,m){var l=function(b){a(b,k,h)};d.cata(g.get(),c.noop,e.multiple(b,f,l,m),e.single(b,f,l,m))},m=function(a,b,c,d,e){k(a,b,c,d,e,b.toEditing)};return{face:c.curry(m,g.face),background:c.curry(m,g.background),foreground:c.curry(m,g.foreground),size:c.curry(m,g.size),partialSize:c.curry(function(a,b,d,e,f){k(a,b,d,e,f,c.noop)},g.size)}});l("9h",["2w"],function(c){return{color:c.immutable("hex","classes","name"),face:c.immutable("textkey","value","icon"),size:c.immutable("name","size")}});l("9g",
["7","s","t","9h","7e"],function(c,e,d,a,b){var g=a.color,f=a.face,h=a.size;a=e.cached(function(){return[g("#FFF",["color-highlight-dark","color-option-white"],b.key("color.white")),g("#000",["color-highlight-light"],b.key("color.black")),g("#444",["color-highlight-light"],b.key("color.gray")),g("#777",["color-highlight-light"],b.key("color.metal")),g("#CCC",["color-highlight-light"],b.key("color.smoke")),g("#FC1D00",["color-highlight-light"],b.key("color.red")),g("#C81500",["color-highlight-light"],
b.key("color.darkred")),g("#FF8C00",["color-highlight-dark"],b.key("color.darkorange")),g("#FEBE00",["color-highlight-dark"],b.key("color.orange")),g("#FFFC00",["color-highlight-dark"],b.key("color.yellow")),g("#22AE50",["color-highlight-dark"],b.key("color.green")),g("#006400",["color-highlight-dark"],b.key("color.darkgreen")),g("#3CB371",["color-highlight-dark"],b.key("color.mediumseagreen")),g("#8FCD4E",["color-highlight-dark"],b.key("color.lightgreen")),g("#00FF00 ",["color-highlight-dark"],b.key("color.lime")),
g("#0000CD",["color-highlight-dark"],b.key("color.mediumblue")),g("#002360",["color-highlight-light"],b.key("color.navy")),g("#0173C1",["color-highlight-light"],b.key("color.blue")),g("#14B2F2",["color-highlight-dark"],b.key("color.lightblue")),g("#ee82ee",["color-highlight-light"],b.key("color.violet"))]});e=e.cached(function(){return[f(b.key("font.arial"),"Arial",d.none()),f(b.key("font.comicsans"),"Comic Sans MS",d.none()),f(b.key("font.consolas"),"Consolas",d.none()),f(b.key("font.courier"),"Courier",
d.none()),f(b.key("font.georgia"),"Georgia",d.none()),f(b.key("font.impact"),"Impact",d.none()),f(b.key("font.tahoma"),"Tahoma",d.none()),f(b.key("font.timesnr"),"Times New Roman",d.none()),f(b.key("font.trebuchet"),"Trebuchet MS",d.none()),f(b.key("font.verdana"),"Verdana",d.none())]});h=[h("font.small","10px"),h("font.medium","13px"),h("font.large","18px"),h("font.huge","32px")];return{colors:a,faces:e,sizes:c.constant(h)}});l("iz",["8e","hp","7e","1b","4e"],function(c,e,d,a,b){return function(g,
f){var h=e();b.add(h.element(),g);c.button(h.element(),d.translate(f));a.set(h.element(),"title",d.translate(f));return h}});l("hw",["7"],function(c){return{configuration:c.constant({i18nNamespace:"font",cssNamespace:"font",property:"font-size",tag:"span",specials:["xx-small x-small small medium large x-large xx-large".split(" ")]})}});l("6a",["a"],function(c){return{isEmpty:function(e){return null===e||void 0===e||""===e||c.isArray(e)&&0===e.length}}});l("pr","7 t p 6a xk 2p 1m 1u ps".split(" "),
function(c,e,d,a,b,g,f,h,k){var m=function(a){var b=f.pNum(a)?"px":"";return a+b},n=function(a,b,c){return(g.isValidValue(a,b,c)?e.some(c):e.none()).fold(function(){return d.error("Invalid value: "+c)},function(a){return a===c?d.value(c):d.error("Invalid value: "+c)})},p=function(a){return b.identify(a).fold(function(a){return a},function(a,b,c){return h.round(10*b)/10+c})};return{identify:b.identify,validate:function(b,e,f){return(a.isEmpty(b)?d.error("can not use empty value for font size."):d.value(b)).map(m).map(p).bind(c.curry(n,
e,f))},sanitise:function(a){return p(a)}}});l("pq","a b 7 t pr 1u ps".split(" "),function(c,e,d,a,b,g,f){var h={px:1,em:0.1,"%":10,pt:1,rem:"0.1"},k=function(b,c,d){c=e.find(c,function(a){return e.contains(a,d)});return a.from(c).bind(function(c){var f=e.indexOf(c,d);return-1<f?a.from(c[b(f,c)]):a.none()}).getOr(d)};f=function(a,d,e,f){return b.identify(f).fold(function(b){return k(a,e,b)},function(a,b,e){a=void 0!==h[e]?h[e]:1;var f=d*(void 0!==h[e]?h[e]:1);return(c.isNumber(b)&&0<=b?g.max(a,b+f):
a)+e})};return{decrease:d.curry(f,function(a,b){return g.max(0,a-1)},-1),increase:d.curry(f,function(a,b){return g.min(b.length-1,a+1)},1)}});l("hs","8e aq 52 7 9f iz hn hw 7e pq pr 59 58 4a 2w 2n 2o l 30 2q 3c 34 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x,y,A){var B=s.immutableBag(["i18nNamespace","cssNamespace","property","tag","specials"],[]);return function(s,A){var F=B(h.configuration()),E=F.i18nNamespace(),G=F.cssNamespace(),H=d.div();u.add(H,p.resolve("fontsize-widget"));
var L=d.span();u.add(L,p.resolve("fontsize-widget-field"));var I=d.div();u.add(I,p.resolve("fontsize-widget-exit"));var J=v.fromTag("input");u.add(J,p.resolve("fontsize-widget-input"));c.label(J,k.translate(E+".stepper.input"));var K=function(a){u.remove(J,p.resolve("slick-widget-invalid-input"));c.invalid(J,!1);y.set(J,a);b.partialSize(s.content(),s.undo(),s.selections(),a);e.speak(t.body(),a)},N=function(){u.add(J,p.resolve("slick-widget-invalid-input"));c.invalid(J,!0);e.speak(t.body(),k.translate("aria.input.invalid"));
w.focus(J)},M=function(a){return function(){var b=y.get(J),b=a(F.specials(),b);n.validate(b,F.tag(),F.property()).fold(N,K)}},O=M(m.decrease),M=M(m.increase),S=function(a,b){return g([p.resolve(G+a),p.resolve("stepper-button")],E+b)},P=S("-stepper-decrease",".stepper.decrease"),S=S("-stepper-increase",".stepper.increase");P.events.click.bind(O);S.events.click.bind(M);x.append(L,[P.element(),J,S.element()]);z.append(H,L);z.append(H,I);var L=f.text(L,J),U=q.create({toEditor:l([]),size:l(["value"])}),
Q=function(){y.set(J,"")},V=function(a){a=n.sanitise(a);n.validate(a,F.tag(),F.property()).fold(N,function(a){u.remove(J,p.resolve("slick-widget-invalid-input"));c.invalid(J,!1)});y.set(J,a)};return{element:a.constant(H),addEscape:function(a){z.append(I,a.element())},open:function(){w.focus(J)},close:a.noop,execute:function(){var a=y.get(J);n.validate(a,F.tag(),F.property()).fold(N,function(a){K(a);U.trigger.toEditor()})},destroy:a.noop,type:a.constant(L),represent:function(a){a.fold(Q,V,V)},events:U.registry}}});
l("ht","b t fh 7o 6a 7m 2w 2p 21 4j 2b ps".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var l=f.immutable("size"),q=function(b){b=a.toSelection(b.get()).fold(g.off,function(a){var b=a.startContainer();a=c.contains(["td","th"],k.name(b))?d.freefallLtr(a.startContainer()).element():a.startContainer();a=u(a);return g.on(a)});return l(b)},s=function(a){return a.body().bind(function(a){a=h.get(a,"font-size");return e.from(a)})},t=function(a){var c=a.dom();if(!c.style)return!1;c=c.style.fontSize;return"body"!==
k.name(a)&&!b.isEmpty(c)},u=function(a){var b=k.isText(a)?n.parent(a).getOrDie():a;return(t(b)?e.some(b):m.ancestor(b,t)).fold(function(){return h.get(b,"font-size")},function(a){return a.dom().style.fontSize})};return{getState:function(a,b){return{readState:q(a),fallbackSize:s(b).getOr("12px")}}}});l("9i","7 t hs 9e 7e ht 4n 3w".split(" "),function(c,e,d,a,b,g,f,h){return function(h,m){var n=h.content(),p=f(e.none()),l=function(){var b=d(h,m),c=a(h,b),b={represent:b.represent,refreshValue:b.refreshValue,
open:c.open,close:c.close,isOpen:c.isOpen};p.set(e.some(b));return b},q={toggle:!1,value:"size",textkey:b.key("font.size"),action:function(){var a=p.get().getOrThunk(l);if(a.isOpen())a.close();else{var b=g.getState(h.selections(),n);a.open();a.represent(b.readState.size())}},updateGeneral:c.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!1};return{general:c.constant(q)}}});l("pv","8e 7 7e 59 58 4a 1b 2o 3y l 30 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){return function(l){var q=l.hex(),s=m.fromTag("span");
h.add(s,a.resolve("palette-detail-action"));f.set(s,"title",d.get(l.name()));c.option(s,d.get(l.name()),!1,!1);var t=g.create({selected:b(["value"])}),u=k.bind(s,"click",function(){n.focus(s);t.trigger.selected(q)});return{element:function(){return s},value:e.constant(q),destroy:function(){u.unbind();p.remove(s)},events:t.registry}}});l("pw","b 8e fp 52 7 7e 59 3e 58 4a 2o 2p l 2q 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s){return function(){var t=[],u=a.div(),v=l.fromTag("span");e.listBox(v);
n.add(v,f.resolve("palette-detail-actions"));n.add(v,f.resolve("palette-color-options"));e.label(v,g.translate("aria.font.palette"));q.append(u,v);var w=h.create(),z=m.create({selected:k(["value"])});return{element:function(){return u},add:function(a){t.push(a.destroy);q.append(v,a.element());w.bind(a.events.selected,function(a){z.trigger.selected(a.value())})},remove:function(a){s.remove(a.element());w.unbind(a.events.selected)},show:function(){n.add(u,f.resolve("palette-detail-active"));d.showPanel(u);
p.remove(u,"display")},hide:function(){n.remove(u,f.resolve("palette-detail-active"));d.hidePanel(u);p.set(u,"display","none")},destroy:function(){c.each(t,b.apply);s.remove(u);t=[]},events:z.registry}}});l("js","b h2 92 6 7 t 9g pv pw 59 2o 4e 2p 5a 3o 4h 1u".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u){var v=function(a){a.dom().click();return g.some(a)},w=function(a,d){var e=t.descendants(a,d);if(0<q.get(a)&&0<e.length){var f=s.absolute(e[0]).top(),h=c.findIndex(e.slice(1),function(a){return s.absolute(a).top()!==
f});return-1<h?g.some({rows:b.constant(u.ceil(e.length/(h+1))),columns:b.constant(h+1)}):g.none()}return g.none()};return{create:function(a){var b=void 0!==a?a:f.colors();a=k();b=c.map(b,function(a){var b=h(a);p.add(b.element(),c.map(a.classes(),m.resolve));n.add(b.element(),m.resolve("palette-color-option"));l.set(b.element(),"background-color",a.hex());return b});c.each(b,a.add);return a},makeLayout:function(c,f,g){g=e.grid(a.deepMerge({trigger:v},g));var h=d.grid(c,{cell:b.constant(f)},4,5,g);
return{layout:b.constant(h),refresh:function(){h.clear();w(c,f).each(function(a){h.resize(a.rows(),a.columns())})}}}}});l("pt",["js","6x","1u"],function(c,e,d){var a=function(a){return e.closest(a,".ephox-polish-palette-detail-active")};return function(b,d){var e=c.makeLayout(d,".ephox-polish-palette-detail-action.ephox-polish-palette-color-option",{isValid:a}),h=e.layout();return{isFocused:h.isFocused,enterGrid:h.enter,grid:h,refresh:e.refresh,destroy:h.destroy,clear:h.clear}}});l("pu","8e c eo m0 7 t 7e 59 2o l 2q 2s".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p){var l=e.detect().deviceType.isTouch;return function(){var e=m.fromTag("div");l()?c.presentation(e):c.menuItem(e,g.none(),g.none());k.add(e,h.resolve("color-widget"));var s=m.fromTag("div");k.add(s,h.resolve("color-widget-controls"));c.tabList(s);var t=m.fromTag("div");k.add(t,h.resolve("color-widget-palettes"));c.toolbarGroup(t);var u=a("text-color");k.add(u.element(),h.resolve("tab-button"));u.content(d(f.translate("font.color")));c.tabButton(u.element(),f.translate("aria.font.color"));
var v=a("highlight-color");k.add(v.element(),h.resolve("tab-button"));v.content(d(f.translate("font.highlight")));c.tabButton(v.element(),f.translate("aria.font.highlight"));n.append(s,u.element());n.append(s,v.element());n.append(e,s);n.append(e,t);return{element:b.constant(e),colorToggle:b.constant(u),highlightToggle:b.constant(v),content:b.constant(t),controls:b.constant(s),destroy:function(){u.destroy();v.destroy();p.remove(t);p.remove(s)}}}});l("hu","8e fp h2 92 7 9g pt pu js 58 4a 4b 2q 33 1u".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s){return function(){var s=k.create(g.colors()),u=k.create(g.colors()),v=n.create({color:p(["value"],s.events.selected),highlight:p(["value"],u.events.selected),abort:m([])}),w=h(),z=w.colorToggle(),x=w.highlightToggle();c.linkTabToPanel(z.element(),s.element());c.linkTabToPanel(x.element(),u.element());l.append(w.content(),s.element());l.append(w.content(),u.element());var y=f(w,s.element()),A=f(w,u.element()),B=a.flow(w.controls(),{item:b.constant(".ephox-pastry-statebutton")},
d.flow({trigger:function(a,b){return q.descendant(a,".ephox-pastry-button").map(function(a){a.dom().click();return a})},executeOnArrow:!0})),C=a.multiple(w.element(),[B,y.grid,A.grid]);C.events.exit.bind(function(a){v.trigger.abort()});var D=function(){u.hide();z.select();x.deselect();e.tabSelected(z.element(),[x.element()]);s.show()};z.events.click.bind(function(){B.clickFocus(z.element());D()});x.events.click.bind(function(){B.clickFocus(x.element());s.hide();z.deselect();e.tabSelected(x.element(),
[z.element()]);u.show()});return{element:w.element,destroy:function(){s.destroy();C.destroy();u.destroy();w.destroy()},open:function(){C.clear();C.refresh();z.click();D();C.enter()},close:function(){C.exit()},events:v.registry}}});l("9j","7 53 9f hu 7e 58 4a 4b".split(" "),function(c,e,d,a,b,g,f,h){return{widget:function(k){var m=k.content(),n=k.undo(),p=k.selections(),l=a(),q=f.create({color:h(["value"],l.events.color),highlight:h(["value"],l.events.highlight),done:g([]),abort:h([],l.events.abort)});
l.events.color.bind(function(a){q.trigger.done();d.foreground(m,n,p,a.value());m.toEditing()});l.events.highlight.bind(function(a){q.trigger.done();d.background(m,n,p,a.value());m.toEditing()});return{element:l.element,name:c.constant("color"),textkey:c.constant(b.key("font.coloroption")),menuTextkey:c.constant(b.key("aria.color.menu")),open:l.open,close:l.close,updateWidget:function(a){e.isHighContrast(k.smartview())?a.disable():l.open()},ability:c.noop,destroy:l.destroy,events:q.registry,label:c.constant(!1)}}}});
l("xn",["7","t"],function(c,e){return function(){var d=e.none(),a=function(a){d.bind(function(c){c[a]()})};return{enter:c.curry(a,"enter"),exit:c.curry(a,"exit"),destroy:c.curry(a,"destroy"),set:function(a){d=e.some(a)}}}});l("px","8e aq h2 92 lf ar 52 hp hq 7 t xn 7e 59 58 4a 1b 2o 1c 3y l 30 2q 3c 2s 2b 34 1u".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x,y,A,B,C,D,F,E){return function(G,H){var E=H.i18nNamespace(),I=H.cssNamespace(),J=t.create({plus:s([]),minus:s([]),validate:s([]),
abort:s([])}),K=h(),N=h(),M=f.div(),O=f.div(),S=x.fromTag("input");c.label(S,l.translate(E+".stepper.input"));c.toolbarButton(K.element(),l.translate(E+".stepper.increase"),!1,!1);c.toolbarButton(N.element(),l.translate(E+".stepper.decrease"),!1,!1);u.set(S,"tabindex","-1");u.set(K.element(),"tabindex","-1");u.set(N.element(),"tabindex","-1");v.add(O,q.resolve(I+"-stepper-input"));v.add(M,q.resolve(I+"-stepper-options"));v.add(K.element(),q.resolve("stepper-button"));K.content(k([q.resolve(I+"-stepper-increase")]));
v.add(N.element(),q.resolve("stepper-button"));N.content(k([q.resolve(I+"-stepper-decrease")]));A.append(O,S);B.append(M,[K.element(),N.element()]);B.append(G,[O,M]);K.events.click.bind(function(){y.focus(K.element());J.trigger.plus()});N.events.click.bind(function(){y.focus(N.element());J.trigger.minus()});var P=function(){S.dom().setSelectionRange(0,F.get(S).length)},U=z.capture(G,"click",function(a){w.eq(a.target(),O)&&Q.enter()}),Q=p(),V=v.toggler(S,q.resolve("invalid-"+I+"-size"));return{destroy:function(){K.destroy();
N.destroy();Q.destroy();U.unbind();C.remove(S)},highlight:function(){V.on();u.set(S,"title",l.translate("aria.stepper.input.invalid"));e.shout(S,l.translate("aria.stepper.input.invalid"))},dehighlight:function(){V.off();u.remove(S,"title")},input:m.constant(S),focus:function(){y.focus(S);P()},enter:Q.enter,exit:Q.exit,initLayout:function(){var c=a.single(S,[b.basic(g.ENTER()[0],function(){J.trigger.validate();return n.some(!0)})],n.none());c.events.enter.bind(P);var e=d.button({execute:function(a){a.dom().click();
y.focus(a);return n.some(a)}}),c=a.multiple(G,[c,a.button(K.element(),e),a.button(N.element(),e)]);c.events.exit.bind(function(){D.parent(O).each(y.focus);J.trigger.abort()});Q.set(c)},events:J.registry}}});l("hx","52 7 px pq pr 59 58 4a 4b 2w 2o 1c 3y 2s 34".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s){var t=m.immutableBag(["i18nNamespace","cssNamespace","property","tag","specials"],[]);return function(m){var v=t(m),w=c.div(),z=d(w,v);n.add(w,g.resolve(v.cssNamespace()+"-size-widget"));var x=
function(){return s.get(z.input())},y=function(a){var c=x();a=a(c);a=b.sanitise(a);s.set(z.input(),a);A.trigger.action(a);z.dehighlight()};z.events.validate.bind(function(a){a=x();b.validate(a,v.tag(),v.property()).fold(function(){z.highlight()},function(a){s.set(z.input(),a);A.trigger.action(a);z.dehighlight();A.trigger.close()})});z.events.plus.bind(function(b){y(e.curry(a.increase,v.specials()))});z.events.minus.bind(function(b){y(e.curry(a.decrease,v.specials()))});var A=h.create({close:f([]),
action:f(["value"]),abort:k([],z.events.abort)}),B=l.bind(w,"click",function(a){(p.eq(a.target(),w)||p.eq(a.target(),z.input()))&&z.enter()});return{element:e.constant(w),input:z.input,getCurrentValue:x,focus:z.focus,enter:z.enter,initLayout:z.initLayout,destroy:function(){B.unbind();z.destroy();q.remove(w)},updateInlineWidget:function(a,c){var d=function(a){b.validate(a,v.tag(),v.property()).each(function(a){s.set(z.input(),a);z.dehighlight()})};a.size().fold(function(){d(c);n.add(w,g.resolve("default-"+
v.cssNamespace()+"-size"))},e.noop,function(a){d(a);n.remove(w,g.resolve("default-"+v.cssNamespace()+"-size"))})},open:e.noop,close:e.noop,events:A.registry}}});l("9k","8e 7 9f hv hw hx 7e ht 58 4a 4b 30".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){return{widget:function(c,l){var s=a.cata(l,e.constant(e.noop),e.constant(function(a){a.initLayout()})),t=c.content(),u=c.undo(),v=g(b.configuration());s(v);var w=m.create({done:k([]),abort:n([],v.events.abort)});v.events.close.bind(function(a){w.trigger.done()});
v.events.action.bind(function(a){var b=p.active();t.focus();d.size(t,u,c.selections(),a.value());b.each(p.focus)});return{element:v.element,item:v.item,name:e.constant("size"),textkey:e.constant(f.key("font.size")),open:v.open,close:v.close,updateInlineWidget:function(){var a=h.getState(c.selections(),t);v.updateInlineWidget(a.readState,a.fallbackSize)},ability:e.noop,destroy:v.destroy,events:w.registry}}}});l("hz","h3 7e h5 59 58 4a 2o 3y l 36".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(n,
p,l,q){var s=l();l=d.okCancel("font-size");var t=c(p),u=null,v=g.create({close:b([]),open:b([]),analytics:b(["message"]),ok:b(["value"])});p=function(){u.unbind();t.hide();v.trigger.close()};t.setTitle(e.translate("font.size"));t.setContent(s.element());t.setControls(l.element());t.events.close.bind(p);l.events.ok.bind(function(){v.trigger.ok(s.getCurrentValue())});l.events.cancel.bind(p);f.add(t.element(),a.resolve("widget-dialog"));return{show:function(){t.show();var a=k.fromDom(m);u=h.bind(a,"orientationchange",
function(){n.foreground()});v.trigger.open()},element:t.element,contents:s,events:v.registry,destroy:function(){t.hide();t.destroy();s.destroy()}}}});l("9l","hy 7 9f hz hw hx 7e ht 58 4a 4b 1b 3y 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q){return{widget:function(s,q){var u=s.content(),v=s.smartview().uiContainer(),w=s.ui().tabstrip.element,z=s.undo(),x=g(b.configuration()),y=x.input(),A=c(w());p.set(y,"disabled","true");var B=l.bind(y,"touchstart",function(c){c.kill();A.closeMenus();var f=
a(u,v,e.curry(g,b.configuration()));f.show();c=f.contents;var k=h.getState(s.selections(),u),m=function(){f.destroy();u.cursorIntoView()};c.updateInlineWidget(k.readState,k.fallbackSize);c.events.close.bind(m);c.events.action.bind(function(a){d.size(u,z,s.selections(),a.value())});f.events.close.bind(f.destroy);f.events.ok.bind(function(a){d.size(u,z,s.selections(),a.value());m()})}),C=m.create({done:k([]),abort:n([],x.events.abort)});x.events.close.bind(function(a){C.trigger.done()});x.events.action.bind(function(a){d.size(u,
z,s.selections(),a.value())});return{element:x.element,item:x.item,name:e.constant("size"),textkey:e.constant(f.key("font.size")),open:x.open,close:x.close,updateInlineWidget:function(){var a=h.getState(s.selections(),u);x.updateInlineWidget(a.readState,a.fallbackSize)},ability:e.noop,destroy:function(){B.unbind();x.destroy()},events:C.registry}}}});l("9m","b fh 7o 6a 7m i0 21".split(" "),function(c,e,d,a,b,g,f){return{face:function(h){return d.toSelection(h.get()).map(function(d){var h=d.startContainer();
d=c.contains(["td","th"],f.name(h))?e.freefallLtr(d.startContainer()).element():d.startContainer();d=g.value(d,"font-family");return a.isEmpty(d)?b.off():b.on(d)}).getOrThunk(b.unchanged)}}});l("5n","b c 7 t 9f 7i 7v 9g 9h 9i 9j 9k 9l 7e 9m 74 7m 58 4a".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w){return function(z,x){var y=z.content(),A=z.undo(),B=function(a){return c.map(a.split(/,\s?/g),function(a){return a.trim().replace(/^[\'\"](.*)[\'\"]$/,"$1")}).join(",")},C=(0===x.faces.length?
a.none():a.some(x.faces)).fold(h.faces,function(b){return c.map(b,function(b){return k.face(q.raw(b.text),B(b.value),a.none())})}),D=e.detect().deviceType.isiOS(),F=w.create({analytics:v(["message","properties"])}),E=a.some(f.face),G=function(b){var d=B(b);b=c.find(C,function(a){return a.value()===d});var e=k.face(q.raw(d),d,a.none());return void 0!==b&&null!==b?b:e},D=D?l:p,H=m(z,x);return{ui:t.ui({"fontface.dropdown":d.constant({name:"fontface",textkey:q.key("font.face"),menuTextkey:q.key("font.menu"),
updateDropdown:function(b){var c=s.face(z.selections()).map(G);b.populate([{label:a.none,items:d.constant(C)}]);g.updateMenu(b,c,u.on(),C,E)},action:function(a){b.face(y,A,z.selections(),a)},values:C,render:E,describe:function(a){return q.translate("font.describe",q.get(a.textkey()))},hasPopup:!0}),"fontcolor.widget":d.curry(n.widget,z),"fontsize.widget":d.curry(D.widget,z),"fontsize.general":H.general},d.identity),events:F.registry,destroy:d.noop}}});l("py","b 8e 31 h9 59 1b 2o 30 33".split(" "),
function(c,e,d,a,b,g,f,h,k){return function(h,n,p){var l=a(h,n,p);e.tabList(l.menu());c.map(l.tabs(),function(a){var c='.ephox-pastry-tablayout-content[data-ephox-pastry-tablayout-view="'+a.name()+'"]';g.set(a.element(),"tabindex","-1");f.add(a.element(),b.resolve("tab-button"));k.descendant(l.body(),c).each(function(b){var c=d.generate("ephox-aria");g.set(a.element(),"id",c);e.tabButton(a.element(),a.name());e.tabPanel(b);e.linkTabToPanel(a.element(),b);e.labelledBy(b,c)})});return{element:l.element,
tabs:l.tabs,body:l.body,menu:l.menu,destroy:l.destroy,events:l.events}}});l("xo","b 1q 7 1l 2p 33".split(" "),function(c,e,d,a,b,g){return function(f){var h=2===e.keys(f.integration).length,k=a.aboutTags(h,f.integration);return{content:function(a){return c.foldl(k,function(a,b){return a.replace(b.str(),b.replace())},a)},dom:h?function(a){g.descendant(a,".ephox-polish-help-integration").each(function(a){b.set(a,"display","block")})}:d.noop}}});l("xp","8e 7 t 59 2o 3y l 2q 2s 33 o 36".split(" "),function(c,
e,d,a,b,g,f,h,k,m,n,p){var l=function(a){var b=a.baseUrl;!0===a.source&&(b+="/licenses");return b+"/textbox-licenses.html"};return function(q,s,t){var u=d.none(),v=d.none(),w=l(t),z=function(a,b){var c=s.content(b.trim());u=d.some(c);x(a,c)},x=function(d,e){var g=f.fromHtml(e.trim());s.dom(g);k.empty(d);b.remove(d,a.resolve("tablayout-loading"));y(g);var m=f.fromTag("div");c.document(m);h.append(m,g);h.append(d,m)},y=function(a){B();v=m.descendant(a,".ephox-license-link").map(function(a){return g.bind(a,
"click",function(a){p.open(w,"","height=700,width=620,resizable=yes,scrollbars=yes")})})},A=function(a){q.get(function(b){b.fold(function(b){a("&nbsp;");n.error("Unable to download help article",b)},a)})},B=function(){v.each(function(a){a.unbind()})};return{render:function(c){u.fold(function(){b.add(c,a.resolve("tablayout-loading"));A(e.curry(z,c))},function(a){x(c,a)})},destroy:function(){B()}}}});l("q7",["6","w7","w8"],function(c,e,d){return{get:function(a,b,d,f){e.ajax(a,b,d,c.merge({dataType:"text",
type:"GET"},f))},post:function(a,b,g,f,h){e.ajax(a,g,f,c.merge({dataType:"text",data:d.stringify(b),type:"POST"},h))}}});l("ia",["q7","2m","p"],function(c,e,d){return{get:function(a,b){return e.nu(function(e){c.get(a,function(a){e(d.value(a))},function(a,b,c){e(d.error({message:a,status:b,text:c}))},b)})}}});l("xq","a 1q 4m ia 7 p 1h 1l o".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,b){return a.map(function(a){return a.bind(function(a){var d=a[b];return void 0===d?g.error("Cannot find method "+
b+" in help article list: "+e.keys(a)):c.isFunction(d)?g.value(d()):g.error("Key "+b+" in help article list was not a function")})})},n=function(a){a=d.addScript(a,b.identity);a.get(function(a){a.each(function(a){h.weakMatch(a.version,"Help articles").each(function(a){k.warn(a)})})});return{about:m(a,"about"),accessibility:m(a,"accessibility"),a11ycheck:m(a,"a11ycheck"),markdown:m(a,"markdown"),shortcuts:m(a,"shortcuts")}};return function(b){!0===b.source?(b=b.baseUrl+"/help/"+f.get()+"/",b={about:a.get(b+
"about.html"),accessibility:a.get(b+"accessibility.html"),a11ycheck:a.get(b+"a11ycheck.html"),markdown:a.get(b+"markdown.html"),shortcuts:a.get(b+"shortcuts.html")}):b=n(b.baseUrl+"/help_"+f.get()+".js?"+h.resourceParam());return b}});l("pz","c hb 7 t k xo xp xq 7e".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(b,c){return b?a.some(c):a.none()};return function(a){var p={content:d.identity,dom:d.noop},l=c.detect(),q=h(a),l=!l.deviceType.isTouch();a=[m(l,e(k.translate("help.dialog.shortcuts"),
f(q.shortcuts,p,a))),m(l,e(k.translate("help.dialog.accessibility"),f(q.accessibility,p,a))),m(!0,e(k.translate("help.dialog.markdown"),f(q.markdown,p,a))),m(l,e(k.translate("help.dialog.a11ycheck"),f(q.a11ycheck,p,a))),m(!0,e(k.translate("help.dialog.about"),f(q.about,g(a),a)))];return b.cat(a)}});l("i1","b h2 92 hc 7 h3 h4 py pz 7e 3p 59 58 4a 1b 2o 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u){var v=function(a){var c={item:b.constant(".ephox-pastry-statebutton.ephox-pastry-tablayout-item")},
g=e.flow({trigger:f.button,executeOnArrow:!0});return d.flow(a.menu(),c,g)},w=function(a){var c={stops:b.constant(["a"])},g=e.page({trigger:f.click,first:".ephox-pastry-tablayout-active"});return d.page(a.body(),c,g)};return function(b,e){var f=q.create({close:l([])}),A=g(b),B=k(e),C=h(a.left(),B,"help");s.set(C.body(),"tabindex","-1");t.add(A.element(),p.resolve("help-modal"));var D=u.children(C.element());c.each(D,n.register);A.setTitle(m.translate("cog.help"));A.setContent(C.element());var F=v(C),
D=w(C),E=d.multiple(A.element(),[F,D]);C.events.setActive.bind(function(a){F.clickFocus(a.item().element())});var G=function(){A.hide()};A.events.close.bind(function(){E.exit();G()});E.events.exit.bind(function(){G();f.trigger.close()});return{element:A.element,open:function(){A.show();E.enter()},destroy:function(){C.destroy();A.destroy();E.destroy();c.each(B,function(a){a.renderer().destroy()})},hide:G,events:f.registry}}});l("9n",["i1","58","4a","q"],function(c,e,d,a){return function(a,g){var f=
c(a,g),h=function(){k.trigger.analytics("help_screen_hide");k.trigger.close();m()},k=d.create({close:e([]),analytics:e(["message"])});f.events.close.bind(h);var m=function(){f.events.close.unbind(h);f.destroy()};return{show:function(){k.trigger.analytics("help_screen_show");f.open()},destroy:m,events:k.registry}}});l("5o","7 7c 9n 7e 74 7f 58 4a 3w".split(" "),function(c,e,d,a,b,g,f,h,k){return function(k,n){var p=k.content(),l=k.smartview(),q=k.shortcuts(),s=h.create({analytics:f(["message"])}),
t=e.destroyable(),u=function(){var a=d(l.uiContainer(),n);t.set(a);a.events.close.bind(function(){p.toEditing();t.clear()});a.events.analytics.bind(function(a){s.trigger.analytics(a.message())});p.toReading();k.content().hideInlineSelection();a.show()};q.events.help.bind(u);return{ui:b.ui({"help.general":{toggle:!1,value:"help",textkey:a.key("cog.help"),action:u,updateGeneral:c.noop,icon:!0,hasPopup:!1,hasDialog:!0,tooltip:g.get}}),events:s.registry,destroy:function(){t.clear()}}}});l("9p",["2w"],
function(c){return c.immutable("prefix","suffix","style")});l("9q","b t 9o 4e 2p l 2q 3c 21 2s b3 2b w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l){return{rehighlight:function(q,s,t){var u=p.children(t),v=c.bind(u,function(a){return k.isText(a)?n.get(a):""}).join("");e.from(c.find(s,function(a){return l.startsWith(v,a.prefix())&&l.endsWith(v,a.suffix())})).fold(function(){q.preserve(function(){m.unwrap(t)})},function(c){var e=g.fromTag("span");a.add(e,[d.highlightClass()]);b.setAll(e,c.style());
q.preserve(function(){f.before(t,e);h.append(e,u);m.remove(t)})})},unhighlight:function(b,c){var e=p.children(c),k=g.fromTag("span");a.add(k,[d.placeholderClass()]);b.preserve(function(){f.before(c,k);m.unwrap(c);h.append(k,e)})}}});l("9r","b 7 i2 i3 6q i4 i5 9o i6 fy d3 4e 2p l 21 6o b3".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u){var v=function(a,d){var g=c.bind(d,function(a){var c=b.sanitise(a.prefix()),d=b.sanitise(a.suffix()),c=b.unsafetoken(c+"[^"+d+"]*"+d);return{pattern:e.constant(c),
style:a.style}});return f.findmany(a,g)},w=m("."+h.highlightClass(),n.unwrap);return{run:function(b,e){b.body().each(function(b){k.filterDom(b,[w]);b=t.descendants(b,s.isText);c.each(b,function(b){var f=u.get(b),f=v(f,e),k=c.bind(f,function(a){return[a.start(),a.finish()]}),m=d.subdivide(b,k);c.each(f,function(b){var d=g.sublist(m,b.start(),b.finish()),d=c.map(d,function(a){return a.element()});a.wrapper(d,function(){var c=q.fromTag("span");p.add(c,[h.highlightClass()]);l.setAll(c,b.style());return a.nu(c)})})})})}}});
l("5p","b 7 9o 9p 9q 9r 3i 4e 2p l 2g 2q 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l){return function(q,s,t){var u=q.filter(),v=q.content(),w=q.operations();d.configure(u);var z=void 0===t.external?[]:c.map(t.external,function(b){return a(b.prefix,b.suffix,b.style)});c.each(z,function(a){var b=f(a.prefix(),a.suffix(),function(b){var c=m.fromTag("span");h.add(c,[d.highlightClass()]);k.setAll(c,a.style());var e=m.fromTag("div");p.append(c,m.fromText(a.prefix()+b+a.suffix()));p.append(e,c);return n.get(e)});
s.customMacros().add(b)});q=function(a){v.getSelection().each(function(c){a.prev().each(function(a){l.ancestor(a,"."+d.placeholderClass()).each(function(a){b.rehighlight(w,z,a)})});l.ancestor(c.startContainer(),"."+d.highlightClass()).each(function(a){b.unhighlight(w,a)})})};return 0<z.length?(v.events.nodeChanged.bind(q),{run:function(){g.run(v,z)},destroy:e.noop}):{run:e.noop,destroy:e.noop}}});l("5q","9s 7 86 7e 74 l".split(" "),function(c,e,d,a,b,g){return function(f){var h=f.content();return{ui:b.ui({"horizontalrule.general":{toggle:!1,
value:"horizontalrule",textkey:a.key("insert.horizontalrule"),action:function(){d.insertAtCursor(h,[g.fromTag("hr")]).each(function(a){a=c.after(a.element());h.setRelativeSelection(a,a);h.toEditing()})},updateGeneral:e.noop,icon:!0,shortcut:!1,hasPopup:!1}}),destroy:e.noop}}});l("q4","b aq 6 7 p 7e 59 2w 2o 2p l 4h 34 e9".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q){var s=f.resolve("input-invalid-field"),t=function(a){return q(a,10).toString()===a&&0<=q(a,10)},u=function(a,c,d){var e=l.get(a);
if(""===e)return b.value("");var f=n.fromTag("img");d=t(e)?e+d.getOr(""):e;m.set(f,c,d);d=m.getRaw(f,c);m.remove(f,c);return d.fold(function(){return b.error(a)},b.value)},v=function(a){k.remove(a,s)};return{highlight:function(a){e.shout(a,g.translate("aria.input.invalid"));k.add(a,s)},dehighlight:v,clearHighlights:function(a){a=p.descendants(a,"."+s);c.each(a,v)},validate:function(e){return c.foldr(e,function(b,c){return b.bind(function(b){return u(c.input(),c.property(),c.defaultUnit()).map(function(e){l.set(c.input(),
e);var f={};f[c.property()]=a.constant(e);return d.deepMerge(f,b)})})},b.value({}))},validateField:u,rule:h.immutable("input","property","defaultUnit")}});l("q5","b 8e fp 31 c 52 hp 7 h4 7e 59 1b 2o l 30 2q 3c 33 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w){b.detect().browser.isFirefox();return function(b){var x=n.resolve("dialog-float-selected"),y=q.fromTag("fieldset");p.set(y,"role","radiogroup");b=q.fromHtml("<legend>"+m.translate(b)+"</legend>");var A=a.generate("ephox-aria");
p.set(b,"id",A);p.set(y,"aria-labelledby",A);var B=g.div();l.add(B,n.resolve("dialog-float-options"));u.append(y,[b,B]);var C=function(){c.each(D,function(a){l.remove(a.element(),x);d.checked(a.element(),!1)})},D=c.map(["none","center","left","right"],function(a){var b=f(),c=m.translate("align."+a);p.setAll(b.element(),{tabindex:"-1","data-float-value":a,title:c,"aria-label":c,role:"radio"});a=g.div();var c=g.div(),h=g.div(),k=g.div();e.hidden(a,!0);l.add(c,n.resolve("dialog-float-icon-inner-left"));
l.add(h,n.resolve("dialog-float-icon-inner-center"));l.add(k,n.resolve("dialog-float-icon-inner-right"));u.append(a,[c,h,k]);b.events.click.bind(function(){C();l.add(b.element(),x);d.checked(b.element(),!0);s.focus(b.element())});l.add(b.element(),n.resolve("dialog-float-container"));l.add(a,n.resolve("dialog-float-icon"));t.append(b.element(),a);return b});u.append(B,c.map(D,function(a){return a.element()}));var F=k.radio(y,"."+n.resolve("dialog-float-container"),"."+n.resolve("dialog-float-selected"));
return{element:function(){return y},get:function(){return v.child(B,"."+x).map(function(a){return p.get(a,"data-float-value")})},select:function(a){C();a.each(function(a){v.child(B,'span[data-float-value="'+a+'"]').or(w.firstChild(B)).each(function(a){l.add(a,x);d.checked(a,!0)})});F.refresh()},keylayout:h.constant(F),destroy:function(){c.each(D,function(a){a.destroy()})}}}});l("q6",["t","xk","2w","1u"],function(c,e,d,a){var b=d.immutable("size","unit"),g=function(a){return e.identify(a).fold(c.none,
function(a,d,e){return c.some(b(d,e))})};return{fromHeight:function(b,c){return g(c).map(function(c){return a.ceil(b*c.size())+c.unit()})},fromWidth:function(b,c){return g(c).map(function(c){return a.ceil(1/b*c.size())+c.unit()})},calculate:function(a,b){return g(a).fold(c.none,function(a){return g(b).fold(c.none,function(b){return c.some((a.size()+0)/(b.size()+0))})})}}});l("i7","8e fp 31 h2 92 52 hq m0 7 t h4 m1 q4 q5 9u 7e q6 59 1b 2o 1c 3y l 30 3c 34 1x e9".split(" "),function(c,e,d,a,b,g,f,h,
k,m,n,p,l,q,s,t,u,v,w,z,x,y,A,B,C,D,F,E){return function(){var G=g.div(),H=g.div(),E=g.div(),I=g.div();z.add(E,v.resolve("image-url-controls"));z.add(I,v.resolve("image-size-controls"));var J=q("image.dialog.fields.align"),K=p.input("image-url","image.dialog.fields.url"),N=p.input("image-alt","image.dialog.fields.alt"),M=p.input("image-width","image.dialog.fields.width"),O=p.input("image-height","image.dialog.fields.height"),S=A.fromTag("input");w.set(S,"type","hidden");var P=h("lock");z.add(P.element(),
v.resolve("dialog-button"));var U=f([v.resolve("icon"),v.resolve("image-lock-button")]);w.set(P.element(),"title",t.translate("image.dialog.fields.constrain.on"));c.toolbarButton(P.element(),t.translate("image.dialog.fields.constrain.label"),!1,!0);e.press(P.element());P.select();P.content(U);P.events.click.bind(function(){B.focus(P.element());var a=P.selected()?"on":"off";w.set(P.element(),"title",t.translate("image.dialog.fields.constrain."+a));(P.selected()?e.press:e.release)(P.element())});U=
g.div();z.add(U,v.resolve("form-group"));z.add(U,v.resolve("form-group-lock"));var Q=A.fromHtml("<label>"+t.translate("image.dialog.fields.constrain.label")+"</label>"),V="constrain"+d.generate("");w.set(P.element(),"id",V);w.set(Q,"for",V);var W=function(a){a.isLocal()?(w.set(K.input(),"disabled","disabled"),D.set(K.input(),t.translate("image.dialog.fields.urllocal"))):(w.remove(K.input(),"disabled"),D.set(K.input(),a.url()))},Y=function(a,b,c){var d=F(D.get(S),10);a=D.get(a);D.set(b,c(d,a).getOrThunk(function(){return D.get(b)}));
l.dehighlight(b)},V=function(a){l.validateField(a.target(),"width",m.some("px")).fold(function(){l.highlight(a.target())},function(b){l.dehighlight(a.target());b=a.target();P.selected()&&(x.eq(b,M.input())?Y(M.input(),O.input(),u.fromWidth):x.eq(b,O.input())&&Y(O.input(),M.input(),u.fromHeight))})},X=function(a){if(w.has(a.target(),"placeholder")){var b=w.get(a.target(),"placeholder");""===D.get(a.target())&&D.set(a.target(),b)}},Z=y.bind(M.input(),"input",V),ea=y.bind(O.input(),"input",V),aa=y.bind(M.input(),
"focus",X),R=y.bind(O.input(),"focus",X);C.append(U,[Q,P.element()]);C.append(H,[J.element()]);C.append(E,[K.element(),N.element()]);C.append(I,[M.element(),O.element(),U]);C.append(G,[E,I,H]);H=[b.input(K.input(),a.input({})),b.input(N.input(),a.input({})),b.input(M.input(),a.input({})),b.input(O.input(),a.input({})),b.button(P.element(),a.button({execute:n.button})),J.keylayout()];return{element:k.constant(G),destroy:function(){P.destroy();Z.unbind();ea.unbind();aa.unbind();R.unbind();J.destroy()},
dehighlight:k.curry(l.clearHighlights,G),highlight:l.highlight,keylayouts:k.constant(H),set:function(a){W(a);D.set(N.input(),a.alt());D.set(M.input(),a.width());D.set(O.input(),a.height());var b=a.computedWidth().bind(function(b){return a.computedHeight().bind(function(a){return u.calculate(b,a)})}).getOr(1);a.computedWidth().each(k.curry(w.set,M.input(),"placeholder"));a.computedHeight().each(k.curry(w.set,O.input(),"placeholder"));D.set(S,b);J.select(a.align())},get:function(){return l.validate([l.rule(M.input(),
"width",m.some("px")),l.rule(O.input(),"height",m.some("px"))]).map(function(a){return s.properties({url:D.get(K.input()),alt:D.get(N.input()),width:a.width(),height:a.height(),isLocal:w.has(K.input(),"disabled"),align:J.get()})})}}}});l("9t","t h3 h4 9u i7 7e h5 59 58 4a 4n 2o".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){return function(l){var q=m.create({ok:k(["image","properties"]),close:k([])}),s=n(c.none()),t=e(l),u=f.okCancel("image-properties"),v=b();t.setContent(v.element());p.add(t.element(),
h.resolve("dialog-narrow"));l=function(){var a=v.get();v.dehighlight();a.fold(function(a){v.highlight(a)},function(a){s.get().each(function(b){q.trigger.ok(b,a)})})};u.events.ok.bind(l);u.events.cancel.bind(function(){t.hide();q.trigger.close()});t.setTitle(g.translate("image.dialog.title"));t.setControls(u.element());t.events.close.bind(function(){q.trigger.close()});var w=d.setup(t,u,v.keylayouts());return{element:t.element,open:function(){t.show();w.enter()},hide:function(){w.exit();t.hide()},
destroy:function(){t.destroy();w.destroy();u.destroy();v.destroy()},represent:function(b){var d=a.divine(b);s.set(c.some(b));v.set(d)},execute:l,events:q.registry}}});l("9v","b 7 t 7e 58 4a 2w 1b 21".split(" "),function(c,e,d,a,b,g,f,h,k){var m=f.immutable("value","text","attrs"),n=function(a){return"img"===k.name(a)};return{image:function(){var c=d.none(),f=g.create({properties:b(["image"]),contextmenu:b(["image"])});return{situation:function(b){b=c.map(function(b){return[m("imagemenu-properties",
a.translate("image.context.properties"),{})]}).getOr([]);return{primary:e.constant(b),secondary:e.constant([]),submenus:e.constant([])}},handle:function(a){c.each(function(a){f.trigger.properties(a)})},assign:function(a){c=a.filter(n);c.each(f.trigger.contextmenu)},events:f.registry}},imageEdit:function(b,f,g){var k=d.none(),l=function(b){return c.map(b,function(b){return m(b.spec.value,a.get(b.spec.textkey),{})})};return{situation:function(a){a=k.map(l).getOr([]);return{primary:e.constant(a),secondary:e.constant([]),
submenus:e.constant([])}},handle:function(a){k.each(function(b){var d=h.get(a,"data-ephox-gopher-item-value");b=c.find(b,function(a){return a.spec.value===d});void 0!==b&&b.spec.action()})},assign:function(a){k=b()?d.some(f):a.filter(n).map(e.constant(g))}}}}});l("9w",["58","4a","4b"],function(c,e,d){return{generate:function(a,b,g){a=function(){h();f.trigger.close()};var f=e.create({ok:d(g,b.events.ok),close:c([])});b.events.close.bind(a);var h=function(){b.destroy()};return{open:function(){b.open()},
hide:a,destroy:h,represent:b.represent,events:f.registry}}}});l("5r","7 9t 9u 9v 9w 58 4a 4b".split(" "),function(c,e,d,a,b,g,f,h){return function(k,m){var n=a.image(k.content()),p=f.create({changed:g(["image"]),contextmenu:h(["image"],n.events.contextmenu)}),l=function(a){var c=k.content(),f=e(k.smartview().uiContainer()),g=b.generate(k.keyboard(),f,["image","properties"]);g.events.ok.bind(function(a){d.apply(a.image(),a.properties());p.trigger.changed(a.image());g.destroy();c.domChanged();c.focus();
c.uiChanged()});g.events.close.bind(function(a){g.destroy();c.focus()});g.represent(a);g.open()};n.events.properties.bind(function(a){l(a.image())});return{destroy:c.noop,situation:n.situation,handle:n.handle,assign:n.assign,events:p.registry}}});l("9y","b 1q 7 hf 4o 1b 2p".split(" "),function(c,e,d,a,b,g,f){var h=b.generate([{html:["key","value"]},{css:["key","value"]}]),k=function(a,b){return c.flatten(e.mapToArray(a,function(a,c){var d=[];if(g.has(b,c)){var e=g.get(b,c);d.push(h.html(a,e))}f.getRaw(b,
c).each(function(b){d.push(h.css(a,b))});return d}))},m=function(a){f.remove(a,"width");f.remove(a,"height");g.remove(a,"width");g.remove(a,"height")};b=d.curry(k,{width:"width",height:"height"});k=d.curry(k,{width:"height",height:"width"});d=d.constant([]);return{keepCrop:d,keepFlip:b,keepRotate:k,keepResample:d,updater:function(b,d){var e=b(d);return a.effect(function(){m(d);c.each(e,function(a){a.fold(function(a,b){g.set(d,a,b)},function(a,b){f.set(d,a,b)})})})}}});l("i9",["6"],function(c){var e=
{strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@\/]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},
d=function(a,b){for(var c=b.parser[b.strictMode?"strict":"loose"].exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";d[b.q.name]={};d[b.key[12]].replace(b.q.parser,function(a,c,e){c&&(d[b.q.name][c]=e)});return d};return{parse:function(a,b){var g=c.merge(e,b);return d(a,g)}}});l("i8",["w","i9","x"],function(c,e,d){var a=function(a){return""!==a.trim()&&!c.contains(a,"://")};return{local:function(a){return c.startsWith(a,"data:")||c.startsWith(a,"blob:")||c.startsWith(a,"file:")},relative:a,sameDomain:function(b,
c){if(""===b.trim()||""===c.trim())return!1;if(a(b))return!0;var d=e.parse(c),h=e.parse(b);return d.host===h.host&&d.port===h.port}}});l("9z",["i8","9a","2w","i9"],function(c,e,d,a){var b=d.immutable("bannerMessage","consoleMessage"),g=function(a){return void 0!==a.message&&void 0!==a.status&&void 0!==a.text};return{diagnoseImageEdit:function(d,h){var k=18===d.code||"SecurityError"===d.name?"imageedit.needsproxy":g(d)&&0===d.status?"imageedit.proxyerror":"imageedit.generic",m;m=a.parse(h);m=""===
m.host||c.relative(h)?h:""===m.port?m.host:m.host+":"+m.port;k=e.get(k,[m]);m=g(d)?d.message+". Response code "+d.status+". Error details: "+d.text:d;return b(k,m)}}});l("ib",["q8"],function(c){return{blobToImage:function(e){return c.blobToImage(e)},imageToBlob:function(e){return c.imageToBlob(e)},blobToDataUri:function(e){return c.blobToDataUri(e)},blobToBase64:function(e){return c.blobToBase64(e)}}});l("a0","1 6 ia t hf i8 1b ib x".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m){var n=
{responseType:"blob"},p=function(a,b){var c=e.merge(b||{},m.headers(),n);return d.get(a,c)},l=function(a){return!(g.local(a)||g.sameDomain(a,k(c.location)))};return{getImage:function(c){var d=f.get(c,"src");return(l(d)?m.proxy(d):a.none()).fold(function(){return b.fromPromise(h.imageToBlob(c.dom()))},p)}}}});l("a1",["7","7e","7f"],function(c,e,d){return{make:function(a,b,g){return{type:"general",spec:{value:a,textkey:e.key(b),action:g,updateGeneral:c.noop,icon:!0,hasPopup:!1,toggle:!1,tooltip:d.get}}}}});
l("6l",["6u","7"],function(c,e){var d=e.constant(4);return{resolve:c.create("ephox-clipper").resolve,CORNER_SIZE:d}});l("q9","6l 3v 7 1b 2o 2p 3y l 3c 1u e9".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a,b){var c={left:"0px",top:"0px",width:a.width()+"px",height:a.height()+"px"},e={left:g.get(b,"left"),top:g.get(b,"top"),width:g.get(b,"width"),height:g.get(b,"height")};return{outside:d.constant(c),inside:d.constant(e)}};return{snap:function(d,l){var s=p(d,l),t=h.fromTag("div");b.add(t,
c.resolve("dynamic-box"));g.setAll(t,s.outside());var u=h.fromTag("div");b.add(u,c.resolve("opaque-box"));g.setAll(u,s.outside());var v=function(a,b){return 2<m.abs(n(a,10)-n(b,10))},w=function(a){return e.nu(function(b){b(a)})},z=function(a,b){return e.nu(function(c){var d=f.bind(a,"transitionend",function(){d.unbind();c(a)});g.setAll(a,b.inside())})};return{prepare:function(d,e,f){var h=a.get(e,"src"),m=g.get(e,"width");e=g.get(e,"height");g.setAll(l,{"background-image":"url("+h+")","background-size":m+
" "+e,"background-position-x":-f.left()+"px","background-position-y":-f.top()+"px"});b.add(l,c.resolve("snapshot"));b.add(t,c.resolve("dynamic-box-animate"));k.append(d,[t,u]);g.reflow(d)},showcase:function(){var a=s.outside(),b=s.inside();return v(a.left,b.left)||v(a.top,b.top)||v(a.right,b.right)||v(a.bottom,b.bottom)?z(t,s):w(t)}}}}});l("ic",["q9","3v","7"],function(c,e,d){return{slide:function(){return{animate:function(a,b,e,f){e=c.snap(e.box(),e.shade());e.prepare(a,b,{left:f.cropX,top:f.cropY,
width:f.cropWidth,height:f.cropHeight});return e.showcase().map(d.constant(f))}}},none:function(){return{animate:function(a,b,c,d){return e.pure(d)}}}}});l("qa",["2w"],function(c){return c.immutableBag("displayWidth displayHeight cropX cropY cropWidth cropHeight".split(" "),[])});l("xr",["3y","3w"],function(c,e){return{bind:function(d,a){return c.bind(d,"mousedown",function(b){b.kill();var d=b.target(),f=!1,h=c.bind(d,"mouseup",function(){f=!0;h.unbind()});e(function(){f||(h.unbind(),a(d))},250)})}}});
l("qc",["2w"],function(c){var e=c.immutableBag(["top","left","width","height"],[]),d=c.immutableBag(["top","left"],[]);c=c.immutableBag(["top","left"],[]);return{boxModel:e,delta:d,cornersMovements:c}});l("xs",["qc","1u"],function(c,e){var d=function(a,b){var c=e.min(a.top()+a.height(),e.max(0,a.top()+b.top())),d=c-a.top(),d=a.height()-d;return{top:c,height:d}},a=function(a,b,c){a=e.min(a.width(),e.max(b.left(),b.left()+b.width()+c.left()))-b.left()-b.width();return{width:b.width()+a}},b=function(a,
b,c){return e.min(a.height(),e.max(b.top(),b.top()+c.top()+b.height()))-b.top()},g=function(a,b){var c=e.min(a.width()+a.left(),e.max(0,a.left()+b.left())),d=c-a.left(),d=a.width()-d;return{left:c,width:d}};return{nw:function(a,b,e){a=d(b,e);b=g(b,e);return c.boxModel({left:b.left,width:b.width,top:a.top,height:a.height})},n:function(a,b,e){a=d(b,e);return c.boxModel({left:b.left(),width:b.width(),top:a.top,height:a.height})},ne:function(b,e,g){var m=d(e,g);b=a(b,e,g);return c.boxModel({left:e.left(),
width:b.width,top:m.top,height:m.height})},e:function(b,d,e){b=a(b,d,e);return c.boxModel({left:d.left(),width:b.width,top:d.top(),height:d.height()})},se:function(d,e,g){var m=a(d,e,g);d=b(d,e,g);return c.boxModel({left:e.left(),width:m.width,top:e.top(),height:d})},s:function(a,d,e){a=b(a,d,e);return c.boxModel({left:d.left(),width:d.width(),top:d.top(),height:a})},sw:function(a,d,e){a=b(a,d,e);e=g(d,e);return c.boxModel({left:e.left,width:e.width,top:d.top(),height:a})},w:function(a,b,d){a=g(b,
d);return c.boxModel({left:a.left,width:a.width,top:b.top(),height:b.height()})},translate:function(a,b,d){var g=e.min(e.max(0,b.top()+d.top()),e.max(0,a.height()-b.height()));a=e.min(e.max(0,b.left()+d.left()),e.max(0,a.width()-b.width()));return c.boxModel({top:g,left:a,width:b.width(),height:b.height()})}}});l("xt",["lf","ar","t","3n"],function(c,e,d,a){return{navigation:function(b,g){var f=function(b,c,e){return function(){g(b,a(c,e));return d.some(!0)}};return[c.rule(c.and([c.isShift,c.inSet(e.LEFT())]),
f(b,-1,0)),c.rule(c.and([c.isShift,c.inSet(e.RIGHT())]),f(b,1,0)),c.rule(c.and([c.isShift,c.inSet(e.UP())]),f(b,0,-1)),c.rule(c.and([c.isShift,c.inSet(e.DOWN())]),f(b,0,1)),c.basic(e.LEFT()[0],f(b,-10,0)),c.basic(e.RIGHT()[0],f(b,10,0)),c.basic(e.UP()[0],f(b,0,-10)),c.basic(e.DOWN()[0],f(b,0,10))]}}});l("11l",["6l","qc","1q","6","7"],function(c,e,d,a,b){var g=function(a,c,d){var g=c.top(),n=c.left()+c.width()/2-d.middle(),p=g+c.height()/2-d.middle(),l=c.left()+c.width()-d.right();a=c.left()-d.left();
d=g+c.height()-d.bottom();c=e.cornersMovements({top:g,left:n});var n=e.cornersMovements({top:d,left:n}),q=e.cornersMovements({top:p,left:l}),p=e.cornersMovements({top:p,left:a}),s=e.cornersMovements({top:g,left:a}),g=e.cornersMovements({top:g,left:l}),l=e.cornersMovements({top:d,left:l});a=e.cornersMovements({top:d,left:a});return{n:b.constant(c),s:b.constant(n),e:b.constant(q),w:b.constant(p),nw:b.constant(s),ne:b.constant(g),se:b.constant(l),sw:b.constant(a)}};return{calculate:function(a,d){var e=
{middle:b.constant(2*c.CORNER_SIZE()+1),right:b.constant(c.CORNER_SIZE()),left:b.constant(0),bottom:b.constant(c.CORNER_SIZE())};return g(a,d,e)},limitBounds:function(c,e){var g={};if(20>e.width()){var m=20-e.width();g.width=e.width()+m;g.left=e.left()===c.left()?c.left():e.left()-m}20>e.height()&&(m=20-e.height(),g.height=e.height()+m,g.top=e.top()===c.top()?c.top():e.top()-m);return a.merge(e,d.map(g,b.constant))},doCalculate:g}});l("xw",["11l","6l","qc","1b","2p"],function(c,e,d,a,b){var g=function(b){return d.boxModel({left:parseInt(a.get(b,
"data-"+e.resolve("image-left")),10),top:parseInt(a.get(b,"data-"+e.resolve("image-top")),10),width:parseInt(a.get(b,"data-"+e.resolve("image-width")),10),height:parseInt(a.get(b,"data-"+e.resolve("image-height")),10)})},f=function(b,c){a.set(b,"data-"+e.resolve("image-left"),c.left());a.set(b,"data-"+e.resolve("image-top"),c.top());a.set(b,"data-"+e.resolve("image-width"),c.width());a.set(b,"data-"+e.resolve("image-height"),c.height())};return{readPosition:g,writePosition:f,updatePosition:function(a,
b){var d=g(a),e=b(d),d=c.limitBounds(d,e);f(a,d);return d},drawAtOrigin:function(a){var c=g(a);b.setAll(a,{left:c.left()+"px",top:c.top()+"px",width:c.width()+"px",height:c.height()+"px"})}}});l("xu",["qc","xw","t"],function(c,e,d){return function(a,b,g){var f=d.none();return{setTarget:function(a){f=d.some(a)},clearTarget:function(){f=d.none()},mutate:function(d,k){f.each(function(f){var n=c.delta({top:k,left:d}),p=e.updatePosition(g,function(b){return f(a,b,n)});e.drawAtOrigin(g,a);b.update(p)})}}}});
l("4c",["6l","7"],function(c,e){var d=c.resolve("magic-box");return{magicBox:e.constant(d)}});l("y0",["1b"],function(c){return{grab:function(e,d){c.set(e,"aria-grabbed",d)},effect:function(e,d){c.set(e,"aria-dropeffect",d)}}});l("y1","8e db 31 2w 1b 2o l 2q".split(" "),function(c,e,d,a,b,g,f,h){var k=a.immutable("help","ids"),m=function(a){b.set(a,"role","gridcell")};return{base:function(a,c){b.setAll(a,{role:"grid","aria-label":c})},row:function(a){b.set(a,"role","row")},cell:function(a,c){m(a);
b.set(a,"aria-label",c)},gridcell:m,createHelp:function(a,m,l){var q=f.fromTag("div");c.presentation(q);g.add(q,e.resolve("aria-help"));for(var s=[],t=0;t<m;t++){var u=d.generate("ephox-aria"),v=f.fromTag("span");c.presentation(v);b.set(v,"id",u);g.add(v,e.resolve("aria-help"));h.append(v,f.fromText(l.col(t+1)));h.append(q,v);s[t]=u}t=[];for(u=0;u<a;u++){var v=d.generate("ephox-aria"),w=f.fromTag("span");c.presentation(w);b.set(w,"id",v);g.add(w,e.resolve("aria-help"));h.append(w,f.fromText(l.row(u+
1)));h.append(q,w);t[u]=[];for(w=0;w<m;w++)t[u][w]=s[w]+" "+v}return k(q,t)}}});l("11m","11l xt 6l b y0 y1 92 2m 7 t 58 4a 1b 4e 2p l 5a 2q 2t 3w x".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x){var y=function(a,c,e){var f=t.fromTag("div");s.set(f,"position","absolute");var h=t.fromTag("div");v.append(f,h);e.each(function(a){g.cell(f,a);b.grab(f,!1)});q.add(f,[d.resolve("corner-wrapper"),d.resolve("corner-wrapper-"+c)]);q.add(h,[d.resolve("corner-element"),d.resolve("corner-"+a)]);
l.set(f,"data-"+d.resolve("direction"),c);return f},A=function(a,b){s.setAll(a,{top:b.top()+"px",left:b.left()+"px"})},B=function(b,c,d){var e=c()<d()?0:1;a.each(b,function(a){s.set(a,"opacity",x(e))})};return function(a){var b=p.create({reposition:n(["direction","delta"])}),d=y("top","n",m.none()),g=y("bottom","s",m.none()),l=y("right","e",m.none()),r=y("left","w",m.none()),q=y("top-left","nw",m.some(a("image.crop.handle.nw"))),t=y("top-right","ne",m.some(a("image.crop.handle.ne"))),v=y("bottom-right",
"se",m.some(a("image.crop.handle.se"))),x=y("bottom-left","sw",m.some(a("image.crop.handle.sw"))),N=h.nu(function(a){z(function(){s.reflow(d);var b=w.get(d),c=u.get(d);a(k.constant(3*b+2*c))},0)}),M=b.trigger.reposition;a=[d,g,l,r,t,q,v,x];M=[f.single(q,e.navigation("nw",M),m.none()),f.single(t,e.navigation("ne",M),m.none()),f.single(v,e.navigation("se",M),m.none()),f.single(x,e.navigation("sw",M),m.none())];return{elements:k.constant(a),keylayouts:k.constant(M),events:b.registry,refresh:function(a,
b){var e=c.calculate(a,b);A(d,e.n());A(g,e.s());A(l,e.e());A(r,e.w());A(q,e.nw());A(x,e.sw());A(v,e.se());A(t,e.ne());N.get(function(a){B([d,g],b.width,a);B([l,r],b.height,a)})}}}});l("14k",["qc","7"],function(c,e){return{derive:function(d,a){return{leftRim:function(){var b=a.left(),e=d.height();return c.boxModel({top:0,left:0,width:b,height:e})},topRim:function(){var b=a.left(),e=d.width()-a.left(),f=a.top();return c.boxModel({top:0,left:b,width:e,height:f})},rightRim:function(){return c.boxModel({top:a.top(),
left:a.left()+a.width(),width:d.width()-a.width()-a.left(),height:d.height()-a.top()})},bottomRim:function(){return c.boxModel({top:a.top()+a.height(),left:a.left(),width:a.width(),height:d.height()-a.height()-a.top()})},shadeBox:e.constant(a)}}}});l("11n","14k 6l 7 4e 2p l".split(" "),function(c,e,d,a,b,g){var f=function(b){var c=g.fromTag("div");a.add(c,[e.resolve("panel-"+b),e.resolve("side-panel")]);return c},h=function(a,c){b.setAll(a,{top:c.top()+"px",left:c.left()+"px",width:c.width()+"px",
height:c.height()+"px"})};return function(){var a=f("left"),b=f("top"),e=f("right"),g=f("bottom");return{elements:d.constant([a,b,e,g]),refresh:function(d,f){var l=c.derive(d,f);h(a,l.leftRim());h(b,l.topRim());h(e,l.rightRim());h(g,l.bottomRim())}}}});l("xv","4c xs 6l 11m 11n b y0 y1 7 t 58 4a 4b 1b 2o 2p l 2q 3c 2s 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x){return function(y,A,B,C){var D=u.fromTag("div");s.add(D,c.magicBox());h.base(D,C("image.crop.begin"));f.effect(D,"execute");
var F=u.fromTag("div");q.set(F,"role","row");var E=b(),G=a(C),H=function(a){t.setAll(D,{top:a.top()+"px",left:a.left()+"px"})};C=function(a){var b=y();H(b);E.refresh(b,a);G.refresh(b,a);L.trigger.updated(a)};w.append(F,g.flatten([E.elements(),[A],G.elements()]));v.append(D,F);var L=p.create({updated:n(["newBounds"]),reposition:l(["direction","delta"],G.events.reposition)});C(B);A=G.keylayouts();return{element:k.constant(D),bitsbox:k.constant(F),keylayouts:k.constant(A),move:H,update:C,destroy:function(){z.remove(D)},
events:L.registry,tryMovement:function(a){return x.closest(a,"."+d.resolve("corner-wrapper")).bind(function(a){a=q.get(a,"data-"+d.resolve("direction"));return void 0!==e[a]?m.some(e[a]):m.none()})}}}});l("qb","xr xs xt xu 6l qc xv xw b j7 y0 y1 92 7 t 58 4a 4b 1b 4e 3y l 30 2q 33 2b 1u".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x,y,A,B,C,D,F){var E=function(a){var b=a.width();a=a.height();var c=F.floor(0.125*a),d=F.floor(0.125*b);return g.boxModel({top:c,left:d,width:b-2*d,height:a-
2*c})};return function(g,F,L,I){var J=y.fromTag("div");z.add(J,[b.resolve("panel-central"),b.resolve("side-panel")]);w.set(J,"tabindex","-1");p.cell(J,I("image.crop.handle.shade"));n.grab(J,!1);var K=E(g());h.writePosition(J,K);h.drawAtOrigin(J);var N=f(g,J,K,I);B.append(F,N.element());var M=a(g(),N,J),O=m.transform(M),S=x.bind(J,"dblclick",function(){X.trigger.apply()}),P=c.bind(N.element(),function(a){N.tryMovement(a).orThunk(function(){return C.closest(a,"."+b.resolve("panel-central")).map(function(){return e.translate})}).each(U)}),
U=function(a){O.off();M.clearTarget();M.setTarget(a);O.on();O.go(L)},Q=function(a,b){var c=h.updatePosition(J,function(c){return e[a](g(),c,b)});h.drawAtOrigin(J);N.update(c)};I=k.flatten([N.keylayouts(),[l.single(J,d.navigation("translate",Q),s.none())]]);var V=function(){var a=g();return x.bind(D.defaultView(F),"resize",function(){var b=g();if(b.height()!==a.height()||b.width()!==a.width())X.trigger.cancel();else if(b.top()!==a.top()||b.left()!==a.left())N.move(b),a=b})}(),K=function(a){return function(){A.active(D.owner(F)).each(function(b){n.grab(b,
a)})}},W=K("true"),Y=K("false");k.each(I,function(a){a.events.enter.bind(W);a.events.exit.bind(Y)});N.events.reposition.bind(function(a){Q(a.direction(),a.delta())});var X=u.create({updated:v(["newBounds"],N.events.updated),apply:t([]),cancel:t([])});return{element:N.element,keylayouts:q.constant(I),destroy:function(){O.destroy();V.unbind();P.unbind();S.unbind();N.destroy()},boxes:function(){return{box:g,magic:N.element,shade:q.constant(J)}},get:function(){return h.readPosition(J)},events:X.registry}}});
l("id","qa qb qc 7 5a 3o 2t".split(" "),function(c,e,d,a,b,g,f){var h=function(a){var c=g.absolute(a),e=c.top(),h=b.get(a),c=c.left();a=f.get(a);return d.boxModel({top:e,left:c,width:a,height:h})};return function(d,g,n,p,l){var q=a.curry(h,d),s=e(q,g,n,l);return{element:s.element,keylayouts:s.keylayouts,crop:function(){var a;a=s.get();var e=f.get(d),g=b.get(d);a=c({cropX:a.left(),cropY:a.top(),cropWidth:a.width(),cropHeight:a.height(),displayWidth:e,displayHeight:g});return p.animate(s.boxes().magic(),
d,s.boxes(),a)},destroy:function(){s.destroy()},events:s.events}}});l("a2","ic id aq 9s h2 92 7 ae 9x 7c 7e hi 99 7l 3e 58 4a 2n 3y 2b 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x){var y=function(b,c){b.getSelection().bind(q.detect).fold(function(){b.setRelativeSelection(a.before(c),a.before(c))},function(c){b.setRelativeSelection(a.on(c.image()),a.on(c.image()))})};return function(a){var B=a.content(),C=u.create({ok:t(["cropAction","image","cleanup"])}),D=m.value(),F=m.value(),
E=function(a){var f=B.body().getOrDie();d.speak(v.body(),n.translate("image.crop.announce"));var t=z.documentElement(a),u=e(a,t,t,c.slide(),n.translate),A=h(function(a,b){d.speak(v.body(),n.translate("aria.image.crop.size",a,b))},500);u.events.updated.bind(function(a){a=a.newBounds();A.throttle(a.width(),a.height())});var E=function(){D.clear();U.exit();U.destroy();Q.unbindAll();P.clear()},N=function(){E();F.clear();u.destroy()},M=function(){N();q.select(B,a)},O=function(){E();u.crop().get(function(b){P.clear();
d.speak(v.body(),n.translate("image.crop.apply"));var c=k.crop(b.cropX(),b.cropY(),b.cropWidth(),b.cropHeight()),e=p.changedBounds(a);C.trigger.ok(function(a){return l.resampleAction(e,a,c)},a,function(a){N();return a})})};D.set(O);F.set(N);y(B,a);var S=function(){d.speak(v.body(),n.translate("image.crop.cancel"));M()},P=m.unbindable();x(function(){P.set(w.bind(f,"focus",function(a){S()}))});var U=g.inlineDialog(t,u.keylayouts(),b.inlineDialog({ok:O,cancel:S}));U.enter();var Q=s.create();Q.bind(B.events.domChanged,
M);Q.bind(B.events.nodeChanged,function(a){v.inBody(a.node())&&M()});Q.bind(u.events.apply,O);Q.bind(u.events.cancel,M)};return{apply:function(){D.on(f.apply)},open:function(){a.content().getSelection().bind(q.detect).each(function(a){E(a.image())})},destroy:function(){F.on(f.apply)},isActive:D.isSet,events:C.registry}}});l("a3",["gz","hd","hf","1b","if"],function(c,e,d,a,b){var g=d.fToFR(e.single);return{run:function(a,b,c){return d.fromChain([a.getImage,b,g,c])},applyEdit:function(e){return function(g){var k=
c.cata(g,function(a,b,c,d){return c},function(a,b,c){return b});a.set(e,"src",k);k=b.waitFor(e,"load",1E3);return d.map(k,function(){return g})}}}});l("ig",["t","pj"],function(c,e){var d=function(a){return 20<=a},a=function(a){return c.from(a).filter(d)};return{ensureMin:a,parse:function(b,d){var f=a(b).getOr(0),h=a(d).getOr(0);return 0===f&&0===h?c.none():c.some(e(f,h))}}});l("a4","gz 3v 7 hf fn ig 99 1b".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a){return function(e){var f=e.image(),g=
e.asset(),k=function(a){a.fold(function(){h.remove(f,"src")},function(a){c.cata(a,function(a,b,c,d){h.set(f,"src",c)},d.noop)})};return b.loadIfNeeded(f).bind(function(){return a(g).map(function(a){k(a);return a})})}},m=d.constant(a.pure),n=d.constant(function(b){return a.pure(b.asset())});return function(a){a=g.parse(a.preferredWidth,a.preferredHeight);var b=a.fold(m,f.instance),c=a.fold(n,function(){return k(b)});return{assets:function(a){return e.mapM(a,b)},correlated:function(a){return e.mapM(a,
c)}}}});l("a5",["7","t","7e"],function(c,e,d){return{edit:function(a,b,g,f){return{items:f,updatePalette:function(f){if(g())f.hide(e.none())&&a();else{var k=c.curry(f.show,e.some(d.translate("image.context.palette.show")));f=c.curry(f.hide,e.some(d.translate("image.context.palette.hide")));(b().isSome()?k:f)()&&a()}}}},crop:function(a,b,c){return{items:c,updatePalette:function(c){(b()?c.show:c.hide)(e.none())&&a()}}}}});l("5s","7 93 9x 9y 9z a0 a1 9v a2 a3 a4 a5 7l 74 1b o".split(" "),function(c,
e,d,a,b,g,f,h,k,m,n,p,l,q,s,t){return function(u,v,w){var z=g(u.communication()),x=e(u.ui),y=u.content(),A=function(a){return function(c){c.fold(function(c){c=b.diagnoseImageEdit(c,s.get(a,"src"));x.show(c.bannerMessage());t.error("Image edit operation failed: ",c.consoleMessage())},function(a){v.uploadAssets([a]);y.focus();u.undo().save();y.domChanged()});l.select(y,a);return c}},B=function(a,b){u.undo().save();var c=m.applyEdit(a);return m.run(z,b,c)(a)},C=k(u);C.events.ok.bind(function(b){var c=
b.image(),d=b.cropAction();b=b.cleanup();var e=a.updater(a.keepCrop,c);B(c,d).map(e).map(b).get(A(c))});var D=function(){return y.getSelection().bind(l.detect)},F=function(b,d){return function(){D().each(function(e){e=e.image();var f=c.identity,g=a.updater(d,e);B(e,b).map(g).map(f).get(A(e))})}},E=[f.make("crop-begin","image.crop.begin",C.open),f.make("rotate-left","image.toolbar.rotateleft",F(d.rotateLeft,a.keepRotate)),f.make("rotate-right","image.toolbar.rotateright",F(d.rotateRight,a.keepRotate)),
f.make("flip-horizontal","image.toolbar.fliphorizontal",F(d.flipHorizontal,a.keepFlip)),f.make("flip-vertical","image.toolbar.flipvertical",F(d.flipVertical,a.keepFlip))],G=[f.make("crop-apply","image.crop.apply",C.apply)],F=q.ui({"edit.palette":c.curry(p.edit,u.ui().refresh,D,C.isActive,E),"crop.palette":c.curry(p.crop,u.ui().refresh,C.isActive,G)},c.identity),E=h.imageEdit(C.isActive,G,E);w=n(w);return{destroy:function(){C.destroy()},ui:F,insertResample:c.constant(w),situation:E.situation,handle:E.handle,
assign:E.assign,name:c.constant("imageEdit")}}});l("qd",["7","w"],function(c,e){var d=function(a){var b=e.startsWith(a,"www.")?"http://"+a:a;return{text:c.constant(a),href:c.constant(b)}};return{preprocess:d,auto:function(a){return d(a).href()}}});l("ih","b 9s 6 7 t 86 e6 qd dz 7l l 2q 3m".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l){var q=function(a,b){a.setRelativeSelection(e.after(b),e.after(b))},s=function(a,b,c,d){var e=a.getSelection();return e.bind(m.detect).fold(function(){return e.fold(function(){return[]},
function(a){return(a.collapsed()?c:d)(a)})},function(a){return b(a.image())})},t=function(c,e,f){var g=n.fromTag("a");u(g,d.deepMerge(e,{text:a.constant(b.none())}));p.wrap(f,g);m.select(c,f);return[g]},u=function(a,b){b.url().each(function(b){b=h.auto(b);f.attr(a,"href",b)});b.title().each(function(b){f.attr(a,"title",b)});b.target().each(function(b){f.attr(a,"target",b)});b.action().each(function(b){b(a)});return b.text().filter(b.textChanged).map(function(b){l.set(a,b);return!0}).getOr(!1)},v=
function(a){return function(b){return{link:b,properties:a}}},w=function(c){return function(e){return{link:e,properties:d.deepMerge(c,{text:a.constant(b.some(l.get(e)))})}}},z=function(a){return function(b){var d=k.findDescendants(b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset(),"a");b=0<d.length?d:k.findAncestors(b.startContainer(),b.endContainer(),"a");return c.map(b,1===b.length?v(a):w(a))}},x=function(b,d){return s(b,a.curry(t,b,d),function(a){var c=n.fromTag("a");u(c,d);g.insertAtCursor(b,
[c]);d.action().each(function(a){a(c)});q(b,c);return[c]},function(a){b.execCommand("CreateLink",!1,h.auto(d.url().getOr("")));a=b.getSelection().map(z(d)).getOr([]);c.each(a,function(a){u(a.link,a.properties);d.action().each(function(b){b(a.link)});q(b,a.link)});return c.map(a,function(a){return a.link})})};return{hyperlink:function(c,e){var f=e.text().fold(a.constant(e),function(c){return d.deepMerge(e,{text:a.constant(b.some(0<c.trim().length?c:e.url().getOr(""))),textChanged:0<c.trim().length?
e.textChanged:a.constant(!0)})});c.focus();return f.url().fold(a.constant([]),function(a){return 0<a.trim().length?x(c,f):[]})},setProperties:u}});l("ii",["8a"],function(c){var e=function(a,b){var d=c.getEnd(b);a.setSelection(b,d,b,d)},d=function(a,b){a.setSelection(b,0,b,0)};return{selectEnd:e,moveToEnd:function(a){a.getSelection().each(function(b){e(a,b.endContainer());a.focus()})},selectStart:d,moveToStart:function(a){a.getSelection().each(function(b){d(a,b.endContainer());a.focus()})}}});l("a6",
"9s ih ii ab 2s 3m 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(b,c){return b.getSelection().bind(function(d){return a.sharedLinkOrClosest(d,b.isRoot).map(function(a){c(a);return a})})};return{insert:e.hyperlink,update:function(a,d){return h(a,function(h){d.text().fold(function(){e.setProperties(h,d)},function(p){""===p&&""!==g.get(h)?(a.setRelativeSelection(c.before(h),c.before(h)),b.remove(h)):e.setProperties(h,d)&&(p=f.children(h).length,a.setRelativeSelection(c.on(h,p),c.on(h,p)))});
a.focus()})},unlink:function(a){h(a,function(c){a.setSelection(c,0,c,f.children(c).length);var e=f.lastChild(c);b.unwrap(c);e.each(function(b){d.selectEnd(a,b)});a.focus()})}}});l("al","84 7 t ij ft 59 fu ik 2o 21 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var p=function(a){return a.getSelection().bind(function(b){return a.win().bind(function(a){return c.rectangleAt(a,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset()).map(function(a){return{bounds:e.constant(a),element:e.constant(b.startContainer())}})})})},
l=function(b,c,f){p(c).fold(function(){a.insertAtCursor(b,c,f)},function(a){var g=a.bounds();a=a.element();(m.isText(a)?n.parent(a):d.some(a)).each(function(a){a=b.directionAt(a);var d=c.translateScreen(g.left,g.top);f({left:d.left,top:d.top,height:e.constant(g.height),width:e.constant(g.width),direction:e.constant(a)})})})},q=function(a,c,d,e,f,g,h){var k=f.direction();a=b.makeshift(a,c,f.left(),f.top(),f.width(),f.height(),k,g,h);c.show(d,a);d.setComponents([e.element()])};return{show:function(a,
b,c,d,e){l(a,b,function(a){q(b,c,d,e,a,f(0,0))})},showExpandable:function(a,b,c,d,e){l(a,b,function(a){k.add(d.panel(),g.resolve("expandable-popup"));var m=f(22,14),n={maxHeightFunction:h.expandable()};q(b,c,d,e,a,m,n)})}}});l("il","8e fp h2 92 52 hp eo 7 h4 7e 59 4a 4b 2o 3c".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s){var t=function(a,b,d){a=g(a);b=m.translate(b);a.content(f(b));q.add(a.element(),n.resolve(d));c.button(a.element(),b);return a},u=function(a){var c=b.div();q.add(c,n.resolve("main-controls"));
s.append(c,a);return c},v=function(b,c,e){var f=t("remove","link.dialog.remove","link-remove"),g=t("cancel","button.cancel","link-cancel"),h=t(b,c,e);b=p.create({remove:l([],f.events.click),cancel:l([],g.events.click),execute:l([],h.events.click)});c=[a.button(f.element(),d.button({execute:k.click})),a.button(g.element(),d.button({execute:k.click})),a.button(h.element(),d.button({execute:k.click}))];return{remove:f,cancel:g,execute:h,keylayouts:c,events:b.registry,destroy:function(){f.destroy();g.destroy();
h.destroy()}}};return{insert:function(){var a=v("insert","link.dialog.insert","link-insert"),b=u([a.cancel.element(),a.execute.element()]);a.remove.disable();e.disable(a.remove.element());return{dialogTitle:h.constant(m.key("link.dialog.aria.insert")),elements:h.constant([a.remove.element(),b]),events:h.constant(a.events),keylayouts:h.constant(a.keylayouts),execute:a.execute,destroy:a.destroy}},update:function(){var a=v("update","link.dialog.update","link-update"),b=u([a.cancel.element(),a.execute.element()]);
return{dialogTitle:h.constant(m.key("link.dialog.aria.update")),elements:h.constant([a.remove.element(),b]),events:h.constant(a.events),keylayouts:h.constant(a.keylayouts),execute:a.execute,destroy:a.destroy}}}});l("aa",["b","7","59","d3"],function(c,e,d,a){var b=d.resolve("link-validation-highlight"),g=d.resolve("link-validation-invalid");d=d.resolve("link-validation-unknown");var f=e.constant([b,g,d]);return{configure:function(b){c.each(f(),function(c){b.add(b.output(),c,a.removeClass(c));b.add(b.internal(),
c,a.removeClass(c))})},allClasses:f,invalidLink:e.constant(g),unknownLink:e.constant(d),validationHighlight:e.constant(b)}});l("im","7 t 7e aa 73 58 4a 2w 1b 2o 33".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return{enabled:function(b){var l=e.none(),q=h.immutable("value","text","attrs"),s=f.create({properties:g(["link"]),follow:g(["link"]),ignore:g(["link"]),remove:g(["link"])}),t={"linkmenu-properties":s.trigger.properties,"linkmenu-follow":s.trigger.follow,"linkmenu-ignore":s.trigger.ignore,"linkmenu-remove":s.trigger.remove};
return{situation:function(b){b=l.map(function(b){var c=[q("linkmenu-properties",d.translate("link.context.edit"),{}),q("linkmenu-follow",d.translate("link.context.follow"),{}),q("linkmenu-remove",d.translate("link.context.remove"),{})];b=m.has(b,a.validationHighlight())?[q("linkmenu-ignore",d.translate("link.context.ignore"),{})]:[];return c.concat(b)}).getOr([]);return{primary:c.constant(b),secondary:c.constant([]),submenus:c.constant([])}},handle:function(a){l.each(function(b){var c=k.get(a,"data-ephox-gopher-item-value"),
c=t[c];void 0!==c&&c(b)})},assign:function(a){l=a.bind(function(a){return n.closest(a,"a[href]",b.isRoot)})},events:s.registry}},disabled:function(){var a=b.noSituation(),d=f.create({properties:g(["link"])});return{situation:a,handle:c.noop,assign:c.noop,events:d.registry}}}});l("in",["1u"],function(c){return{generate:function(e){return e+"-"+c.floor(99999*c.random()).toString()}}});l("a8","b 7 in 8c 59 2w d3 1b l 2q 2s 4h".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p){var l=b.resolve("link-eph-cursor"),
q=function(a){c.each(a,n.remove)},s=function(b,c){u("textbox-bookmark-top",b,m.prepend,c,a.top())},t=function(b,c){u("textbox-bookmark-bottom",b,m.append,c,a.bottom())},u=function(b,e,f,g,m){var l=d.generate(b);c.each(e,function(a){h.set(a,"href","#"+l)});b=p.children(g,"["+a.bookmarkDataAttr()+'="'+m+'"]');c.each(b,n.remove);0<e.length&&(e=k.fromTag("span"),h.setAll(e,{id:l,style:"visibility: hidden;"}),h.set(e,a.bookmarkDataAttr(),m),f(g,e))};return{configure:function(b){b.add(b.internal(),l,f.remove);
b.add(b.output(),l,f.remove);b.addExcludedContext(["."+l]);b.addSelector(b.input(),"["+a.bookmarkDataAttr()+"]",q);b.addSelector(b.output(),"["+a.bookmarkAnchorDataAttr()+'="'+a.top()+'"]',s);b.addSelector(b.output(),"["+a.bookmarkAnchorDataAttr()+'="'+a.bottom()+'"]',t)},properties:g.immutableBag("url textChanged text title target action invalid".split(" "),[]),insertCursor:e.constant(l)}});l("io","b ar t 8f 8c ab 59 1b 2o 3y l 5a 3o 2a 33 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t){return function(u,
v){var w=f.resolve("cursor-pointer"),z=v.os.isOSX(),x=d.none(),y=function(a){return u.isInline()?l.absolute(a).top():0},A=function(a){var c=h.get(a,"href");if("top"===h.get(a,b.bookmarkAnchorDataAttr()))u.win().each(function(a){u.body().each(function(b){a.scrollTo(0,y(b))})});else if("bottom"===h.get(a,b.bookmarkAnchorDataAttr()))u.win().each(function(a){u.body().each(function(b){b=y(b)+p.get(b)-a.innerHeight;a.scrollTo(0,b)})});else if(/^#/.test(c)){var d=c.substr(1);u.body().each(function(a){g.anchorTarget(a,
d).each(function(a){u.win().each(function(b){q.setToElement(b,a)})})})}else t.open(c)},B=function(a,b){var d=z?e.META():e.CTRL();c.contains(d,a)&&b()},C=n.fromDom(t),D=d.none();u.events.ready.bind(function(b){b=b.api().body();var c=a.handle(b,function(a){var b=a.target();(z?a.raw().metaKey:a.raw().ctrlKey)&&s.closest(b,"a[href]").bind(function(b){a.prevent();A(b)})});D=d.some(c);x=d.some(k.toggler(b,w))});var F=function(){x.each(function(a){a.on()})},E=function(){x.each(function(a){a.off()})},G=function(a){B(a.original().raw().which,
E)};u.events.keyup.bind(G);var H=m.bind(C,"keyup",function(a){B(a.raw().which,E)}),L=function(a){B(a.original().raw().which,F)};u.events.keydown.bind(L);var I=m.bind(C,"keydown",function(a){B(a.raw().which,F)});return{follow:A,destroy:function(){D.each(function(a){a.unbind()});u.events.keyup.unbind(G);u.events.keydown.unbind(L);H.unbind();I.unbind()}}}});l("qg","8e fp h2 92 52 7 h4 7e 59 1b 2o 4e 2p 3y l 5a 2q 3c 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w){var z=k.resolve("inline-popup-expanded");
return function(x,y,A,B){var C=s.fromTag("div");c.dialog(C,h.get(B));p.add(C,[k.resolve("expandable-inline-popup")]);B=b.div();n.add(B,k.resolve("inline-popup-content"));var D=b.div();p.add(D,[k.resolve("inline-popup-content-expand"),z]);var F=b.div();n.add(F,k.resolve("inline-popup-controls"));var E=b.div();n.add(E,k.resolve("inline-popup-expand-button-wrapper"));var G=s.fromTag("span");p.add(G,[k.resolve("inline-popup-expand-button"),k.resolve("icon")]);var H=h.translate("aria.label.more");m.set(G,
"title",H);c.button(G,H);c.group(D);c.linkElements(G,D);u.append(E,G);H=b.div();n.add(H,k.resolve("inline-popup-body"));v.append(H,[B,D,E]);v.append(C,[H,F]);v.append(B,x);v.append(D,y);v.append(F,A);n.add(C,z);var L="0px",I=function(){n.remove(C,z);n.add(D,k.resolve("expand-close"));c.hidden(D,!0);l.setAll(D,{opacity:"0",height:"0px",visibility:"hidden"});e.collapsed(G)},J=q.bind(D,"transitionend",function(a){p.remove(D,[k.resolve("expand-close"),k.resolve("expand-open")])}),K=q.bind(G,"click",function(a){n.has(C,
z)?I():(n.add(C,z),n.add(D,k.resolve("expand-open")),c.hidden(D,!1),l.setAll(D,{opacity:"1",height:L,visibility:"visible"}),e.expanded(G))});x=[a.button(G,d.button({execute:f.click}))];return{element:g.constant(C),keylayouts:g.constant(x),destroy:function(){w.remove(C);K.unbind();J.unbind()},show:function(){L=t.getOuter(D)+"px";I();l.reflow(C);n.add(C,k.resolve("enable-transition"))}}}});l("11r",[],function(){return{setValue:function(c,e,d){c=c.dom();c.value=e;c.text=d}}});l("qk",["b","t"],function(c,
e){var d=function(a,b){a.dom().add(b.dom())};return{getValue:function(a){var b=a.dom();a=b.selectedIndex;b=b.options[a];return void 0===b||-1===a?e.none():e.from(b.value)},add:d,addAll:function(a,b){c.each(b,function(b){d(a,b)})},setSelected:function(a,b){a.dom().selectedIndex=b}}});l("y2","b m1 7e l 11r qk".split(" "),function(c,e,d,a,b,g){var f=[{value:"",i18nKey:"link.properties.target.none"},{value:"_blank",i18nKey:"link.properties.target.blank"},{value:"_top",i18nKey:"link.properties.target.top"},
{value:"_self",i18nKey:"link.properties.target.self"},{value:"_parent",i18nKey:"link.properties.target.parent"}];return{target:function(h){var k=e.common("select","target-container","link.properties.target.label"),m=c.map(f,function(c){var e=a.fromTag("option");b.setValue(e,c.value,d.translate(c.i18nKey));return e});g.addAll(k.field(),m);var n=h.target().getOr("");h=c.findIndex(f,function(a){return a.value===n});g.setSelected(k.field(),0<h?h:0);return{element:k.element,input:k.field}}}});l("qh","aq h2 92 52 7 t h4 m1 7e y2 59 4n 1b 2o 4e 3y 2q 2s 34".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w){var z=function(){var b=a.div();q.add(b,n.resolve("invalid-link-info"));var d=h.comboBox("href-url-value","link.properties.url.label",g.some(b));l.setAll(d.input(),{placeholder:k.translate("link.properties.url.placeholder"),autocomplete:"off",autocorrect:"off"});var e=q.toggler(d.element(),n.resolve("link-is-invalid"));return{input:d.input,element:d.element,dropArrow:d.dropArrow,showInvalid:function(){e.on();var f=a.span();s.add(f,[n.resolve("icon"),
n.resolve("invalid-link-icon")]);u.append(b,f);var g=k.translate("link.properties.url.invalid");l.set(f,"title",g);f=c.describe(d.input(),g);l.set(f,"aria-live","assertive");u.append(b,f)},hideInvalid:function(){e.off();v.empty(b);l.remove(d.input(),"aria-describedby")}}};return function(a){var c=z();a.url().each(function(a){w.set(c.input(),a)});var g=h.input("text-to-display","link.properties.text.label"),s=p(!1);q.add(g.element(),n.resolve("text-to-display"));l.setAll(g.input(),{placeholder:k.translate("link.properties.text.placeholder"),
autocomplete:"off",autocorrect:"off"});a.text().each(function(a){w.set(g.input(),a)});var u=h.input("title-text","link.properties.title.label");q.add(u.element(),n.resolve("title-container"));l.setAll(u.input(),{placeholder:k.translate("link.properties.title.placeholder"),autocomplete:"off",autocorrect:"off"});a.title().each(function(a){w.set(u.input(),a)});var v=m.target(a),F=t.bind(g.input(),"input",function(){s.set(!0)});return{url:b.constant(c),text:b.constant(g),textChanged:s.get,title:b.constant(u),
target:b.constant(v),keylayouts:function(){return[d.input(c.input(),e.input({})),d.input(g.input(),e.input({})),d.input(u.input(),e.input({})),d.button(v.input(),e.button({execute:f.click,process:b.noop}))]},destroy:function(){F.unbind()}}}});l("qi",["a","b","os","1u"],function(c,e,d,a){return function(a){var g=c.isNumber(a)?a:1E4,f=d.access("local.linkCache");a=f.read();var h=function(a){return 0>g-a.length?a.slice(0,g):a}(c.isArray(a)?a:[]),k=function(){return h.slice(0)};return{add:function(a){if("#"!==
a.charAt(0)){h.length>=g&&h.pop();var b=e.indexOf(h,a);-1<b&&h.splice(b,1);h.unshift(a)}},state:k,destroy:function(){f.write(k())}}}});l("y3",["b","1q"],function(c,e){return{stringArray:function(d){var a={};c.each(d,function(b){a[b]={}});return e.keys(a)}}});l("y4",["t"],function(c){return{url:function(e){return c.some(e.url())},title:function(c){return c.title()},innerText:function(e){e=e.innerText();return 0<e.length?c.some(e):c.none()}}});l("11s",["6u"],function(c){return{resolve:c.create("ephox-tarot").resolve}});
l("11t","52 7 t 2o l 2q 3c 11s 1u".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,c,d,e,f){var h=b.fromText(a.substr(0,c));c=b.fromText(a.substr(c,d));a=b.fromText(a.substr(e));f=b.fromTag(f);g.append(f,c);return[h,f,a]},n=function(b,g,h,k){var m=c.tag(g);f.append(m,h);k.each(function(b){a.add(m,b)});return{item:e.constant(b),marked:e.constant(d.some(m))}},p=function(a,b,c,e){var f=a.text,g=a.marker.start(),p=a.marker.length(),l=0;0<e-(g+p)||0===g||(p>e?l=g-10:(e=k.floor((e-p)/2),l=g-e));
e=f.substr(l);g-=l;b=m(e,g,p,g+p,b);f=e.length===f.length?d.none():d.some(h.resolve("anchor-before"));return n(a.item(),c,b,f)},l=function(b,d){var e=c.span();a.add(e,d);f.append(e,b);return e},q=function(a,c,d){var e=[];c=l(c,h.resolve("content-innertext"));0<a.length&&(a=l([b.fromText(a)],h.resolve("anchor-before")),e.push(a));e.push(c);0<d.length&&(d=l([b.fromText(d)],h.resolve("anchor-after")),e.push(d));return e};return{contentMarker:function(a,b,c,e){var f=a.item().before(),g=a.item().after(),
h=a.text;if(0===f.length&&0===g.length&&h.length>e)return p(a,b,c,e);e=a.marker.start();var k=a.marker.length();b=m(h,e,k,e+k,b);f=q(f,b,g);return n(a.item(),c,f,d.none())},contentUnderlined:q,attrMarker:p}});l("y5","52 t 1b 2o l 2q 3c 11s 11t".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a,d,e){a=c.tag(d);g.append(a,b.fromText(e));return a};return{anchors:function(b,g){var k=g.item(),l=k.url(),s=c.div();a.add(s,h.resolve("item-line"));var t=k.title().getOr(l);d.set(s,"title",t);k=g.marked().fold(function(){return m(b,
"div",t)},function(a){return a});a.add(k,h.resolve("item-main-label"));l=e.from(l).map(function(c){return c!==t?(c=m(b,"div",c),a.add(c,h.resolve("item-secondary-label")),[c]):[]}).getOr([]);l=[k].concat(l);f.append(s,l);return s},standard:function(e,m){var l=m.item(),q=c.div();a.add(q,h.resolve("item-line"));var s=[l.before(),l.innerText(),l.after()].join("");d.set(q,"title",s);s=m.marked().fold(function(){var a=k.contentUnderlined(l.before(),[b.fromText(l.innerText())],l.after()),d=c.div();f.append(d,
a);return d},function(a){return a});a.add(s,h.resolve("item-main-label"));l.indent()&&a.add(s,h.resolve("indent"));g.append(q,s);return q},error:function(a,d){var e=c.span(),f=b.fromText(d);g.append(e,f);return e}}});l("11u",["gt","fu","of","og"],function(c,e,d,a){return function(b,g){return{position:function(f,h){var k=f.isRtl()?d.allRtl():d.all(),m=e(0,0),n=c.element(b,h);a.simple(n,g,m,k,{})}}}});l("11v","b 7 t k 2w y4 11t".split(" "),function(c,e,d,a,b,g,f){var h=b.immutable("matchFunction","start",
"length"),k=function(a,b,c){for(var d=0,e=[],f=function(a){e.push(a);d++},g=0,h=a.length;g<h&&d<b;g++)c(a[g]).each(f);return e};return{unmarked:function(a,b){var f=b.getOr(1E3),f=a.length>f?a.slice(0,f):a;return c.map(f,function(a){return{item:e.constant(a),marked:d.none}})},match:function(b,c,f,g){var l=f.toLowerCase();f=g.getOr(1E3);return k(b,f,function(b){return a.findMap(c,function(a){return a(b).bind(function(c){var f=c.toLowerCase().indexOf(l);if(-1<f){var g=l.length;return d.some({item:e.constant(b),
marked:d.none,text:c,marker:h(a,f,g)})}return d.none()})})})},mark:function(a,b,d,e){return c.map(a,function(a){return(a.marker.matchFunction()===g.innerText?f.contentMarker:f.attrMarker)(a,b,d,e)})}}});l("11w","7 1b l 2q 2s 11s".split(" "),function(c,e,d,a,b,g){var f="data"+g.resolve("section-id");return{create:function(g,k){var m=d.fromTag("ol");e.set(m,f,k.id());var n=function(){b.empty(m)};return{element:c.constant(m),clear:n,add:function(b){var c=d.fromTag("li");a.append(c,b);a.append(m,c);return c},
spec:c.constant(k),destroy:function(){n()}}},dataIdAttribute:c.constant(f)}});l("y6","b 8e aq 31 xa 52 7 t 58 4a gt 56 2w 1b 2n 2o 3y l 2q 2s 2a 6x 33 m 2b 11u 11v 11s 11w q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x,y,A,B,C,D,F,E,G,H){var L=l.immutableBag(["container","sections","translate"],["doc"]);l=l.immutableBag("id highlight contentLimit items render extractors".split(" "),["itemLimit"]);var I="data"+E.resolve("item-id");return{init:function(l,r){var L=r.doc().getOr(v.fromDom(H)),
M=r.translate(),O={},S=b(),P=g.div();t.add(P,E.resolve("predictive-menu"));e.hidden(P,!0);var U=D(l,P),Q=function(){c.each(S.state(),function(a){V(a,[])})},V=function(b,d){z.remove(b.element());b.clear();var e={};0<d.length&&(c.each(d,function(c){var d=b.spec().render()(L,c),d=b.add(d),g=a.generate("");q.set(d,I,g);e[g]={gui:f.constant(d),item:f.constant(c.item())}}),w.append(P,b.element()));O[b.spec().id()]=e},W=function(){return C.parent(P).isSome()},Y=function(a){t.add(a,E.resolve("selected"));
R().bind(ha).each(function(a){d.speak(s.body(),a.item().url())})},X=function(a){Y(a);x.intoViewIfNeeded(a,P)},Z=function(a){t.remove(a,E.resolve("selected"))},ea=function(){A.descendant(P,"li").each(X)},aa=function(){B.one("ol:last-child li:last-child",P).each(X)},R=function(){return A.descendant(P,"li."+E.resolve("selected"))},ga=function(){return R().bind(ha).map(function(a){a=a.item();d.speak(s.body(),M("link.dialog.autocomplete.accept",a.url()));return a})},ja=function(a){0===C.children(a).length?
C.nextSibling(a).fold(ea,ja):C.firstChild(a).fold(aa,X)},fa=function(a){0===C.children(a).length?C.prevSibling(a).fold(aa,fa):C.lastChild(a).fold(ea,X)},ha=function(a){a=A.closest(a,"["+I+"]");var b=a.bind(function(a){return A.closest(a,"["+G.dataIdAttribute()+"]")}),c=a.map(function(a){return q.get(a,I)});return b.map(function(a){return q.get(a,G.dataIdAttribute())}).bind(function(a){return h.from(O[a])}).bind(function(a){return c.bind(function(b){return h.from(a[b])})})},ia=u.capture(P,"mouseover",
function(a){a=a.target();y.closest(a,"li."+E.resolve("selected"))||ha(a).fold(f.noop,function(a){R().each(function(a){Z(a)});Y(a.gui())})}),ba=u.capture(P,"click",function(a){ga().each($.trigger.click)}),$=m.create({click:k(["item"])}),da=p.ensure(["url","indent"]);c.each(r.sections(),function(a){c.each(a.items(),da);a=G.create(L,a);S.push(a)});Q();return{element:f.constant(P),events:$.registry,reset:Q,resetFull:function(){c.each(S.state(),function(a){a.clear();var b=a.spec().items(),c=a.spec().itemLimit(),
b=F.unmarked(b,c);V(a,b)})},filter:function(a){0<a.length?(O={},c.each(S.state(),function(b){var c=b.spec(),d=F.match(c.items(),c.extractors(),a,c.itemLimit()),c=F.mark(d,c.highlight(),"div",c.contentLimit());V(b,c)})):Q()},show:function(a){var b=r.container();w.append(b,P);U.position(a,n.relativeOrigin(b));d.speak(s.body(),M("link.dialog.autocomplete.open"))},isShowing:W,hide:function(){W()&&d.speak(s.body(),M("link.dialog.autocomplete.close"));z.remove(P);R().each(Z)},getSelectedData:ga,moveup:function(){R().fold(aa,
function(a){Z(a);C.prevSibling(a).fold(function(){C.parent(a).bind(C.prevSibling).fold(aa,fa)},X)})},movedown:function(){R().fold(ea,function(a){Z(a);C.nextSibling(a).fold(function(){C.parent(a).bind(C.nextSibling).fold(ea,ja)},X)})},destroy:function(){ia.unbind();ba.unbind();c.each(S,function(a){a.destroy()});z.remove(P)}}},config:L,section:l}});l("qj","b c y3 ar 7 s t k in 7e 8c ab 59 58 4a 4n 2w 1b 4e 1c 2p 3y 30 21 3m 34 2t y4 y5 y6 w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,
z,x,y,A,B,C,D,F,E,G,H,L){var I=e.detect().browser.isSafari(),J=u.immutable("url","indent","action","before","innerText","after"),K=u.immutable("url","indent","title","action"),N=u.immutable("url","action"),M=u.immutable("url","indent","action");return function(e,u,P,U){var Q=s.create({change:q([])}),V=function(){var a=u.body().map(p.all).getOr([]),a=c.bind(a,function(a){var b=v.get(a,"href");return L.startsWith(b,"#")||v.has(a,n.bookmarkAnchorDataAttr())?[]:[b]}),a=U.state().concat(a),a=d.stringArray(a);
return c.map(a,function(a){var c=f.none();return K(a,b.constant(!1),c,b.noop)})},W=function(a,b,c){a=a.replace(/[^0-9a-zA-Z$-_.+*(),]/g,"");var d=0<a.length?a:k.generate("textbox-heading");return f.some(M("#"+d,c,function(){v.set(b,"id",d)}))},Y=function(a){var c="h1"!==B.name(a),d=C.get(a);return v.has(a,"id")||v.has(a,"name")?(a=v.has(a,"id")?v.get(a,"id"):v.get(a,"name"),f.some(M("#"+a,c,b.noop))):0===d.trim().length?f.none():W(d,a,c)},X=function(a){v.remove(a,n.bookmarkAnchorDataAttr())},Z=function(a){var b=
n.reservedUrls()[a.toLowerCase()];return function(a){v.set(a,n.bookmarkAnchorDataAttr(),b)}},ea=function(){var a=u.body().map(p.findLinkTargets).getOr([]),b=1E3<a.length,a=c.map(a,function(a){return Y(a).map(function(c){var d=(b?p.linkTargetFastText:p.linkTargetText)(50,a);return J(c.url(),c.indent(),c.action(),d.before(),d.innerText(),d.after())})}),a=h.cat(a),d=function(a){return"\u2014 "+a+" \u2014"},e=Z(n.topAnchorUrl()),e=J(n.topAnchorUrl(),!1,e,"",d(n.topAnchorUrl()),""),f=Z(n.bottomAnchorUrl()),
d=J(n.bottomAnchorUrl(),!1,f,"",d(n.bottomAnchorUrl()),"");return[e].concat(a).concat([d])};return{predict:function(b,d,h){var k=g.cached(function(){var a=V(),c=ea(),a=H.config({container:P,translate:m.translate,sections:[H.section({id:"recent",highlight:"strong",contentLimit:50,items:a,itemLimit:10,render:G.anchors,extractors:[E.title,E.url]}),H.section({id:"anchors",highlight:"strong",contentLimit:50,items:c,render:G.standard,extractors:[E.innerText,E.url]})]}),d=H.init(b,a);w.add(d.element(),[l.resolve("layer-menus"),
l.resolve("tarot-inline")]);d.events.click.bind(function(a){d.hide();s(b,a.item())});a=F.get(b);x.setAll(d.element(),{"min-width":a+"px","box-sizing":"border-box"});return d}),p=t(f.none()),s=function(a,b){var c=b.url();D.set(a,c);I&&a.dom().click();p.set(f.some(b));Q.trigger.change()},q=h.container(b);q.swallowKeys([a.UP(),a.DOWN()]);q.events.up.bind(function(a){a.stopper()();a=k();u(a);a.moveup()});q.events.down.bind(function(a){a.stopper()();a=k();u(a);a.movedown()});q.events.escape.bind(function(a){var b=
k();b.isShowing()&&(b.hide(),a.stopper()())});q.events.enter.bind(function(a){k().getSelectedData().each(function(c){a.stopper()();var d=k();d.hide();d.reset();s(b,c)})});q.on();var u=function(a){if(!a.isShowing()){var c=D.get(b);""===c?a.resetFull():a.filter(c);a.isShowing()||a.show(e.uiDirection())}},v=[y.bind(b,"input",function(a){Q.trigger.change();a=k();p.set(f.none());var c=D.get(b);0<c.length?(a.filter(c),a.isShowing()||a.show(e.uiDirection())):(a.reset(),a.hide())}),y.bind(b,"focus",function(a){k()}),
y.bind(b,"blur",function(a){var c=k().hide;A.active().fold(c,function(a){z.eq(a,b)||c()})}),y.bind(P,"click",function(a){k().hide()}),y.bind(d,"click",function(a){a.stop();a=k();a.isShowing()?a.hide():u(a)})];return{destroy:function(){k().destroy();q.destroy();c.each(v,function(a){a.unbind()})},getSelectedValue:function(){return p.get().fold(function(){var a=D.get(b),c=n.isReservedUrl(a)?Z(a):X;return N(a,c)},function(a){return N(a.url(),a.action())})}}},events:Q.registry}}});l("ip","ao b m4 h2 92 7 t qg qh 8c a8 qi qj 59 b2 58 4a 4b 1b 2o 2p 34 qk".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,p,l,q,s,t,u,v,w,z,x,y,A){return function(B,C,D,F,E,G,H){var L=p(1337),I=k(G),J=H();H=[I.url().element()];var K=[I.text().element(),I.title().element(),I.target().element()],N=h(H,K,J.elements(),J.dialogTitle());z.add(N.element(),q.resolve("inline-link-dialog"));var M=c.popup(F.uiContainer,F.bounds,B,[],s.editorContainer()).initMenu(N.element());z.add(M.element(),q.resolve("bubble-box"));H=M.element();H=l(B,D,H,L);var O=H.predict(I.url().input(),I.url().dropArrow(),C);
G.invalid()&&(I.url().showInvalid(),H.events.change.bind(function(){I.url().hideInvalid()}));var S={before:function(){x.set(M.panel(),"visibility","hidden");M.open()},after:function(){x.remove(M.panel(),"visibility");x.remove(M.panel(),"display")}},P=u.create({remove:v([],J.events().remove),cancel:t([]),execute:v([],J.events().execute)}),U=function(a){var b=a.command();a=a.data();w.has(a,m.bookmarkAnchorDataAttr())||"insertLink"!==b&&"updateLink"!==b||(b=w.get(a,"href"),L.add(b))};E.events.internal.bind(U);
C=function(){P.trigger.cancel()};J.events().cancel.bind(C);M.events.close.bind(C);C=e.flatten([I.keylayouts(),N.keylayouts(),J.keylayouts()]);var Q=b.inlineDialog(N.element(),C,a.inlineDialog({ok:J.execute.click,cancel:g.noop}));Q.events.exit.bind(function(){M.close();P.trigger.cancel()});return{showPopup:function(a){S.before();d.preserve(function(){a.showExpandable(B,D,F,M,N);S.after();N.show();Q.enter()},N.element())},hide:function(){M.closed()||Q.exit()},getValues:function(){var a=O.getSelectedValue(),
b=y.get(I.text().input()).trim(),c=y.get(I.title().input());return n.properties({url:""===a.url()?f.none():f.some(a.url()),textChanged:I.textChanged(),text:f.some(b),title:f.some(c),target:A.getValue(I.target().input()),action:f.some(a.action()),invalid:!1})},destroy:function(){L.destroy();E.events.internal.unbind(U);O.destroy();I.destroy();Q.destroy();J.destroy();M.destroy();N.destroy()},events:P.registry}}});l("a7","c 7 t 7c al il 8c im a8 io ip aa 58 4a 1b 2o 3m 3w".split(" "),function(c,e,d,a,
b,g,f,h,k,m,n,l,r,q,s,t,u,v){return function(w,z){var x=w.filter(),y=w.content(),A=w.smartview(),B=h.enabled(y),C=w.internalevents(),D=c.detect();k.configure(x);var F=m(y,D),x=function(){y.getSelection().each(function(a){y.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})},E=D.browser.isIE()?x:e.noop,G=q.create({insert:r(["properties"]),update:r(["properties"]),unlink:r([])}),H=a.destroyable(),L=function(a,b){var c=n(w.region(),w.keyboard(),y,A,C,a,b);c.events.remove.bind(function(a){G.trigger.unlink();
I()});c.events.cancel.bind(function(a){I();y.focus();E()});H.set(c);y.events.mousedown.bind(I);return c},I=function(){H.clear();y.events.mousedown.unbind(I)},J=function(a){var c=L(a,g.update);c.events.execute.bind(function(a){G.trigger.update(c.getValues());I()});c.showPopup(b)};B.events.properties.bind(function(a){a=a.link();var b=s.has(a,f.bookmarkAnchorDataAttr())?f.getReservedUrl(s.get(a,f.bookmarkAnchorDataAttr())):s.get(a,"href"),c=d.from(u.get(a).trim());a=k.properties({url:d.from(b),textChanged:!1,
text:c,title:d.from(s.get(a,"title")),target:d.from(s.get(a,"target")),action:d.none(),invalid:t.has(a,l.validationHighlight())});J(a)});B.events.follow.bind(function(a){y.focus();v(function(){F.follow(a.link())},0)});B.events.ignore.bind(function(a){z.ignore(a.link())});B.events.remove.bind(function(){G.trigger.unlink()});return{showContext:J,showInsert:function(a){var c=L(a,g.insert);c.events.execute.bind(function(a){G.trigger.insert(c.getValues());I()});c.showPopup(b)},situation:B.situation,handle:B.handle,
assign:B.assign,events:G.registry,destroy:function(){I();F.destroy()}}}});l("iq","b 8e 52 7 t iz hn 7e a8 59 58 4a 4n 1b 2o l 30 2q 3c 2s 34 b4".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t,u,v,w,z,x,y){return function(A){var B=r(b.none());A=d.div();s.add(A,m.resolve("link-widget"));var C=d.span();s.add(C,m.resolve("link-widget-field"));var D=t.fromTag("input");s.add(D,m.resolve("link-widget-input"));e.label(D,h.translate("link.properties.url.placeholder"));v.append(C,D);q.set(D,"type","url");
q.set(D,"placeholder",h.translate("link.dialog.tooltip"));var F=f.text(C,D),E=g([m.resolve("link-widget-insert")],"insert.link"),G=g([m.resolve("link-widget-update")],"link.dialog.update"),H=g([m.resolve("link-widget-remove")],"link.dialog.remove");v.append(A,C);var L=l.create({insert:n(["properties"]),update:n(["properties"]),unlink:n([]),toEditor:n([])}),I=function(a,c){return k.properties({url:b.some(a),textChanged:c.isSome(),text:c,title:b.none(),target:b.none(),action:b.none(),invalid:!1})},
J=function(){var a=x.get(D),c=B.get().fold(function(){return I(a,a)},function(c){return c.text().fold(function(){return I(a,b.some(a))},function(c){c=b.from(c).filter(function(a){return""!==a.trim()});return I(a,c)})});L.trigger.insert(c);B.set(b.none());L.trigger.toEditor()},K=function(){var a=x.get(D);L.trigger.update(I(a,b.none()));B.set(b.none());L.trigger.toEditor()};E.events.click.bind(J);G.events.click.bind(K);H.events.click.bind(function(){L.trigger.unlink();L.trigger.toEditor()});return{element:a.constant(A),
addEscape:function(a){v.append(C,a.element())},type:a.constant(F),execute:function(){y.isVisible(E.element())?J():y.isVisible(G.element())&&K()},open:function(){u.focus(D)},close:a.noop,destroy:a.noop,represent:function(a){c.each([E.element(),G.element(),H.element()],z.remove);a.url().fold(function(){x.set(D,"http://");v.after(D,E.element())},function(a){w.after(D,[G.element(),H.element()]);x.set(D,a)});B.set(b.some(a))},events:L.registry}}});l("a9",["9e","im","iq","58","4a"],function(c,e,d,a,b){return function(g){var f=
d(g),h=c(g,f);g=e.disabled();var k=b.create({insert:a(["properties"]),update:a(["properties"]),unlink:a([])});f.events.insert.bind(function(a){k.trigger.insert(a.properties())});f.events.update.bind(function(a){k.trigger.update(a.properties())});f.events.unlink.bind(function(a){k.trigger.unlink()});return{showContext:function(a){f.represent(a);h.open()},showInsert:function(a){f.represent(a);h.open()},situation:g.situation,handle:g.handle,assign:g.assign,events:k.registry,destroy:function(){h.close();
h.destroy()}}}});l("5t","c 7 t a6 7e a7 a8 a9 aa ab 74 58 4a 1b 2o 3m".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t){return function(u,v){var w=u.content(),z=u.undo(),x=u.shortcuts(),y=c.detect().deviceType.isTouch()?h(u):g(u,v),A=r.create({analytics:l(["message"])});y.events.insert.bind(function(b){z.transaction(function(){var c=a.insert(w,b.properties());u.internalevents().input(c)});w.domChanged();w.cursorIntoView();A.trigger.analytics("link_inserted")});y.events.update.bind(function(b){z.transaction(function(){var c=
b.properties();a.update(w,c)});w.domChanged();w.cursorIntoView()});y.events.unlink.bind(function(b){z.save();a.unlink(w);w.domChanged();w.cursorIntoView()});var B=function(){w.getSelection().each(function(a){m.sharedLinkOrClosest(a,w.isRoot).fold(function(){w.selectWord();var a=w.getSelectedText().each(function(a){return a.trim()});y.showInsert(f.properties({url:d.none(),textChanged:!1,text:a,title:d.none(),target:d.none(),action:d.none(),invalid:!1}))},function(a){var b=d.from(t.get(a).trim());y.showContext(f.properties({url:d.from(q.get(a,
"href")),textChanged:!1,text:b,title:d.from(q.get(a,"title")),target:d.from(q.get(a,"target")),action:d.none(),invalid:s.has(a,k.validationHighlight())}))})})},C=n.ui({"link.general":{toggle:!1,value:"link",textkey:b.key("insert.link"),action:B,updateGeneral:e.noop,icon:!0,shortcut:!0,hasPopup:!1,hasDialog:!0}});x.events.link.bind(B);return{ui:C,situation:y.situation,handle:y.handle,assign:y.assign,events:A.registry,destroy:function(){y.destroy()}}}});l("ad",["4o"],function(c){var e=c.generate([{invalid:["invalidUrl"]},
{unknown:["unknownUrl"]},{valid:["validUrl"]}]);return{cata:function(c,a,b,e){return c.fold(a,b,e)},derive:function(c,a){return"VALID"===a?e.valid(c):"INVALID"===a?e.invalid(c):e.unknown(c)}}});l("is",["nw","nx","nt","7"],function(c,e,d,a){var b=[e.strict("url"),e.defaulted("fresh",!1)],g=d.objOf(b);c=d.objOf([e.field("urls","urls",c.strict(),d.arrOfObj(b))]);return{one:a.constant(g),many:a.constant(c)}});l("ac","ir 1q ad 89 f8 f9 fa fb is fe".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(n,
l,r){var q=b(r),s=g.get("ephox.link.service.one",k.one(),n+"/1/check?url=${url}&fresh=${fresh}",l),t=g.post("ephox.link.service.many",k.many(),n+"/1/check",l),u=function(a){return{url:a.url,result:d.derive(a.url,a.result)}};return{checkOne:function(b,c){var d=h.now(),d=f.single(function(a,c){return s.execute({url:m(b),fresh:c})},q,b,d,void 0!==c?c:!1);return a.mapSync(d,u)},checkMany:function(b,d){var g=h.now(),g=f.multiple(function(a,b){return t.execute({urls:a})},q,b,function(a){return c.indexOnKey(a.results,
"url")},function(a){return a.url},g,void 0!==d?d:!1);return a.mapSync(g,function(a){return e.map(a,u)})},dumpCache:q.dump}}});l("qp",[],function(){return{recompose:function(c){var e="";""!==c.protocol&&(e+=c.protocol,e+=":");""!==c.authority&&(e=e+"//"+c.authority);e+=c.path;""!==c.query&&(e+="?",e+=c.query);""!==c.anchor&&(e+="#",e+=c.anchor);return e}}});l("y7",["w"],function(c){return{remove:function(e){for(var d="";""!==e;)if(c.startsWith(e,"../"))e=c.removeLeading(e,"../");else if(c.startsWith(e,
"./"))e=c.removeLeading(e,"./");else if(c.startsWith(e,"/./"))e="/"+c.removeLeading(e,"/./");else if("/."===e)e="/";else if(c.startsWith(e,"/../"))e="/"+c.removeLeading(e,"/../"),d=c.removeTrailing(d,d.substring(d.lastIndexOf("/")));else if("/.."===e)e="/",d=c.removeTrailing(d,d.substring(d.lastIndexOf("/")));else if("."===e||".."===e)e="";else{var a=e.match(/(^\/?.*?)(\/|$)/)[1];e=c.removeLeading(e,a);d+=a}return d}}});l("y8",["w"],function(c){return{merge:function(e,d,a){if(""!==a&&""===e)return"/"+
d;a=e.substring(e.lastIndexOf("/")+1);return c.removeTrailing(e,a)+d}}});l("qq",["w","i9","y7","y8"],function(c,e,d,a){return{transform:function(b,g){var f={strictMode:!0},h=e.parse(b,f),f=e.parse(g,f),k={};""!==f.protocol?(k.protocol=f.protocol,k.authority=f.authority,k.path=d.remove(f.path),k.query=f.query):(""!==f.authority?(k.authority=f.authority,k.path=d.remove(f.path),k.query=f.query):(""===f.path?(k.path=h.path,k.query=""!==f.query?f.query:h.query):(c.startsWith(f.path,"/")?k.path=d.remove(f.path):
(k.path=a.merge(h.path,f.path,b.authority),k.path=d.remove(k.path)),k.query=f.query),k.authority=h.authority),k.protocol=h.protocol);k.anchor=f.anchor;return k}}});l("it",["qp","qq"],function(c,e){return{resolve:function(d,a){var b=e.transform(d,a);return c.recompose(b)}}});l("ag","b t p 8c 2w 1b 2b w i9 it 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var l=b.immutable("href","resolved");return function(b){var q=b.slice(0),s=function(b){var r=g.get(b,"href");if(h.startsWith(r,"#")||g.has(b,a.bookmarkAnchorDataAttr()))b=
d.error(b);else{var s;s=f.owner(b).dom().baseURI;s=e.from(s).getOr(n.location);s=m.resolve(s,b.dom().href);if(c.contains(q,s))b=d.error(b);else{var w=k.parse(s).protocol;b="https"===w||"http"===w?d.value(l(r,s)):d.error(b)}}return b};return{extract:s,ignore:function(a){s(a).each(function(a){q.push(a.resolved())})},state:function(){return q.slice(0)}}}});l("ah",["b"],function(c){return{generate:function(e){var d={};c.each(e,function(a){var b=a.resolved();a=a.href();d.hasOwnProperty(b)?c.contains(d[b],
a)||d[b].push(a):d[b]=[a]});return d}}});l("5u","b 1q ac ad 89 7 ae t k af 8b aa ag ah ab ai 2o 4e o".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t,u,v,w){return function(z,x,y){var A=z.content(),B=z.filter(),C=z.communication(),D=z.undo(),F=z.viewablearea(),E=F.viewport(),G=r(x.ignore),H=l.validationHighlight(),L=l.invalidLink(),I=l.unknownLink();l.configure(B);var J=d(y.url,C.mediatorHeaders(),x.cache),K=function(a){a=c.map(a,function(a){return t.cata(E.assess(a),h.none,g.compose(h.some,G.extract),
h.none)});a=k.cat(a);a=m.partition(a);c.each(a.errors,P);var b=q.generate(a.values);a=e.keys(b);a=c.map(a,function(a){return{url:a}});a=J.checkMany(a);M(a,function(a){e.each(a,function(a){var d=b[a.url];void 0===d?w.warn("Link validator response from server was unknown: ",a.url,a.result):c.each(d,function(b){Q(a.result,b)})})})};z=function(){var a=F.sections(),a=s.many(a),a=c.filter(a,function(a){return!u.has(a,n.embedChecking())});K(a)};var N=f(z,500).throttle;F.events.onChange.bind(N);A.events.domChanged.bind(N);
var M=function(a,c){b.handle(a,function(a){w.error("Link Validation server failure: ",a)},function(a){c(a)})},O=function(a){return A.body().map(function(b){return s.hrefUrl(b,a)})},S=function(a,b){O(a).each(function(a){c.each(a,function(a){u.has(a,l.validationHighlight())||v.add(a,[H,b])})})},P=function(a){u.has(a,l.validationHighlight())&&v.remove(a,l.allClasses())},U=function(a){O(a).each(function(a){c.each(a,P)})},Q=function(b,c){a.cata(b,function(a){S(c,L)},function(a){S(c,I)},function(a){U(c)})};
D.events.undo.bind(z);D.events.redo.bind(z);return{destroy:g.noop,refresh:N,ignore:function(a){D.save();G.ignore(a);N();A.focus();A.domChanged();A.cursorIntoView()},state:function(){return{ignore:G.state(),cache:J.dumpCache()}}}}});l("11x",["t","j3"],function(c,e){return{top:{rules:[{current:e.backtrack,next:e.sidestep,fallback:c.none()},{current:e.sidestep,next:e.sidestep,fallback:c.some(e.backtrack)},{current:e.advance,next:e.sidestep,fallback:c.some(e.sidestep)}],inclusion:function(c,a,b){return!c.property().parent(b).exists(function(b){return c.eq(b,
a.item())})}},all:{rules:void 0,inclusion:function(c,a,b){return c.property().isText(a.item())}}}});l("y9",["b","7","j3","11x"],function(c,e,d,a){var b=d.walkers(),g=function(a,c,e,f){return d.walk(a,c,e,b.left(),f.rules).map(function(b){return a.property().isEmptyTag(b.item())||a.property().isBoundary(b.item())?[]:(f.inclusion(a,b,c)?[b.item()]:[]).concat(g(a,b.item(),b.mode(),f))}).getOr([])},f=function(a,b,e){a=g(b,e,d.sidestep,a);return c.reverse(a).concat([e])};return{top:e.curry(f,a.top),all:e.curry(f,
a.all)}});l("qr",["6s","y9"],function(c,e){var d=c();return{top:function(a){return e.top(d,a)},all:function(a){return e.all(d,a)}}});l("ya",["b","7","t","fg","i4"],function(c,e,d,a,b){var g=function(f,g){var m=b.generate(g,function(b,c){return f.property().isText(b)?d.some(a.range(b,c,c+f.property().getText(b).length)):d.none()}),n=c.foldr(m,function(a,b){return f.property().getText(b.element())+a},"");return{list:e.constant(m),text:e.constant(n)}},f=function(a,c,d,f){var g=b.find(c.list(),function(b){return a.eq(b.element(),
d)}).map(function(a){return a.start()+f});return{list:c.list,text:c.text,cursor:e.constant(g)}};return{from:function(a,b,c,d){b=g(a,b);return f(a,b,c,d)}}});l("qs",["6s","ya"],function(c,e){var d=c();return{from:function(a,b,c){return e.from(d,a,b,c)}}});l("iu",["7","t","qr","qs","21"],function(c,e,d,a,b){return{get:function(g,f){var h=d.all(g),k=a.from(h,g,f),h=k.cursor().orThunk(function(){return b.isText(g)?e.none():e.some(k.text().length)});return{list:k.list,text:k.text,cursor:c.constant(h)}}}});
l("qt",["4q","7","t","l","6r"],function(c,e,d,a,b){return function(g,f,h){return{patterns:function(){return[new b("(\\W)(\\w+)(\\W*)$","gi"),new b("(^)(\\w+)(\\W*)$","gi")]},useCursor:e.constant(!0),generate:function(b,f){var g=a.fromText(f.text());return c.species({elements:e.constant([g]),cursor:d.none,dictation:e.constant(d.some(function(){return h(f.text())})),notify:d.none})},derive:function(a){var b=a.index+a[1].length,c=b+a[2].length;return f(a[2]).map(function(a){return{startIndex:e.constant(b),
finishIndex:e.constant(c),text:e.constant(a)}})},label:g}}});l("qu","4q 7 t 6q l 6r".split(" "),function(c,e,d,a,b,g){return function(f,h){var k=a.sanitise(f);return{patterns:function(){return[new g("("+k+")","gi")]},useCursor:e.constant(!0),generate:function(a,f){var g=b.fromTag("span",a.dom());g.dom().innerHTML=h;return c.species({elements:e.constant([g]),cursor:d.none,dictation:d.none,notify:d.none})},derive:function(a){var b=a.index;a=b+a[0].length;return d.some({startIndex:e.constant(b),finishIndex:e.constant(a)})}}}});
l("qv","4q 7 t fg 6q 2p l 2q 3c 6r".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(n,l,r){var q=b.sanitise(l);return{patterns:function(){return[new m("^("+q+"\\s)(.+)","gi")]},useCursor:e.constant(!1),generate:function(b,m){var l=f.fromTag(n,b.dom());g.set(l,"list-style-type",r);var p=f.fromTag("li",b.dom()),q=f.fromTag("li",b.dom());h.append(q,f.fromTag("br",b.dom()));k.append(l,[p,q]);k.append(p,m.clones());return c.species({elements:e.constant([l]),cursor:e.constant(d.some(a.point(q,
0))),dictation:d.none,notify:d.none})},derive:function(a){var b=a[1];return d.some({startIndex:e.constant(a.index),finishIndex:e.constant(a.index+b.length)})}}}});l("qw","4q 7 t 6q l 3c 6r".split(" "),function(c,e,d,a,b,g,f){var h=function(a,h){return{patterns:function(){return[new f("^("+a+")(.+)","gi")]},useCursor:e.constant(!1),generate:function(a,f){var k=b.fromTag(h,a.dom());g.append(k,f.clones());return c.species({elements:e.constant([k]),cursor:d.none,dictation:d.none,notify:d.none})},derive:function(a){var b=
a[1];return d.some({startIndex:e.constant(a.index),finishIndex:e.constant(a.index+b.length)})}}};return{normal:function(b,c){var d=a.sanitise(b);return h(d,c)},spaced:function(b,c){var d=a.sanitise(b)+"\\s";return h(d,c)}}});l("qx","4q 7 t 6q l 2q 6r".split(" "),function(c,e,d,a,b,g,f){return function(h,k,m,n){var l=a.sanitise(k),r=a.sanitise(m);return{patterns:function(){return[new f(l+"([^\\s].*?[^\\s])"+r,"gi"),new f(l+"([^\\s])"+r,"gi")]},useCursor:e.constant(!0),generate:function(a,f){var h=
b.fromTag(n,a.dom()),k=b.fromText(f.text());g.append(h,k);return c.species({elements:e.constant([h]),cursor:d.none,dictation:d.none,notify:d.none})},derive:function(a){return d.some({startIndex:e.constant(a.index),finishIndex:e.constant(a.index+a[0].length),text:e.constant(a[1])})}}}});l("qy","4q 7 t 6q l 6r".split(" "),function(c,e,d,a,b,g){return function(f,h){var k=a.sanitise(f);return{patterns:function(){return[new g("("+k+")","gi")]},useCursor:e.constant(!0),generate:function(a,f){return c.species({elements:e.constant([b.fromTag(h,
a.dom())]),cursor:d.none,dictation:d.none,notify:d.none})},derive:function(a){return d.some({startIndex:e.constant(a.index),finishIndex:e.constant(a.index+a[0].length)})}}}});l("qz","4q 7 t l w 6r".split(" "),function(c,e,d,a,b,g){var f=function(b,f){return c.species({elements:e.constant([a.fromText(f.text())]),cursor:d.none,dictation:d.none,notify:d.none})},h=function(){return{patterns:function(){return[/([^.?!][.?!]\s+)([a-z][^\s]*)/g,/^()([a-z][^\s]*)/g]},useCursor:e.constant(!0),generate:f,derive:function(a){var c=
a.index,f=c+a[0].length;a=a[1]+b.capitalize(a[2]);return d.some({startIndex:e.constant(c),finishIndex:e.constant(f),text:e.constant(a)})}}}(),k=function(){return{patterns:function(){return[new g("([A-Z][A-Z]+)([a-z]+)","g")]},useCursor:e.constant(!1),generate:f,derive:function(a){var c=a[2],c=b.capitalize(a[1].toLowerCase())+c.toLowerCase(),f=a.index;a=f+a[0].length;return d.some({startIndex:e.constant(f),finishIndex:e.constant(a),text:e.constant(c)})}}}();return{capitalise:e.constant(h),normalise:e.constant(k)}});
l("r0","4q 7 t cr qd 1b l 2q".split(" "),function(c,e,d,a,b,g,f,h){return{patterns:function(){return[a.autolink()]},useCursor:e.constant(!0),generate:function(a,b){var n=f.fromTag("a");g.set(n,"href",b.href());h.append(n,f.fromText(b.text()));return c.species({elements:e.constant([n]),cursor:d.none,dictation:d.none,notify:e.curry(d.some,[n])})},derive:function(a){var c=b.preprocess(a[1]),f=c.text(),c=c.href();return-1<f.indexOf("@")?d.none():d.some({startIndex:e.constant(a.index),finishIndex:e.constant(a.index+
f.length),text:e.constant(f),href:e.constant(c)})}}});l("iw","b qt qu qv qw qx qy 7 s 7e qz r0 6x 2b 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s){var t=h.constant(function(a,b){return b});return function(s,v,w){var z=w.whitelist.fold(t,function(a){return function(b,d){return c.contains(a,b)?d:[]}}),x=function(a){return{derive:a.derive,generate:a.generate,patterns:a.patterns,useCursor:a.useCursor,allowed:h.constant(!0)}},y=function(a,b){return{derive:a.derive,generate:a.generate,patterns:a.patterns,
useCursor:a.useCursor,allowed:function(a){return!1===r.closest(a,b)}}};w=z("headings",[x(b.spaced("######","h6")),x(b.spaced("#####","h5")),x(b.spaced("####","h4")),x(b.spaced("###","h3")),x(b.spaced("##","h2")),x(b.spaced("#","h1"))]);var A=z("lists",[x(a("ul","*","disc")),x(a("ol","1.","decimal")),x(a("ol","a.","lower-alpha")),x(a("ol","i.","lower-roman")),x(a("ol","1)","decimal")),x(a("ol","a)","lower-alpha")),x(a("ol","i)","lower-roman"))]),B=z("semantics",[x(g("bold","**","**","strong")),x(g("bold",
"__","__","strong")),x(g("italic","*","*","em")),x(g("italic","_","_","em"))]),C=z("entities",[x(d("(c)","&copy;")),x(d("--","&mdash;")),x(d("-","&mdash;"))]),D=z("capitalisation",[x(n.normalise()),x(n.capitalise())]),F=function(a){return m.translate("aria.autocorrect.announce",a)};s=s.hasAutocorrect()?z("autocorrect",[x(e("autocorrect",s.lookup,F))]):[];var F=z("hr",[x(f("---","hr"))]),E=k.cached(function(a){a.runOrOnLoaded(function(b){var c=k.cached(function(){q.owner(b).dom().execCommand("AutoUrlDetect",
!1,!1)});a.events.focus.bind(function(){c()})});return z("link",[y(l,"a")])});return{headings:h.constant(w),semantics:h.constant(B),entities:h.constant(C),cases:h.constant(D),lists:h.constant(A),dynCustoms:function(){var a=v.get();return c.map(a,x)},link:E,hr:h.constant(F),corrections:h.constant(s)}}});l("yb","b 1c 21 69 b3 1u".split(" "),function(c,e,d,a,b,g){return{cloneAfter:function(f,h,k){var m=h;return c.map(f,function(c){var f=a.deep(c);d.isText(c)&&e.eq(k.endContainer(),c)&&b.get(c).length>
k.endOffset()&&b.set(f,b.get(f).substring(0,k.endOffset()));if(d.isText(f)&&0<m){var h=b.get(f);c=g.min(h.length,m);h=h.substring(c);b.set(f,h);m-=c}return f})}}});l("yc",["t","k"],function(c,e){return{matcher:function(d,a,b){var g=function(a){return b.fold(function(){return a&&1<a.length},function(b){return a&&0<a.length&&a.index+a[0].length===b})};return e.findMap(d,function(b){a:{if(!b.global)throw"Macro matching only works with global regexes: "+b;for(var d=b.exec(a);d;){if(g(d)){b=c.some(d);
break a}d=b.exec(a)}b=c.none()}return b})}}});l("r1","4q me yb yc 6 7 t qr".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,e,f,h){e=d.cloneAfter(e,h.finishIndex(),f);var k=b.merge(h,{clones:g.constant(e)});return{build:function(b){b=a.generate(b,k);return c.applicator({elements:b.elements,cursor:b.cursor,range:g.constant(f),dictation:b.dictation,notify:b.notify})}}};return{detect:function(b,c,d,g){var l=c.patterns(),s=b.cursor().filter(c.useCursor);return a.matcher(l,b.text(),s).bind(c.derive).bind(function(a){var b=
h.top(d);if(0<b.length){var m=e(b[0],0,d,g);return f.some(k(c,b,m,a))}return f.none()})}}});l("r2","4q me yc 7 t i4".split(" "),function(c,e,d,a,b,g){var f=function(b,c,d){c=g.get(b,c);var e=g.get(b,d);return c.bind(function(b){return e.map(function(c){return{start:a.constant(b),finish:a.constant(c)}})})},h=function(a,c){return c(a.start().element())&&c(a.finish().element())?b.some(a):b.none()};return{detect:function(b,g,n,l){n=g.patterns();l=b.cursor().filter(g.useCursor);return d.matcher(n,b.text(),
l).bind(g.derive).bind(function(d){return f(b.list(),d.startIndex(),d.finishIndex()).bind(function(b){return h(b,g.allowed).map(function(b){var f=d.startIndex()-b.start().start(),h=d.finishIndex()-b.finish().start(),k=e(b.start().element(),f,b.finish().element(),h);return{build:function(b){b=g.generate(b,d);return c.applicator({elements:b.elements,cursor:b.cursor,range:a.constant(k),dictation:b.dictation,notify:b.notify})}}})})})}}});l("ix","f6 b r1 r2 aq 7 86 g5 2n".split(" "),function(c,e,d,a,b,
g,f,h,k){var m=function(a,d,g){return d.doc().bind(function(m){m=a.build(m);var n=m.elements();e.map(n,c.doNotMerge);var l=h.handle(m.range());f.insertAt(d,l,n);e.map(n,c.clear);m.dictation().each(function(a){b.shout(k.body(),a())});m.notify().each(function(){g.input(n)});return m.cursor()})},n=function(a,b,c,d,e){return a.detect(b,c,d,e).map(function(a){return{execute:g.curry(m,a)}})};return{block:g.curry(n,d),inline:g.curry(n,a)}});l("aj","b iu 7 t k iv iw ix".split(" "),function(c,e,d,a,b,g,f,
h){return function(k,m,n,l,r,q,s,t){var u=a.none(),v=a.none(),w=f(r,q,t),z=c.flatten([w.link(m),w.hr(),w.semantics(),w.entities()]),x=function(){return c.flatten([z,k.autocorrect().get()?w.corrections():[],k.capitalisation().get()?w.cases():[],w.dynCustoms()])},y=w.headings().concat(w.lists()),A=function(a,d,f,h){var k=g.descend(d,f),m=e.get(k.element(),k.offset());f=c.filter(h,function(a){return a.allowed(d)});return b.findMap(f,function(b){return a(m,b,k.element(),k.offset())})},B=function(a,b){m.undoOperation(function(){a(function(){return b.execute(m,
s)}).each(function(a){m.setSelection(a.element(),a.offset(),a.element(),a.offset())});m.domChanged()})};return{spaceDown:function(){m.getSelection().map(function(a){a.collapsed()&&(u=A(h.inline,a.startContainer(),a.startOffset(),x()))})},spaceUp:function(){var b=d.curry(B,l.run);u.each(b);u=a.none()},enterDown:function(){m.getSelection().map(function(a){a.collapsed()&&(v=A(h.block,a.startContainer(),a.startOffset(),y.concat()));v=v.orThunk(function(){return A(h.inline,a.startContainer(),a.startOffset(),
x())})})},enterUp:function(){var b=d.curry(B,d.apply);v.each(b);v=a.none()}}}});l("5v","7 7e 71 aj ak 74 7f 58 4a".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n,l,r){var q=m.profile(),s=m.content(),t=m.undo(),u=m.context(),v=m.operations(),w=m.internalevents(),z=k.create({analytics:h(["message"])}),x=d(l.customs),y=a(q,s,t,v,n,x,w,r);s.events.keydown.bind(function(a){b.isSpace(a)&&y.spaceDown()});s.events.keyup.bind(function(a){b.isSpace(a)&&y.spaceUp()});u.events.preLinebreak.bind(function(a){y.enterDown()});
u.events.postLinebreak.bind(function(a){y.enterUp()});var A=function(a){return function(){var b=a.get();a.setAndCache(!b)}},B=function(a){return function(b){(!0===a.get()?b.select:b.deselect)()}};n=function(a,b,c){return{toggle:!0,value:a,textkey:e.key(b),action:A(c),updateGeneral:B(c),icon:!1,tooltip:f.get}};return{ui:g.ui({"capitalisation.general":n("capitalisation","cog.capitalisation",m.profile().capitalisation()),"autocorrect.general":n("autocorrect","cog.autocorrect",m.profile().autocorrect())}),
destroy:c.noop,events:z.registry,customMacros:c.constant(x),state:function(){return{customs:x.state()}}}}});l("iy","8e fp aq c h2 92 52 hp eo 7 h4 m1 7e h5 59 58 4a 1b 2o 3y l 30 2q 3c 2s 34".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t,u,v,w,z,x,y,A,B,C,D){var F=a.detect().deviceType.isTouch(),E=function(a){a.disable();e.disable(a.element())};return function(){var a=u.create({insert:t(["embed"]),input:t(["raw"])}),H=x.fromTag("span"),L=l.textarea("media-embed","media.embed"),I=r.translate("media.placeholder"),
J=d.describe(L.textarea(),I);A.append(L.element(),J);J=f.span();c.hidden(J,!0);w.add(J,s.resolve("media-icon"));v.set(J,"alt",r.translate("media.insert"));var K=h(),N=r.translate("media.insert");K.content(k(N));w.add(K.element(),[s.resolve("media-insert")]);q.makeDefault(K.element());c.button(K.element(),N);v.set(L.textarea(),"placeholder",I);E(K);a.registry.input.bind(function(){var a=D.get(L.textarea());K.disabled()?""!==a&&(K.enable(),e.enable(K.element())):""===a&&E(K)});var M=z.bind(L.textarea(),
"input",a.trigger.input);B.append(H,[J,L.element(),K.element()]);var O=function(){var b=D.get(L.textarea());a.trigger.insert(b);F&&y.blur(L.textarea())},I=[g.input(L.textarea(),b.input({})),g.button(K.element(),b.button({execute:n.click}))];K.events.click.bind(function(){O()});return{element:m.constant(H),execute:O,empty:function(){D.set(L.textarea(),"")},keylayouts:m.constant(I),events:a.registry,destroy:function(){M.unbind();K.destroy();C.remove(H)}}}});l("am","ao 8e h2 92 7 7e iy 59 b2 4a 4b 4e".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,l){return function(r){var q=r.region(),s=r.content(),t=r.smartview(),u=f(),v=a.inlineDialog(u.element(),u.keylayouts(),d.inlineDialog({ok:u.execute,cancel:b.noop}));e.dialog(u.element(),g.translate("insert.media"));var w=c.popup(t.uiContainer,t.bounds,q,[],k.editorContainer()).initMenu(u.element());l.add(u.element(),[h.resolve("media-embed-dialog"),h.resolve("inline-dialog")]);v.events.exit.bind(function(){z()});var z=function(){w.closed()||(w.close(),u.empty(),s.focus(),
v.exit())};r=m.create({insert:n(["embed"],u.events.insert)});return{element:u.element,showPopup:function(a){w.open();a.show(q,s,t,w,u);v.enter()},isClosed:w.closed,events:r.registry,destroy:function(){z();v.destroy();u.destroy();w.destroy()}}}});l("an","c 52 7 iz hn 7e 59 58 4a 1b 2o l 30 2q j0 34".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t){var u=c.detect().deviceType.isiOS();return function(c){c=e.div();n.add(c,f.resolve("media-widget"));var w=e.span();n.add(w,f.resolve("media-widget-field"));
var z=l.fromTag(s.isLarge()?"textarea":"input");n.add(z,f.resolve("media-widget-input"));var x=g.translate("media.placeholder");m.set(z,"placeholder",x);m.set(z,"title",x);q.append(w,z);x=a([f.resolve("media-widget-insert")],"insert.media");q.append(w,x.element());q.append(c,w);var y=b.text(w,z),A=k.create({insert:h(["embed"]),toEditor:h([])}),B=function(){var a=t.get(z),a=u?a.replace(/=\u201c([^\u201d]*)\u201d/g,'="$1"'):a;A.trigger.insert(a);A.trigger.toEditor()};x.events.click.bind(function(){B()});
return{element:d.constant(c),addEscape:function(a){q.append(w,a.element())},open:function(){t.set(z,"");r.focus(z)},close:d.noop,execute:function(){B()},destroy:d.noop,type:d.constant(y),events:A.registry}}});l("5w","c 7 7c al 9e 7e am an 74".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m){var n=m.content(),l=function(){var b=d.destroyable(),c=function(){b.clear();n.events.mousedown.unbind(c)};return{open:function(){var d=f(m);d.events.insert.bind(function(a){a=a.embed();m.insertFilteredHtmlAtCursor(a);
n.cursorIntoView();c()});d.showPopup(a);n.events.mousedown.bind(c);b.set(d)},destroy:function(){c()}}},r=function(){var a=h(m);a.events.insert.bind(function(a){a=a.embed();m.insertFilteredHtmlAtCursor(a);n.cursorIntoView()});return b(m,a)},q=(c.detect().deviceType.isTouch()?r:l)();return{ui:k.ui({"media.general":{toggle:!1,value:"media",textkey:g.key("insert.media"),action:q.open,updateGeneral:e.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!0}}),destroy:function(){q.destroy()}}}});l("as","7 59 2o l 2q 2s 6e 3w".split(" "),
function(c,e,d,a,b,g,f,h){return function(k,m){var n=a.fromTag("div");d.add(n,e.resolve("mentions-business-card"));var l=k.initMenu(n),r=null,q=function(a,c,d){g.empty(n);b.append(n,d);l.open();a(c,l)};return{showFull:function(a){return function(b,c){f(r);r=h(function(){q(a,b,c)},500)}}(m.showUnder),showMini:c.curry(q,m.showAtSide),hide:function(){f(r);l.close()},destroy:function(){f(r);l.destroy()}}}});l("at","a 1r t p 2w l o".split(" "),function(c,e,d,a,b,g,f){var h=b.immutable("rawData","extra"),
k=function(b,d,e){if(c.isArray(d)&&c.isArray(e))return a.value(h(d,e));f.error(b+" callback parameters were not both arrays",d,e);return a.error(b+" callback parameters were not both arrays")},m=function(b,c){if(e.isPrototypeOf(c))return a.value(g.fromDom(c));f.error(b+" was not a DOM element",c);return a.error(b+" was not a DOM element")};return function(a){var b=d.none();return{fetch:function(b,c){a.fetch(b,function(a,b){var d=k("fetch()",a,b);c(d)})},fetchExtra:function(b,c,d){a.menuExtra(b,c,
function(a,b){var c=k("menuExtra()",a,b);d(c)})},menuHover:function(c,e){b=d.some(c.userid);a.menuHover(c,function(a){a=m("menuHover() callback",a);b.is(c.userid)&&e(a)})},hover:function(b,c){a.hover(b.dom(),function(a){a=m("hover() callback",a);c(a)})},menuComplete:function(b){b=a.menuComplete(b);return m("menuComplete result",b)},hoverSelector:function(){return a.hoverSelector},isTrigger:function(a){return 64===a}}}});l("au",["b","d3"],function(c,e){return{configure:function(d){var a=[d.internal(),
d.history(),d.output()];c.each(a,function(a){d.addSelector(a,"span.ephox-polish-incomplete-mention",e.unwrap)});d.addExcludedContext(["span.ephox-polish-incomplete-mention"])}}});l("r3","b h0 6 7 t 59 4o 4n 1b l 2g 3c 2s 33 b4 q".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t){var u=g.resolve("no-results"),v=g.resolve("loading-results"),w=f.generate([{none:["item"]},{extra:["value","item"]},{fetched:["userId","name","rawname","info","item"]}]);return function(f){var x=e.mainmenu(m.fromDom(t),
g.resolve("mentions-list"),[]),y=h({}),A=function(a){return a.userid},B=function(a){return a.name},C=function(a,b){q.child(a,".ephox-gopher-item-text").each(function(a){n.set(a,b)})},D=function(a){return c.map(a,function(a){var b=e.item(m.fromDom(t),a.userid,a.name);C(b,a.name);return b})},F=function(a){return c.foldr(a,function(a,b){var c={};c[b.userid]=b;return d.merge(a,c)},{})},E=function(a,b){var d=D(a),f=c.map(b,function(a){return e.item(m.fromDom(t),a.key,a.value)});return d.concat(f)},G=function(a){var b=
k.get(a,"data-ephox-gopher-item-value"),d=y.get();return void 0!==d[b]?w.fetched(d[b].userid,d[b].name,d[b].rawname,d[b],a):c.contains([v,u],b)?w.none(a):w.extra(b,a)};return{element:a.constant(x),selected:function(){return q.descendant(x,".ephox-gopher-item-selected")},setData:function(a,b){var c=F(a);y.set(d.merge(y.get(),c));c=0===a.length?[{userid:u,name:f.get("mentions.lookahead.noresults")}]:a;c=E(c,b);r.empty(x);l.append(x,c)},getInfo:G,getUserId:function(c){return G(c).fold(b.none,b.none,
a.compose(b.some,A))},setLoading:function(){var a=[{userid:v,name:f.get("mentions.lookahead.searching")}],a=E(a,[]);r.empty(x);l.append(x,a)},getName:function(c){return G(c).fold(b.none,b.none,a.compose(b.some,B))},refind:function(a){a=k.get(a,"data-ephox-gopher-item-value");return void 0!==a&&null!==a?q.descendant(x,'[data-ephox-gopher-item-value="'+a+'"]'):b.none()},isOpen:function(){return s.isVisible(x)}}}});l("j1","aq 7 t r3 58 4a 4o 4n 2n 3m w 6e o q 3w".split(" "),function(c,e,d,a,b,g,f,h,
k,m,n,l,r,q,s){var t=f.generate([{nothing:[]},{refetch:["term"]},{open:["term"]}]);return function(f,l,p){var r=function(a){c.speak(k.body(),a)},q=a(p);f.setView(q.element());var s=h(""),A=function(a){C(a.rawData(),a.extra());f.reposition(d.none())},B=function(a){var b=q.selected();a();return b.bind(q.refind)},C=function(a,b){r(p.get("mentions.lookahead.open"));f.updateItems(B,function(){q.setData(a,b)})},D=function(a){return q.isOpen()&&2<=a.length?t.refetch(a):2<=a.length?t.open(a):t.nothing()},
F=function(a){a.fold(G,A)},E=g.create({accept:b(["information"]),menuHover:b(["element","info"]),none:b([])}),G=function(){f.cancel()};return{setData:C,isOpen:function(){return q.isOpen()},lookup:function(a,b){var c=n.startsWith(a,"@")?a.substring(1):a;s.set(c);var d=e.noop;D(c).fold(d,function(a){l.fetch(a,F)},function(a){q.setLoading();f.open(b);l.fetch(a,F)})},close:function(){f.close()},onClick:function(a){q.getInfo(a).fold(function(){E.trigger.none()},function(a,b){l.fetchExtra(a,s.get(),F)},
function(a,b,d,e,f){c.speak(k.body(),p.get("mentions.lookahead.selected",d));E.trigger.accept(e)})},onHover:function(a){r(m.get(a));q.getInfo(a).fold(e.noop,e.noop,function(a,b,c,d,e){E.trigger.menuHover(e,d)})},events:E.registry}}});l("j2","7 t 59 58 4a 4n 2o l 2q 2s b4".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(l,r,q,s){var t=h.fromTag("div");f.add(t,d.resolve("mentions-lookahead-container"));var u=q.initMenu(t),v=g(e.none()),w=b.create({close:a([])}),z=function(){return n.isVisible(t)};
q=function(){v.set(e.none());u.close()};u.events.close.bind(function(){r.close();w.trigger.close()});l.events.mousedown.bind(q);return{element:c.constant(t),destroy:function(){v.set(e.none());u.destroy()},setView:function(a){m.empty(t);k.append(t,a)},updateItems:function(a,b){a(b).fold(function(){r.setActiveMenu(t)},function(a){r.select(a)})},reposition:function(a){a.isSome()&&v.set(a);z()&&v.get().each(function(a){s.showUnder(a,u)})},open:function(a){l.body().each(function(b){u.open();s.showUnder(a,
u);v.set(e.some(a));r.open([r.sandbox()],b)})},isOpen:z,cancel:function(){v.set(e.none());w.trigger.close()},close:q,events:w.registry}}});l("av",["t","j1","j2","4a","4b"],function(c,e,d,a,b){return function(g,f,h,k,m,n){var l=d(g,f,h,k),r=e(l,m,n);g=a.create({menuHover:b(["element","info"],r.events.menuHover),accept:b(["information"],r.events.accept),close:b([],l.events.close)});r.events.none.bind(l.close);return{onHover:r.onHover,onClick:r.onClick,close:function(){r.isOpen()&&r.close();l.isOpen()&&
l.cancel()},isOpen:l.isOpen,lookup:function(a,b){l.reposition(c.some(b));r.lookup(a,b)},destroy:function(){l.destroy()},events:g.registry}}});l("ax","8a 7 t fg j3 6q j4 6r".split(" "),function(c,e,d,a,b,g,f,h){var k=function(){return new h(g.wordbreak(),"i")},m=function(a,b,c){return f.repeatLeft(a,c,function(a,b,c,d,e){return f.previousChar(d,e).fold(function(){return b.kontinue()},function(a){return b.finish(a.ch())})}).fold(d.none,d.none,d.some)},n=function(b,c,d,e){return 0<=e&&"@"===d.charAt(e)?
b.finish(a.point(c,e)):b.abort()},l=function(b,c,d,e){return b.finish(a.point(c,e))},r=function(b){return d.some(a.point(b,c.getEnd(b)))};return{isValidMention:function(a,c){return m(a,b.sidestep,c).fold(e.constant(!0),function(a){return null===a.match(/[0-9a-zA-Z]/)})},scan:function(a,b){return f.expandLeft(a,b,{regex:k,attempt:n}).fold(d.none,d.none,d.some).bind(function(c){return f.expandRight(a,b,{regex:k,attempt:l}).fold(d.none,r,d.some).map(function(a){return{start:c.element,soffset:c.offset,
finish:a.element,foffset:a.offset}})})}}});l("aw","b t ax 59 4o 21 6o 33 b3".split(" "),function(c,e,d,a,b,g,f,h,k){var m=b.generate([{none:[]},{bare:["text","start","soffset","finish","foffset"]},{incomplete:["text","element"]},{complete:["text","element"]}]),n=a.resolve("incomplete-mention"),l=function(a,b){return d.scan(a,b).map(function(a){return m.bare("",a.start(),a.soffset(),a.finish(),a.foffset())})},r=function(a){if(g.isText(a))return k.get(a);a=f.descendants(a,g.isText);return c.map(a,k.get).join("")},
q=function(a,b){return a.collapsed()?h.closest(a.startContainer(),b.hoverSelector()).fold(function(){return h.closest(a.startContainer(),"."+n).fold(function(){return l(a.startContainer(),a.startOffset())},function(a){return e.some(m.incomplete(r(a),a))})},function(a){return e.some(m.complete(r(a),a))}).getOrThunk(m.none):m.none()};return{detect:function(a,b){return a.getSelection().map(function(a){return q(a,b)}).getOrThunk(m.none)},detectOn:q,withinIncomplete:function(a){return h.closest(a,"."+
n)}}});l("ay","aw 59 2o 1c l 2q 2s".split(" "),function(c,e,d,a,b,g,f){var h=function(a){d.remove(a,e.resolve("incomplete-mention"));f.unwrap(a)};return{cancel:h,create:function(){var a=b.fromTag("span");d.add(a,e.resolve("incomplete-mention"));var c=b.fromText("@");g.append(a,c);return a},validatePrevious:function(b,d){c.withinIncomplete(b).filter(function(b){return c.withinIncomplete(d).forall(function(c){return!a.eq(b,c)})}).each(h)}}});l("az","b t 59 58 4a 4n 2n 3y l 6x 33 6e 3w".split(" "),function(c,
e,d,a,b,g,f,h,k,m,n,l,r){var q="."+d.resolve("mentions-business-card");return function(d,t){var u=g([]),v=null,w=null,z=b.create({contentHover:a(["target"]),stopHover:a([]),menuHover:a(["info"])});d.runOrOnLoaded(function(a){u.set([h.bind(a,"mouseover",function(a){B(a)}),h.bind(f.body(),"mouseover",function(a){n.closest(a.target(),q).each(y)}),h.bind(a,"mouseout",function(a){C(a)}),h.bind(f.body(),"mouseout",function(a){D(a)})])});var x=function(a){l(v);l(w);v=r(function(){z.trigger.contentHover(a)},
300)},y=function(){l(w)},A=function(){l(v);w=r(function(){z.trigger.stopHover()},300)},B=function(a){n.closest(a.target(),t).each(function(a){x(a);z.trigger.contentHover(a)})},C=function(a){if(!m.closest(a.target(),t))return!1;e.from(a.raw().relatedTarget||a.raw().toElement).map(k.fromDom).filter(function(a){return m.closest(a,t)}).isNone()&&A()},D=function(a){if(!m.closest(a.target(),q))return!1;e.from(a.raw().relatedTarget||a.raw().toElement).map(k.fromDom).filter(function(a){return m.closest(a,
q)}).isNone()&&A()};return{destroy:function(){c.each(u.get(),function(a){a.unbind()})},events:z.registry}}});l("b0",["a","cr","7e","r"],function(c,e,d,a){var b=function(a,b){return 1<arguments.length||/\{(\d+)\}/.test(a)?e.tokens.call(void 0,a,b):a};return function(e){return{get:function(f){var h=e[f];return c.isString(h)?b(h,a.prototype.slice.call(arguments,1)):d.translate.apply(void 0,arguments)}}}});l("j5",["7","ft","fu"],function(c,e,d){return function(a){return{show:function(b,g,f,h,k){g=d(0,
0);b=b.directionAt(a);b=e.mainmenu(f,c.constant(a),g,b);f.show(h,b);h.setComponents([a,k.element()])},showWith:function(b,d,f,h,k){b=b.directionAt(a);b=e.submenu(f,c.constant(a),b);f.show(h,b);h.setComponents([a,k.element()])}}}});l("b1",["7","j5","x"],function(c,e,d){return function(a,b,d,f){return{showAtSide:function(f,k){e(f).showWith(a,b,d,k,{element:c.constant(k.element())})},showUnder:function(f,k){e(f).show(a,b,d,k,{element:c.constant(k.element())})}}}});l("5x","87 ao ap b aq 9s ar 7 86 as at au av aw ax ay az b0 b1 b2 2n 2p l 30 2q 21 6o 2s b3 b4 x".split(" "),
function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t,u,v,w,z,x,y,A,B,C,D,F,E,G,H,L){return function(I,J){var K=v(J.aria),N=I.content(),M=I.smartview(),O=I.region(),S=I.operations(),P=n(J),U=e.menuSystem(M.uiContainer,h.constant("mentions"),d.menu({focusActive:!1}));y.set(U.sandbox(),"z-index",L(void 0!==J.zIndex?J.zIndex:1E6));var Q=e.popup(U.sandbox,M.bounds,O,[],z.editorContainer()),M=w(O,N,M,U.sandbox()),V=r(N,U,Q,M,P,K),W=m(Q,M);l.configure(I.filter());var Y=u(N,P.hoverSelector());V.events.menuHover.bind(function(a){P.menuHover(a.info(),
function(b){b.fold(h.noop,function(b){H.isVisible(a.element())&&W.showMini(a.element(),b)})})});Y.events.contentHover.bind(function(a){P.hover(a.target(),function(b){b.fold(h.noop,function(b){V.close();W.showFull(a.target(),b)})})});Y.events.stopHover.bind(function(a){W.hide()});U.events.itemHover.bind(function(a){a=a.item();V.onHover(a);N.backupSelection();B.focus(a);N.focus()});U.events.itemAction.bind(function(a){V.onClick(a.item())});N.events.nodeChanged.bind(function(a){N.getSelection().each(function(b){b.collapsed()&&
(q.detectOn(b,P).fold(V.close,V.close,h.noop,V.close),a.prev().each(function(a){t.validatePrevious(a,b.startContainer())}))})});N.events.keyup.bind(function(b){N.getSelection().each(function(c){c.collapsed()&&(a.contains(X,b.original().raw().which)||q.withinIncomplete(c.startContainer()).each(function(b){var c=F.descendants(b,D.isText),c=a.map(c,G.get).join("");V.lookup(c,b);W.hide()}))})});N.events.keypress.bind(function(a){var c=a.original();P.isTrigger(c.raw().which)&&N.getSelection().each(function(a){s.isValidMention(a.startContainer(),
a.startOffset())&&(a=function(){var a=t.create();k.insertAtCursor(N,[a]).each(function(a){N.setSelection(a.element(),a.offset(),a.element(),a.offset())});c.kill();b.speak(x.body(),K.get("mentions.initiated"))},q.detect(N,P).fold(a,a,h.noop,h.noop))})});var X=a.flatten([f.ENTER(),f.DOWN(),f.UP()]);I.context().events.preLinebreak.bind(function(a){Z(function(b,c){V.isOpen()?a.handler().handle():R()},h.noop)});N.events.keydown.bind(function(b){var c=b.original().raw().which;a.contains(f.ESCAPE(),c)?Z(function(){R();
b.original().kill()},h.noop):a.contains(X,c)&&V.isOpen()&&(U.simulateKey(b.original()),b.original().kill())});var Z=function(a,b){q.detect(N,P).fold(b,b,a,b)},ea=function(a){Z(function(b,d){P.menuComplete(a).each(function(a){C.after(d,a);E.remove(d);var b=A.fromText(c.zeroWidth());C.after(a,b);N.setRelativeSelection(g.after(b),g.after(b));aa()})},aa)},aa=function(){W.hide();V.close()},R=function(){Z(function(a,c){b.speak(x.body(),K.get("mentions.lookahead.cancelled"));S.atomic(function(){t.cancel(c)});
aa()},aa)};V.events.close.bind(R);V.events.accept.bind(function(a){ea(a.information())});return{destroy:function(){V.destroy();W.destroy();Y.destroy();U.destroy()}}}});l("b5",["b","t","7e","2w"],function(c,e,d,a){var b=a.immutable("textkey","value","icon");return function(a){var f=function(a){var c;c={zh:"zh_cn",pt:"pt_br"};c=void 0===c[a]?a:c[a];c=d.has("parlance."+c)?d.key("parlance."+c):d.raw(c);return b(c,a,e.none())},h=c.map(a.languages,f);return{build:function(b){return b.filter(function(b){return!c.contains(a.languages,
b)}).fold(function(){return h},function(a){return h.concat([f(a)])})}}}});l("5y","7 t 7n 7o b5 7e 74 7m 7q b6 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){return function(l,r,q){var s=l.content(),t=l.undo(),u=b(q),v=function(){return s.on(function(a){return m.language(a).fold(h.off,h.on)}).getOrThunk(h.unchanged)};return{ui:f.ui({"parlance.dropdown":c.constant({name:"parlance",textkey:g.key("parlance.set"),menuTextkey:g.key("parlance.menu"),updateDropdown:function(a){var b=v(),d=b.fold(e.none,e.none,
e.some),d=u.build(d);a.populate([{label:e.none,items:c.constant(d)}]);b.fold(a.deactivate,c.noop,a.activate);b.fold(a.untick,c.noop,a.tick)},action:function(b){var e=function(a){return k.language(s.isRoot,a,b)};r.lock(function(){a.cata(l.selections().get(),c.noop,d.multiple(s,t,e),d.single(s,t,e));s.getSelection().each(function(a){r.check(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})});n(function(){s.uiChanged()},0)},values:u.build(e.none()),render:e.none(),toggle:!1,describe:function(){return g.key("parlance.set")}})},
c.identity),destroy:c.noop}}});l("r4",["8e","7","7e","l"],function(c,e,d,a){return function(){var b=a.fromTag("textarea");c.label(b,d.translate("plaincode.dialog.editor"));c.textarea(b);return{element:e.constant(b)}}});l("j6","92 lf ar t h3 h4 r4 7e h5 59 58 4a 2o 34".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q){return function(s){var t=l.create({execute:n(["html"]),close:n([])}),u=b(s);r.add(u.element(),m.resolve("plaincode-modal"));u.setTitle(h.translate("plaincode.dialog.title"));var v=function(){w();
t.trigger.close()},w=function(){u.hide()},z=f();u.setContent(z.element());s=k.okCancel("plaincode");s.events.ok.bind(function(){t.trigger.execute(q.get(z.element()));v()});s.events.cancel.bind(function(){v()});u.events.close.bind(function(){x.exit();v()});u.setControls(s.element());var x=g.setup(u,s,[c.single(z.element(),[e.rule(e.is(d.ENTER()[0]),function(b){b.raw().stopPropagation();return a.none()})],a.none())]);return{element:u.element,open:function(){u.show();x.enter()},setHtml:function(a){q.set(z.element(),
a)},destroy:function(){u.destroy();x.destroy()},hide:w,events:t.registry}}});l("b7",["j6","58","4a"],function(c,e,d){return function(a){var b=c(a),g=function(){f.trigger.close();b.events.close.unbind(g);b.events.execute.unbind(h);b.destroy()},f=d.create({execute:e(["html"]),close:e([])}),h=function(a){f.trigger.execute(a.html())};b.events.close.bind(g);b.events.execute.bind(h);return{show:function(){b.open()},setHtml:b.setHtml,events:f.registry}}});l("5z",["7","b7"],function(c,e){return function(d,
a){var b=d.content(),g=d.shortcuts(),f=d.smartview(),h=a.setContent,k=a.getContent;g.events.plaincode.bind(function(){m()});var m=function(){var a=e(f.uiContainer());a.events.close.bind(function(){b.toEditing()});a.events.execute.bind(function(a){h(a.html())});b.toReading();a.setHtml(k());a.show()};return{destroy:c.noop}}});l("b8","b c 7 7z d3 1b 2s 2b".split(" "),function(c,e,d,a,b,g,f,h){var k=function(){return{configure:function(a){var d=[a.internal(),a.history(),a.output(),a.paste()];c.each(d,
function(c){a.addSelector(c,"[unselectable]",b.removeAttr("unselectable"))})},clean:function(a){g.remove(a,"unselectable")},disableNativeResize:function(a){g.set(a,"unselectable","on")}}},m=function(){return{configure:d.noop,clean:function(b){h.nextSibling(b).filter(a.isEmptyText).each(f.remove)},disableNativeResize:d.noop}};e=e.detect().browser;return e.isIE()?k():e.isFirefox()?m():{configure:d.noop,clean:d.noop,disableNativeResize:d.noop}});l("j8","7 t 58 4a 2p 5a 2t w 1u".split(" "),function(c,
e,d,a,b,g,f,h,k){return function(){var m=a.create({grow:d(["x","y"])}),n=1,l=1,r=e.none(),q=function(a){return b.getRaw(a,"width").bind(function(a){return h.endsWith(a,"px")?e.some(parseInt(a,10)):e.none()}).getOrThunk(function(){return f.get(a)})};return{setTarget:function(a){r=e.some(a);l=f.get(a)/(g.get(a)+0)},setMultiplier:function(a){n=a},clearTarget:function(){r=e.none()},mutate:function(a,b){r.each(function(c){var d=q(c)+n*a,e=1===d?1:k.floor(d/l);5<=d&&5<=e&&(f.set(c,d),g.set(c,e));m.trigger.grow(a,
b)})},events:m.registry,destroy:c.noop}}});l("j9","7 59 58 4a 1b 2o 4e 2p 3y l 5a 2q 3c 3o 2s 2t".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q,s,t){var u="data-"+e.resolve("resize-direction"),v=function(a,c){var d=m.fromTag("span");f.add(d,[e.resolve(a),e.resolve("resize-eph-resizer")]);b.set(d,u,c);return d};return{create:function(){var f=v("element-se-resize","1"),z=v("element-ne-resize","1"),x=v("element-sw-resize","-1"),y=v("element-nw-resize","-1"),A=m.fromTag("div");g.add(A,e.resolve("resize-wrapper"));
r.append(A,[f,z,x,y]);var B=function(){s.remove(A)},C=a.create({click:d(["multiplier"])}),D=k.bind(A,"mousedown",function(a){g.has(a.target(),e.resolve("resize-eph-resizer"))&&(a.prevent(),a=b.get(a.target(),u),a=void 0!==a?parseInt(a,10):1,C.trigger.click(a))});return{refresh:function(a,b){l.append(a,A);var d;d=q.absolute(b);var e=n.get(b),g=t.get(b);d={top:d.top,height:c.constant(e),left:d.left,width:c.constant(g)};e=t.get(x)/2;h.setAll(x,{top:d.top()+d.height()-e+"px",left:d.left()-e+"px"});h.setAll(f,
{top:d.top()+d.height()-e+"px",left:d.width()+d.left()-e+"px"});h.setAll(z,{top:d.top()-e+"px",left:d.width()+d.left()-e+"px"});h.setAll(y,{top:d.top()-e+"px",left:d.left()-e+"px"})},clear:B,events:C.registry,destroy:function(){D.unbind();B()}}}}});l("b9","j7 t b8 j8 j9 59 58 4a 2o 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(n){var l=e.none(),r=a();r.events.grow.bind(function(){t()});var q=c.transform(r,{layerClass:g.resolve("layer-below-dialog")});q.events.stop.bind(function(){l.each(function(a){u.trigger.stop(a)})});
k.add(q.element(),g.resolve("resize-eph-block"));var s=b.create();s.events.click.bind(function(a){r.setMultiplier(a.multiplier());n.body().each(function(a){q.go(m.documentElement(a))})});var t=function(){s.clear();l.each(d.clean)},u=h.create({stop:f(["target"])});return{showHandles:function(a){var b=m.documentElement(a);r.setTarget(a);l=e.some(a);q.on();s.refresh(b,a)},hideHandles:t,events:u.registry,destroy:function(){s.destroy();r.destroy();q.destroy();l=e.none()}}}});l("60","9s t 8f ak 7l b8 b9 21".split(" "),
function(c,e,d,a,b,g,f,h){return function(k){var m=k.content(),n=k.undo();k=k.filter();g.configure(k);var l=f(m),r=function(a){m.getSelection().bind(b.detect).each(function(c){n.save();b.remove(m,c.image());m.domChanged();n.save();a.original().kill()})},q=function(a){m.getSelection().bind(b.detect).each(function(b){m.setRelativeSelection(c.before(b.image()),c.before(b.image()));a.original().kill()})},s=function(a){m.getSelection().bind(b.detect).each(function(b){m.setRelativeSelection(c.after(b.image()),
c.after(b.image()));a.original().kill()})};k=function(){m.getSelection().bind(b.detect).fold(function(){l.hideHandles()},function(a){a=a.image();l.showHandles(a);b.reselect(m,a)})};m.events.loaded.bind(k);m.events.domChanged.bind(k);m.events.paint.bind(k);m.events.nodeChanged.bind(k);m.events.selectionchange.bind(k);var t=e.none();m.events.ready.bind(function(a){a=a.api().body();t=e.some(d.handle(a,function(a){"img"===h.name(a.target())&&b.select(m,a.target())}))});m.events.mousedown.bind(function(a){a=
a.original().target();"img"===h.name(a)&&g.disableNativeResize(a)});m.events.keydown.bind(function(b){a.isDel(b)||a.isBackspace(b)?r(b):a.isLeftOrUp(b)?q(b):a.isRightOrDown(b)&&s(b)});l.events.stop.bind(function(a){a=a.target();l.showHandles(a);b.reselect(m,a)});return{destroy:function(){l.destroy();t.each(function(a){a.unbind()})}}}});l("jc","b 1q 2w r7 r8 gp 1b 2p l 2q 2s m".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l){var r=d.immutable("minRow","minCol","maxRow","maxCol"),q=function(a,b){var c=
a.grid().columns(),d=a.grid().rows(),f=c,g=0,h=0;e.each(a.access(),function(a){if(b(a)){var c=a.row(),e=c+a.rowspan()-1,k=a.column();a=k+a.colspan()-1;c<d?d=c:e>g&&(g=e);k<f?f=k:a>h&&(h=a)}});return r(d,f,g,h)},s=function(a,c,d,e){for(var f=c.grid().columns(),g=c.grid().rows(),h=0;h<g;h++)for(var n=!1,l=0;l<f;l++)if(!(h<d.minRow()||h>d.maxRow()||l<d.minCol()||l>d.maxCol()))if(b.getAt(c,h,l).filter(e).isNone()){var p=n,r=a[h].element(),q=k.fromTag("td");m.append(q,k.fromTag("br"));(p?m.append:m.prepend)(r,
q)}else n=!0},t=function(a,b){var d=c.filter(g.firstLayer(a,"tr"),function(a){return 0===a.dom().childElementCount});c.each(d,n.remove);b.minCol()!==b.maxCol()&&b.minRow()!==b.maxRow()||c.each(g.firstLayer(a,"th,td"),function(a){f.remove(a,"rowspan");f.remove(a,"colspan")});f.remove(a,"width");f.remove(a,"height");h.remove(a,"width");h.remove(a,"height")};return{extract:function(d,e){var f=function(a){return l.is(a.element(),e)},h=a.fromTable(d),k=b.generate(h),m=q(k,f),r="th:not("+e+"),td:not("+
e+")",B=g.filterFirstLayer(d,"th,td",function(a){return l.is(a,r)});c.each(B,n.remove);s(h,k,m,f);t(d,m);return d}}});l("ba","b gg 7 7o 3k fq ja jb jc bq l 2q 2s 69".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l,r,q){var s=function(a){c.each(a,function(a){r.empty(a);l.append(a,n.fromTag("br"))})},t=function(a){return m.table(a[0]).map(q.deep).map(function(a){return[k.extract(a,e.selectedSelector())]})},u=function(a,e){var k=d.curry(e.filterDom,e.output()),m=h.register({doc:a.doc,win:a.win,body:a.body,
getSelection:a.getSelection,setSelection:a.setSelection});return function(e,h,n){c.each(h,k);var l=d.curry(b.toText,h);h=d.curry(b.toHtml,h);var l=f.buildClipboardContents(l,h),p=g.fromSafe(a);p.begin();m.setClipboard(e,l,function(){p.end();n.apply(void 0,arguments)})}},v=function(b,c,e){var f=function(b,f){a.cata(c.get(),d.noop,function(a){t(a).each(function(c){e(b,c,d.curry(f,a))})},d.noop)};b.events.cut.bind(function(a){f(a.original(),s)});b.events.copy.bind(function(a){f(a.original(),d.noop)})};
return function(a,b){var c=a.content(),e=a.filter(),f=a.selections();c.events.ready.bind(function(a){a=a.api();var b=u(a,e);v(a,f,b)});return{destroy:d.noop}}});l("r9",["6u"],function(c){return{resolve:c.create("ephox-cement").resolve}});l("jd",["r9","7"],function(c,e){var d=c.resolve("smartpaste-eph-bin");return{binStyle:e.constant(d)}});l("ra",["7","t","2q","2s"],function(c,e,d,a){return function(b,g){var f=function(b,d,f){b(f,d);return e.some({element:c.constant(d),cleanup:function(){a.remove(d)},
splits:c.constant([])})},h=function(a){return{none:e.none,start:c.curry(f,d.before,a),end:c.curry(f,d.after,a),middle:function(b,c,e){return f(d.after,a,c)}}},k=function(a){var b=function(a){return function(b,c){d.appendAt(b,c,a)}};return{prepend:c.curry(f,d.prepend,a),before:c.curry(f,d.before,a),after:c.curry(f,d.after,a),insertAt:function(c,d){return f(b(d),a,c)},append:c.curry(f,d.append,a)}};return{before:{text:h(b),element:{hasPrevious:k(b).insertAt,first:k(b).prepend,empty:k(b).before,otherwise:k(b).append}},
after:{text:h(g),element:{hasNext:k(g).insertAt,rightEdge:k(g).append,empty:k(g).after,otherwise:k(g).append}},general:{insertBefore:k(b).before,insertAfter:k(g).after}}}});l("je","b 9s d4 86 ra fq rb 2n l 21 2s 6x".split(" "),function(c,e,d,a,b,g,f,h,k,m,n,l){return function(r){var q=g.fromUnsafe(r),s=k.fromTag("span"),t=k.fromTag("span");c.each([s,t],r.markAsEphemeral);var u=b(s,t);return{backup:function(){r.getSelection().each(function(b){b.collapsed()?(a.insertAtCursor(r,[s]),n.unwrap(t),q.begin()):
f.both(u,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())})},insert:function(b,f,g){r.setRelativeSelection(e.after(s),h.inBody(t)?e.before(t):e.after(s));a.insertAtCursorWith(r,b,f,g).each(function(a){!l.ancestor(a.element(),"table")||"td"!==m.name(a.element())&&"th"!==m.name(a.element())?r.setRelativeSelection(e.after(a.element()),e.after(a.element())):r.setSelection(a.element(),0,a.element(),0)});q.end();d.cursorIntoView(r);c.each([s,t],n.unwrap)},cancel:function(){c.each([s,t],
n.unwrap)}}}});l("re","b gg gk 7 t 7o 1b e9".split(" "),function(c,e,d,a,b,g,f,h){var k=function(b,c){return g.cata(c.get(),a.constant([]),a.identity,a.constant([b]))};return{mergable:function(c,f){return g.cata(f.get(),b.none,function(f,g){return 0===f.length?b.none():d.retrieveBox(c,e.firstSelectedSelector(),e.lastSelectedSelector()).bind(function(c){return 1<f.length?b.some({bounds:a.constant(c),cells:a.constant(f)}):b.none()})},b.none)},unmergable:function(a,d){var e=function(a){return f.has(a,
"rowspan")&&1<h(f.get(a,"rowspan"),10)||f.has(a,"colspan")&&1<h(f.get(a,"colspan"),10)},g=k(a,d);return 0<g.length&&c.forall(g,e)?b.some(g):b.none()},selection:k}});l("jz",["7","t","re","2w"],function(c,e,d,a){var b=function(a){return{element:c.constant(a),mergable:e.none,unmergable:e.none,selection:c.constant([])}};a=a.immutable("element","clipboard","generators");return{noMenu:b,forMenu:function(a,b,e){return{element:c.constant(e),mergable:c.constant(d.mergable(b,a)),unmergable:c.constant(d.unmergable(e,
a)),selection:c.constant(d.selection(e,a))}},notCell:function(a){return b(a)},paste:a}});l("jf","rc b 7 t jw jz rd bq k1 21 3m".split(" "),function(c,e,d,a,b,g,f,h,k,m,n){var l=function(a){return"table"===m.name(a)||0===n.get(a).trim().length},r=function(b){var c=e.filter(b,function(a){return"table"===m.name(a)});return 1!==c.length?a.none():e.forall(b,l)?a.from(c[0]):a.none()};return{rules:function(a,e,m){var n=d.noop,l=function(c,l){return h.table(c,a.isRoot).bind(function(h){var p=a.doc().getOrDie(),
p=f.paste(p),p=g.paste(c,l,p),r=d.constant(m);return b.execute(e,k.pasteCells,n,r)(a,h,p).map(function(a){return a.startContainer()})})},p=function(a){return r(a).map(function(a){return{single:d.constant(a)}})};return{collapsed:d.constant(c(function(a,b,c){return h.cell(b,a)},p,function(a,b){return l(a.element(),b.single())},"custom arcade table insert collapsed")),ranged:d.constant(c(function(a,b,c){return h.cell(b.element(),a).map(function(a){return{left:d.constant(a),right:d.constant(a)}})},p,
function(a,b){return l(a.left(),b.single())},"custom arcade table insert ranged"))}},extractTable:r}});l("14m",["b","2w","o"],function(c,e,d){var a="officeStyles htmlStyles isWord proxyBin isInternal backgroundAssets".split(" "),b=e.immutableBag([],a);return{nu:b,merge:function(d,e){var h={};c.each(a,function(a){e[a]().or(d[a]()).each(function(b){h[a]=b})});return b(h)}}});l("120",["t","4o"],function(c,e){var d=e.generate([{error:["message"]},{paste:["elements","assets","correlated"]},{cancel:[]},
{incomplete:["elements","assets","correlated","message"]}]),a=function(a,c,d,e,k){return a.fold(c,d,e,k)};return{error:d.error,paste:d.paste,cancel:d.cancel,incomplete:d.incomplete,cata:a,carry:function(b,e){return a(b,c.none,c.none,c.none,function(b,h,k,m){return a(e,c.none,function(a,b,e){return c.some(d.incomplete(a,b,e,m))},c.none,c.none)}).getOr(e)}}});l("14l",["14m","120","3t","2w"],function(c,e,d,a){var b=a.immutableBag(["response","bundle"],[]),g=function(a){return f(function(c){var d=b(a);
c(d)})},f=function(a){return d(f,function(b){a(b)})};return{call:function(a,c){a(b(c))},sync:f,pure:g,pass:function(a){return g({response:a.response(),bundle:a.bundle()})},done:b,error:function(a){return g({response:e.error(a),bundle:c.nu({})})},initial:function(){return g({response:e.paste([],[],[]),bundle:c.nu({})})},cancel:function(){return g({response:e.cancel(),bundle:c.nu({})})}}});l("11y","14l 14m 120 b 7 k 2w".split(" "),function(c,e,d,a,b,g,f){var h=f.immutable("steps","input","label","capture"),
k=function(a,b){return g.findMap(a,function(a){return a.getAvailable(b).map(function(b){return h(a.steps(),b,a.label(),a.capture())})})},m=function(a,f){var g=b.curry(c.pass,a),h=function(){return f().map(function(b){var f=e.merge(a.bundle(),b.bundle());b=d.carry(a.response(),b.response());return c.done({response:b,bundle:f})})};return d.cata(a.response(),g,h,g,h)};return{choose:function(a,b,c){return k(a,c).getOrThunk(function(){var a=b.getAvailable(c);return h(b.steps(),a,b.label(),b.capture())})},
run:function(b,d){return a.foldl(b,function(a,b){return a.bind(function(a){return m(a,function(){return b(d,a)})})},c.initial())}}});l("164","b 1q 31 6 t k 2w w n".split(" "),function(c,e,d,a,b,g,f,h,k){var m=d.generate("simple-adt");return{generate:function(d){var l=function(a){return 0===a.indexOf(m)?a.substring(m.length+1):a},r=e.keys(d),q={};c.each(r,function(a){q["as"+h.capitalize(a)]=function(c){return c._simpleAdt===m+"_"+a?b.some(c.data):b.none()}});var s={};e.each(d,function(a,b){s[b]=function(c){var d=
m+"_"+b,e;e=0===a.length?{}:f.immutableBag(a,[])(c);return{_simpleAdt:d,data:e,_simpleAdt_data:c}}});return a.deepMerge(q,{constructors:s,match:function(a,c){var d=e.keys(c);if(d.length!==r.length)throw new k("Partial match");return g.findMap(d,function(d){return a._simpleAdt===m+"_"+d?b.some(c[d]):b.none()}).getOrDie("Must find branch for constructor: "+l(a._simpleAdt))(a.data)}})}}});l("14n",["164"],function(c){return c.generate({event:["nativeEvent"],word:["html","rtf"],text:["text"],images:["images"]})});
l("14o",["164"],function(c){c=c.generate({getFromFlash:[],disabled:[],fromClipboard:["rtf"]});return{getFromFlash:c.constructors.getFromFlash,disabled:c.constructors.disabled,fromClipboard:c.constructors.fromClipboard,match:c.match}});l("14p",["t","k","6r"],function(c,e,d){var a=function(a,g){var f=new d(g,"i");return e.findMap(a,function(a){return null!==a.match(f)?c.some({type:a,flavor:g}):c.none()})};return{isValidData:function(a){return void 0!==a&&void 0!==a.types&&null!==a.types},getPreferredFlavor:function(b,
c){return e.findMap(b,function(b){return a(c,b)})},getFlavor:a}});l("11z","14n 14o 14p c 7 t k w 36".split(" "),function(c,e,d,a,b,g,f,h,k){var m=a.detect(),n=["^image/","file"],l=function(a){return h.contains(a,"<html")&&(h.contains(a,'xmlns:o="urn:schemas-microsoft-com:office:office"')||h.contains(a,'xmlns:x="urn:schemas-microsoft-com:office:excel"'))},r=function(a){return 0<a.length},q=function(a,b){return d.getFlavor(a.types,b).map(function(b){return a.getData(b.type)})},s=function(a){return g.some(a.clipboardData).filter(d.isValidData)};
return{fromEvent:function(a){var b=function(a){return d.getPreferredFlavor(n,a.types).map(function(b){return c.constructors.images({images:a.items})})},h=function(a,b){var c=d.isValidData(a)?a.types:[];return d.getFlavor(c,b.clipboardType()).map(function(a){return z()})},w=function(a){return f.findMap(a.types,function(b){return"text/plain"===b?g.some(a.getData(b)).map(function(a){return c.constructors.text({text:a})}):g.none()})},z=function(){return c.constructors.event({nativeEvent:a})};return{getWordData:function(){return s(a).bind(function(a){return q(a,
"html").filter(l).map(function(b){var d=q(a,"rtf").filter(r);return c.constructors.word({html:b,rtf:d.fold(e.getFromFlash,function(a){return e.fromClipboard({rtf:a})})})})})},getImage:function(){return m.browser.isIE()||m.browser.isFirefox()?g.none():s(a).bind(b)},getInternal:function(b){return s(a).bind(function(a){return h(a,b)})},getText:function(){return s(a).fold(function(){var a=k.clipboardData;return void 0!==a?g.some(c.constructors.text({text:a.getData("text")})):g.none()},w)},getOnlyText:function(){return m.browser.isSpartan()?
g.none():s(a).bind(function(a){var b=a.types;return 1===b.length&&"text/plain"===b[0]?w(a):g.none()})},getNative:z}},fromHtml:function(a){return{getWordData:function(){return g.some(c.constructors.word({html:a,rtf:e.disabled()}))},getImage:g.none,getInternal:g.none,getText:g.none,getNative:b.die("There is no native event"),getOnlyText:g.none}},fromText:function(a){return{getWordData:g.none,getImage:g.none,getInternal:g.none,getText:function(){return g.some(c.constructors.text({text:a}))},getNative:b.die("There is no native event"),
getOnlyText:g.none}}}});l("121",["c","7","3w"],function(c,e,d){var a=c.detect();c=function(a,b,c){b.control.block();a.dom().execCommand("paste");c();b.control.unblock()};var b=function(a,b,c){d(c,1)},g=(a=a.browser.isIE()&&10>=a.browser.version.major)?c:b;return{willBlock:e.constant(a),run:function(a,b,c){return g(a,b,c)}}});l("yd","11y 11z 120 b 7 bw 58 4a 121".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,n){var l=h.create({cancel:f([]),error:f(["message"]),insert:f(["elements","assets",
"correlated","isInternal"])}),r=function(b,e,f){b=c.choose(m,n,b);b.capture()&&f();f=a.map(b.steps(),function(a){return a(e)});c.run(f,b.input()).get(function(a){var b=a.bundle().isInternal().getOr(!1);d.cata(a.response(),function(a){l.trigger.error(a)},function(a,c,d){l.trigger.insert(a,c,d,b)},function(){l.trigger.cancel()},function(a,c,d,e){l.trigger.insert(a,c,d,b);l.trigger.error(e)})})},q=g.tap(function(a){var b=e.fromEvent(a);k.willBlock()&&(q.control.block(),a.preventDefault());r(b,q.control,
function(){a.preventDefault()})});return{paste:q.instance,pasteCustom:function(a){var c=g.tap(b.noop);r(a,c.control,b.noop)},isBlocked:q.control.isBlocked,destroy:b.noop,events:l.registry}}});l("122",["7"],function(c){return{blocking:function(c){return function(d){return function(a,b){d.block();return c(a,b).map(function(a){d.unblock();return a})}}},normal:function(e){return c.constant(e)}}});l("14q",["2i","hd","3v","he","t"],function(c,e,d,a,b){return{convert:function(g){var f=c.resolve("window.clipboardData.files"),
h=void 0!==g.convertURL?g.convertURL:void 0!==g.msConvertURL?g.msConvertURL:void 0;return void 0!==f&&void 0!==h&&0<f.length?(f=d.mapM(f,function(b){var c=a.createObjectURL(b);h.apply(g,[b,"specified",c]);return e.singleWithUrl(b,c)}),b.some(f)):b.none()}}});l("123",["14q","3v","7","t"],function(c,e,d,a){return{background:function(){var b=a.none();return{convert:function(a){b=c.convert(a)},listen:function(a){return b.fold(function(){return e.nu(function(a){a([])})},function(a){return a}).get(a)},
clear:function(){b=a.none()}}},ignore:function(){return{convert:a.none,listen:function(a){a([])},clear:d.noop}}}});l("sl",["6","4o"],function(c,e){var d=e.generate([{none:[]},{error:["message "]},{blob:["blob"]}]);return c.merge(d,{cata:function(a,b,c,d){return a.fold(b,c,d)}})});l("12o",["2j"],function(c){return function(e,d){return new (c.getOrDie("Blob"))(e,d)}});l("12p",["2j"],function(c){return function(e){return new (c.getOrDie("Uint8Array"))(e)}});l("z0","sl 12o 12p bv w r 1u".split(" "),function(c,
e,d,a,b,g,f){var h=function(b,c){for(var h=a.atob(b),l=h.length,r=f.ceil(l/1024),q=new g(r),s=0;s<r;++s){for(var t=1024*s,u=f.min(t+1024,l),v=new g(u-t),w=0;t<u;++w,++t)v[w]=h[t].charCodeAt(0);q[s]=d(v)}return e(q,{type:c})};return{convert:function(a){if(b.startsWith(a,"data:image/")&&11<a.indexOf(";base64,")){var d=a.indexOf(";"),e=a.substr(5,d-5);a=a.substr(d+8);try{return c.blob(h(a,e))}catch(f){return c.error(f)}}else return c.none()}}});l("sk",["z0"],function(c){return{toBlob:function(e){return c.convert(e)}}});
l("14r","120 b gz 7 2w 1b l 21 4h o".split(" "),function(c,e,d,a,b,g,f,h,k,m){var l=b.immutable("asset","image");return{createImages:function(a){var b=[],h=[],k=[];e.each(a,function(a){return d.cata(a,function(c,d,e,m){c=f.fromTag("img");g.set(c,"src",e);b.push(c);h.push(a);k.push(l(a,c))},function(a,b,c){m.error("Internal error: Paste operation produced an image URL instead of a Data URI: ",b)})});return c.paste(b,h,k)},findImages:function(b,c){var f=[],m=e.bind(b,function(a){return"img"===h.name(a)?
[a]:k.descendants(a,"img")});e.each(c,function(b){d.cata(b,function(a,c,d,h){e.each(m,function(a){g.get(a,"src")===d&&f.push(l(b,a))})},a.noop)});return f},updateSources:function(b,c){var f=[];e.each(b,function(b,e){d.cata(b,function(a,d,h,k){a=c[e];g.set(a,"src",h);f.push(l(b,a))},a.noop)});return f}}});l("124","sk sl 14l 14r 120 b hd t 2w 1b l 21 2s 3c 4h".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s){var t=k.immutable("blob","image"),u=function(a,b){var d=c.toBlob(b);return e.cata(d,h.none,
h.none,function(b){return h.some(t(b,a))})},v=function(a){var b=l.fromTag("div");q.append(b,a);return s.descendants(b,"img[src]")},w=function(a){return 0===a.indexOf("data:")&&-1<a.indexOf("base64")||0===a.indexOf("blob:")},z=function(a){a=m.get(a,"src");return w(a)},x=function(a){return g.bind(v(a),function(a){var b=m.get(a,"src");return w(b)?u(a,b).toArray():[]})},y=function(a){a=g.filter(a,function(a){return"img"!==p.name(a)||!z(a)});return b.incomplete(a,[],[],"errors.local.images.disallowed")};
return function(c){return function(e,h){return d.sync(function(e){var k=function(){d.call(e,{response:h.response(),bundle:h.bundle()})},m=function(c){var k=x(c),m=g.map(k,function(a){return a.blob()});f.multiple(m).get(function(f){var m=g.map(k,function(a){return a.image()}),m=a.updateSources(f,m);d.call(e,{response:b.paste(c,f,m),bundle:h.bundle()})})},l=function(a,b,f,l){!1===c.allowLocalImages?(b=g.filter(v(a),z),g.each(b,r.remove),d.call(e,{response:0<b.length?y(a):h.response(),bundle:h.bundle()})):
0===b.length?m(a):k()};b.cata(h.response(),k,l,k,l)})}}});l("125",["14l","120","b","1q","o"],function(c,e,d,a,b){var g=function(a){return a.dom()};return function(f,h){return c.sync(function(f){b.log("bundle",a.map(h.bundle(),function(a){return a().getOr("not set")}));b.log("result",e.cata(h.response(),function(a){return["error",a]},function(a,b,c){return["paste","elements",d.map(a,g),"assets",b,"correlated",c]},function(){return["cancel"]},function(a,b,c,e){return["incomplete",d.map(a,g),b,c,e]}));
c.call(f,{response:h.response(),bundle:h.bundle()})})}});l("17d","12o 12p r 1u x e9".split(" "),function(c,e,d,a,b,g){return{convert:function(b,h){if(0===b.length)throw"Zero length content passed to Hex conversion";for(var k=new d(b.length/2),m=0;m<b.length;m+=2){var l=b.substr(m,2),p=a.floor(m/2);k[p]=g(l,16)}k=e(k);return c([k],{type:h})}}});l("16z",["4o"],function(c){c=c.generate([{unsupported:["id","message"]},{supported:["id","contentType","blob"]}]);return{unsupported:c.unsupported,supported:c.supported,
cata:function(c,d,a){return c.fold(d,a)}}});l("17e",["7","t"],function(c,e){var d=function(a,b,d,f,g){return-1===a||-1===b?e.none():e.some({start:c.constant(a),end:c.constant(b),bower:d,regex:c.constant(f),idRef:c.constant(g)})},a=function(a,b,c){return function(){return a.substring(b,c)}},b=function(a,b){if(-1===b)return b;var c=0,d=a.length,e,f;do if(e=a.indexOf("{",b),f=a.indexOf("}",b),f>e&&-1!==e?(b=e+1,++c):(e>f||0>e)&&-1!==f&&(b=f+1,--c),b>d||-1===f)return-1;while(0<c);return b},g=function(b,
c,e,f){b=a(b,e,f);return d(e,f,b,/[^a-fA-F0-9]([a-fA-F0-9]+)\}$/,"i")},f=function(b,c,e,f){b=a(b,e,f);return d(e,f,b,/([a-fA-F0-9]{64,})(?:\}.*)/,"s")};return{identify:function(a,d){var m=a.indexOf("{\\pict{",d),l=b(a,m),p=a.indexOf("{\\shp{",d),r=b(a,p),q=c.curry(f,a,d,p,r),s=c.curry(g,a,d,m,l);return-1===m&&-1===p?e.none():-1===m?q():-1===p?s():p<m&&r>l?s():m<p&&l>r?q():m<p?s():p<m?q():e.none()},endBracket:b}});l("16y",["17d","16z","17e","t","p"],function(c,e,d,a,b){var g=function(a,b){return d.identify(a,
b)},f=function(a){return 0<=a.indexOf("\\pngblip")?b.value("image/png"):0<=a.indexOf("\\jpegblip")?b.value("image/jpeg"):b.error("errors.imageimport.unsupported")},h=function(a,c){var d=a.match(c);return d&&d[1]&&0===d[1].length%2?b.value(d[1]):b.error("errors.imageimport.invalid")},k=function(b){b=b.match(/\\shplid(\d+)/);return null!==b?a.some(b[1]):a.none()},m=function(a){var b=a.bower(),d=a.regex();return k(b).map(function(g){var k=a.idRef()+g;return f(b).fold(function(a){return e.unsupported(k,
a)},function(a){return h(b,d).fold(function(a){return e.unsupported(k,a)},function(b){return e.supported(k,a,c.convert(b,a))})})})},l=function(a){for(var b=[],c=function(){return a.length},d=function(a){var c=m(a);b=b.concat(c.toArray());return a.end()},e=0;e<a.length;)e=g(a,e).fold(c,d);return b};return{nextBower:g,extractId:k,extractContentType:f,extractHex:h,images:function(a){a=a.replace(/\r/g,"").replace(/\n/g,"");return l(a)}}});l("165",["16y","16z","p"],function(c,e,d){return{images:function(a){return c.images(a)},
toId:function(a){return e.cata(a,function(a,c){return a},function(a,c,d){return a})},toBlob:function(a){return e.cata(a,function(a,c){return d.error(c)},function(a,c,e){return d.value(e)})}}});l("166","165 14r b hd t 1b o".split(" "),function(c,e,d,a,b,g,f){var h=function(a){return d.foldl(a,function(a,b){var e=c.toId(b),f=d.findIndex(a,function(a){return c.toId(a)===e});if(-1<f){if(c.toBlob(a[f]).isValue())return a;a=a.slice(0,f).concat(a.slice(f+1))}return a.concat([b])},[])};return{convert:function(k,
m,l,p){var r=h(m),q=[],s=!1;k=d.bind(k,function(a,e){var h=g.get(a,"data-image-id");g.remove(a,"rtf-data-image");g.remove(a,"data-image-id");return"unsupported"===h?(s=!0,g.set(a,"alt",p("errors.imageimport.unsupported")),[]):b.from(d.find(r,function(a){return c.toId(a)===h})).fold(function(){f.log("WARNING: unable to find data for image ",a.dom());return[]},function(b){return c.toBlob(b).fold(function(b){s=!0;g.set(a,"alt",p(b));return[]},function(b){q.push(a);return[b]})})});a.multiple(k).get(function(a){var b=
e.updateSources(a,q);l(a,b,s)})}}});l("14t",["4h"],function(c){var e=function(d){return c.descendants(d,"[rtf-data-image]")};return{exists:function(c){return 0<e(c).length},find:e}});l("152","165 166 14t 58 4a 2b".split(" "),function(c,e,d,a,b,g){return function(f){var h=f.translations,k=b.create({insert:a(["elements","assets","correlated"]),incomplete:a(["elements","assets","correlated","message"])});return{events:k.registry,processRtf:function(a,b,f,l,q){l=c.images(l);var s=d.find(a);e.convert(s,
l,function(c,d,e){var h=g.children(a);c=c.concat(b);d=d.concat(f);e?k.trigger.incomplete(h,c,d,"errors.imageimport.failed"):k.trigger.insert(h,c,d);q()},h)}}}});l("14s","152 14t b 58 4a 2s 2b".split(" "),function(c,e,d,a,b,g,f){return function(h,k){var m=b.create({insert:a(["elements","assets","correlated"]),incomplete:a(["elements","assets","correlated","message"])}),l=c(k);l.events.incomplete.bind(function(a){m.trigger.incomplete(a.elements(),a.assets(),a.correlated(),a.message())});l.events.insert.bind(function(a){m.trigger.insert(a.elements(),
a.assets(),a.correlated())});return{events:m.registry,gordon:function(a,b,c){var s=function(d){l.processRtf(a,b,c,d.rtf(),d.hide())},t=function(h){var k=e.find(a);d.each(k,g.remove);m.trigger.incomplete(f.children(a),b,c,h)},u=function(){var h=e.find(a);d.each(h,g.remove);m.trigger.insert(f.children(a),b,c)},v=function(a){t(a.message())};if(!0===k.allowLocalImages&&!0===k.enableFlashImport){var w=h(k);w.events.response.bind(s);w.events.cancel.bind(u);w.events.failed.bind(v);w.events.error.bind(v);
w.open()}else t("errors.local.images.disallowed")}}}});l("126","14l 14m 14s 14t 120 t 4n l 3c".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,l){var p=d(m,l),r=f(g.none()),q=function(a){r.get().each(function(b){c.call(b,{response:a,bundle:e.nu({})})})};p.events.insert.bind(function(a){q(b.paste(a.elements(),a.assets(),a.correlated()))});p.events.incomplete.bind(function(a){q(b.incomplete(a.elements(),a.assets(),a.correlated(),a.message()))});return function(d,e){return c.sync(function(d){var f=
function(){c.call(d,{response:e.response(),bundle:e.bundle()})},m=function(b,c,e){r.set(g.some(d));var m=h.fromTag("div");k.append(m,b);a.exists(m)?p.gordon(m,c,e):f()};b.cata(e.response(),f,m,f,m)})}}});l("14u",["14l","14m","120","3v","o"],function(c,e,d,a,b){var g=function(a){return a.officeStyles().getOr(!0)},f=function(a){return a.htmlStyles().getOr(!1)},h=function(a){return a.isWord().getOr(!1)};return{proxyBin:function(a){return{handle:function(f,g){return a.proxyBin().fold(function(){b.error(f);
return c.pure({response:d.cancel(),bundle:e.nu({})})},g)}}},backgroundAssets:function(b){return a.nu(function(a){b.backgroundAssets().fold(function(){a([])},function(b){b.listen(a)})})},merging:function(a){var b=h(a);return b&&g(a)||!b&&f(a)},mergeOffice:g,mergeNormal:f,isWord:h,isInternal:function(a){return a.isInternal().getOr(!1)}}});l("14v","r9 6 7 t 2o l 3l 2q 3c".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,l){var p=l.translations,r=function(b,c,d){d(a.some(e.merge(c,{officeStyles:b,
htmlStyles:b})))},q=function(d,e){var l=g.fromTag("div");b.add(l,c.resolve("styles-dialog-content"));var n=g.fromTag("p"),q=f.fromHtml(p("cement.dialog.paste.instructions"));k.append(n,q);h.append(l,n);var n={text:p("cement.dialog.paste.clean"),tabindex:0,className:c.resolve("clean-styles"),click:function(){z.destroy();r(!1,d,e)}},q={text:p("cement.dialog.paste.merge"),tabindex:1,className:c.resolve("merge-styles"),click:function(){z.destroy();r(!0,d,e)}},z=m(!0);z.setTitle(p("cement.dialog.paste.title"));
z.setContent(l);z.setButtons([n,q]);z.events.close.bind(function(){e(a.none());z.destroy()});z.show()};return{get:function(a,b){var c=l[a?"officeStyles":"htmlStyles"];"clean"===c?r(!1,l,b):"merge"===c?r(!0,l,b):q(l,b)},destroy:d.noop}}});l("127",["14l","14m","14u","14v","120"],function(c,e,d,a,b){var g=function(f,g){var k=a(f,g);return function(a,f){var g=f.bundle(),h=f.response();return c.sync(function(a){k.get(d.isWord(g),function(d){d=d.fold(function(){return{response:b.cancel(),bundle:f.bundle()}},
function(a){return{response:h,bundle:e.nu({officeStyles:a.officeStyles,htmlStyles:a.htmlStyles})}});c.call(a,d)})})}};return{fixed:function(a,b){return function(d,g){return c.pure({response:g.response(),bundle:e.nu({officeStyles:a,htmlStyles:b})})}},fromConfig:g,fromConfigIfExternal:function(a,b){return function(k,m){return d.isInternal(m.bundle())?c.pure({response:m.response(),bundle:e.nu({officeStyles:!0,htmlStyles:!0})}):g(a,b)(k,m)}}}});l("167","b 7 t 1b 2p 4h 8d".split(" "),function(c,e,d,a,
b,g,f){var h={p:"p, li[data-converted-paragraph]"},k=e.noop,m=function(e,f){var h=g.descendants(e,"li[data-converted-paragraph]");c.each(h,function(b){a.remove(b,"data-converted-paragraph")});h=g.descendants(e,"li");c.each(h,function(a){l(a).fold(function(){b.remove(a,"margin-left")},function(c){b.set(a,"margin-left",c)});b.remove(a,"text-indent")});f&&(h=g.descendants(e,"ol,ul"),c.each(h,function(a){var c=g.descendants(a,"li");b.getRaw(a,"margin-top").orThunk(function(){d.from(c[0]).each(function(c){b.set(a,
"margin-top",b.get(c,"margin-top"))})});b.getRaw(a,"margin-bottom").orThunk(function(){d.from(c[c.length-1]).each(function(c){b.set(a,"margin-bottom",b.get(c,"margin-bottom"))})})}))},l=function(a){var c=function(a){return parseFloat(a.match(/-?\d+\.?\d*/)[0])},e=function(a,b){var c=a.replace(/-?\d+\.?\d*/,"");return c===b.replace(/-?\d+\.?\d*/,"")?d.some(c):d.none()};return b.getRaw(a,"text-indent").bind(function(d){return b.getRaw(a,"margin-left").map(function(f){return e(d,f).fold(function(){var d=
b.get(a,"text-indent"),e=b.get(a,"margin-left");return c(d)+c(e)+"px"},function(a){return c(d)+c(f)+a})})})};return{process:function(a,b,c){c=c.mergeInline();(c?f.inlineStyles:k)(a,b,h);m(b,c)}}});l("168","7 13l 2p 3y l 2q 2s 3w".split(" "),function(c,e,d,a,b,g,f,h){return function(k){return{play:function(m,l,p){var r=b.fromTag("div"),q=b.fromTag("iframe");d.setAll(r,{display:"none"});var s=a.bind(q,"load",function(){s.unbind();e.write(q,m);var a=q.dom().contentWindow.document;if(void 0===a)throw"sandbox iframe load event did not fire correctly";
var d=b.fromDom(a),a=a.body;if(void 0===a)throw"sandbox iframe does not have a body";a=b.fromDom(a);d=l(d,a);f.remove(r);h(c.curry(p,d),0)});g.append(r,q);g.append(k,r)}}}});l("14w","14l 14m 167 120 7 168 l 3l 2g q".split(" "),function(c,e,d,a,b,g,f,h,k,m){var l=function(a){var c=g(f.fromDom(m.body));return function(e,f){c.play(e,function(c,e){d.process(c,e,{mergeInline:b.constant(a)});return k.get(e)},f)}},p=function(b,d){return c.sync(function(f){l(b)(d,function(b){b=h.fromHtml(b);c.call(f,{response:a.paste(b,
[],[]),bundle:e.nu({})})})})};return{handle:function(b,d,f){b=b.html();return f.cleanDocument(b,d).fold(function(){return c.pure({response:a.error("errors.paste.word.notready"),bundle:e.nu({})})},function(b){return void 0===b||null===b||0===b.length?c.pure({response:a.paste([],[],[]),bundle:e.nu({})}):p(d,b)})}}});l("14x",["14l","14m","14r","b","hd"],function(c,e,d,a,b){return{handle:function(g){g=a.filter(g,function(a){return"file"===a.kind&&/image/.test(a.type)});var f=a.map(g,function(a){return a.getAsFile()});
return c.sync(function(a){b.multiple(f).get(function(b){b=d.createImages(b);c.call(a,{response:b,bundle:e.nu({})})})})}}});l("170","t 1b 2o 2p l 21 4j 69 4h w".split(" "),function(c,e,d,a,b,g,f,h,k,m){var l=function(a,c){var d=g.value(a),e=b.fromTag("div"),h=d.indexOf("]>");e.dom().innerHTML=d.substr(h+2);return f.descendant(e,function(a){return g.name(a)===c})},p=function(a){return g.isComment(a)?l(a,"v:shape"):c.none()},r=function(a){return k.descendants(a,".rtf-data-image")};return{local:function(a){if("img"===
g.name(a)){var b=e.get(a,"src");if(void 0!==b&&null!==b&&m.startsWith(b,"file://"))return a=h.shallow(a),b=b.split(/[\/\\]/),e.set(a,"data-image-id",b[b.length-1]),e.remove(a,"src"),e.set(a,"data-image-type","local"),d.add(a,"rtf-data-image"),c.some(a)}return c.none()},vshape:function(c){return p(c).map(function(c){var f=e.get(c,"o:spid"),f=void 0===f?e.get(c,"id"):f,g=b.fromTag("img");d.add(g,"rtf-data-image");e.set(g,"data-image-id",f.substr(7));e.set(g,"data-image-type","code");a.setAll(g,{width:a.get(c,
"width"),height:a.get(c,"height")});return g})},find:r,exists:function(a){return 0<r(a).length},scour:p}});l("17f",[],function(){return{validStyles:function(){return/^(mso-.*|tab-stops|tab-interval|language|text-underline|text-effect|text-line-through|font-color|horiz-align|list-image-[0-9]+|separator-image|table-border-color-(dark|light)|vert-align|vnd\..*)$/},specialInline:function(){return/^(font|em|strong|samp|acronym|cite|code|dfn|kbd|tt|b|i|u|s|sub|sup|ins|del|var|span)$/}}});l("17m",[],function(){var c=
function(c){return{fold:c,matches:function(d){return c(function(a){return 0===d.toLowerCase().indexOf(a.toLowerCase())},function(a){return a.test(d.toLowerCase())},function(a){return 0<=d.toLowerCase().indexOf(a.toLowerCase())},function(a){return d.toLowerCase()===a.toLowerCase()},function(){return!0},function(a){return!a.matches(d)})}}};return{starts:function(e){return c(function(c,a,b,g,f,h){return c(e)})},pattern:function(e){return c(function(c,a,b,g,f,h){return a(e)})},contains:function(e){return c(function(c,
a,b,g,f,h){return b(e)})},exact:function(e){return c(function(c,a,b,g,f,h){return g(e)})},all:function(){return c(function(c,d,a,b,g,f){return g()})},not:function(e){return c(function(c,a,b,g,f,h){return h(e)})},cata:function(c,d,a,b,g,f,h){return c.fold(d,a,b,g,f,h)}}});l("17g",["7","21","17m"],function(c,e,d){return{keyval:function(a,b,e,f){var h=f.name,k=void 0!==f.condition?f.condition:c.constant(!0);f=void 0!==f.value?f.value:d.all();return h.matches(e)&&f.matches(b)&&k(a)},name:function(a,b){var d=
e.name(a),f=b.name,h=void 0!==b.condition?b.condition:c.constant(!0);return f.matches(d)&&h(a)}}});l("17s",["b","1q","7","1b"],function(c,e,d,a){var b=function(b,d,h){c.each(d,function(c){a.remove(b,c)});e.each(h,function(c,d){a.set(b,d,c)})};return{filter:function(a,b){var d={};c.each(a.dom().attributes,function(a){b(a.value,a.name)||(d[a.name]=a.value)});return d},clobber:function(a,d,h){h=c.map(a.dom().attributes,function(a){return a.name});e.size(d)!==h.length&&b(a,h,d)},scan:d.constant({})}});
l("17t",["b","1q","1b","2p","w"],function(c,e,d,a,b){var g=function(a){var d={};a=void 0!==a&&null!==a?a.split(";"):[];c.each(a,function(a){a=a.split(":");2===a.length&&(d[b.trim(a[0])]=b.trim(a[1]))});return d},f=function(a){var b=e.keys(a);return c.map(b,function(b){return b+": "+a[b]}).join("; ")};return{filter:function(a,b){var d=a.dom().style,e={};c.each(void 0===d?[]:d,function(c){var d;d=a.dom().style.getPropertyValue(c);b(d,c)||(e[c]=d)});return e},clobber:function(b,c,g){d.set(b,"style",
"");var l=e.size(c),p=e.size(g);0===l&&0===p?d.remove(b,"style"):0===l?d.set(b,"style",f(g)):(e.each(c,function(c,d){a.set(b,d,c)}),c=d.get(b,"style"),g=0<p?f(g)+"; ":"",d.set(b,"style",g+c))},scan:function(a,b,d){a=a.dom().getAttribute("style");var e=g(a),f={};c.each(b,function(a){var b=e[a];void 0===b||d(b,a)||(f[a]=b)});return f}}});l("17h",["17s","17t","7","l"],function(c,e,d,a){var b=["mso-list"],g=function(a,c){var d=e.scan(a,b,c),f=e.filter(a,c);e.clobber(a,f,d)},f=function(a,b){var d=c.filter(a,
b);c.clobber(a,d,{})};return{style:g,attribute:f,styleDom:function(b,c){g(a.fromDom(b),c)},attributeDom:function(b,c){f(a.fromDom(b),c)},validateStyles:function(a){var b=e.filter(a,d.constant(!1));e.clobber(a,b,{})}}});l("172","b 6 17g 17h 7 1b 2o 4e 2s 4h".split(" "),function(c,e,d,a,b,g,f,h,k,m){var l=function(a,b,e){a(e,function(a,f){return c.exists(b,function(b){return d.keyval(e,a,f,b)})})};return{remover:function(p,r){var q=e.merge({styles:[],attributes:[],classes:[],tags:[]},r),s=m.descendants(p,
"*");c.each(s,function(b){l(a.style,q.styles,b);l(a.attribute,q.attributes,b);c.each(q.classes,function(a){var d=g.has(b,"class")?h.get(b):[];c.each(d,function(c){a.name.matches(c)&&f.remove(b,c)})})});s=m.descendants(p,"*");c.each(s,function(a){c.exists(q.tags,b.curry(d.name,a))&&k.remove(a)})},unwrapper:function(a,f){var g=e.merge({tags:[]},f),h=m.descendants(a,"*");c.each(h,function(a){c.exists(g.tags,b.curry(d.name,a))&&k.unwrap(a)})},transformer:function(a,f){var g=e.merge({tags:[]},f),h=m.descendants(a,
"*");c.each(h,function(a){var e=c.find(g.tags,b.curry(d.name,a));void 0!==e&&null!==e&&e.mutate(a)})},validator:function(b){b=m.descendants(b,"*");c.each(b,function(b){a.validateStyles(b)})}}});l("176",["1q","2p","l"],function(c,e,d){var a=function(a,b,c){var k,m,l,p=d.fromDom(a);switch(a.nodeType){case 1:b?k="endElement":(k="startElement",e.setAll(p,c||{}));m="HTML"!==a.scopeName&&a.scopeName&&a.tagName&&0>=a.tagName.indexOf(":")?(a.scopeName+":"+a.tagName).toUpperCase():a.tagName;break;case 3:k=
"text";l=a.nodeValue;break;case 8:k="comment";l=a.nodeValue;break;default:console.log("WARNING: Unsupported node type encountered: "+a.nodeType)}return{getNode:function(){return a},tag:function(){return m},type:function(){return k},text:function(){return l}}},b=function(b,c){return a(c.createElement(b),!0)};return{START_ELEMENT_TYPE:"startElement",END_ELEMENT_TYPE:"endElement",TEXT_TYPE:"text",COMMENT_TYPE:"comment",FINISHED:b("HTML",window.document),token:a,createStartElement:function(b,d,e,k){var m=
k.createElement(b);c.each(d,function(a,b){m.setAttribute(b,a)});return a(m,!1,e)},createEndElement:b,createComment:function(b,c){return a(c.createComment(b),!1)},createText:function(b,c){return a(c.createTextNode(b))}}});l("17i",["176"],function(c){return{create:function(e){var d=e.createDocumentFragment(),a=d;return{dom:a,receive:function(b){var g=function(a){a=a.getNode().cloneNode(!1);d.appendChild(a);d=a},f=function(a,b){var c=e.createTextNode(a.text());d.appendChild(c)};switch(b.type()){case c.START_ELEMENT_TYPE:g(b);
break;case c.TEXT_TYPE:f(b);break;case c.END_ELEMENT_TYPE:d=d.parentNode;null===d&&(d=a);break;case c.COMMENT_TYPE:break;default:throw{message:"Unsupported token type: "+b.type()};}},label:"SERIALISER"}}}});l("17j",["176"],function(c){return{tokenise:function(e,d){var a;d=d||window.document;a=d.createElement("div");d.body.appendChild(a);a.style.position="absolute";a.style.left="-10000px";a.innerHTML=e;nextNode=a.firstChild||c.FINISHED;var b=[];endNode=!1;return{hasNext:function(){return void 0!==
nextNode},next:function(){var e=nextNode,f=endNode;!endNode&&nextNode.firstChild?(b.push(nextNode),nextNode=nextNode.firstChild):endNode||1!==nextNode.nodeType?nextNode.nextSibling?(nextNode=nextNode.nextSibling,endNode=!1):(nextNode=b.pop(),endNode=!0):endNode=!0;e===c.FINISHED||nextNode||(d.body.removeChild(a),nextNode=c.FINISHED);e=e===c.FINISHED?e:e?c.token(e,f):void 0;return e}}}}});l("173",["17i","17j"],function(c,e){var d=function(a,b,c){var d=c;for(c=b.length-1;0<=c;c--)d=b[c](d,{},a);return d};
return{build:d,run:function(a,b,g){var f=c.create(a);b=e.tokenise(b,a);for(a=d(a,g,f);b.hasNext();)g=b.next(),a.receive(g);return f.dom}}});l("16d","b 172 173 l 2g 2s 2b".split(" "),function(c,e,d,a,b,g,f){return{removal:function(a){return function(b){e.remover(b,a)}},unwrapper:function(a){return function(b){e.unwrapper(b,a)}},transformer:function(a){return function(b){e.transformer(b,a)}},validate:function(){return function(a){e.validator(a)}},pipeline:function(a){return function(c){var e=b.get(c),
l=f.owner(c),e=d.run(l.dom(),e,a);g.empty(c);c.dom().appendChild(e)}},isWordContent:function(a,b){return 0<=a.indexOf("<o:p>")||b.browser.isSpartan()&&0<=a.indexOf('v:shapes="')||b.browser.isSpartan()&&0<=a.indexOf("mso-")||0<=a.indexOf("mso-list")||0<=a.indexOf("p.MsoNormal, li.MsoNormal, div.MsoNormal")||0<=a.indexOf("MsoListParagraphCxSpFirst")||0<=a.indexOf("<w:WordDocument>")},go:function(d,e,f){var g=a.fromTag("div",d.dom());g.dom().innerHTML=e;c.each(f,function(a){a(g)});return b.get(g)}}});
l("175",["b","176"],function(c,e){return function(d,a,b){return function(b,f,h){var k=function(a){b.receive(a)},m=function(a,b,c){c=void 0!==c?c:a.type()===e.END_ELEMENT_TYPE;return e.token(b,c,{})},l={emit:k,emitTokens:function(a){c.each(a,k)},receive:function(a){d(l,a,m)},document:window.document};a(l);return l}}});l("183","17t 176 7 1b 2p l".split(" "),function(c,e,d,a,b,g){return{getAttribute:function(b,c){var d=g.fromDom(b.getNode());return a.get(d,c)},getStyle:function(a,c){var d=g.fromDom(a.getNode());
return b.get(d,c)},isWhitespace:function(a){return a.type()===e.TEXT_TYPE&&/^[\s\u00A0]*$/.test(a.text())},getMsoList:function(a){a=g.fromDom(a.getNode());return c.scan(a,["mso-list"],d.constant(!1))["mso-list"]}}});l("188",["b","t"],function(c,e){var d=function(a,b,c){return a===b||a&&b&&a.tag===b.tag&&a.type===b.type&&(c||a.variant===b.variant)};return{guessFrom:function(a,b){var g=c.find(a,function(a){return"UL"===a.tag||b&&d(a,b,!0)});return void 0!==g?e.some(g):0<a.length?e.some(a[0]):e.none()},
eqListType:d}});l("17x",[],function(){var c=function(c,a){if(void 0===c||void 0===a)throw console.trace(),"brick";c.nextFilter.set(a)},e=function(c,a,b){a.nextFilter.get()(c,a,b)};return{next:c,go:e,jump:function(d){return function(a,b,g){c(b,d);e(a,b,g)}},isNext:function(c,a){return c.nextFilter.get()===a},setNext:function(d){return function(a,b,e){c(b,d)}}}});l("182","b 183 188 17x 7 2w 1b l".split(" "),function(c,e,d,a,b,g,f,h){var k=g.immutable("level","token","type"),m=function(a,b,f,g){a=f.getCurrentListType();
f=f.getCurrentLevel()==g.level()?a:null;return d.guessFrom(g.emblems(),f).filter(function(a){if(a="OL"===a.tag)a=!c.contains(["P"],b.tag())||/^MsoHeading/.test(e.getAttribute(b,"class"));return!a})};return{predicate:function(a,b){return f.has(h.fromDom(b.getNode()),"data-list-level")},action:function(c){return function(d,e,g){d=h.fromDom(g.getNode());var l=parseInt(f.get(d,"data-list-level"),10),t=f.get(d,"data-list-emblems"),t=JSON.parse(t);f.remove(d,"data-list-level");f.remove(d,"data-list-emblems");
d={level:b.constant(l),emblems:b.constant(t)};d.level();e.originalToken.set(g);m(e.listType.get(),g,e.emitter,d).each(e.listType.set);g=k(d.level(),e.originalToken.get(),e.listType.get());e.emitter.openItem(g.level(),g.token(),g.type());a.next(e,c.inside())}}}});l("184",["7"],function(c){return function(e,d,a){return{pred:e,action:d,label:c.constant(a)}}});l("185",["b","7","t"],function(c,e,d){var a=function(a,c){return function(a,b,d){return c(a,b,d)}};return function(b,g,f){var h=a(b+" :: FALLBACK --- ",
f);f=function(f,m,l){d.from(c.find(g,function(a){return a.pred(m,l)})).fold(e.constant(h),function(c){var d=c.label();return void 0===d?c.action:a(b+" :: "+d,c.action)})(f,m,l)};f.toString=function(){return"Handlers for "+b};return f}});l("17u","182 176 183 184 185 17x".split(" "),function(c,e,d,a,b,g){return{inside:function(c){return b("Inside.List.Item",[a(function(a,b){return b.type()===e.END_ELEMENT_TYPE&&a.originalToken.get()&&b.tag()===a.originalToken.get().tag()},function(a,b,d){g.next(b,c.outside())},
"Closing open tag")],function(a,b,c){a.emit(c)})},outside:function(f){return b("Outside.List.Item",[a(c.predicate,c.action(f),"Data List ****"),a(function(a,b){return b.type()===e.TEXT_TYPE&&d.isWhitespace(b)},function(a,b,c){a.emit(c)},"Whitespace")],function(a,b,c){b.emitter.closeAllLists();a.emit(c);g.next(b,f.outside())})}}});l("189",["2w"],function(c){var e=c.immutable("state","result"),d=c.immutable("state","value");return{state:c.immutable("level","type","types","items"),value:d,result:e}});
l("18b",["189","t"],function(c,e){return{start:function(d,a){var b=d.items().slice(0),g=void 0!==a&&"P"!==a?e.some(a):e.none();g.fold(function(){b.push("P")},function(a){b.push(a)});var f=c.state(d.level(),d.type(),d.types(),b);return c.value(f,g)},finish:function(d){var a=d.items().slice(0);if(0<a.length&&"P"!==a[a.length-1]){var b=a[a.length-1];a[a.length-1]="P";d=c.state(d.level(),d.type(),d.types(),a);return c.value(d,e.some(b))}return c.value(d,e.none())}}});l("18c",["189"],function(c){var e=
function(d,a,b){for(var e=[];a(d);){var f=b(d);d=f.state();e=e.concat(f.result())}return c.result(d,e)};return{moveRight:function(c,a,b){return e(c,function(b){return b.level()<a},b)},moveLeft:function(c,a,b){return e(c,function(b){return b.level()>a},b)},moveUntil:e}});l("18e",["183"],function(c){return{from:function(e){var d={"list-style-type":"none"};e?(e=c.getStyle(e,"margin-left"),e=void 0!==e&&"0px"!==e?{"margin-left":e}:{}):e=d;return e}}});l("18d","17h 176 188 189 18b 18e 7".split(" "),function(c,
e,d,a,b,g,f){var h=function(b,c,d){var g=c.start&&1<c.start?{start:c.start}:{},h=b.level()+1,k=b.types().concat([c]);d=[f.curry(e.createStartElement,c.tag,g,d)];b=a.state(h,c,k,b.items());return a.result(b,d)},k=function(b){var c=b.types().slice(0),d=[f.curry(e.createEndElement,c.pop().tag)],g=b.level()-1;b=a.state(g,c[c.length-1],c,b.items());return a.result(b,d)},m=function(b,c){var d=k(b),e=h(d.state(),c,c.type?{"list-style-type":c.type}:{});return a.result(e.state(),d.result().concat(e.result()))};
return{open:h,openItem:function(h,k,l){var q=g.from(k);h=h.type()&&!d.eqListType(h.type(),l)?m(h,l):a.result(h,[]);q=[f.curry(e.createStartElement,"LI",{},q)];l=b.start(h.state(),k&&k.tag());var s=l.value().map(function(a){c.styleDom(k.getNode(),f.constant(!0));return[f.constant(k)]}).getOr([]);return a.result(l.state(),h.result().concat(q).concat(s))},close:k,closeItem:function(c){var d=f.curry(e.createEndElement,"LI");c=b.finish(c);var g=c.value().fold(function(){return[d]},function(a){return[f.curry(e.createEndElement,
a),d]});return a.result(c.state(),g)}}});l("18a","b 176 189 18b 18c 18d 7 t".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a){if(0===a.length)throw"Compose must have at least one element in the list";var b=a[a.length-1];a=c.bind(a,function(a){return a.result()});return d.result(b.state(),a)},m=function(a){a=g.closeItem(a);var b=g.close(a.state());return k([a,b])},l=function(a,c,d,e){return b.moveRight(a,d,function(a){var b=a.level()===d-1&&c.type?{"list-style-type":c.type}:{};a=g.open(a,c,b);
b=g.openItem(a.state(),a.state().level()==d?e:void 0,c);return k([a,b])})},p=function(a,c){return b.moveLeft(a,c,m)},r=function(b,c,g,k){var m=1<g?a.finish(b):d.value(b,h.none());b=m.value().map(function(a){return[f.curry(e.createEndElement,a)]}).getOr([]);m.state().level();c=l(m.state(),c,g,k);return d.result(c.state(),b.concat(c.result()))};return{openItem:function(a,b,c,e){a=a.level()>b?p(a,b):d.result(a,[]);a.state().level()===b?(b=a.state(),b=0<b.level()?g.closeItem(b):d.result(b,[]),c=g.openItem(b.state(),
c,e),c=k([b,c])):c=r(a.state(),e,b,c);return k([a,c])},closeAllLists:p}});l("186",["b","189","18a"],function(c,e,d){var a=["disc","circle","square"];return function(b,g){var f=e.state(0,void 0,[],[]),h=function(a){c.each(a.result(),function(a){a=a(g);b.emit(a)})};return{closeAllLists:function(){var a=d.closeAllLists(f,0);f=a.state();h(a)},openItem:function(b,c,e){e&&("UL"===e.tag&&a[b-1]===e.type&&(e={tag:"UL"}),b=d.openItem(f,b,c,e),f=b.state(),h(b))},getCurrentListType:function(){return f.type()},
getCurrentLevel:function(){return f.level()}}}});l("17v",["186","7","4n"],function(c,e,d){var a={getCurrentListType:function(){return b().getCurrentListType()},getCurrentLevel:function(){return b().getCurrentLevel()},closeAllLists:function(){return b().closeAllLists.apply(void 0,arguments)},openItem:function(){return b().openItem.apply(void 0,arguments)}},b=function(){return{getCurrentListType:e.constant({}),getCurrentLevel:e.constant(1),closeAllLists:e.identity,openItem:e.identity}};return function(g){var f=
d(g),h=d(null),k=d(null);return{reset:function(a){f.set(g);h.set(null);k.set(null);_emitter=c(a,a.document);b=e.constant(_emitter)},nextFilter:f,originalToken:h,listType:k,emitter:a}}});l("17w",["176"],function(c){return function(){var e=!1,d="";return{check:function(a){return e&&a.type()===c.TEXT_TYPE?(d+=a.text(),!0):a.type()===c.START_ELEMENT_TYPE&&"STYLE"===a.tag()?e=!0:a.type()===c.END_ELEMENT_TYPE&&"STYLE"===a.tag()?(e=!1,!0):!1}}}});l("17k","175 17u 17v 17w 17x q".split(" "),function(c,e,d,
a,b,g){g={inside:function(){return h},outside:function(){return k}};var f=a(),h=e.inside(g),k=e.outside(g),m=d(k);return c(function(a,c,d){f.check(c)||b.go(a,m,c)},m.reset,"list.filters")});l("187",["b","6","1w","e9"],function(c,e,d,a){var b=[{regex:/^\(?[dc][\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[DC][\.\)]$/,type:{tag:"OL",type:"upper-alpha"}},{regex:/^\(?M*(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})[\.\)]$/,type:{tag:"OL",type:"upper-roman"}},{regex:/^\(?m*(cm|cd|d?c{0,3})(xc|xl|l?x{0,3})(ix|iv|v?i{0,3})[\.\)]$/,
type:{tag:"OL",type:"lower-roman"}},{regex:/^\(?[0-9]+[\.\)]$/,type:{tag:"OL"}},{regex:/^([0-9]+\.)*[0-9]+\.?$/,type:{tag:"OL",variant:"outline"}},{regex:/^\(?[a-z]+[\.\)]$/,type:{tag:"OL",type:"lower-alpha"}},{regex:/^\(?[A-Z]+[\.\)]$/,type:{tag:"OL",type:"upper-alpha"}}],g={"\u2022":{tag:"UL",type:"disc"},"\u00b7":{tag:"UL",type:"disc"},"\u00a7":{tag:"UL",type:"square"}},f={o:{tag:"UL",type:"circle"},"-":{tag:"UL",type:"disc"},"\u25cf":{tag:"UL",type:"disc"},"\ufffd":{tag:"UL",type:"circle"}},h=
function(a,b){return void 0!==a.variant?a.variant:"("===b.charAt(0)?"()":")"===b.charAt(b.length-1)?")":"."},k=function(b){var c=b.split(".");0===c.length?c=b:(b=c[c.length-1],c=0===b.length&&1<c.length?c[c.length-2]:b);c=a(c,10);return d(c)?{}:{start:c}};return{extract:function(a,d){var l=f[a]?[f[a]]:[],r=d&&g[a]?[g[a]]:d?[{tag:"UL",variant:a}]:[],q=c.bind(b,function(b){return b.regex.test(a)?[e.merge(b.type,k(a),{variant:h(b.type,a)})]:[]}),l=l.concat(r).concat(q);return c.map(l,function(b){return void 0!==
b.variant?b:e.merge(b,{variant:a})})}}});l("17y","b 187 17t 7 t 2p 2g 21 4j 3m 2b 1u 1w e9".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q){var s=function(b){return d.scan(b,["mso-list"],a.constant(!1))["mso-list"]},t=function(a){return h.isElement(a)&&g.getRaw(a,"font-family").exists(function(a){return c.contains(["wingdings","symbol"],a.toLowerCase())})};return{getMsoList:s,extractLevel:function(a){a=s(a);return(a=/ level([0-9]+)/.exec(a))&&a[1]?b.some(q(a[1],10)):b.none()},extractEmblem:function(a,
c){var d=m.get(a).trim(),d=e.extract(d,c);return 0<d.length?b.some(d):b.none()},extractSymSpan:function(a){return k.child(a,t)},extractMsoIgnore:function(b){return k.descendant(b,function(b){return!!(h.isElement(b)?d.scan(b,["mso-list"],a.constant(!1)):[])["mso-list"]})},extractCommentSpan:function(a){return k.child(a,h.isComment).bind(l.nextSibling).filter(function(a){return"span"===h.name(a)})},isSymbol:t,deduceLevel:function(a){return g.getRaw(a,"margin-left").bind(function(a){a=q(a,10);return r(a)?
b.none():b.some(p.max(1,p.ceil(a/18)))})}}});l("17z",["c","7","l","q"],function(c,e,d,a){var b=function(a){for(var b=[];null!==a.nextNode();)b.push(d.fromDom(a.currentNode));return b},g=function(a){try{return b(a)}catch(c){return[]}};c=c.detect().browser;var f=c.isIE()||c.isSpartan()?g:b,h=e.constant(e.constant(!0));return{find:function(b,c){var d=c.fold(h,function(a){return function(b){return a(b.nodeValue)}});d.acceptNode=d;d=a.createTreeWalker(b.dom(),NodeFilter.SHOW_COMMENT,d,!1);return f(d)}}});
$("180",JSON);l("17l","b 17y t 1b 17z 21 2s 2b 180 e9".split(" "),function(c,e,d,a,b,g,f,h,k,m){var l=function(e,g,h,m){a.set(e,"data-list-level",g);g=k.stringify(h);a.set(e,"data-list-emblems",g);g=b.find(e,d.none());c.each(g,f.remove);c.each(m,f.remove);a.remove(e,"style");a.remove(e,"class")},p=function(a){return e.extractLevel(a).bind(function(b){return e.extractSymSpan(a).bind(function(c){return e.extractEmblem(c,!0).map(function(d){return{mutate:function(){l(a,b,d,[c])}}})})})},r=function(a){return e.extractLevel(a).bind(function(b){return e.extractCommentSpan(a).bind(function(c){return e.extractEmblem(c,
e.isSymbol(c)).map(function(d){return{mutate:function(){l(a,b,d,[c])}}})})})},q=function(a){return e.extractLevel(a).bind(function(b){return e.extractCommentSpan(a).bind(function(c){return e.extractEmblem(c,e.isSymbol(c)).map(function(d){return{mutate:function(){l(a,b,d,[c])}}})})})},s=function(a){return"p"!==g.name(a)?d.none():e.extractLevel(a).bind(function(b){return e.extractMsoIgnore(a).bind(function(c){return e.extractEmblem(c,!1).map(function(d){return{mutate:function(){l(a,b,d,[h.parent(c).getOr(c)])}}})})})},
t=function(a){return"p"!==g.name(a)?d.none():e.extractMsoIgnore(a).bind(function(b){var c=h.parent(b).getOr(b),d=e.isSymbol(c);return e.extractEmblem(b,d).bind(function(b){return e.deduceLevel(a).map(function(d){return{mutate:function(){l(a,d,b,[c])}}})})})};return{find:function(a){return p(a).orThunk(function(){return r(a)}).orThunk(function(){return q(a)}).orThunk(function(){return s(a)}).orThunk(function(){return t(a)})}}});l("174",["16d","17k","17l","17m"],function(c,e,d,a){c=c.transformer({tags:[{name:a.pattern(/^(p|h\d+)$/),
mutate:function(a){d.find(a).each(function(a){a.mutate()})}}]});return{filter:e,preprocess:c}});l("17n",["b","1b","2g","21","37"],function(c,e,d,a,b){var g=function(b){var c=b.dom().attributes,c=void 0!==c&&null!==c&&0<c.length;return"span"===a.name(b)?c:!0},f=function(a){return void 0===a.dom().attributes||null===a.dom().attributes?!0:0===a.dom().attributes.length||1===a.dom().attributes.length&&"style"===a.dom().attributes[0].name};return{isNotImage:function(b){return"img"!==a.name(b)},hasContent:function(d){return f(d)?
g(d)&&b.descendant(d,function(b){var d=!f(b),e=!c.contains("font em strong samp acronym cite code dfn kbd tt b i u s sub sup ins del var span".split(" "),a.name(b));return a.isText(b)||d||e}):!0},isList:function(b){return"ol"===a.name(b)||"ul"===a.name(b)},isLocal:function(a){a=e.get(a,"src");return/^file:/.test(a)},hasNoAttributes:f,isEmpty:function(a){return 0===d.get(a).length}}});l("17o","b 1q t 1b 2p l 2g 2q 3c 21 2s b3 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r){var q=function(a,b){var d=
g.fromTag(a);h.before(b,d);var e=b.dom().attributes;c.each(e,function(a){d.dom().setAttribute(a.name,a.value)});e=r.children(b);k.append(d,e);l.remove(b);return d},s=function(a){return r.prevSibling(a).bind(function(a){return m.isText(a)&&0===p.get(a).trim().length?s(a):"li"===m.name(a)?d.some(a):d.none()})};return{changeTag:q,addBrTag:function(a){0===f.get(a).length&&h.append(a,g.fromTag("br"))},properlyNest:function(a){r.parent(a).each(function(d){d=m.name(d);c.contains(["ol","ul"],d)&&s(a).fold(function(){var c=
g.fromTag("li");b.set(c,"list-style-type","none");h.wrap(a,c)},function(b){h.append(b,a)})})},fontToSpan:function(c){var d=q("span",c),f={"font-size":{1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"}};e.each({face:"font-family",size:"font-size",color:"color"},function(c,e){if(a.has(d,e)){var g=a.get(d,e);b.set(d,c,void 0!==f[c]&&void 0!==f[c][g]?f[c][g]:g);a.remove(d,e)}})}}});l("171","17f 16d 174 17n 17o 7 2o 2p 2b 21 1b 17m".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p){var r=e.unwrapper({tags:[{name:p.pattern(/^([OVWXP]|U[0-9]+|ST[0-9]+):/i)}]});
d=[e.pipeline([d.filter])];var q=e.removal({attributes:[{name:p.pattern(/^v:/)},{name:p.exact("href"),value:p.contains("#_toc")},{name:p.exact("href"),value:p.contains("#_mso")},{name:p.pattern(/^xmlns(:|$)/)},{name:p.exact("type"),condition:a.isList}]}),s=e.removal({attributes:[{name:p.exact("id")},{name:p.exact("name")}]}),t=e.removal({tags:[{name:p.exact("script")},{name:p.exact("meta")},{name:p.exact("link")},{name:p.exact("style"),condition:a.isEmpty}],attributes:[{name:p.starts("on")},{name:p.exact('"')},
{name:p.exact("lang")},{name:p.exact("language")}],styles:[{name:p.all(),value:p.pattern(/OLE_LINK/i)}]}),u=e.removal({styles:[{name:p.not(p.pattern(/width|height|list-style-type/)),condition:function(a){return!f.has(a,"ephox-limbo-transform")}},{name:p.pattern(/width|height/),condition:a.isNotImage}]}),v=e.removal({classes:[{name:p.not(p.exact("rtf-data-image"))}]}),w=e.removal({styles:[{name:p.pattern(c.validStyles())}]}),z=e.removal({classes:[{name:p.pattern(/mso/i)}]}),x=e.unwrapper({tags:[{name:p.exact("img"),
condition:a.isLocal},{name:p.exact("a"),condition:a.hasNoAttributes}]}),y=e.unwrapper({tags:[{name:p.exact("a"),condition:a.hasNoAttributes}]}),A=e.removal({attributes:[{name:p.exact("style"),value:p.exact(""),debug:!0}]}),B=e.removal({attributes:[{name:p.exact("class"),value:p.exact(""),debug:!0}]});c=e.unwrapper({tags:[{name:p.pattern(c.specialInline()),condition:g.not(a.hasContent)}]});a=e.unwrapper({tags:[{name:p.exact("p"),condition:function(a){return function(b){return k.parent(b).exists(function(b){return m.name(b)===
a&&1===k.children(b).length})}}("li")}]});var C=e.transformer({tags:[{name:p.exact("p"),mutate:b.addBrTag}]}),D=e.transformer({tags:[{name:p.pattern(/ol|ul/),mutate:b.properlyNest}]}),F=e.transformer({tags:[{name:p.exact("b"),mutate:g.curry(b.changeTag,"strong")},{name:p.exact("i"),mutate:g.curry(b.changeTag,"em")},{name:p.exact("u"),mutate:function(a){a=b.changeTag("span",a);f.add(a,"ephox-limbo-transform");h.set(a,"text-decoration","underline")}},{name:p.exact("s"),mutate:g.curry(b.changeTag,"strike")},
{name:p.exact("font"),mutate:b.fontToSpan,debug:!0}]}),E=e.removal({classes:[{name:p.exact("ephox-limbo-transform")}]}),G=function(){var a=/^file:\/\/\/[^#]+(#[^#]+)$/;return e.transformer({tags:[{name:p.exact("a"),condition:function(b){return(b=l.get(b,"href"))?a.test(b):!1},mutate:function(b){var c=l.get(b,"href");l.set(b,"href",c.replace(a,"$1"))}}]})}(),H=e.removal({attributes:[{name:p.exact("href"),value:p.starts("file:///"),debug:!0}]});return{unwrapWordTags:r,removeWordAttributes:q,parseLists:d,
removeExcess:t,cleanStyles:u,cleanClasses:v,mergeStyles:w,mergeClasses:z,removeLocalImages:x,removeVacantLinks:y,removeEmptyStyle:A,removeEmptyClass:B,pruneInlineTags:c,unwrapSingleParagraphsInlists:a,addPlaceholders:C,nestedListFixes:D,inlineTagFixes:F,cleanupFlags:E,distillAnchorsFromLocalLinks:G,removeLocalLinks:H,removeAnchors:s,none:g.noop}});l("16b","b 170 171 16d 174 175 176 7 l".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(a){return a.browser.isIE()&&11<=a.browser.version.major},
l=function(a,b,c){var d=k.fromDom(a.getNode());return b(d).fold(function(){return[a]},function(b){var d=a.type()===f.END_ELEMENT_TYPE,e=[f.token(b.dom(),d)];!d&&c&&e.push(f.token(b.dom(),!0));return e})},p=function(a,b){return g(function(d,e){var f=l(e,a,b);c.each(f,d.emit)},h.noop,"image filters")},r=function(a,b){return m(b)&&a?[d.unwrapSingleParagraphsInlists]:[]},q=function(a,b,c){a=[d.mergeStyles,d.mergeClasses];c=[d.cleanStyles,d.cleanClasses];return b?a:c},s=function(a,c,d){return m(d)||!a?
[]:[b.preprocess]},t=function(a,b,c){if(!a)return[d.none];a=[d.unwrapWordTags];c=m(c)?[]:d.parseLists;return a.concat(c).concat([d.removeWordAttributes])};return{derive:function(b,f,g){var h,k;h=(k=g.browser.isFirefox()||g.browser.isSpartan())?e.local:e.vshape;var l=!k;h=m(g)?d.none:a.pipeline([p(h,l)]);h=[b?h:d.none];k=[k?d.none:d.removeLocalImages];return c.flatten([s(b,f,g),h,[d.inlineTagFixes],t(b,f,g),[d.nestedListFixes],[d.removeExcess],k,q(b,f,g),[d.distillAnchorsFromLocalLinks,d.removeLocalLinks,
d.removeVacantLinks],[d.removeEmptyStyle],[d.removeEmptyClass],[d.pruneInlineTags],[d.addPlaceholders],r(b,g),[d.cleanupFlags]])}}});l("16c","b t 11k 6q cr 2w 1b 2p l 2q 3c 21 6x 3m 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s){var t=b.link().source,u=function(b){var c=g.immutable("word","pattern"),e=a.unsafetoken(t),c=c("__INTERNAL__",e);return d.run(b,[c])},v=function(a){return!r.closest(a,"a")},w=function(a){return e.from(a[0]).filter(v).map(function(b){var c=k.fromTag("a");m.before(b,
c);l.append(c,a);f.set(c,"href",q.get(c));return c})};return{links:function(a){a=u(a);c.each(a,function(a){var b=a.exact(),c;(c=0>b.indexOf("@"))||(b=b.indexOf("://"),c=3<=b&&9>=b);c&&w(a.elements())})},position:function(a){c.each(a,function(a){p.isElement(a)&&h.getRaw(a,"position").isSome()&&h.remove(a,"position")})},list:function(a){var b=c.filter(a,function(a){return"li"===p.name(a)});if(0<b.length){var d=s.prevSiblings(b[0]),e=k.fromTag("ul");m.before(a[0],e);0<d.length&&(a=k.fromTag("li"),m.append(e,
a),l.append(a,d));l.append(e,b)}}}});l("150","b 16b 16c 16d 2g 2b".split(" "),function(c,e,d,a,b,g){var f=function(a){var b=g.children(a);c.each([d.links,d.position,d.list],function(a){a(b)})};return{go:function(c,d,g,l,p){f(g);g=b.get(g);d=e.derive(p,l,d);return a.go(c,g,d)},preprocess:f}});l("169","14l 14m 14r 120 c 150 p 3l o".split(" "),function(c,e,d,a,b,g,f,h,k){var m=b.detect(),l=function(a,b,c,d){try{var e=g.go(a,m,b,c,d),l=void 0!==e&&null!==e&&0<e.length?h.fromHtml(e):[];return f.value(l)}catch(n){return k.error(n),
f.error("errors.paste.process.failure")}};return{transfer:function(b,f,g,h,k){return l(b,f,h,g).fold(function(a){return c.error(a)},function(b){return c.sync(function(f){k.get(function(g){var h=d.findImages(b,g);c.call(f,{response:a.paste(b,g,h),bundle:e.nu({})})})})})}}});l("14y","169 b 3v t 2s 2b".split(" "),function(c,e,d,a,b,g){return{internal:function(f,h,k){h=(void 0!==h?h.findClipboardTags(g.children(k)):a.none()).getOr([]);e.each(h,b.remove);h=d.nu(function(a){a([])});return c.transfer(f,
k,!1,!0,h)},external:function(a,b,d,e,g){return c.transfer(a,b,e,d,g)}}});l("16a",["b","l","2g","3m"],function(c,e,d,a){return{encode:function(b){var c=e.fromTag("div");a.set(c,b);return d.get(c)},convert:function(a){a=a.trim().split(/\n{2,}|(?:\r\n){2,}/);a=c.map(a,function(a){return a.split(/\n|\r\n/).join("<br />")});return 1===a.length?a[0]:c.map(a,function(a){return"<p>"+a+"</p>"}).join("")}}});l("14z","14l 16a 14m 14n 120 3l 36".split(" "),function(c,e,d,a,b,g,f){return{handle:function(f){var k=
a.asText(f).getOrDie("Required text input for Text Handler");return c.sync(function(a){var f;0<k.text().length?(f=k.text(),f=e.encode(f),f=e.convert(f),f=g.fromHtml(f),f=b.paste(f,[],[])):f=b.cancel();c.call(a,{response:f,bundle:d.nu({})})})}}});l("128","14l 14m 14u 14n 14w 14x 14y 14z 120 c 150 7 l 3c 2b o".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s,t){var u=m.detect();return{plain:function(a,b,c){return h.handle(a)},autolink:function(a,b){var d=function(a,d,e){var f=r.fromTag("div");q.append(f,
a);l.preprocess(f);a=s.children(f);return c.pure({response:k.paste(a,d,e),bundle:b.bundle()})},e=p.curry(c.pass,b);return k.cata(b.response(),e,d,e,d)},noImages:function(){return function(a,b){return c.error("errors.local.images.disallowed")}},images:function(){return function(b,d){var e=a.asImages(b).getOrDie("Must have image data for images handler");return u.browser.isSafari()?(e=u.deviceType.isWebView()?"webview.imagepaste":"safari.imagepaste",c.error(e)):g.handle(e.images())}},internal:function(a,
b){return function(c,e){var g=e.bundle();return d.proxyBin(g).handle("There was no proxy bin setup. Ensure you have run proxyStep first.",function(c){var d=s.owner(a);return f.internal(d,b,c)})}},external:function(a,b){return function(c,e){var g=e.bundle();return d.proxyBin(g).handle("There was no proxy bin setup. Ensure you have run proxyStep first.",function(c){var e=d.merging(g),h=d.isWord(g),k=d.isInternal(g),m=d.backgroundAssets(g),l=s.owner(a);return k?f.internal(l,b,c):f.external(l,c,e,h,m)})}},
gwt:function(c){return function(e,f){var g=a.asWord(e).getOrDie("Wrong input type for GWT handler"),h=d.mergeOffice(f.bundle());return b.handle(g,h,c)}},setBundle:function(a){return function(b,d){var f=e.merge(d.bundle(),e.nu(a));return c.pure({response:d.response(),bundle:f})}},none:function(a,b){return c.cancel()}}});l("151",["16d","1b","2g","37"],function(c,e,d,a){var b=function(b,c){return a.descendant(b,function(a){return e.has(a,"style")?-1<e.get(a,"style").indexOf("mso-"):!1})},g=function(a,
b){var e=d.get(a);return c.isWordContent(e,b)};return{isWord:function(a,c){var d=a.browser;return(d.isIE()&&11<=d.version.major?b:g)(c,a)}}});l("129","14l 14m jd 14n c 151 2o 2b".split(" "),function(c,e,d,a,b,g,f,h){var k=b.detect();return function(b,l,p,r,q){return function(s,t){var u=a.asEvent(s).getOrDie("Must pass through event type").nativeEvent(),v=q(),w=t.response();return c.sync(function(a){var q=b(p);q.events.after.bind(function(b){b=b.container();l(b);f.add(b,d.binStyle());var m=g.isWord(k,
b),p=h.children(b),p=r.findClipboardTags(p,m).isSome();c.call(a,{response:w,bundle:e.nu({isWord:m,isInternal:p,proxyBin:b,backgroundAssets:v})})});v.convert(u);q.run()})}}});l("12a","14l 14m 14n 14o 152 14t 120 b 7 t 4n l 3c 2s 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s){return function(t,u){var v=b(t),w=l(m.none()),z=function(a){w.get().each(function(b){c.call(b,{response:a,bundle:e.nu({})})})};v.events.insert.bind(function(a){z(f.paste(a.elements(),a.assets(),a.correlated()))});v.events.incomplete.bind(function(a){z(f.incomplete(a.elements(),
a.assets(),a.correlated(),a.message()))});return function(b,e){var l=d.asWord(b).getOrDie("Word input required for rtf data"),n=function(a){return c.sync(function(b){var d=function(){c.call(b,{response:e.response(),bundle:e.bundle()})},l=function(c,d,e){w.set(m.some(b));var l=p.fromTag("div");r.append(l,c);a.fold(function(){var a=function(){h.each(c,q.remove);var a=s.children(l);z(f.incomplete(a,d,e,"errors.local.images.disallowed"))},b=function(){var a=s.children(l);z(f.paste(a,d,e))},c=g.find(l);
return 0<c.length?a():b()},function(a){v.processRtf(l,d,e,a,k.noop)})};f.cata(e.response(),d,l,d,l)})};return a.match(l.rtf(),{getFromFlash:function(a){return u(b,e)},disabled:function(){return n(m.none())},fromClipboard:function(a){return n(!0===t.allowLocalImages?m.some(a.rtf()):m.none())}})}}});l("ye","122 123 124 125 126 127 128 129 12a c 7 t 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r){var q=m.detect(),s=function(a,b){return a.isSupported()?b.getWordData():p.none()},t=function(a){return a.getNative()},
u=function(a){return a.getImage()},v=function(a,b){return b.getInternal(a)},w=function(a){return a.getText()},z=function(a){return q.browser.isSpartan()?p.none():a.getOnlyText()},x=function(a,b,c,d){return{_label:a,label:l.constant(a),getAvailable:b,steps:l.constant(c),capture:l.constant(d)}};return{internal:function(a,b,d,k){var m=l.curry(v,k);return x("Within Textbox.io (tables) pasting",m,[c.normal(h(b,a,d,k,e.ignore)),c.normal(g.fixed(!0,!0)),c.normal(f.internal(d,k))],!1)},pastiche:function(a,
k,m,l,n,p,r){return x("Outside of Textbox.io pasting (could be internal but another browser)",t,[c.normal(h(l,m,n,r,e.background)),c.normal(g.fromConfigIfExternal(a,k)),c.normal(f.external(n,r)),c.blocking(b(p,k)),c.normal(d(k))],!1)},gwt:function(a,d,e,h){return x("GWT pasting",l.curry(s,a),[c.normal(f.setBundle({isWord:!0})),c.normal(g.fromConfig(d,e)),c.normal(f.gwt(a)),c.blocking(k(e,b(h,e)))],!0)},image:function(a){return x("Image pasting",u,[c.normal(!1===a.allowLocalImages?f.noImages(l.noop):
f.images())],!0)},text:function(){return x("Plain text pasting",w,[c.normal(f.plain),c.normal(f.autolink)],!0)},onlyText:function(){return x("Only plain text is available to paste",z,[c.normal(f.plain),c.normal(f.autolink)],!0)},none:function(){return x("There is no valid way to paste",p.some,[c.normal(f.none)],!1)}}});l("153","r9 c 1b 2o l 2g 3c".split(" "),function(c,e,d,a,b,g,f){var h=function(a){return b.fromHtml("<p>"+a("cement.dialog.flash.press-escape")+"</p>")};return{paste:function(d){var g=
b.fromTag("div");a.add(g,c.resolve("flashbin-helpcopy"));var l;l=e.detect().os.isOSX()?["\u2318"]:["Ctrl"];var p=b.fromHtml("<p>"+d("cement.dialog.flash.trigger-paste")+"</p>");l=b.fromHtml('<div><span class="ephox-polish-help-kbd">'+l+'</span> + <span class="ephox-polish-help-kbd">V</span></div>');a.add(l,c.resolve("flashbin-helpcopy-kbd"));f.append(g,[p,l,h(d)]);return g},noflash:function(d){var e=b.fromTag("div");a.add(e,c.resolve("flashbin-helpcopy"));var g=b.fromHtml("<p>"+d("cement.dialog.flash.missing")+
"</p>");f.append(e,[g,h(d)]);return e},indicator:function(e){var h=b.fromTag("div");a.add(h,c.resolve("flashbin-loading"));var l=b.fromTag("div");a.add(l,c.resolve("flashbin-loading-spinner"));var p=b.fromTag("p");e=e("loading.wait");g.set(p,e);d.set(p,"aria-label",e);f.append(h,[l,p]);return h}}});$("154",navigator);l("12b","153 r9 c 7 2o 2p l 2q 3c 154".split(" "),function(c,e,d,a,b,g,f,h,k,m){var l=d.detect(),p=function(b,d,e,f){d=c.noflash(f);h.append(b,d);return{reset:a.noop}},r=function(a,b,
d,e){var f=c.paste(e),h=c.indicator(e);k.append(a,[h,f,b.element()]);a=function(){g.set(f,"display","block");g.set(h,"display","none");d()};b.events.spin.bind(function(){g.set(f,"display","none");g.set(h,"display","block");g.remove(h,"height");g.remove(h,"padding");d()});b.events.reset.bind(a);b.events.hide.bind(function(){g.setAll(h,{height:"0",padding:"0"})});return{reset:a}};return function(c,d,g){var h=f.fromTag("div"),k="flashbin-wrapper-"+(l.os.isOSX()?"cmd":"ctrl");b.add(h,e.resolve(k));var w;
try{w=void 0!==(l.browser.isIE()?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):m.plugins["Shockwave Flash"])}catch(z){w=!1}c=(w?r:p)(h,c,d,g.translations);return{element:a.constant(h),reset:c.reset}}});l("155","t 58 4a 4n 2u 2v".split(" "),function(c,e,d,a,b,g){return{responsive:function(){var f=a(c.none()),h=d.create({crashed:e([]),timeout:e([])});return{start:function(a,d,e,l){var r=d,q=g(function(){e()?b(q):0>=r?(h.trigger.timeout(),b(q)):l()&&(b(q),h.trigger.crashed());r--},a);f.set(c.some(q))},
stop:function(){f.get().each(function(a){b(a)})},events:h.registry}}}});l("156",["a","b","2u","2v"],function(c,e,d,a){return function(b,g,f){var h=function(a){return e.forall(g,function(b){return c.isFunction(a[b])})},k=!0,m=a(function(){var a=b.dom();c.isFunction(a.PercentLoaded)&&100===a.PercentLoaded()&&h(a)&&(l(),f())},500),l=function(){k&&(d(m),k=!1)};return{stop:l}}});$("157",unescape);l("12c","155 156 r9 b 1q 31 c 4z 7 t 58 4a 2n 2o 2p l 30 2q 2u 6e o 2v 3w 157 36".split(" "),function(c,e,
d,a,b,g,f,h,k,m,l,p,r,q,s,t,u,v,w,z,x,y,A,B,C){var D=h.install("ephox.flash"),F=f.detect(),E=m.none();return function(f){var h=p.create({response:l(["rtf"]),spin:l([]),cancel:l([]),error:l(["message"]),reset:l([]),hide:l([]),failed:l(["message"])}),m=!1,w=t.fromTag("div");q.add(w,d.resolve("flashbin-target"));var y=c.responsive();y.events.crashed.bind(function(){h.trigger.failed("flash.crashed")});y.events.timeout.bind(function(){h.trigger.failed("flash.crashed")});var K=function(){Q.stop();if(!m){m=
!0;try{var a=P.dom();b.each(S,function(b,c){var d=a[c];if(void 0===d)throw'Flash object does not have the method "'+c+'"';d.call(a,b)});h.trigger.reset();z(W);q.remove(w,d.resolve("flash-activate"));U();V()}catch(c){x.log("Flash dialog - Error during load: ",c)}}},N=D.permanent(K),M=function(){return!r.inBody(P)},O=function(){return!P.dom().SetVariable},S={setSpinCallback:D.permanent(function(){y.start(1E3,10,M,O);h.trigger.spin()}),setPasteCallback:D.permanent(function(a){y.stop();A(function(){""===
a?h.trigger.error("flash.crashed"):h.trigger.response(B(a))},0)}),setEscapeCallback:D.permanent(h.trigger.cancel),setErrorCallback:D.permanent(function(a){y.stop();h.trigger.error(a)}),setStartPasteCallback:D.permanent(k.noop)},P=function(){var a=f.replace(/^https?:\/\//,"//"),b='    <param name="allowscriptaccess" value="always">    <param name="wmode" value="opaque">    <param name="FlashVars" value="onLoad='+N+'">';if(F.browser.isIE()&&10===F.browser.version.major){var c=g.generate("flash-bin");
return t.fromHtml('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="'+c+'"><param name="movie" value="'+a+'">'+b+"</object>")}return t.fromHtml('<object type="application/x-shockwave-flash" data="'+a+'">'+b+"</object>")}(),U=function(){s.setAll(P,{width:"2px",height:"2px"})};U();var Q=e(P,b.keys(S),K);v.append(w,P);var V=function(){F.browser.isFirefox()&&C.getSelection().removeAllRanges();u.focus(P)},W=null,Y=function(){q.add(w,d.resolve("flash-activate"));s.remove(P,"height");s.remove(P,
"width");h.trigger.hide()},X=function(){s.set(w,"display","none");E.each(function(b){a.each(b,function(a){a.unbind()})})};return{focus:V,element:function(){return w},activate:function(){W=A(Y,3E3);h.trigger.spin();s.set(w,"display","block");V()},deactivate:X,destroy:function(){X();a.each(b.values(S),function(a){D.unregister(a)});D.unregister(N);Q.stop()},events:h.registry}}});l("yf","12b 12c 58 4a 3y l 36".split(" "),function(c,e,d,a,b,g,f){return function(h,k){var m=k.translations,l=a.create({response:d(["rtf",
"hide"]),cancel:d([]),error:d(["message"]),failed:d(["message"])});return{open:function(){var a=e(k.swf);a.deactivate();var d=g.fromDom(f),q=b.bind(d,"mouseup",a.focus),s=function(){v()},d=function(){v();l.trigger.cancel()};a.events.cancel.bind(d);a.events.response.bind(function(a){l.trigger.response(a.rtf(),s)});a.events.error.bind(function(a){v();l.trigger.error(a.message())});a.events.failed.bind(function(a){v();l.trigger.failed(a.message())});var t=h();t.setTitle(m("cement.dialog.flash.title"));
var u=c(a,t.reflow,k);u.reset();t.setContent(u.element());t.events.close.bind(d);t.show();a.activate();var v=function(){q.unbind();a.destroy();t.destroy()}},events:l.registry}}});l("177",["c7","ps","x"],function(c,e,d){var a=function(){return b(0,0)},b=function(a,b){return{major:a,minor:b}};return{nu:b,detect:function(c,f){var h=d(f).toLowerCase();if(0===c.length)h=a();else{var k;a:{for(k=0;k<c.length;k++){var m=c[k];if(m.test(h)){k=m;break a}}k=void 0}h=k?b(e(h.replace(k,"$1")),e(h.replace(k,"$2"))):
{major:0,minor:0}}return h},unknown:a}});l("16e",["9","177"],function(c,e){var d=function(a,c){return function(){return c===a}},a=function(a){var c=a.current;return{current:c,version:a.version,isEdge:d("Edge",c),isChrome:d("Chrome",c),isIE:d("IE",c),isOpera:d("Opera",c),isFirefox:d("Firefox",c),isSafari:d("Safari",c)}};return{unknown:function(){return a({current:void 0,version:e.unknown()})},nu:a,edge:c.constant("Edge"),chrome:c.constant("Chrome"),ie:c.constant("IE"),opera:c.constant("Opera"),firefox:c.constant("Firefox"),
safari:c.constant("Safari")}});l("16f",["9","177"],function(c,e){var d=function(a,c){return function(){return c===a}},a=function(a){var c=a.current;return{current:c,version:a.version,isWindows:d("Windows",c),isiOS:d("iOS",c),isAndroid:d("Android",c),isOSX:d("OSX",c),isLinux:d("Linux",c),isSolaris:d("Solaris",c),isFreeBSD:d("FreeBSD",c)}};return{unknown:function(){return a({current:void 0,version:e.unknown()})},nu:a,windows:c.constant("Windows"),ios:c.constant("iOS"),android:c.constant("Android"),
linux:c.constant("Linux"),osx:c.constant("OSX"),solaris:c.constant("Solaris"),freebsd:c.constant("FreeBSD")}});l("16g",["9"],function(c){return function(e,d,a){var b=e.isiOS()&&!0===/ipad/i.test(a),g=e.isiOS()&&!b,f=e.isAndroid()&&3===e.version.major,h=e.isAndroid()&&4===e.version.major,f=b||f||h&&!0===/mobile/i.test(a),k=(h=e.isiOS()||e.isAndroid())&&!f;d=d.isSafari()&&e.isiOS()&&!1===/safari/i.test(a);return{isiPad:c.constant(b),isiPhone:c.constant(g),isTablet:c.constant(f),isPhone:c.constant(k),
isTouch:c.constant(h),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:c.constant(d)}}});l("16h",["c7","177","x"],function(c,e,d){var a=function(a,e){var f=d(e).toLowerCase();return c.find(a,function(a){return a.search(f)})};return{detectBrowser:function(b,c){return a(b,c).map(function(a){var b=e.detect(a.versionRegexes,c);return{current:a.name,version:b}})},detectOs:function(b,c){return a(b,c).map(function(a){var b=e.detect(a.versionRegexes,c);return{current:a.name,version:b}})}}});l("17p",[],function(){return{addToStart:function(c,
e){return e+c},addToEnd:function(c,e){return c+e},removeFromStart:function(c,e){return c.substring(e)},removeFromEnd:function(c,e){return c.substring(0,c.length-e)}}});l("17q",["ke","n"],function(c,e){return{first:function(c,a){return c.substr(0,a)},last:function(c,a){return c.substr(c.length-a,c.length)},head:function(d){return""===d?c.none():c.some(d.substr(0,1))},tail:function(d){return""===d?c.none():c.some(d.substring(1))}}});l("178",["17p","17q","n"],function(c,e,d){var a=function(a,b,c){return""===
b?!0:a.length<b.length?!1:a.substr(c,c+b.length)===b},b=function(b,c){return a(b,c,0)},g=function(b,c){return a(b,c,b.length-c.length)};return{supplant:function(a,b){return a.replace(/\${([^{}]*)}/g,function(a,c){var d=b[c],e=typeof d;return"string"===e||"number"===e?d:a})},startsWith:b,removeLeading:function(a,d){return b(a,d)?c.removeFromStart(a,d.length):a},removeTrailing:function(a,b){return g(a,b)?c.removeFromEnd(a,b.length):a},ensureLeading:function(a,d){return b(a,d)?a:c.addToStart(a,d)},ensureTrailing:function(a,
b){return g(a,b)?a:c.addToEnd(a,b)},endsWith:g,contains:function(a,b){return-1!==a.indexOf(b)},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},lTrim:function(a){return a.replace(/^\s+/g,"")},rTrim:function(a){return a.replace(/\s+$/g,"")},capitalize:function(a){return e.head(a).bind(function(b){return e.tail(a).map(function(a){return b.toUpperCase()+a})}).getOr(a)}}});l("16i",["9","178"],function(c,e){var d=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,a=function(a){return function(c){return e.contains(c,
a)}},d=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return e.contains(a,"edge/")&&e.contains(a,"chrome")&&e.contains(a,"safari")&&e.contains(a,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,d],search:function(a){return e.contains(a,"chrome")&&!e.contains(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return e.contains(a,"msie")||e.contains(a,"trident")}},
{name:"Opera",versionRegexes:[d,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:a("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:a("firefox")},{name:"Safari",versionRegexes:[d,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(e.contains(a,"safari")||e.contains(a,"mobile/"))&&e.contains(a,"applewebkit")}}],a=[{name:"Windows",search:a("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return e.contains(a,"iphone")||
e.contains(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:a("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:a("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:a("linux"),versionRegexes:[]},{name:"Solaris",search:a("sunos"),versionRegexes:[]},{name:"FreeBSD",search:a("freebsd"),versionRegexes:[]}];return{browsers:c.constant(d),
oses:c.constant(a)}});l("158",["16e","16f","16g","16h","16i"],function(c,e,d,a,b){return{detect:function(g){var f=b.browsers(),h=b.oses(),f=a.detectBrowser(f,g).fold(c.unknown,c.nu),h=a.detectOs(h,g).fold(e.unknown,e.nu);g=d(h,f,g);return{browser:f,os:h,deviceType:g}}}});l("12d",["1f","158","154"],function(c,e,d){return{detect:c.cached(function(){return e.detect(d.userAgent)})}});l("yg",["4m","9","ke","12d"],function(c,e,d,a){a=a.detect();a=a.deviceType.isiOS()||a.deviceType.isAndroid();var b=function(a){var b=
d.none();c.addScript(a+"/wordimport.js",e.identity).get(function(a){a.fold(function(a){console.error("Unable to load word import: ",a)},function(a){b=d.some(a)})});return{isSupported:function(){return b.isSome()},cleanDocument:function(a,c){return b.map(function(b){return b.cleanDocument(a,c)})}}},g=e.constant({isSupported:e.constant(!1),cleanDocument:d.none});return a?g:b});l("159",["7","1c"],function(c,e){return function(d,a,b,g){var f=e.eq(d,b)&&a===g;return{startContainer:c.constant(d),startOffset:c.constant(a),
endContainer:c.constant(b),endOffset:c.constant(g),collapsed:c.constant(f)}}});l("12e","t 159 l 2q 2s 2b".split(" "),function(c,e,d,a,b,g){return function(f){var h=d.fromTag("br"),k=c.none();return{cleanup:function(){b.remove(h)},toOn:function(a,b){var c=g.owner(b).dom().defaultView;k.each(function(a){f.set(c,a)})},toOff:function(b,c){var d=g.owner(c).dom().defaultView;a.append(c,h);k=f.get(d,e);f.set(d,e(h,0,h,0))}}}});l("16j","b l 2q 3c 2s 2b".split(" "),function(c,e,d,a,b,g){var f=function(f,k){var m=
g.children(f);c.each(m,function(c){if(k(c)){var f=g.children(c),h=e.fromTag("div",g.owner(c).dom());a.append(h,f);d.before(c,h);b.remove(c)}})};return{consolidate:function(c,d){g.nextSibling(c).filter(d).each(function(d){var e=g.children(d);a.append(c,e);b.remove(d)});f(c,d)}}});l("16k",["6u"],function(c){return{resolve:c.create("ephox-sloth").resolve}});l("15a","31 2w 16j 16k 1b 2o 4e 2p bx l 2g 2q 2s 33 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s){var t=a.resolve("bin"),u=t+c.generate(""),
v=k.onDirection("-100000px","100000px");return function(a,c){var k=m.fromTag("div");b.setAll(k,c);b.setAll(k,{contenteditable:"true","aria-hidden":"true"});h.setAll(k,{position:"fixed",top:"0px",width:"100px",height:"100px",overflow:"hidden",opacity:"0"});f.add(k,[t,u]);var y=function(a){return g.has(a,u)};return{attach:function(a){r.empty(k);h.set(k,"left",v(a));p.append(a,k)},focus:function(){q.ancestor(k,"body").each(function(b){a.toOff(b,k)})},contents:function(){d.consolidate(k,y);var a=e.immutable("elements",
"html","container"),b=s.children(k),c=l.get(k);return a(b,c,k)},container:function(){return k},detach:function(){r.remove(k)}}}});l("12f","7 bw 58 4a 121 15a 2b".split(" "),function(c,e,d,a,b,g,f){return function(h,k,m){var l=g(h,m),p=function(){h.cleanup();var a=l.contents();l.detach();q.trigger.after(a.elements(),a.html(),l.container())},r=e.tap(function(){q.trigger.before();l.attach(k);l.focus();b.run(f.owner(k),r,p)}),q=a.create({before:d([]),after:d(["elements","html","container"])});m=c.noop;
return{instance:c.constant(function(){r.instance()}),destroy:m,events:q.registry}}});l("yh",["84","58","4a","12e","12f"],function(c,e,d,a,b){var g={set:function(a,b){c.setExact(a,b.startContainer(),b.startOffset(),b.endContainer(),b.endOffset())},get:function(a,b){return c.get(a).map(function(a){return b(a.start(),a.soffset(),a.finish(),a.foffset())})}};return function(c){return function(h){var k=d.create({after:e(["container"])}),m=a(g),l=b(m,h,c);l.events.after.bind(function(a){m.toOn(h,a.container());
k.trigger.after(a.container())});return{run:function(){l.instance()()},events:k.registry}}}});l("rt","yd ye yf yg yh b 31 7 t".split(" "),function(c,e,d,a,b,g,f,h,k){return function(m,l,p,r){var q=a(r.baseUrl),s=h.curry(d,l),t=b(void 0!==r.pasteBinAttrs?r.pasteBinAttrs:{}),u=void 0!==r.intraFlag?r.intraFlag:{clipboardType:f.generate("clipboard-type"),findClipboardTags:k.none},q=g.flatten([void 0!==r.intraFlag?[e.internal(p,t,m,u)]:[],[e.onlyText()],[e.gwt(q,l,r,s)],[e.image(r)]]);m=e.pastiche(l,r,
p,t,m,s,u);return c(q,m)}});l("ru",["yd","ye"],function(c,e){return function(){return c([e.text()],e.none())}});l("rv","b 8e h2 92 hp eo 7 h3 h4 59 58 4a 4n 1b 2o l 3c 2s 3w".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s,t,u,v,w){return function(z,x){return function(y){var A=p.create({close:l([])}),B=h(z);B.events.close.bind(function(){A.trigger.close()});s.add(B.element(),m.resolve("external-dialog"));y&&s.add(B.element(),m.resolve("dialog-vertical-controls"));var C=t.fromTag("div"),D=r([]),
F=function(a){var c=b();if(void 0===a.text)throw"dialog button did not specify text";c.content(g(a.text));e.button(c.element(),a.text);void 0!==a.tabindex&&q.set(c.element(),"tabindex",a.tabindex);void 0!==a.className&&s.add(c.element(),a.className);void 0!==a.click&&c.events.click.bind(a.click);s.add(c.element(),m.resolve("dialog-button"));return c};return{element:B.element,events:A.registry,setTitle:B.setTitle,setContent:B.setContent,setButtons:function(a){v.empty(C);a=c.map(a,F);u.append(C,c.map(a,
function(a){return a.element()}));D.set(a);B.setControls(C)},reflow:f.noop,show:function(){x.hideInlineSelection();B.show();var b=c.map(D.get(),function(b){return a.button(b.element(),d.button({execute:k.click}))}),e=a.multipleAll(B.element(),b);e.events.exit.bind(function(){A.trigger.close()});w(function(){e.enter()},0)},destroy:function(){c.each(D.get(),function(a){a.destroy()});D.set([]);B.destroy()}}}}});l("rw",["r"],function(c){return function(e,d,a){var b={"errors.imageimport.unsupported":"errors.images.import.unsupported",
"errors.imageimport.invalid":"errors.images.import.invalid"};return{baseUrl:a.baseUrl,enableFlashImport:a.enableFlashImport,swf:a.swf,officeStyles:a.officeStyles,htmlStyles:a.htmlStyles,translations:function(a){var d=c.prototype.slice.call(arguments,1);return e.translate.apply(void 0,[void 0!==b[a]?b[a]:a].concat(d))},allowLocalImages:a.allowLocalImages,intraFlag:d}}});l("jg","rt ru rv 7e rw ja".split(" "),function(c,e,d,a,b,g){var f=function(e,f,m,l){var p=d(e.uiContainer(),l),r=function(a){f.filterDom(f.paste(),
a)},q=b(a,g.intraFlag(),m);return function(a){return c(a,p,r,q)}};return function(a,b,c,d){return!0===c.forceText?e:f(a,b,c,d)}});l("bb","jd b 3p c t je jf bg co 99 ja jg 9a 58 4a d3 1b l 3c 21 6x 4h 2b w".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s,t,u,v,w,z,x,y,A,B){return function(C,D,F,E){var G=a.detect(),H=C.filter(),L=C.content(),I=C.undo(),J=C.smartview(),K=C.region(),N=C.internalevents(),M=p(J,H,E,L),O=b.none(),S=s.create({analytics:q(["message"])}),P=function(a){var b=e.contains(["flash.clipboard.no.rtf",
"safari.imagepaste"],a.message())?"info":"error";U(a.message(),b)},U=function(a,b){r.getOrLog(a,[]).each(function(a){a=k(a,b);C.ui().displayBanner(a)});Q()},Q=function(){d.unblock();L.focus()};H.add(H.history(),c.binStyle(),t.remove);H.addSelector(H.history(),"[data-ephox-polish-cement-inserted]",t.removeAttr("data-ephox-polish-cement-inserted"));!1===E.allowLocalImages&&H.addSelector(H.paste(),"img[src]",function(a){a=e.filter(a,function(a){a=u.get(a,"src");return B.startsWith(a,"data")||B.startsWith(a,
"blob")});0!==a.length&&(U("errors.local.images.disallowed"),t.remove(a))});if(G.os.isiOS()&&G.browser.isSafari()){var V=G.deviceType.isWebView()?"webview.imagepaste":"safari.imagepaste";H.addSelector(H.paste(),'img[src^="webkit-fake-url"]',function(a){0!==a.length&&(U(V,"info"),t.remove(a))})}L.events.ready.bind(function(a){var c=h.get(L,J,a.api().doc()),k=f.rules(L,K,c),p=g(L),r=a.api(),q=M(r.body());O=b.some(q);r.events.paste.bind(function(a){r.getSelection().filter(function(a){return e.forall(l.ignoreSelectors(),
function(b){return!1===x.ancestor(a.startContainer(),b,L.isRoot)})}).each(function(b){q.isBlocked()||(p.backup(),d.block());q.paste(a.original().raw())})});q.events.cancel.bind(function(){Q();p.cancel()});var s=m.processResults(U);q.events.error.bind(P);q.events.insert.bind(function(a){F.correlated(a.correlated()).map(s).get(function(b){Q();I.save();var c=v.fromTag("div");w.append(c,a.elements());H.filterDom(H.input(),c);c=A.children(c);e.each(c,function(a){z.isElement(a)&&u.set(a,"data-ephox-polish-cement-inserted",
!0)});p.insert(c,[k.collapsed()],[k.ranged()]);L.body().each(function(a){a=y.descendants(a,"[data-ephox-polish-cement-inserted]");e.each(a,function(a){u.remove(a,"data-ephox-polish-cement-inserted")});N.input(a)});L.domChanged();S.trigger.analytics("paste_action");D.pasteUpload();D.uploadAssets(b)})})});return{destroy:function(){O.each(function(a){a.destroy()})},events:S.registry}}});l("61",["ba","bb"],function(c,e){return function(d,a,b,g){var f=c(d,g.copy),h=e(d,a,b,g.paste);return{destroy:function(){f.destroy();
h.destroy()}}}});l("rx",["b","1q","x"],function(c,e,d){var a=function(a){for(var b=[],c=a.start.charCodeAt(0);c<=a.finish.charCodeAt(0);c++)b.push(d.fromCharCode(c));return b},b=function(a){return{start:a,finish:a}};return function(){var d={latin:[{start:"A",finish:"Z"},{start:"a",finish:"z"},{start:"\u00c0",finish:"\u00ff"}],punctuation:[{start:"!",finish:"/"},{start:":",finish:"@"},{start:"[",finish:"`"},{start:"{",finish:"~"},{start:"\u00a1",finish:"\u00bf"},{start:"\u2010",finish:"\u2027"},{start:"\u2030",
finish:"\u205e"}],currency:[b("$"),{start:"\u00a2",finish:"\u00a5"},{start:"\u20a0",finish:"\u20bd"},b("\u5186"),b("\u5143"),b("\u5713"),b("\u5706")],"extended-latin-a":[{start:"\u0100",finish:"\u017f"}],"extended-latin-b":[{start:"\u0180",finish:"\u024f"}],arrows:[{start:"\u2190",finish:"\u21ff"},b("\u2794"),{start:"\u2798",finish:"\u27af"},{start:"\u27b1",finish:"\u27be"}],mathematical:[{start:"\u2795",finish:"\u2797"},{start:"\u2200",finish:"\u22ff"}],miscellaneous:[{start:"\u2701",finish:"\u275e"},
{start:"\u2761",finish:"\u2793"},b("\u27b0"),b("\u27bf")]},f={};e.each(d,function(b,d,e){f[d]=c.bind(b,a)});return f}});l("ry","52 7 h5 59 4a 4b 2o l 3c".split(" "),function(c,e,d,a,b,g,f,h,k){return{controls:function(h){var l=h+"-";h=c.div();f.add(h,a.resolve(l+"dialog-controls"));var p=d.button(l,"cancel","button.cancel"),r=d.button(l,"insert","specialchar.insert");d.makeNormal(p.element());d.makeDefault(r.element());k.append(h,[p.element(),r.element()]);l=b.create({insert:g([],r.events.click),
cancel:g([],p.events.click)});return{element:e.constant(h),ok:e.constant(r),cancel:e.constant(p),destroy:function(){r.destroy();p.destroy()},events:l.registry}}}});l("rz","b 1q y1 ha hb 7e 59 1b 2o 4e l 2q 3c 1u 36".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s){var t=function(a){var b=l.fromTag("span");k.add(b,f.resolve("special-char"));var c=l.fromHtml(a);h.setAll(b,{"data-ephox-polish-special-char":a,"data-ephox-polish-char-code":a.charCodeAt(0).toString(16),tabindex:"-1"});d.gridcell(b);p.append(b,
c);return b},u=function(a,b){var e=l.fromTag("div");m.add(e,[f.resolve("special-char-row"),f.resolve("special-char-row-"+b)]);d.row(e);c.each(a,function(a){p.append(e,t(a))});return e},v=function(a,b,e){var h=l.fromTag("div");k.add(h,f.resolve(b));d.base(h,g.translate("specialchar.grid"));a=c.chunk(a,e);a=c.map(a,function(a){return u(a,b)});r.append(h,a);return h};return{generateItems:function(c){var d=600>=q.min(s.innerWidth,s.innerHeight)?12:16;return e.mapToArray(c,function(c,e){var f=v(c,e,d);
return b(g.translate("specialchar."+e),a(f))})}}});l("jh","b 3p h2 92 hc 7 rx h3 h4 m1 py 7e ry rz 59 58 4a 1b 2o 3y 30 2q 6x 33 2b 34".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s,t,u,v,w,z,x,y,A,B,C,D){var F=function(b){var c={item:g.constant(".ephox-pastry-statebutton.ephox-pastry-tablayout-item")},e=d.flow({trigger:k.button,executeOnArrow:!0});return a.flow(b.menu(),c,e)},E=function(a){return A.closest(a,".ephox-pastry-tablayout-active")},G=function(b){var c={row:g.constant(".ephox-pastry-tablayout-active ."+
s.resolve("special-char-row")),cell:g.constant(".ephox-pastry-tablayout-active ."+s.resolve("special-char"))},e=d.tabular({trigger:k.click,isValid:E});return a.tabular(b.body(),c,e)};return function(g){var A=u.create({insert:t(["string"]),close:t([])}),E=h(g);g=f();g=q.generateItems(g);var J=m.input("specialchar","specialchar.selects"),K=l(b.left(),g,s.resolve("specialchars"));w.add(K.body(),s.resolve("specialchar-body"));w.add(E.element(),s.resolve("specialchar-dialog"));c.each(C.children(K.element()),
e.register);var N=z.bind(E.element(),"click",function(a){a=a.target();B.closest(a,"[data-ephox-polish-special-char]").each(function(a){x.focus(a);var b=v.get(a,"data-ephox-polish-special-char");a=J.input();b=D.get(a)+b;D.set(a,b)})}),M=r.controls("specialchar");E.setTitle(p.translate("specialchar.dialog"));E.setContent(K.element());E.setControls(M.element());y.after(K.element(),J.element());g=function(){E.hide();D.set(J.input(),"");A.trigger.close()};var O=F(K),S=G(K),P=k.setup(E,M,[O,S,a.input(J.input(),
d.input({}))]);K.events.setActive.bind(function(a){O.clickFocus(a.item().element())});E.events.close.bind(function(){P.exit();A.trigger.close()});M.events.cancel.bind(g);E.events.close.bind(g);M.events.insert.bind(function(){A.trigger.insert(D.get(J.input()))});return{element:E.element(),events:A.registry,open:function(){E.show();P.enter()},destroy:function(){N.unbind();E.destroy();K.destroy();M.destroy();P.destroy()},close:function(){E.hide();D.set(J.input(),"")}}}});l("bc",["jh","58","4a","4b"],
function(c,e,d,a){return function(b,g){var f=c(g),h=d.create({insert:a(["string"],f.events.insert),close:e([])}),k=function(){h.trigger.close();f.close()};f.events.close.bind(k);return{show:function(){b.toReading();f.open()},close:k,destroy:function(){f.events.close.unbind(k);f.destroy()},events:h.registry}}});l("62","9s 7 86 7c 7e bc 74 l".split(" "),function(c,e,d,a,b,g,f,h){return function(k){var m=k.content(),l=k.smartview(),p=function(a){a=h.fromText(a.string());d.insertAtCursor(m,[a]).each(function(a){a=
c.after(a.element());m.setRelativeSelection(a,a);m.focus();m.toEditing()})},r=a.destroyable(),q=function(){r.clear()};return{ui:f.ui({"specialchar.general":{toggle:!1,value:"specialchar",textkey:b.key("specialchar.open"),action:function(){var a=g(m,l.uiContainer());r.set(a);a.events.close.bind(function(){m.focus();q()});a.events.insert.bind(function(a){p(a);q()});k.content().hideInlineSelection();a.show()},updateGeneral:e.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!0}}),destroy:q}}});l("bd","7 t 6y 7e cl 73 74 7f 1b".split(" "),
function(c,e,d,a,b,g,f,h,k){return function(m,l,p,r,q){var s=m.content(),t=m.profile().nativeSpelling(),u=function(a){k.set(a,"spellcheck","false")},v=function(a){k.set(a,"spellcheck","true")};s.runOrOnLoaded(function(){var a=t.get()?v:u;s.body().each(a)});m=f.ui({"spelling.general":{toggle:!0,value:"spellcheck",textkey:a.key("cog.spellcheck"),action:function(){var a=!t.get();t.setAndCache(a);a=a?v:u;s.body().each(a)},updateGeneral:function(a){(t.get()?a.select:a.deselect)()},icon:!0,tooltip:h.get}});
return b({events:d(["analytics"]),init:c.noop,hasDropdown:c.constant(!1),hasAutocorrect:c.constant(!1),check:c.noop,scanView:c.noop,lock:c.apply,situation:g.noSituation,handle:c.noop,assign:c.noop,destroy:function(){s.body().each(function(a){k.remove(a,"spellcheck")})},state:c.constant({}),ui:m,lookup:c.constant(e.none()),name:c.constant("spelling-disabled")})}});l("ji",["fg","4o","e5"],function(c,e,d){var a=e.generate([{single:["element"]},{range:["start","soffset","finish","foffset"]}]);return{cata:function(a,
c,d){return a.fold(c,d)},single:a.single,range:function(b,e,f,h){var k=d.after(f,h,b,e),m=k?c.point(b,e):c.point(f,h);b=k?c.point(f,h):c.point(b,e);return a.range(m.element(),m.offset(),b.element(),b.offset())}}});l("yi",["2w"],function(c){return c.immutable("suggestions","ignore")});l("yj",["87","6r"],function(c,e){return{clean:function(d){var a=new e(c.zeroWidth(),"g"),b=new e("[\u2018\u2019]","g");return d.replace(a,"").replace(b,"'")}}});l("s0",["yi","yj","1q","t"],function(c,e,d,a){return function(b){var g=
{},f=function(a){return g.hasOwnProperty(a)&&void 0!==g[a]?g[a]:{}},h=function(a,b){var c=f(a);b(c);g[a]=c},k=function(a,b){var c=f(a);return b(c)},m=function(b,d,f){h(b,function(b){var g=e.clean(d);b.hasOwnProperty(g)&&void 0!==b[g]||(b[g]=c(a.some(f),!1))})},l=function(b,d){h(b,function(b){var f=e.clean(d),g=b.hasOwnProperty(f)?b[f]:void 0,g=void 0!==g?g.suggestions():a.none(),g=c(g,!0);b[f]=g})};d.each(void 0!==b?b:{},function(a,b){d.each(a,function(a,c){!0===a.ignore&&l(b,c);void 0!==a.suggestions&&
m(b,c,a.suggestions)})});return{add:m,get:function(b,c){return k(b,function(b){var d=e.clean(c);return b.hasOwnProperty(d)?a.from(b[d]):a.none()})},ignore:l,suggestions:function(b,c){return k(b,function(b){var d=e.clean(c);return(b.hasOwnProperty(d)?a.from(b[d]):a.none()).bind(function(a){return a.suggestions()})})},state:function(){return d.map(g,function(a,b){return d.map(a,function(a,b){return{ignore:a.ignore(),suggestions:a.suggestions().getOr([])}})})},destroy:function(){g={}}}}});l("jj",["s0"],
function(c){return function(e){return c(e)}});l("jk",["d3","2o"],function(c,e){return{configure:function(d){d.add(d.internal(),"ephox-cram-annotation-wrap",c.unwrap);d.add(d.output(),"ephox-cram-annotation-wrap",c.unwrap);d.add(d.paste(),"ephox-cram-annotation-wrap",c.unwrap);d.addExcludedContext([".ephox-cram-annotation-wrap"])},isWrap:function(c){return e.has(c,"ephox-cram-annotation-wrap")}}});l("68","b 6 2l 7 t 7e".split(" "),function(c,e,d,a,b,g){var f={en_au:"en_gb",en_bz:"en_gb",en_ca:"en_gb",
en_gb:"en_gb",en_ie:"en_gb",en_in:"en_gb",en_jm:"en_gb",en_my:"en_gb",en_nz:"en_gb",en_ph:"en_gb",en_sg:"en_gb",en_tt:"en_gb",en_za:"en_gb",en_zw:"en_gb",en_us:"en_us",en:"en_us"},h="da de en en_au en_br en_gb en_uk en_us es fi fr it nb nl pt pt_pt sv".split(" "),k=function(c,d){return{value:a.constant(c),textkey:a.constant(d),icon:b.none}};return{determine:function(a){if("no.language"===a)a=b.some(a);else{var g=e.merge(d.localeList(),f);a=d.determineFrom(a,g);a=""!==a&&c.contains(h,a)?b.some(a):
b.none()}return a},get:function(){return[k("no.language",g.key("spelling.none")),k("en_us",g.key("parlance.en_us")),k("en_gb",g.key("parlance.en_gb")),k("da",g.key("parlance.da")),k("de",g.key("parlance.de")),k("es",g.key("parlance.es")),k("fi",g.key("parlance.fi")),k("fr",g.key("parlance.fr")),k("it",g.key("parlance.it")),k("nb",g.key("parlance.no")),k("nl",g.key("parlance.nl")),k("pt",g.key("parlance.pt_br")),k("pt_pt",g.key("parlance.pt_pt")),k("sv",g.key("parlance.sv"))]},isOn:function(a){return"no.language"!==
a},offKey:a.constant("no.language")}});l("jl","7 t 7e 68 74 7m 58 4a w".split(" "),function(c,e,d,a,b,g,f,h,k){var m=function(b,f){var h=a.get();return{"spelling.dropdown":{name:"spellcheck",textkey:d.key("spelling.menu"),menuTextkey:"",updateDropdown:function(a){a.populate([{label:e.none,items:c.constant(h)}]);var d=b.profile().spelling().get();g.on(d).fold(a.untick,c.noop,a.tick)},action:function(a){b.profile().spelling().setAndCache(a);k.startsWith(a,"en")||b.profile().autocorrect().set(!1);f.trigger.change(a)},
values:h,render:e.none(),describe:function(a){return d.key("spelling.menu")},hasPopup:!0,toggle:!1}}},l=function(b,c,e){var f=b.profile().spelling().get()!==a.offKey();return{"spelling.general":{toggle:!0,value:"spellcheck",textkey:d.key("cog.spellcheck"),action:function(){var d=(f=!f)?c:a.offKey();b.profile().spelling().setAndCache(d);e.trigger.change(d)},updateGeneral:function(a){f?a.select():a.deselect()},icon:!1}}};return function(a,d,e){var g=h.create({change:f(["language"])});a=e?m(a,g):l(a,
d,g);return{ui:b.ui(a),hasDropdown:c.constant(e),events:g.registry}}});l("yk",["t","2w"],function(c,e){var d=e.immutable("area","f");return function(){var a=[],b=!1,e=function(){b=!0;c.from(a.shift()).fold(function(){b=!1},function(a){a.f()(a.area(),e)})};return{enqueue:function(c,h){a.push(d(c,h));b||e()},destroy:function(){a=[]}}}});l("179",["7"],function(c){return{stop:c.constant("trampoline.stop"),run:function(c){for(;"trampoline.stop"!==c;)c=c()}}});l("16n","t j3 ai 179 16m 4o".split(" "),function(c,
e,d,a,b,g){var f=g.generate([{inline:["item","mode","lang"]},{text:["item","mode"]},{empty:["item","mode"]},{boundary:["item","mode","lang"]},{concluded:["item","mode"]}]),h=function(a,b,d,e){var g=a.property().isElement(b)?c.from(a.attrs().get(b,"lang")):c.none();return a.property().isText(b)?f.text(b,d):e(b,d)?f.concluded(b,d):a.property().isBoundary(b)?f.boundary(b,d,g):a.property().isEmptyTag(b)?f.empty(b,d):f.inline(b,d,g)},k=function(a,b,c,d){return e.walk(a,b,c,e.walkers().right(),void 0).fold(function(){return f.concluded(b,
c)},function(b){return h(a,b.item(),b.mode(),d)})},m=function(b,c,f,g,h,k){return function(){return c.fold(function(a,c,d){(c===e.advance?g.openInline:g.closeInline)(d,a);return l(b,a,c,f,g,h,k)},function(c,d){var e=h(b,c);g.addDetail(e);return f(c,d)?a.stop():l(b,c,d,f,g,h,k)},function(a,c){g.addEmpty(a);return l(b,a,c,f,g,h,k)},function(c,m,r){var x=k.assess(c);return d.cata(x,function(d){return m!==e.backtrack?l(b,c,e.sidestep,f,g,h,k):a.stop()},function(a){(m===e.advance?g.openBoundary:g.closeBoundary)(r,
c);return l(b,c,m,f,g,h,k)},function(b){return a.stop()})},function(b,c){return a.stop()})}},l=function(a,b,c,d,e,f,g){b=k(a,b,c,d);return m(a,b,d,e,f,g)};return{walk:function(c,d,f,g,k,l){var n=function(a,b){return c.eq(a,f)&&(b!==e.advance||c.property().isText(a)||0===c.property().children(a).length)},w=b.nu(g),z=h(c,d,e.advance,n);a.run(function(){return m(c,z,n,w,k,l)});return w.done()}}});l("16o",["b","7","10s","2w"],function(c,e,d,a){var b=a.immutableBag(["elements","lang","words"],[]);return{fromWalking:function(a,
f){var h=c.map(f,function(a){var e=a.details();a=a.lang();var f=c.map(e,function(a){return a.text()}).join(""),e=c.map(e,function(a){return a.item()}),f=d.words(f);return b({lang:a,words:f,elements:e})});return{zones:e.constant(h)}}}});l("15b","7 t my 15r 16l 16m 16n 16o".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,b,c,d,h,k){return(a.eq(b,c)?e.some(b):a.property().parent(b)).map(function(e){e=g.calculate(a,e).getOr(d);return f.walk(a,b,c,e,h,k)})},m=function(a,b,c,f,g,m){b=d.subset(a,b,
c).bind(function(b){return 0===b.length?e.none():k(a,b[0],b[b.length-1],f,g,m)}).getOr([]);return h.fromWalking(a,b)},l=function(a,c){return function(d,e){return d.eq(e,a.item())?a:d.eq(e,c.item())?c:b.detail(d,e)}},p=function(){return{zones:c.constant([])}};return{fromRange:function(b,d,e,f,g){d=a.getEdges(b,d,e,c.constant(!1));e=l(d.left(),d.right());return m(b,d.left().item(),d.right().item(),f,e,g)},transformEdges:l,fromBounded:function(a,c,d,e,f){return m(a,c,d,e,b.detail,f)},fromBoundedWith:m,
fromInline:function(b,c,d,e){c=a.byBoundary(b,c);var f=l(c.left(),c.right());return c.isEmpty()?p():m(b,c.left().item(),c.right().item(),d,f,e)},empty:p}});l("12g",["7","mf","15b"],function(c,e,d){var a=function(a,c,e,k){return a.property().isBoundary(c)?d.fromBounded(a,c,c,e,k):a.property().isEmptyTag(c)?b():d.fromInline(a,c,e,k)},b=function(){return d.empty()};return{single:a,range:function(b,c,h,k,m,l,p){c=e.toLeaf(b,c,h);k=e.toLeaf(b,k,m);return b.eq(c.element(),k.element())?a(b,c.element(),l,
p):d.fromRange(b,c.element(),k.element(),l,p)},empty:b}});l("yl",["6s","12g"],function(c,e){var d=c();return{single:function(a,b,c){return e.single(d,a,b,c)},range:function(a,b,c,f,h,k){return e.range(d,a,b,c,f,h,k)},empty:function(){return e.empty()}}});l("s1","ji yk 7 yl 4n 2n".split(" "),function(c,e,d,a,b,g){return function(f,h){var k=b(f),m=e(),l=function(b,d,e,f){e=c.cata(e,function(b){return g.inBody(b)?a.single(b,k.get(),h):a.empty()},function(b,c,d,e){return g.inBody(b)&&g.inBody(d)?a.range(b,
c,d,e,k.get(),h):a.empty()});d(b,e,k.get(),f)};return{run:function(a,b,c){l(a,b,c,d.identity)},setLang:k.set,schedule:function(a,b,c,d){m.enqueue(c,function(c,e){void 0!==d&&d()?e():l(a,b,c,e)})},destroy:function(){m.destroy()}}}});l("ym",["b","1q","7"],function(c,e,d){return{update:function(a,b,d){var f=e.keys(d);c.each(f,function(c){a.add(b,c,d[c])});return f},getInCache:function(a,b,e){return c.filter(e,function(c){return a.get(b,c.word()).fold(d.constant(!1),function(a){return a.suggestions().isSome()})})}}});
l("181",["7","ai"],function(c,e){return{anything:c.constant({assess:e.inView})}});l("17r","t mf 181 15r 16l 16m 15b".split(" "),function(c,e,d,a,b,g,f){var h=d.anything(),k=function(a,b,d,e,g,k){a=f.fromBoundedWith(a,b,d,e,k,h).zones();1===a.length?(a=a[0],g=a.lang()===g?c.some(a):c.none()):g=c.none();return g},m=function(a,c,d,e,f){return k(a,c,d,e,f,b.detail)};return{fromRange:function(b,c,d,e,h){var m=g.strictBounder(e,h);c=a.getEdges(b,c,d,m);d=f.transformEdges(c.left(),c.right());return k(b,
c.left().item(),c.right().item(),e,h,d)},fromBounded:m,fromInline:function(b,c,d,h){var l=g.strictBounder(d,h),l=a.getEdges(b,c,c,l),t=f.transformEdges(l.left(),l.right());l.isEmpty()?(t=b.property().isText(c)?b.property().getText(c):b.property().children(c).length,l=e.toLeaf(b,c,0),c=e.toLeaf(b,c,t),b=m(b,l.element(),c.element(),d,h)):b=k(b,l.left().item(),l.right().item(),d,h,t);return b},empty:function(){return c.none()}}});l("17a",["mf","17r"],function(c,e){var d=function(a,b,c,d){return a.property().isBoundary(b)?
e.fromBounded(a,b,b,c,d):a.property().isEmptyTag(b)?e.empty():e.fromInline(a,b,c,d)};return{single:d,range:function(a,b,g,f,h,k,m){b=c.toLeaf(a,b,g);f=c.toLeaf(a,f,h);return a.eq(b.element(),f.element())?d(a,b.element(),k,m):e.fromRange(a,b.element(),f.element(),k,m)}}});l("16p",["6s","17a"],function(c,e){var d=c();return{single:function(a,b,c){return e.single(d,a,b,c)},range:function(a,b,c,f,h,k){return e.range(d,a,b,c,f,h,k)}}});l("15c","b t 16p 21 6o b3 2b".split(" "),function(c,e,d,a,b,g,f){var h=
function(d){return c.bind(d,function(c){return b.descendants(c,a.isText)})};return{textnodes:h,text:function(b){b=h(b);return c.map(b,function(b){return a.isText(b)?g.get(b):""}).join("")},parsed:function(a,b,c){return e.from(a[0]).bind(function(a){return d.single(a,b,c).bind(function(a){a=a.words();return 1===a.length?e.some(a[0]).map(function(a){return a.word()}):e.none()})})},children:function(a){return c.bind(a,f.children)}}});l("12h","b 15c t 3c 2s b3".split(" "),function(c,e,d,a,b,g){return{clobber:function(f,
h){var k=e.children(f),m=e.textnodes(f);return d.from(f[0]).bind(function(e){a.before(e,k);e=d.from(m[0]);e.each(function(a){g.set(a,h)});c.each(m.slice(1),function(a){g.set(a,"")});c.each(f,b.remove);return e})}}});l("12i","11j 14h 14i 7 t i3 1b 2o l".split(" "),function(c,e,d,a,b,g,f,h,k){var m=e.resolve("annotation"),l=e.resolve("lingo"),p=d.resolve("annotation-wrap");return{nu:function(){var a=k.fromTag("span");h.add(a,p);f.set(a,"aria-invalid","spelling");return g.nu(a)},set:function(a,b,c){f.set(a,
m,c);f.set(a,l,b)},label:a.constant(p),detail:function(d){return c.id(d).bind(function(c){return b.from(f.get(d,m)).bind(function(e){return b.from(f.get(d,l)).map(function(b){return{id:a.constant(c),word:a.constant(e),lang:a.constant(b)}})})})}}});l("12j",["b","11j","14i","2o"],function(c,e,d,a){var b=d.resolve("wrap-disabled");return{enable:function(d){d=e.all(d);c.each(d,function(c){a.remove(c,b)})},disable:function(d){d=e.all(d);c.each(d,function(c){a.add(c,b)})}}});l("15d",["2w"],function(c){return c.immutable("id",
"elements","word","lang")});l("15e",[],function(){var c=function(c){return{fold:c}};return{success:function(e){return c(function(c,a){a(e)})},fail:function(e){return c(function(c,a){c(e)})}}});l("12k","b 1q 15d 15e 11j 15c 2n".split(" "),function(c,e,d,a,b,g,f){var h=function(a,e){var g={};c.each(a,function(a){b.marker(a,e.label()).filter(f.inBody).each(function(a){e.detail(a).each(function(c){var e=c.id(),f=c.word();c=c.lang();var h=b.all(a);0<h.length&&(g[e]=d(e,h,f,c))})})});return g},k=function(a,
b,c,d){var e=g.text(a);a=g.parsed(a,c,d);return e===b&&a.is(b)},m=function(b,d,f){b=e.values(b);return c.map(b,function(b){return b.lang()===f&&k(b.elements(),b.word(),d,b.lang())?a.success(b):a.fail(b)})};return{validate:k,verify:function(a,b,d,e,f){b=h(a.elements(),b);a=m(b,f,a.lang());c.each(a,function(a){var b=function(a){return function(b){c.each(b.elements(),a)}};a.fold(b(e),b(d))})}}});l("yr","b 12h 12i xl 11j 12j xm 12k 7 i3 2s".split(" "),function(c,e,d,a,b,g,f,h,k,m,l){var p=function(a){return b.marker(a,
d.label())};return{highlight:function(e,k,p,t){h.verify(k,d,g.enable,l.unwrap,e.lang());p=f.matchWords(k.elements(),p,t);p=f.annotates(p,d.label());return c.bind(p,function(f){return f.current().fold(function(){var g=f.match(),h=g.word();if(e.ignore(g))return[];g=m.wrapper(g.elements(),d.nu)||[];c.each(g,function(a){b.set(a,f.id());d.set(a,k.lang(),h)});return[a.created(g)]},function(b){return[a.preserved(b)]})})},marker:p,substitute:function(a,c){var d=p(a).fold(k.constant([]),b.all);return e.clobber(d,
c)},detail:function(a){return d.detail(a)}}});l("yn",["b","yr","7"],function(c,e,d){return{highlight:function(a,b,g,f){var h={operation:a,internal:a,ignore:d.constant(!1),lang:d.constant(f)},k=c.map(g,function(a){return a.word()}),m=c.filter(k,function(a,b){return c.indexOf(k,a)===b});h.operation(function(){e.highlight(h,b,m,d.constant(!1))})}}});l("yo","ym yj b 3v 7 p n".split(" "),function(c,e,d,a,b,g,f){var h=function(c,h){return a.nu(function(a){var l={words:d.map(c.words(),function(a){return e.clean(a.word())})};
h.correction(l,c.lang(),function(d){d=g.value({spelling:b.constant(d),zone:b.constant(c)});a(d)},function(b){b=g.error(new f(b));a(b)})})};return{scan:function(f,g,l){var p=function(a){var g=a.zone(),h=c.update(f,g.lang(),a.spelling());a=d.filter(g.words(),function(a){a=e.clean(a.word());return d.contains(h,a)});return{zone:b.constant(g),words:b.constant(a)}};l=d.map(l,function(a){return h(a,g)});return a.par(l).map(function(a){a=d.bind(a,function(a){return a.fold(b.constant([]),d.pure)});return d.map(a,
p)})}}});l("s2",["ym","yn","yo","b","7"],function(c,e,d,a,b){return function(g,f){var h=function(d){return a.map(d,function(a){var d=c.getInCache(g,a.lang(),a.words());return{zone:b.constant(a),words:b.constant(d),lang:a.lang}})},k=function(b,c,d){a.each(c,function(a){e.highlight(b,a.zone(),a.words(),d)})};return{local:function(a,b,c,d){b=b.zones();b=h(b);k(a,b,c);d()},remote:function(a,b,c,e){b=b.zones();d.scan(g,f,b).get(function(b){k(a,b,c);e()})},destroy:b.noop}}});l("s3",["t","o"],function(c,
e){return{active:function(d){var a={};d.autocorrect().get(function(b){b.fold(function(a){e.log("Error loading autocorrect list")},function(b){a=b.corrections})});return{lookup:function(b){return a.hasOwnProperty(b)?c.from(a[b]):c.none()}}},inactive:function(){return{lookup:c.none}}}});l("12l",["nx","nt","7"],function(c,e,d){c=e.objOf([c.strict("language"),c.strict("words")]);return{many:d.constant(c)}});l("12m","ir b 1q 31 89 f8 fa 7".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a,b){return c.readOptFrom(a,
b).getOrThunk(function(){return g()})},m=a.generate("good-spelling");return{execute:function(a,g,l,q,s,t){var u=k(g,l);t=f.multiple(function(b,c){return a.execute({language:l,words:b})},u,q,function(a){return a.spell},h.identity,s,void 0!==t?t:!1);g[l]=u;return b.mapSync(t,function(a){e.each(q,function(b){c.hasKey(a,b)||u.set(b,m,s)});var b={};d.each(a,function(a,c){u.get(s,c).is(m)||(b[c]=a)});return b})},initCaches:function(a){var b={};d.each(void 0!==a?a:{},function(a,c){b[c]=g(a)});return b},
correct:h.constant(m)}});l("yp",["1q","f9","fb","12l","12m"],function(c,e,d,a,b){return function(g,f,h){var k=b.initCaches(h),m=e.post("ephox.spelling.service.many",a.many(),g,f);return{checkMany:function(a,c,e){e=d.now();return b.execute(m,k,a,c,e)},dumpCache:function(){return c.map(k,function(a){return a.dump()})}}}});l("yq",["7","w"],function(c,e){var d={image:c.constant("1"),spelling:c.constant("1")};return{corsQuery:function(a){return e.ensureTrailing(a,"/")+"version"},spelling:function(a){var b=
d.spelling();return e.ensureTrailing(a,"/")+b+"/"}}});l("s4","6 ia 2m yp 7 hf yq 58 4a o".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(l,p,r,q,s){var t=f.spelling(p),u=a(t+"correction",l.mediatorHeaders(),s),v=k.create({failed:h(["resource"])});s=d.nu(function(a){var b=c.merge(l.headers(),{dataType:"json"});e.get(t+"autocorrect?language="+r,b).get(a)});var w=g.bind(s,function(){return u.checkMany(r,["startup"],!0)});w.get(function(a){a.fold(function(a){m.error("Unable to communicate with the spelling service:",
a);v.trigger.failed(p)},b.noop)});return{correction:function(a,b,c,d){w.get(function(e){e.fold(d,function(){u.checkMany(q?b:r,a.words).get(function(a){a.fold(function(a){m.error("Error response from the spelling service:",a);d(a)},function(a){c(a)})})})})},autocorrect:b.constant(s),events:v.registry,state:function(){return u.dumpCache()}}}});l("jm","s1 s2 s3 68 s4 58 4a i6 fy d3".split(" "),function(c,e,d,a,b,g,f,h,k,m){return function(l){var p=l.content(),r=l.profile(),q=b(l.communication(),l.url(),
l.language(),l.multilingual(),l.fromServiceState()),s=l.autocorrectOn()?d.active(q):d.inactive(),t=f.create({failed:g(["resource"])}),u=function(a){t.trigger.failed(a.resource())};q.events.failed.bind(u);var v=c(l.language(),l.viewable().viewport()),w=e(l.cache(),q),z=function(a){p.body().each(function(b){h.filterDom(b,[k("."+a,m.unwrap)])})},x=function(){return!a.isOn(r.spelling().get())},y=function(){z("ephox-cram-annotation-wrap")};return{run:function(b,c){var d=r.spelling().get();a.isOn(d)&&(v.setLang(d),
v.run(b,w.local,c),v.schedule(b,w.remote,c,x))},refresh:function(){var b=r.spelling().get();a.isOn(b)||y()},clear:y,lookup:s.lookup,destroy:function(){q.events.failed.unbind(u);v.destroy();w.destroy()},state:q.state,events:t.registry}}});l("yt",["7","59"],function(c,e){var d=function(a){a="data-"+e.resolve(a);return c.constant(a)};return{value:d("spelling-value"),type:d("spelling-type"),overflow:d("spelling-overflow"),overflowMenu:d("spelling-overflow-menu"),spelling:d("spelling-suggestion")}});l("ys",
["yt","7e","2w"],function(c,e,d){var a=d.immutable("primary","secondary","submenus"),b=d.immutable("value","text","attrs"),g=d.immutable("textkey","value","items");return{generate:function(d,h){var k;if(d.length>h){k=d.slice(0,h);var m=b(c.overflow(),e.translate("spelling.context.more"),{}),l=d.slice(h),p={};p[c.overflow()]=c.overflowMenu();l=g(e.key("spelling.context.morelabel"),c.overflowMenu(),l);k=a(k.concat([m]),[l],p)}else k=a(d,[],{});return k}}});l("yu","yr t yt 58 4a 1b".split(" "),function(c,
e,d,a,b,g){return function(){var f=b.create({incorrect:a(["substitution"])}),h=e.none(),k={};k[d.spelling()]=function(a){h.each(function(b){b=c.substitute(b,g.get(a,d.value()));f.trigger.incorrect(b)})};return{assign:function(a){h=a},run:function(a){var b=g.get(a,d.type()),b=k[b];void 0!==b&&b(a)},events:f.registry}}});l("s5","b yr 7 ii ys yt yu 2w".split(" "),function(c,e,d,a,b,g,f,h){var k=h.immutable("value","text","attrs");return function(h,l,p){var r=f();r.events.incorrect.bind(function(b){l.save();
h.focus();h.domChanged();b.substitution().each(function(b){a.selectEnd(h,b)})});var q=d.curry(function(a,b,d,e){return a.marker(e).bind(a.detail).bind(function(a){return d(a).map(function(a){return c.map(a,function(a){var c={};c[g.type()]=b;c[g.value()]=a;return k(a,a,c)})})})},e,g.spelling(),function(a){return p.suggestions(a.lang(),a.word())});return{assign:r.assign,handle:function(a){r.run(a)},situation:function(a){a=q(a).getOr([]);return b.generate(a,4)},destroy:d.noop}}});l("s6",["7","ak","58",
"4a"],function(c,e,d,a){return function(b,g){var f=a.create({lookup:d(["element"])}),h=function(a){b.getSelection().each(a)},k=function(){h(function(a){f.trigger.lookup(a.startContainer())})};b.events.keyup.bind(function(a){e.isSpace(a)&&k()});b.events.nodeChanged.bind(function(a){a.prev().each(f.trigger.lookup)});return{events:f.registry,destroy:c.noop}}});l("jn","ji c k2 7 fh bw s5 s6 e5 q".split(" "),function(c,e,d,a,b,g,f,h,k,m){var l=e.detect().browser;return function(e,m,q,s,t,u,v,w,z){var x=
f(m,t,w),y=h(m,q),A=function(c){m.getSelection().each(function(e){var f=b.toLeaf(e.endContainer(),e.endOffset()),g=b.toLeaf(e.startContainer(),e.startOffset()),h;(h=e.collapsed())||(h=!l.isIE())||(h=k.after(e.endContainer(),e.endOffset(),e.startContainer(),e.startOffset()));e=h&&!l.isFirefox()?d(g.element(),g.offset(),f.element(),f.offset()):e;return(h?s.lightweightWith:a.apply)(c,e)})},B=g.tap(function(a){a=a.element();a=c.single(a);C(a)});y.events.lookup.bind(function(a){B.instance(a)});var C=function(a){z.run(A,
a)};return{destroy:function(){x.destroy();y.destroy()},scan:C,situation:x.situation,lock:function(a){var b=B.control.isBlocked();B.control.block();a();b||B.control.unblock()},assign:x.assign,handle:x.handle}}});l("be","ji jj b 7 t fg fh co jk jl 68 jm jn cl 9a 58 4a 2w 1b 2b".split(" "),function(c,e,d,a,b,g,f,h,k,m,l,p,r,q,s,t,u,v,w,z){var x=v.immutableBag("communication profile content undo viewable cache url autocorrectOn language fromServiceState multilingual".split(" "),[]);return function(v,
A,B,C,D){D=A.language.getOr(D);var F=v.communication(),E=v.profile(),G=v.filter(),H=v.content(),L=v.operations(),I=v.undo(),J=v.smartview(),K=v.shortcuts(),N=v.context(),M=v.viewablearea();k.configure(G);v.profile().spelling().set(D);var O=e(A.words),S=p(x({communication:F,profile:E,content:H,undo:I,viewable:M,cache:O,url:B.url,autocorrectOn:B.autocorrect,language:C,fromServiceState:A.service,multilingual:B.multilingual})),P=b.none();A=u.create({analytics:t(["message"])});S.events.failed.bind(function(a){a=
s.get("error.code.spelling.not.found",[a.resource()]);a=h(a);v.ui().displayBanner(a)});H.events.ready.bind(function(a){H.body().each(function(a){w.set(a,"spellcheck",!1)});a=a.api().doc();a=r(a,H,N,L,I,K,J,O,S);S.refresh();P=b.some(a)});C=m(v,C,B.menu);C.events.change.bind(function(a){(l.isOn(a.language())?Q:S.clear)();H.uiChanged();H.domChanged()});var U=function(a){d.each(a,function(a){a=c.single(a);V(a)})},Q=B.scanView?function(){var a=M.sections();U(a)}:S.clear;B.scanView&&M.events.onChange.bind(Q);
var V=function(a){P.each(function(b){b.scan(a)})};return q({events:A.registry,destroy:function(){H.body().each(function(a){w.remove(a,"spellcheck")});P.each(function(a){a.destroy()});O.destroy();S.destroy()},state:function(){return{words:O.state(),service:S.state(),language:b.some(v.profile().spelling().get())}},init:a.noop,hasDropdown:C.hasDropdown,hasAutocorrect:a.constant(B.autocorrect),ui:C.ui,check:function(a,b,d,e){a=k.isWrap(a)?f.toLeaf(a,b):g.point(a,b);d=k.isWrap(d)?f.toLeaf(d,e):g.point(d,
e);d=c.range(a.element(),a.offset(),d.element(),d.offset());V(d)},scanView:Q,situation:function(b){var c={primary:a.constant([]),secondary:a.constant([]),submenus:a.constant({})};return P.fold(a.constant(c),function(a){return a.situation(b)})},lock:function(a){return P.fold(function(){return a()},function(b){return b.lock(a)})},assign:function(a){P.each(function(b){b.assign(a.bind(z.firstChild).or(a))})},handle:function(a){P.each(function(b){b.handle(a)})},lookup:S.lookup,name:a.constant("spelling")})}});
l("63",["bd","be"],function(c,e){return function(d,a,b,g,f){return(!0===b.service?e:c)(d,a,b,g,f)}});l("jp","87 7 ee 2o l 2q 2b".split(" "),function(c,e,d,a,b,g,f){var h=function(e){e=b.fromTag(e);var f=b.fromText(c.zeroWidth());g.append(e,f);a.add(e,d.styleSpan());return e},k=function(a,b,c,d){var e=h(d);f.firstChild(e).each(function(d){a(c,e);b.setSelection(d,0,d,0)})};return{nu:h,insertAfter:e.curry(k,g.after),insertBefore:e.curry(k,g.before)}});l("bk","b c 7 t fg fh jq 7o gn bq 1c 21 b3".split(" "),
function(c,e,d,a,b,g,f,h,k,m,l,p,r){var q=e.detect().browser,s=function(a,b){return g.toLeaf(a,b)},t=function(a){return p.isText(a)&&0!==r.get(a).trim().length},u=function(a){return p.isElement(a)&&"br"===p.name(a)},v=function(a){return c.exists([t,u],function(b){return b(a)})},w=function(a){return p.isText(a.element())&&0===a.offset()||p.isElement(a.element())},z=function(c,e,g){var h=d.constant(c);return(!1===e&&w(c)?a.some(!0):a.none()).fold(h,function(a){return f.seekLeft(c.element(),v,g).fold(h,
function(a){return b.point(a,p.isText(a)?r.get(a).length:0)})})},x=function(a,b){return l.eq(a.element(),b.element())};return{context:function(b){return b.getSelection().bind(function(c){if(c.collapsed()){var e=c.startContainer();return m.cell(e,b.isRoot).bind(function(a){return m.table(e,b.isRoot).map(function(b){return{cell:d.constant(a),table:d.constant(b),start:d.constant(e),selection:d.constant(c)}})})}return a.none()})},selectedCells:function(a,c){return h.cata(a.get(),d.constant([]),d.identity,
function(a){var d=q.isFirefox()?s(a.startContainer(),a.startOffset()):b.point(a.startContainer(),a.startOffset()),e=q.isFirefox()?s(a.endContainer(),a.endOffset()):b.point(a.endContainer(),a.endOffset());a=z(e,a.collapsed()||x(d,e),c);return k.sharedOne(function(a){return m.cell(a,c)},[d.element(),a.element()]).toArray()})}}});l("s7",[],function(){var c=function(c){return{fold:c}};return{none:function(e){return c(function(c,a,b,g){return c(e)})},first:function(e){return c(function(c,a,b,g){return a(e)})},
middle:function(e,d){return c(function(a,b,c,f){return c(e,d)})},last:function(e){return c(function(c,a,b,g){return g(e)})}}});l("jr","b 7 t s7 bq 1c".split(" "),function(c,e,d,a,b,g){var f=function(a,f){return b.table(a,f).bind(function(f){f=b.cells(f);var k=c.findIndex(f,function(b){return g.eq(a,b)});return 0>k?d.none():d.some({index:e.constant(k),all:e.constant(f)})})};return{next:function(b,c){return f(b,c).fold(function(){return a.none(b)},function(c){return c.index()+1<c.all().length?a.middle(b,
c.all()[c.index()+1]):a.last(b)})},prev:function(b,c){return f(b,c).fold(function(){return a.none()},function(c){return 0<=c.index()-1?a.middle(b,c.all()[c.index()-1]):a.first(b)})}}});l("bf","jo 7 jp ge bk jr".split(" "),function(c,e,d,a,b,g){return{upOrLeft:function(f){b.context(f).each(function(b){g.prev(b.cell()).fold(e.noop,function(){a.isFirstInContent(f,b.table())&&c.isLeft(b.cell(),b.selection())&&d.insertBefore(f,b.table(),"p")},e.noop,e.noop)})},right:function(f){b.context(f).each(function(b){g.next(b.cell()).fold(e.noop,
e.noop,e.noop,function(){a.isLastInContent(f,b.table())&&c.isRight(b.cell(),b.selection())&&d.insertAfter(f,b.table(),"p")})})}}});l("bh","b 8e 7 hx 7e bk 7f 7m 58 4a 4b 2p 30".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r){var q={cssNamespace:"table-cell-border",i18nNamespace:"table.cell.border",property:"border-width",tag:"table",specials:[["thin","medium","thick"]]};return{widget:function(s){var t=s.content(),u=a(q);u.initLayout();e.dialog(u.element(),b.translate("aria.table.cell.border.size"));
var v=l.create({done:k([]),abort:n([],u.events.abort)});u.events.close.bind(function(a){v.trigger.done();t.focus()});u.events.action.bind(function(a){var b=r.active();t.focus();var e=g.selectedCells(s.selections(),t.isRoot);c.each(e,function(b){p.set(b,"border-width",a.value());p.getRaw(b,"border-style").fold(function(){p.set(b,"border-style","solid")},d.noop)});b.each(r.focus)});var w=function(){u.enter();u.open()};return{element:u.element,destroy:u.destroy,name:d.constant("cellborderwidth"),textkey:d.constant(b.key("table.cell.border.width")),
tooltip:f.get,label:d.constant(!1),updateWidget:function(a){var b=g.selectedCells(s.selections(),t.isRoot);0<b.length?(a.enable(),a=p.getRaw(b[0],"border-width").fold(h.off,h.on),u.updateInlineWidget({size:d.constant(a)},"1px")):a.disable();w()},events:v.registry,open:w,close:u.close}}}});l("bi","8e dk 52 7 53 js 7e bk 59 7f 58 4a 2w 4e 2q".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s){var t=r.immutableBag(["name","textkey","menuTextkey","action","shortname"],[]);return{widget:function(r,v){var w=
t(v),z=r.content(),x=d.div();c.label(x,f.translate(w.textkey()));q.add(x,[k.resolve("palette-cell-colors"),k.resolve(w.shortname()+"-cell-colors")]);var y=g.create();s.append(x,y.element());var A="."+k.resolve(w.shortname()+"-cell-colors")+" ."+k.resolve("palette-detail-action"),B=g.makeLayout(x,A,{}),A=B.layout(),C=p.create({done:n([]),abort:n([])});y.events.selected.bind(function(a){a=a.value();var b=h.selectedCells(r.selections(),z.isRoot);w.action()(b,a);C.trigger.done()});var D=function(){F.enter();
B.refresh()},F=e(x,[A]);F.events.exit.bind(function(){C.trigger.abort()});return{element:a.constant(x),destroy:function(){F.destroy();y.destroy()},name:a.constant(w.name()),textkey:a.constant(f.key(w.textkey())),tooltip:l.get,label:a.constant(!1),updateWidget:function(a){b.isHighContrast(r.smartview())?a.disable():(0===h.selectedCells(r.selections(),z.isRoot).length?a.disable():a.enable(),D())},events:C.registry,open:D,close:function(){C.trigger.done()}}}}});l("yv",["1b","2p","l","2q","3c"],function(c,
e,d,a,b){return{render:function(g,f,h,k){var l=d.fromTag("table");e.setAll(l,{"border-collapse":"collapse",width:"100%"});c.set(l,"border","1");var n=d.fromTag("tbody");a.append(l,n);for(var p=[],r=0;r<g;r++){for(var q=d.fromTag("tr"),s=0;s<f;s++){var t=r<h||s<k?d.fromTag("th"):d.fromTag("td");s<k&&c.set(t,"scope","row");r<h&&c.set(t,"scope","col");a.append(t,d.fromTag("br"));e.set(t,"width",100/f+"%");a.append(q,t)}p.push(q)}b.append(n,p);return l}}});l("s8",["yv"],function(c){return{render:c.render}});
l("jt",["t","86","bq","s8"],function(c,e,d,a){return{insert:function(b,g,f,h,k){return b.getSelection().bind(function(l){var n=a.render(g,f,h,k);e.insertAtCursor(b,[n]).each(function(a){d.firstCell(n).each(function(a){b.setSelection(a,0,a,0)})});return c.some(n)})}}});l("yw","8e fp aq 52 m0 7 7e 59 1b 2o 4e 30 2q".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r){return function(q){var s=b(q);l.add(s.element(),h.resolve("choice-button"));var t=a.span();k.set(s.element(),"title",f.translate("table."+
q));k.set(s.element(),"tabindex","-1");c.button(s.element(),f.translate("table."+q),!1);var u=d.describe(s.element(),f.translate("aria.table.headerdescription"));r.append(s.element(),u);s.events.click.bind(function(){p.focus(s.element());e.pressed(s)});n.add(t,[h.resolve(q),"ephox-pastry-icon-content","ephox-polish-icon"]);s.content({element:g.constant(t)});return s}});l("15g",["7","sh"],function(c,e){var d=e.resolve("table-picker"),a=e.resolve("table-picker-row"),b=e.resolve("table-picker-cell"),
g=e.resolve("table-picker-button");return{table:c.constant(d),row:c.constant(a),cell:c.constant(b),button:c.constant(g)}});l("15f","go 15g 1b 4h 33 e9".split(" "),function(c,e,d,a,b,g){var f="."+e.cell(),h="."+e.row();return{cells:function(b){return a.descendants(b,f)},rows:function(b){return a.descendants(b,h)},grid:function(a,b,e){b=g(d.get(a,b),10);a=g(d.get(a,e),10);return c.grid(b,a)},button:function(a){return b.child(a,"."+e.button()).getOr(a)}}});l("16q",["7","go","1u"],function(c,e,d){var a=
function(a,b,c,k,l){k=d.max(k,d.min(l,a.row()));a=d.max(b,d.min(c,a.column()));return e.address(k,a)},b=function(b,d){var h=a(b,1,d.maxCols,1,d.maxRows),k;k=e.address(h.row()+1,h.column()+1);k=a(k,d.minCols,d.maxCols,d.minRows,d.maxRows);return{selection:c.constant(h),full:c.constant(k)}};return{resize:function(a,c){var d;d=e.address(a.row()+1,a.column()+1);return b(d,c)},grow:function(a,c,d,k){a=e.address(a.rows()+d,a.columns()+c);return b(a,k)}}});l("15h","go 16q 30 5a 3o 2t 1u".split(" "),function(c,
e,d,a,b,g,f){return function(f,k){var l=!1,n=function(a,b,c){var e=c.full();e.row()===b.rows()&&e.column()===b.columns()||a.setSize(e.row(),e.column());a=a.setSelection(c.selection().row(),c.selection().column());d.focus(a)};return{on:function(){l=!0},off:function(){l=!1},mousemove:function(d,r,q,s){if(l){var t;t=g.get(d.element());var u=a.get(d.element());t=c.dimensions(t,u);u=b.absolute(d.element());u=c.coords(u.left(),u.top());q=c.coords(q,s);q=f.pickerCell(u,t,r,q);q=e.resize(q,k);n(d,r,q)}},
manual:function(a,b,c,d){l&&(c=e.grow(b,c,d,k),n(a,b,c))}}}});l("12n","b y1 8e 7 58 4a go 15f 15g 15h sh ty 1b 2o 4e 3y l 30 2q 3c gq 2s e9".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z,x,y,A){return function(e,C,D){var F=g.create({select:b(["rows","cols","rowHeaders","columnHeaders"])}),E=u.fromTag("table");d.presentation(E);d.hidden(E,!0);q.add(E,k.table());var G=u.fromTag("tbody");w.append(E,G);var H=0,L=0,I=function(a,b){H=b;L=a;J()},J=function(){y.empty(G);var a=D.ids();p.repeat(L,
function(b){var c=u.fromTag("tr");q.add(c,k.row());var d=p.repeat(H,function(c){var d=u.fromTag("td");q.add(d,n.resolve("cell-"+c+"-"+b));q.add(d,k.cell());var e=u.fromTag("button");r.set(e,"type","button");r.set(e,"aria-labelledby",a[b][c]);q.add(e,k.button());w.append(d,e);return d});z.append(c,d);w.append(G,c)})},K=function(a,b){var d=h.cells(E);c.each(d,function(a){q.remove(a,n.resolve("picker-selected"))});d=h.rows(E).slice(0,a);c.each(d,function(a,d){var e=h.cells(a).slice(0,b);c.each(e,function(a,
b){var c=h.grid(E,"data-picker-header-row","data-picker-header-col"),c=d<c.rows()||b<c.columns()?[n.resolve("picker-selected"),n.resolve("picker-header")]:[n.resolve("picker-selected")];s.add(a,c)})});r.set(E,"data-picker-col",b-1);r.set(E,"data-picker-row",a-1);d=h.cells(d[d.length-1]).slice(0,b);return h.button(d[d.length-1])},N=function(){var a=A(r.get(E,"data-picker-col"),10)+1,b=A(r.get(E,"data-picker-row"),10)+1;return f.grid(b,a)},M={element:a.constant(E),setSelection:K,setSize:I},O=l(e,C),
S=t.bind(E,"mousemove",function(a){O.mousemove(M,f.grid(L,H),a.raw().pageX,a.raw().pageY)}),P=function(a,b){O.manual(M,N(),a,b)},U=x.realClick.bind(E,function(a){Q();a.raw().preventDefault()}),Q=function(){var a=h.grid(E,"data-picker-row","data-picker-col"),b=h.grid(E,"data-picker-header-row","data-picker-header-col");F.trigger.select(a.rows()+1,a.columns()+1,b.rows(),b.columns())};return{element:function(){return E},destroy:function(){U.unbind();S.unbind();y.remove(E)},setSize:I,setHeaders:function(a,
b){r.set(E,"data-picker-header-row",a);r.set(E,"data-picker-header-col",b)},setSelection:K,on:O.on,off:O.off,reset:function(){I(C.minRows,C.minCols);var a=K(1,1);v.focus(a)},refresh:function(){var a=N();J();return K(a.rows(),a.columns())},events:F.registry,sendLeft:a.curry(P,e.isRtl()?1:-1,0),sendRight:a.curry(P,e.isRtl()?-1:1,0),sendUp:a.curry(P,0,-1),sendDown:a.curry(P,0,1),sendExecute:Q}}});l("yx",["12n"],function(c){return function(e,d,a){return c(e,d,a)}});l("s9","y1 8e fp aq h2 92 lf ar 52 7 t yw 7e 59 4a 4b yx 1b 2o 4e l 30 3c 33".split(" "),
function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z,x,y,A,B){return function(k,D){var F=c.createHelp(D.maxRows,D.maxCols,{row:function(a){return r.translate("table.picker.rows",a)},col:function(a){return r.translate("table.picker.cols",a)}}),E=u(k,D,F);e.label(E.element(),r.translate("table.picker.label"));var G=a.describe(E.element(),r.translate("table.picker.describepicker")),H=x.fromTag("div");v.set(H,"tabIndex","-1");e.group(H);z.add(H,[q.resolve("insert-table"),q.resolve("toolbar-menu")]);var L=
x.fromTag("div");w.add(L,q.resolve("table-controls"));e.toolbarGroup(L,r.translate("table.picker.header"));var I=p("row-header"),J=p("column-header");A.append(L,[I.element(),J.element()]);A.append(H,[L,E.element(),G,F.help()]);var K=function(){E.setHeaders(I.selected()?1:0,J.selected()?1:0);var a=y.active(),b=E.refresh();a.each(function(a){y.hasFocus(a)||y.focus(b)})},F=function(a,b){return function(){b();return n.some(!0)}},F=g.single(E.element(),[f.basic(h.LEFT()[0],F("left",E.sendLeft)),f.basic(h.RIGHT()[0],
F("right",E.sendRight)),f.basic(h.UP()[0],F("up",E.sendUp)),f.basic(h.DOWN()[0],F("down",E.sendDown)),f.rule(f.inSet(h.SPACE().concat(h.ENTER())),F("execute",E.sendExecute))],n.none());F.events.enter.bind(function(){y.focus(E.element())});var N=g.flow(L,{item:l.constant(".ephox-pastry-statebutton")},b.flow({trigger:function(a){return B.descendant(a,".ephox-pastry-button").map(function(a){a.dom().click();return a})}})),M=g.multiple(H,[F,N]);I.events.click.bind(function(){N.clickFocus(I.element());
K()});J.events.click.bind(function(){N.clickFocus(J.element());K()});L=s.create({select:t(["rows","cols","rowHeaders","columnHeaders"],E.events.select),exit:t([],M.events.exit)});return{element:function(){return H},destroy:function(){M.destroy();I.destroy();J.destroy();E.destroy()},setSize:E.setSize,setSelection:E.setSelection,on:function(){E.on();M.enter()},off:function(){E.off();M.isFocused()&&M.exit()},reset:function(){E.setHeaders(0,0);I.deselect();d.release(I.element());J.deselect();d.release(J.element());
E.reset()},events:L.registry}}});l("ju",["6","s9","58","4a"],function(c,e,d,a){return function(b,g){var f=a.create({enabled:d(["enabled"]),select:d(["rows","cols","rowHeaders","columnHeaders"]),insert:d(["table"]),done:d([]),abort:d([])}),h=c.merge({minCols:7,maxCols:10,minRows:4,maxRows:10},g),k=e(b,h);k.events.select.bind(function(a){l();f.trigger.done();f.trigger.select(a.rows(),a.cols(),a.rowHeaders(),a.columnHeaders())});k.events.exit.bind(function(){l();f.trigger.abort()});var l=function(){k.off()};
return{element:k.element,open:function(){k.reset();k.on()},close:l,destroy:function(){k.destroy()},events:f.registry}}});l("sa",["go","1u"],function(c,e){var d=function(a,b,d,f){var h=a.width()/b.columns();a=a.height()/b.rows();d=e.floor(d/h);f=e.floor(f/a);return c.address(f,d)};return{findCellRtl:function(a,b,c,e){var h=a.x()+b.width()-e.x();a=e.y()-a.y();return d(b,c,h,a)},findCellLtr:function(a,b,c,e){var h=e.x()-a.x();a=e.y()-a.y();return d(b,c,h,a)}}});l("jv",["7","sa"],function(c,e){var d=
{pickerCell:e.findCellLtr,isRtl:c.constant(!1)},a={pickerCell:e.findCellRtl,isRtl:c.constant(!0)};return{ltr:d,rtl:a}});l("bj","7 jt ju 7e 7f 4a 4b jv".split(" "),function(c,e,d,a,b,g,f,h){return{widget:function(k,l){var n=k.content(),p=d(k.region().uiDirection().isRtl()?h.rtl:h.ltr,l),r=k.undo(),q=g.create({done:f([],p.events.done),abort:f([],p.events.abort)});p.events.select.bind(function(a){r.save();e.insert(n,a.rows(),a.cols(),a.rowHeaders(),a.columnHeaders()).each(function(a){r.save();n.domChanged()});
n.toEditing()});return{element:p.element,name:c.constant("table"),textkey:c.constant(a.key("insert.table")),menuTextkey:c.constant(a.key("table.menu")),tooltip:b.get,label:c.constant(!1),updateWidget:function(a){n.getSelection().each(function(b){a.enable()});p.open()},destroy:p.destroy,events:q.registry,open:p.open,close:p.close}}}});l("yy",["33"],function(c){return{set:function(c,d){c.dom().checked=d},find:function(e){return c.descendant(e,"input:checked")}}});l("sb","31 7 h4 7e 1b yy l 2q 3c 2s 34".split(" "),
function(c,e,d,a,b,g,f,h,k,l,n){return function(){var p=f.fromTag("fieldset"),r=f.fromHtml("<legend>"+a.translate("table.border")+"</legend>");h.append(p,r);var q=c.generate(""),r=function(a){var c=f.fromTag("input");b.setAll(c,{type:"radio",id:"tableborder"+a+q,value:a,name:q});return c},s=r("1"),t=r("0");k.append(p,[s,f.fromHtml('<label for="tableborder1'+q+'">'+a.translate("border.on")+"</label>"),t,f.fromHtml('<label for="tableborder0'+q+'">'+a.translate("border.off")+"</label>")]);var u=d.radio(p,
'input[type="radio"]',"input:checked");return{element:function(){return p},get:function(){return g.find(p).map(function(a){return n.get(a)})},select:function(a){g.set(t,!1);g.set(s,!1);a.each(function(a){"0"===a?g.set(t,!0):"1"===a&&g.set(s,!0)});u.refresh()},keylayout:e.constant(u),destroy:function(){l.remove(p)}}}});l("sc","b h2 92 52 7 t m1 q4 59 1b 2o 3y 3c 2s 34".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s){return function(){var t=a.div();n.add(t,k.resolve("table-size-controls"));var u=
f.input("table-width","table.width"),v=f.input("table-height","table.height");c.map([u,v],function(a){l.set(a.input(),"placeholder","Auto")});r.append(t,[u.element(),v.element()]);var w=[d.input(u.input(),e.input({})),d.input(v.input(),e.input({}))],z=function(a){var b=a.target();h.validateField(b,"width",g.some("px")).fold(function(){h.highlight(b)},function(a){h.dehighlight(b)})},x=[p.bind(u.input(),"input",z),p.bind(v.input(),"input",z)];return{element:function(){return t},get:function(){return h.validate([h.rule(u.input(),
"width",g.some("px")),h.rule(v.input(),"height",g.some("px"))])},set:function(a){a.width().bind(b.curry(s.set,u.input()));a.height().bind(b.curry(s.set,v.input()))},keylayouts:b.constant(w),highlight:h.highlight,dehighlight:b.curry(h.clearHighlights,t),destroy:function(){q.remove(t);c.each(x,function(a){a.unbind()})}}}});l("jy","7 t sd 2w e2 1b 2p e8 2g 2s 33".split(" "),function(c,e,d,a,b,g,f,h,k,l,n){var p=a.immutableBag(["floatval","caption","summary","border","dimensions"],[]),r=function(a){a=
g.get(a,"border");return"0"===a||"1"===a?e.some(a):e.none()},q=function(a){var b=f.getRaw(a,"width");a=f.getRaw(a,"height");return{width:c.constant(b),height:c.constant(a)}};return{divine:function(a,b){var c=h.divine(b),d=g.get(b,"summary"),e=n.child(b,"caption").map(function(b){b=k.get(b);return a.filterHtml(a.output(),b)}).getOr(""),f=r(b),l=q(b);return p({floatval:c,caption:e,summary:d,border:f,dimensions:l})},properties:p,apply:function(a,c){c.floatval().each(function(c){b.runFloat(a,c)});c.border().each(function(b){g.set(a,
"border",b)});""===c.summary()?g.remove(a,"summary"):d.setSummary(a,c.summary());""===c.caption()?n.child(a,"caption").each(l.remove):d.setCaption(a,c.caption());d.setDimensions(a,c.dimensions())}}});l("jx","h2 92 52 7 t h3 h4 m1 q5 sb sc jy 7e h5 59 58 4a 2o 3c 34".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z){return function(x,y){var A=u.create({ok:t(["properties"]),close:t([])}),B=g(y);B.setTitle(r.translate("table.dialog"));v.add(B.element(),s.resolve("dialog-narrow"));var C=d.div(),
D=k("table.float"),F=h.input("tablesummary","table.summary"),E=h.input("tablecaption","table.caption"),G=n(),H=l();w.append(C,[E.element(),F.element(),H.element(),G.element(),D.element()]);var L=q.okCancel("table");L.events.ok.bind(function(){N()});L.events.cancel.bind(function(){B.hide();A.trigger.close()});B.events.close.bind(function(){B.hide();A.trigger.close()});B.setContent(C);B.setControls(L.element());var I=f.setup(B,L,[e.input(E.input(),c.input({})),e.input(F.input(),c.input({})),H.keylayout()].concat(G.keylayouts()).concat([D.keylayout()])),
J=function(){return G.get().map(function(c){c={width:a.constant(b.some(c.width())),height:a.constant(b.some(c.height()))};return p.properties({floatval:D.get(),caption:K(E.input()),summary:K(F.input()),border:H.get(),dimensions:c})})},K=function(a){return z.get(a).trim()},N=function(){J().fold(function(a){G.highlight(a)},function(a){A.trigger.ok(a)})};return{element:B.element,events:A.registry,open:function(){B.show();I.enter()},represent:function(a){a=p.divine(x,a);D.select(a.floatval());void 0!==
a.summary()&&z.set(F.input(),a.summary());void 0!==a.caption()&&z.set(E.input(),a.caption());G.set(a.dimensions());H.select(a.border())},execute:N,destroy:function(){D.destroy();G.destroy();H.destroy();L.destroy();B.destroy();I.destroy()},hide:function(){I.exit();B.hide()}}}});l("k0",["se"],function(c){return{halve:function(e,d){var a=c.getWidth(e);c.setWidth(e,a/2);c.setWidth(d,a/2)}}});l("bl","b gg gi 7 t du jw jx jy 7e 9w jz 2w k0 bq k1 1b 21 33".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,
s,t,u,v,w){return function(z,x,y,A,B,C,D,F){var E=b.none(),G={"tablemenu-delete-table":f.erase,"delete-row":f.execute(x,t.eraseRows,a.noop,F),"delete-column":f.execute(x,t.eraseColumns,a.noop,F),"make-header-column":f.execute(x,t.makeColumnHeader,a.noop,F),"make-header-row":f.execute(x,t.makeRowHeader,a.noop,F),"unmake-header-column":f.execute(x,t.unmakeColumnHeader,a.noop,F),"unmake-header-row":f.execute(x,t.unmakeRowHeader,a.noop,F),"insert-row-before":f.execute(x,t.insertRowBefore,a.noop,F),"insert-row-after":f.execute(x,
t.insertRowAfter,a.noop,F),"insert-column-before":f.execute(x,t.insertColumnBefore,q.halve,F),"insert-column-after":f.execute(x,t.insertColumnAfter,q.halve,F),"tablemenu-table-properties":function(a,c,d){a=h(z,D);var e=n.generate(B,a,["properties"]);e.events.ok.bind(function(a){y.activate();E.bind(function(b){s.table(b.element(),y.isRoot).each(function(b){g.runTransaction(y,C,function(){k.apply(b,a.properties())})})});e.destroy()});e.events.close.bind(function(a){e.destroy();y.activate();y.focus()});
y.deactivate();e.represent(c);e.open();return b.none()},"cell-merge":f.execute(x,t.mergeCells,a.noop,F),"cell-unmerge":f.execute(x,t.unmergeCells,a.noop,F),"cell-split-cols":f.execute(x,t.splitCellIntoColumns,q.halve,F),"cell-split-rows":f.execute(x,t.splitCellIntoRows,a.noop,F)},H=r.immutable("value","text","attrs"),L=d.byClass(e);return{handle:function(a){y.doc().each(function(b){E.each(function(b){var c=b.element();s.table(c,y.isRoot).each(function(c){var d=u.get(a,"data-ephox-gopher-item-value"),
e=G[d];void 0!==e&&g.runTransaction(y,C,function(){e(y,c,b).each(function(a){y.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset());L.clear(c)})})})})})},assign:function(a){E=a.bind(function(a){return s.cell(a,y.isRoot).bind(function(a){return w.ancestor(a,"table").map(function(b){return p.forMenu(A,b,a)})}).orThunk(function(){return s.notCell(a,y.isRoot).map(function(a){return p.notCell(a)})})})},situation:function(b){b=E.map(function(a){var b=a.element(),b=s.cell(b,y.isRoot).isSome();
return c.flatten([b?[H("tablemenu-row",l.translate("table.context.row.menu"),{})]:[],b?[H("tablemenu-column",l.translate("table.context.column.menu"),{})]:[],[H("tablemenu-table",l.translate("table.context.table.menu"),{})],a.mergable().isSome()?[H("cell-merge",l.translate("table.context.cell.merge"),{})]:[],a.unmergable().isSome()?[H("cell-unmerge",l.translate("table.context.cell.unmerge"),{})]:[],b&&1===a.selection().length&&a.mergable().isNone()&&a.unmergable().isNone()?[H("cell-split-cols",l.translate("table.context.cell.split-cols"),
{}),H("cell-split-rows",l.translate("table.context.cell.split-rows"),{})]:[]])}).getOr([]);var d=E.map(function(b){var d=b.element();b=function(b,c,e){var f=b+"-menu",g="th"===v.name(d)?"unmake":"make",h="make"===g?"header":"normal";c=[H("insert-"+b+"-before",l.translate("table.context."+b+"."+c),{}),H("insert-"+b+"-after",l.translate("table.context."+b+"."+e),{}),H("delete-"+b,l.translate("table.context.common.delete"),{}),H(g+"-header-"+b,l.translate("table.context.common."+h),{})];return{textkey:a.constant(l.key("table.context."+
b+".title")),value:a.constant(f),items:a.constant(c)}};var e={textkey:a.constant(l.key("table.context.table.title")),value:a.constant("table-menu"),items:a.constant([H("tablemenu-table-properties",l.translate("table.context.table.properties"),{}),H("tablemenu-delete-table",l.translate("table.context.common.delete"),{})])};return c.flatten([[b("row","insertabove","insertbelow")],[b("column","insertleft","insertright")],[e]])}).getOr([]);return{primary:a.constant(b),secondary:a.constant(d),submenus:a.constant({"tablemenu-row":"row-menu",
"tablemenu-column":"column-menu","tablemenu-table":"table-menu"})}},destroy:a.noop}}});l("bm","k2 ec 7 t jw jz jr bq k1 4h 33".split(" "),function(c,e,d,a,b,g,f,h,k,l,n){var p=function(f,p,s,t){return s.fold(a.none,a.none,function(b,d){return e.firstCursor(d).bind(function(b){return a.some(c(b,0,b,0))})},function(a){return h.table(a,p.isRoot).bind(function(e){b.execute(f,k.insertRowAfter,d.noop,t)(p,e,g.noMenu(a));e=l.descendants(e,"tr");if(0<e.length)return n.descendant(e[e.length-1],"td,th").map(function(a){return c(a,
0,a,0)})})})};return{forward:function(a,b,c,d){return p(a,b,f.next(c),d)},backward:function(a,b,c,d){return p(a,b,f.prev(c),d)}}});l("bn","7 1b 2p 2q 2s 69".split(" "),function(c,e,d,a,b,g){return{setBorderColor:function(a,b){d.set(a,"border-color",b);d.getRaw(a,"border-style").fold(function(){d.set(a,"border-style","solid")},c.noop)},setBackgroundColor:function(a,b){d.set(a,"background-color",b)},setHeight:function(a,b){d.set(a,"height",b)},setWidth:function(a,b){d.set(a,"width",b)},setType:function(c,
d){var e=g.copy(c,tag);a.after(c,e);b.remove(c)},setScope:function(a,b){e.set(a,"scope",b)},setStyle:function(a,b){e.set(a,"style",b)},setClass:function(a,b){e.set(a,"class",b)}}});l("yz",["58","4a"],function(c,e){return function(){var d=e.create({drag:c(["xDelta","yDelta"])});return{mutate:function(a,b){d.trigger.drag(a,b)},events:d.registry}}});l("sf",["t","58","4a","yz"],function(c,e,d,a){return function(){var b=d.create({drag:e(["xDelta","yDelta","target"])}),g=c.none(),f=a();f.events.drag.bind(function(a){g.each(function(c){b.trigger.drag(a.xDelta(),
a.yDelta(),c)})});return{assign:function(a){g=c.some(a)},get:function(){return g},mutate:f.mutate,events:b.registry}}});l("k5","b j7 7 t 58 4a sf sg sh rs 1b 2n 2o 1c 2p 3y 21 6x 33 e9".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z){var x=k.resolve("resizer-bar-dragging");return function(c,k,B){var C=f(),D=e.transform(C,{}),F=a.none(),E=function(b,c){return a.from(n.get(b,c))};C.events.drag.bind(function(a){E(a.target(),"data-row").each(function(b){b=l.getInt(a.target(),"top");s.set(a.target(),
"top",b+a.yDelta()+"px")});E(a.target(),"data-column").each(function(b){b=l.getInt(a.target(),"left");s.set(a.target(),"left",b+a.xDelta()+"px")})});var G=function(a,b){var c=l.getInt(a,b),d=z(n.get(a,"data-initial-"+b),10);return c-d};D.events.stop.bind(function(){C.get().each(function(a){F.each(function(b){E(a,"data-row").each(function(c){var d=G(a,"top");n.remove(a,"data-initial-top");N.trigger.adjustHeight(b,d,z(c,10))});E(a,"data-column").each(function(c){var d=G(a,"left");n.remove(a,"data-initial-left");
N.trigger.adjustWidth(b,d,z(c,10))});h.refresh(c,b,B,k)})})});var H=function(a,b){N.trigger.startAdjust();C.assign(a);n.set(a,"data-initial-"+b,z(s.get(a,b),10));r.add(a,x);s.set(a,"opacity","0.2");D.go(c.parent())},L=t.bind(c.parent(),"mousedown",function(a){h.isRowBar(a.target())&&H(a.target(),"top");h.isColBar(a.target())&&H(a.target(),"left")}),I=function(a){return q.eq(a,c.view())},J=t.bind(c.view(),"mouseover",function(b){"table"===u.name(b.target())||v.ancestor(b.target(),"table",I)?(F="table"===
u.name(b.target())?a.some(b.target()):w.ancestor(b.target(),"table",I),F.each(function(a){h.refresh(c,a,B,k)})):p.inBody(b.target())&&h.destroy(c)}),K=t.bind(c.view(),"dragstart",function(a){a.raw().preventDefault()}),N=g.create({adjustHeight:b(["table","delta","row"]),adjustWidth:b(["table","delta","column"]),startAdjust:b([])});return{destroy:function(){L.unbind();J.unbind();K.unbind();D.destroy();h.destroy(c)},refresh:function(a){h.refresh(c,a,B,k)},on:D.on,off:D.off,hideBars:d.curry(h.hide,c),
showBars:d.curry(h.show,c),events:N.registry}}});l("br",["58","4a","k4","k5","k6"],function(c,e,d,a,b){return function(g,f){var h=b.height,k=a(g,f,h),l=e.create({beforeResize:c([]),afterResize:c([]),startDrag:c([])});k.events.adjustHeight.bind(function(a){l.trigger.beforeResize();var b=h.delta(a.delta(),a.table());d.adjustHeight(a.table(),b,a.row(),h);l.trigger.afterResize()});k.events.startAdjust.bind(function(a){l.trigger.startDrag()});k.events.adjustWidth.bind(function(a){l.trigger.beforeResize();
var b=f.delta(a.delta(),a.table());d.adjustWidth(a.table(),b,a.column(),f);l.trigger.afterResize()});return{on:k.on,off:k.off,hideBars:k.hideBars,showBars:k.showBars,destroy:k.destroy,events:l.registry}}});l("64","b 7 t bf bg bh bi bj 7e 7j bk bl bm 74 bn bo bp bq br".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w){return function(z,x){var y=z.content(),A=z.keyboard(),B=z.undo(),C=z.smartview(),D=function(){return M.getOr(t.only(y.element()))},F=p(z.filter(),z.region(),y,z.selections(),
A,B,C.uiContainer(),D),E=function(a,b,d){B.save();c.each(b,function(b){a(b,d)});B.save();y.focus()},G=e.curry(E,s.setBackgroundColor),E=e.curry(E,s.setBorderColor),G=q.ui({"table.widget":e.curry(h.widget,z,x),"cell.palette":e.constant({items:[{type:"widget",build:e.curry(f.widget,z,{action:G,shortname:"background",name:"cellbackgroundcolor",textkey:"table.cell.color.background",menuTextkey:"table.cell.color.background"})},{type:"widget",build:e.curry(f.widget,z,{action:E,shortname:"border",name:"cellbordercolor",
textkey:"table.cell.color.border",menuTextkey:"table.cell.color.border"})},{type:"widget",build:e.curry(g.widget,z)}],updatePalette:function(a){var b=n.selectedCells(z.selections(),y.isRoot),c=e.curry(a.show,d.some(k.translate("table.context.palette.show")));a=e.curry(a.hide,d.some(k.translate("table.context.palette.hide")));(0<b.length?c:a)()&&z.ui().refresh()}})},e.identity),H=function(a){var b=a.stopper();l.context(y).bind(function(c){l.cata(c,function(c){v.cell(c.startContainer(),y.isRoot).each(function(c){(a.shift()?
r.backward:r.forward)(z.region(),y,c,D).fold(b,function(a){b();y.setSelection(a.startContainer(),a.startOffset(),a.endContainer(),a.endOffset())})})},e.noop)})},L=function(b){a.upOrLeft(y)},I=function(b){a.right(y)},J=A.editor();J.on();J.events.tab.bind(H);J.events.left.bind(L);J.events.up.bind(L);J.events.right.bind(I);var K=y.cursor(),N=d.none(),M=d.none();y.events.ready.bind(function(a){a=b.get(y,C,a.api().doc());M=d.some(a);var c=u(z.region().directionAt),e=w(a,c);e.events.beforeResize.bind(B.save);
e.events.afterResize.bind(function(){y.focus();B.save();y.domChanged();K.restore()});e.on();e.events.startDrag.bind(K.save);N=d.some(e);a=z.selections();a.events.beforeScan.bind(function(){e.hideBars()});a.events.afterScan.bind(function(){e.showBars()})});return{ui:G,destroy:function(){F.destroy();N.each(function(a){a.destroy()});J.off();J.events.tab.unbind(H);J.events.left.unbind(L);J.events.up.unbind(L);J.events.right.unbind(I);J.destroy()},handle:F.handle,assign:F.assign,situation:F.situation,
name:e.constant("table")}}});l("65",["7","58","4a"],function(c,e,d){return function(){var a=d.create({pasteUpload:e([]),uploadAssets:e(["assets"]),registerBlob:e(["id","blob","bloburl","data"])});return{destroy:c.noop,events:a.registry,pasteUpload:a.trigger.pasteUpload,uploadAssets:a.trigger.uploadAssets,registerBlob:a.trigger.registerBlob}}});l("si",["b","7","2w"],function(c,e,d){var a=d.immutable("withSpaces","withoutSpaces"),b=function(a){return c.filter(a.split(/[\.,-\/#!$%\^&\*;:{}=\-_`~()\s\u00A0]/gim),
function(a){return 0<a.length}).length};return{count:function(c){return{words:e.constant(b(c)),characters:e.constant(a(c.length,c.replace(/[\s\u00A0]/gim,"").length))}}}});l("k7","92 7 4r h3 7e 59 si 58 4a 4e l 30 3m w".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q){return function(s,t){var u=s().uiContainer(),v=k.create({close:h([])}),w=a(u);w.setTitle(b.translate("wordcount.dialog"));l.add(w.element(),[g.resolve("dialog-wordcount"),g.resolve("dialog-narrow")]);var u=t().body().getOrDie(),z=d.toText(u,
e.constant(!1)),x=r.get(u),u=t().getSelectedText().getOr(""),z=f.count(z),x=x.length,u=f.count(u),y=n.fromHtml(q.supplant('<table class="ephox-polish-tabular ephox-polish-wordcount-table" tabindex="-1">    <thead>        <tr>            <th scope="col"> ${headerCounts}&nbsp;</th>            <th scope="col"> ${headerDocument}&nbsp;</th>            <th scope="col"> ${headerSelection}&nbsp;</th>        </tr>    </thead>    <tbody>        <tr>            <td>${wordCountLabel}&nbsp;</td>            <td class="ephox-polish-wordcount-document-words">${documentCountWords}&nbsp;</td>            <td class="ephox-polish-wordcount-selection-words">${selectionCountWords}&nbsp;</td>        </tr>        <tr>            <td>${wordCountCharsNoSpacesLabel}&nbsp;</td>            <td class="ephox-polish-wordcount-document-charsnospaces">${documentCharactersNoSpaces}&nbsp;</td>            <td class="ephox-polish-wordcount-selection-charsnospaces">${selectionCharactersNoSpaces}&nbsp;</td>        </tr>        <tr>            <td>${wordcountCharsLabel}&nbsp;</td>            <td class="ephox-polish-wordcount-document-chars">${documentCountCharsWithSpaces}&nbsp;</td>            <td class="ephox-polish-wordcount-selection-chars">${selectionCountCharsWithSpaces}&nbsp;</td>        </tr>    </tbody></table>',
{headerCounts:b.translate("wordcount.counts"),headerDocument:b.translate("wordcount.document"),headerSelection:b.translate("wordcount.selection"),wordCountLabel:b.translate("wordcount.words"),wordCountCharsNoSpacesLabel:b.translate("wordcount.charactersnospaces"),wordcountCharsLabel:b.translate("wordcount.characters"),documentCountWords:z.words(),selectionCountWords:u.words(),documentCharactersNoSpaces:z.characters().withoutSpaces(),selectionCharactersNoSpaces:u.characters().withoutSpaces(),documentCountCharsWithSpaces:x,
selectionCountCharsWithSpaces:u.characters().withSpaces()}));w.setContent(y);var A=c.multiple(w.element(),[]),u=function(){B();v.trigger.close()},B=function(){w.hide()};w.events.close.bind(u);A.events.exit.bind(u);return{element:w.element,events:v.registry,open:function(){w.show();A.enter();p.focus(y)},destroy:function(){A.destroy();w.destroy()},hide:B}}});l("bs",["k7","58","4a"],function(c,e,d){return function(a,b){var g=c(a,b),f=d.create({close:e([])});g.events.close.bind(function(){f.trigger.close();
g.destroy()});return{show:function(){g.open()},events:f.registry}}});l("66",["7","7e","74","bs"],function(c,e,d,a){return function(b){var g=b.content,f=b.smartview;return{ui:d.ui({"wordcount.general":{toggle:!1,value:"wordcount",textkey:e.key("wordcount.open"),action:function(){var c=a(f,g);c.events.close.bind(function(){b.ui().tabstrip.focused()||g().focus()});b.content().hideInlineSelection();c.show()},updateGeneral:c.noop,icon:!0,shortcut:!1,hasPopup:!1,hasDialog:!0}}),destroy:c.noop}}});l("43",
"b 1q 6 7 t 54 55 3j 46 5d 5e 5f 5g 5h 5i 5j 5k 5l 5m 5n 5o 5p 5q 5r 5s 5t 5u 5v 5w 5x 5y 5z 60 61 62 63 57 64 65 66 67 1h 68 58 4a 4b 2w 1b 5a 69 2b 2t 3w".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z,x,y,A,B,C,D,F,E,G,H,L,I,J,K,N,M,O,S,P,U,Q,V,W,Y,X,Z,$,aa,R,ga,ja,fa,ha){var ia=$.immutableBag("accessibility formatting alignindent directionality table font parlance media imageEdit blocktag specialchar wordcount link linkvalidator horizontalrule help fileupload findreplace plaincodeview macros spelling".split(" "),
[]);return function(ba,$,da){var ca=function(a,b,c,d){return b.bundled?a.apply(void 0,d.concat([b])):c()},T=u(ba,$,da);$=ca(p,ba.formatting,O.basic,[T]);var ea=ca(n,ba.alignindent,O.basic,[T]),ma=ca(q,ba.directionality,O.basic,[T]),na=ca(S,ba.table,O.table,[T]),oa=ca(r,ba.blocktag,O.basic,[T]),la=ca(z,ba.font,O.basic,[T]),pa=ca(U,ba.wordcount,O.basic,[T]),sa=ca(G,ba.media,O.basic,[T]),xa=ca(N,ba.specialchar,O.basic,[T]),qa=ca(F,ba.linkvalidator,O.linkvalidator,[T,da.linkvalidator]),ya=ca(D,ba.link,
O.basic,[T,qa]),Aa=ca(A,ba.horizontalrule,O.basic,[T]),Ba=ca(x,ba.help,O.dialog,[T]),ra=function(a,c,d,e){var f=ba.ui.locale.code,g=void 0!==f?f:V.get();return(!0===c.bundled?W.determine(g):b.none()).fold(function(){return d()},function(b){var d=T.profile().spelling().get(),d=void 0!==f||!0!==c.menu&&d!==W.offKey()||!1===d?b:d;return a.apply(void 0,e.concat([c,b,d]))})}(M,ba.spelling,O.spelling,[T,da.spelling]),Ka=ca(L,ba.parlance,O.basic,[T,ra]),La=ca(J,ba.resize,O.basic,[T]),wa=ca(E,ba.macros,O.macros,
[T,ra,da.macros]),Ca=ca(y,ba.highlighter,O.highlighter,[T,wa]),Ga=ca(s,ba.draganddrop,O.draganddrop,[T]),ua=P(),va=ca(C,ba.imageEdit,O.imageEdit,[T,ua]),Ha=ca(B,ba.image,O.image,[T]),Ma=ca(v,ba.fileupload,O.dialog,[T,ua,va.insertResample(),Ga]),Na=ca(K,ba.smartclipboard,O.basic,[T,ua,va.insertResample()]),Oa=ca(H,ba.mentions,O.basic,[T]),Pa=ca(w,ba.findreplace,O.basic,[T]),Qa=ca(l,ba.accessibility,O.basic,[T]),Ia=ca(t,ba.embed,O.basic,[T,da.embed]);da=function(){var a=T.content();return a.body().fold(a.getContent,
function(a){a=ga.deep(a);return Q.output(T.filter(),a)})};var za=function(a){var b=T.filter(),c=T.content();a=b.filterHtml(b.input(),a);c.resetContent(a);Ca.run();qa.refresh();ra.scanView();return a},ca=ca(I,{getContent:da,setContent:za,bundled:ba.plaincodeview.bundled},O.basic,[T]);T.contextmenu().register("table",na);T.contextmenu().register("imageEdit",va);T.contextmenu().register("image",Ha);T.contextmenu().register("spelling",ra);T.contextmenu().register("link",ya);var Ja=ia({formatting:$,alignindent:ea,
directionality:ma,table:na,font:la,imageEdit:va,parlance:Ka,blocktag:oa,wordcount:pa,specialchar:xa,media:sa,link:ya,linkvalidator:qa,horizontalrule:Aa,help:Ba,fileupload:Ma,findreplace:Pa,accessibility:Qa,plaincodeview:ca,macros:wa,spelling:ra});T.content().events.ready.bind(function(){T.ui().init(T.keyboard(),T.undo(),Ja);ra.init(T.content());Ca.run();qa.refresh()});T.content().events.loaded.bind(function(){ha(function(){ta.trigger.loaded();Da()},0)});var ta=X.create({loaded:Y([]),ready:Z([],T.content().events.ready),
focus:Y([]),change:Y([]),dirty:Z([],T.laundry().events.dirty),internal:Y(["command","data"]),paint:Y(["dimensions"])}),Da=T.content().isInline()?a.noop:function(){T.content().body().each(function(a){a=ja.documentElement(a);var b=T.content().element();ta.trigger.paint(g({width:fa.get(b),docWidth:fa.get(a),height:R.get(b),docHeight:R.get(a)}))})};T.undo().events.changed.bind(function(){ta.trigger.change()});T.undo().events.reset.bind(function(){ta.trigger.change()});T.content().events.paint.bind(Da);
T.content().events.nodeChanged.bind(Da);T.content().events.focus.bind(function(){ta.trigger.focus()});T.internalevents().events.internal.bind(function(a){var b=a.command();"insertLink"===b&&(a=aa.get(a.data(),"href"),ta.trigger.internal(b,a))});ca=T.content().isInline()?function(){var a=T.ui(),b=T.content(),c=a.state(),c=void 0!==c.toolbar&&void 0!==c.toolbar.drag?c.toolbar.drag.isSome():!1;b.activate();b.focus();T.viewablearea().setOn();c||a.position();a.refresh()}:a.noop;$=T.content().isInline()?
function(){T.content().deactivate();T.content().blur();T.viewablearea().setOff()}:a.noop;return k.internal({activateInline:ca,deactivateInline:$,element:T.ui().element,viewport:T.ui().viewport,connect:T.ui().connect,focus:T.content().focus,blur:T.content().blur,getContent:da,toTransfer:a.compose(f.changed,da),setContent:function(a){var b=T.undo();b.disable(function(){var c=za(a);b.reset(c)});T.laundry().setDirty(!1)},insertHtmlAtCursor:T.insertFilteredHtmlAtCursor,isDirty:T.laundry().isDirty,setDirty:T.laundry().setDirty,
fromTransfer:function(a){var b=T.undo();f.cata(a,function(a){b.disable(function(){za(a)});b.replaceTop()},function(a){za(a);b.save()})},uploader:a.constant(ua),state:function(){var a=T.state();return d.merge(a,{spelling:ra.state(),macros:wa.state(),filters:T.filter().customFilters().state(),linkvalidator:qa.state(),embed:Ia.state()})},destroy:function(){T.content().deactivate();var b=c.map(e.values(Ja),a.apply);c.each(b.concat([Ia,Ha,va,ra,La,wa,Ca,ua,Na,Oa,T,Ga]),function(a){a.destroy()})},events:ta.registry,
communication:T.communication,fullscreen:T.fullscreen,content:T.content,ui:T.ui,undo:T.undo,smartview:T.smartview,keyboard:T.keyboard,filter:T.filter,operations:T.operations,macros:a.constant(wa),getMode:h.pencil,isPrettyPrinting:function(){return!0===ba.content.prettyprint}})}});xa.define("bu",[],function(){return'/*\n * Keep this file as small as possible.\n * It is injected into the JavaScript, so it needs to be tiny.\n */\n\n/*\n * Animate from 0 to 359, not 0 to 360, as they are the same and FireFox does nothing\n *\n * Until we have token replacement, manual shorthand for "ephox-polish-spin"\n */\n\n@keyframes e-p-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(359deg);\n  }\n}\n\n/* Until we have token replacement, manual shorthand for "ephox-polish-spinner-img" */\n\n.e-p-s-img {\n  animation: e-p-spin 2s infinite linear;\n  width: 30px;\n  height: 30px;\n  margin: 2px 2em 0 auto;\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAIVBMVEUAAABAQEBDQ0NERERERERCQkJDQ0NERERDQ0NEREREREQTPu3mAAAACnRSTlMAENDPwGBwsKB/qy4kVgAAAFpJREFUCNdjAAImAwYI4FoApooFuBYwWgAZXoZMCsJLgAyhpQwMUYpABmMiA4OYAAMCaC2GklqLwIxFMAmoYkmQYmGQdkOQgYpMBkIgA4tAVmggLAU7QwFIAADjyQ3FWhtneAAAAABJRU5ErkJggg==") 0/cover;\n}'});
l("6c","t 2n l 2q 2s 3m bu".split(" "),function(c,e,d,a,b,g,f){var h=0,k=c.none();return{add:function(){if(0===h){var b=d.fromTag("style");g.set(b,f);a.append(e.body(),b);k=c.some(b)}h++},remove:function(){0!==h&&0===--h&&(k.each(b.remove),k=c.none())}}});l("44","6 7 t 6a 55 46 6b 57 6c 49 6d 4n 2p l 5a 2g 2q 2s 6e 3w".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z){return function(x,y){var A=h.state(y),B=p(null),C=q.fromTag("div"),D=function(){t.set(C,'<div class="e-p-s-img"></div>');
F()},F=void 0===x.content.inline?e.noop:function(){if(!1===x.ui.toolbar.visible)r.set(C,"display","none");else{var a={isInline:e.constant(!0),element:e.constant(x.content.inline)},a=n.offsetFrom(a,C,s.get(C),x.ui);r.setAll(C,{position:"absolute",left:a.left+"px",top:a.top-4+"px"})}},E=null,G=e.die("API unavailable while the editor is loading"),H={body:e.constant(d.none()),doc:G,execCommand:G,getSelectedText:G,focus:G,deactivate:e.noop,blur:e.noop},L=void 0===x.content.inline?B.get:function(){return t.get(x.content.inline)};
return g.internal({activateInline:F,blur:G,communication:e.constant(f(x)),connect:function(a){E=z(D,1E3);u.append(a,C);k.add();return!1},content:e.constant(H),deactivateInline:e.noop,destroy:function(){w(E);k.remove();v.remove(C)},element:e.constant(C),events:l.events(),failure:function(){w(E);k.remove();t.set(C,"<p>Unable to load editor. See browser console for details.</p>")},filter:A.filter,focus:G,fromTransfer:function(a){b.cata(a,B.set,B.set)},fullscreen:h.fullscreen,getContent:L,getMode:G,insertHtmlAtCursor:G,
isDirty:A.laundry.isDirty,isPrettyPrinting:function(){return!0===x.content.prettyprint},keyboard:l.keyboard,macros:A.macros,operations:l.operations,setContent:function(a){void 0===x.content.inline?B.set(a):t.set(x.content.inline,a);A.laundry.setDirty(!1)},setDirty:A.laundry.setDirty,smartview:l.smartview,state:function(){var b=L(),b=a.isEmpty(b)?{}:{content:{raw:b,marked:b},undo:{initial:{raw:b,marked:b}}};return c.deepMerge(A.getState(),b)},toTransfer:e.compose(b.changed,B.get),ui:l.ui,undo:e.constant(h.undo()),
uploader:e.constant(h.uploader()),viewport:e.constant(C)})}});l("6f",["40","43","3j"],function(c,e,d){var a=d.pencil(),b=d.code(),g=function(a){var b=a.old().toTransfer();a.nu().fromTransfer(b)},f={transition:g,factory:c,style:d.pencil},h={transition:g,factory:e,style:d.code};return{goingToDesign:function(a){return a===b},alternate:function(c){return c===b?a:b},detect:function(a){return a===b?f:h}}});l("6g","4m 7 t p 6f 3g 58 4a o".split(" "),function(c,e,d,a,b,g,f,h,k){var l=function(a,b){return{destroy:e.noop,
init:e.noop,setMode:e.die("Code view is not enabled, cannot switch modes"),events:h.create({change:f([]),ready:f([])}).registry}},n=function(l,m){var n=m.css+"/codemirror.css",s=h.create({change:f([]),ready:f(["type"])}),t=d.none(),u=function(){var a=g.load.codeview(m.js).map(function(a){return a.map(e.constant(!0))});t=d.some(a)},v=function(b){b(a.value(!0))};return{init:function(a){t.fold(function(){c.addStylesheet(n,v).get(function(b){b.fold(function(a){k.error(a);k.error("Code View disabled due to error loading stylesheet")},
function(){u();s.trigger.ready(a)})})},function(b){s.trigger.ready(a)})},setMode:function(a){return t.fold(function(){throw"Cannot set mode before Code View has loaded";},function(c){c.get(function(c){c.fold(function(b){s.trigger.ready(a);k.error(b);k.error("Code View non-functional due to error downloading script file")},function(){var c=b.detect(a),d=l.swap(c.factory,{},{});s.trigger.change();c.transition(d);d.destroy()})})})},events:s.registry,destroy:e.noop}};return function(a,b){return(!0===
b.bundled?n:l)(a,b)}});l("6h","8e bv 52 bw 7c 3j 7e 59 58 4a 1b 2n 2o 4e 2p bx 3y 2q 6v 2s 2b 2t".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z,x,y){return function(e,p){var x=l.create({change:k(["type"])}),y=w.removeClasses([h.resolve(g.none()),h.resolve(g.wait()),h.resolve(g.pencil()),h.resolve(g.code())]),F=d.div();c.hidden(F,"true");q.add(F,[h.resolve("html-switch-wrapper"),h.resolve("layer-editor")]);var E=d.div();q.add(E,[h.resolve("html-switch"),h.resolve("icon")]);v.append(F,
E);var G=function(a){y(E);r.add(E,h.resolve(a));n.set(E,"data-icon",a);n.remove(E,"title")},H=function(a,b){var c=n.get(E,"data-icon");a!==c&&(M=c,G(a),n.set(E,"title",b))},L=function(a){p.showButton&&a!==g.none()?H(a,f.translate("toolbar.switch-"+a)):G(g.none());J.control.unblock()},I=b.unbindable(),J=a.tap(function(){x.trigger.change(n.get(E,"data-icon"))});p.showButton&&I.set(u.bind(F,"click",J.instance));var K=function(a){v.append(a,F)},N=t.onDirection("right","left"),M=g.none();L(M);return{render:K,
destroy:function(){z.remove(F);I.clear()},switchto:L,spin:function(){H(g.wait(),f.translate("loading.wait"));J.control.block()},stopSpin:function(){"spin"!==M&&L(M)},init:function(a){var b=e.get();K(b.viewport());b.events.paint.bind(function(a){a=a.dimensions();a=a.width()-a.docWidth();var c=N(b.element());s.set(F,c,a+"px")});L(g.none())},events:x.registry}}});l("k8","ao b sj 52 7 53 7e 1h cw 59 cx cy b2 lp 1b 2n 2o 4e 3y l 2q 2s q".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z,x,y,
A){return function(A,C,D,F,E,G){var H=z.fromTag("div"),L=D.uiContainer(),I=a.div();F.updateUi(H);F=[r.editorContainer(),"ephox-textbox-font",l.resolve("layer-editor"),l.resolve("editor-main"),l.resolve("fullscreen-maximized")];v.add(H,F);s.set(H,"lang",h.get());k.addClasses(H);x.append(H,L);var J=q(A,H),K=c.toolbar(J,f.translate);C.events.toolbar.bind(K.enter);K.events.exit.bind(A.focus);var N=n(),M=t.body(),O=a.div();u.add(O,l.resolve("socket"));var S=e.map(["dragover","drop"],function(a){return w.bind(O,
a,function(a){a.kill()})});J.integrate(H,K,N,O);p.build(H,E.sideBar,E.bottomBar);var P=d({layerClass:l.resolve("layer-below-editor"),background:"rgba(255, 255, 255, 0.92)"}),U=l.resolve("body-fullscreen");A.events.paint.bind(function(a){K.repaint();D.refresh()});return{element:b.constant(H),socket:function(a){x.append(O,a.element())},viewport:b.constant(O),uiContainerParent:b.constant(I),connect:function(a){P.show();u.add(M,U);x.append(a,H);g.detect(H);return!0},destroy:function(){e.each(S,function(a){a.unbind()});
K.destroy();u.remove(M,U);y.remove(H);y.remove(I);P.destroy();N.destroy()},banners:N.element,displayBanner:N.display,hideBanner:N.hide,position:function(){J.init(K,N,O,E,G)},refresh:function(){J.update();K.refresh()},toolbar:K}}});l("by",["7","76","k8","79"],function(c,e,d,a){return{build:function(a,g,f,h,k,l,n,p){var r=d(a,g,f,l,n,p),q=h.full(r);q.init();return{element:r.element,socket:r.socket,viewport:r.viewport,uiContainerParent:r.uiContainerParent,init:function(c,d,g){d=q.config(a.isInline(),
d,k,g);e.setup(r,l,a,c,f,d);q.loaded()},connect:r.connect,destroy:function(){r.destroy();q.destroy()},displayBanner:r.displayBanner,hideBanner:r.hideBanner,position:c.noop,refresh:r.refresh,tabstrip:r.toolbar,state:c.constant(p)}},bounds:function(){return a.view}}});l("6i","t 6f 43 by 5c 58 4a 2n 1c 2b q".split(" "),function(c,e,d,a,b,g,f,h,k,l,n){return function(n){var r=c.none(),q=c.none(),s=f.create({maximize:g([]),restore:g([])}),t=function(c){r=l.parent(n.get().element());r.getOrDie("maximize called on editor that is not in the DOM.");
n.swap(d,{ui:{layout:a,isFullScreen:!0},fullscreen:{layout:void 0!==c.layout()?c.layout():b}}).destroy();var e=n.get();e.fullscreen().select();e.connect(h.body());e.events.ready.bind(function(){e.focus();s.trigger.maximize()})},u=function(a){n.swap(d,{ui:{layout:void 0!==a.layout()?a.layout():b,isFullScreen:!1}}).destroy();var c=n.get();c.fullscreen().deselect();a=r.getOrDie("restore called on editor that was not previously in the DOM.");n.get().connect(a);c.events.ready.bind(function(){c.focus();
s.trigger.restore()})};return{init:function(a){if(e.goingToDesign(a)){a=n.get();var b=n.get().element();q.each(function(a){if(k.eq(a,b))throw"Fullscreen init called twice on the same instance";});q=c.some(b);a.fullscreen().events.maximize.bind(t);a.fullscreen().events.restore.bind(u)}},destroy:function(){},events:s.registry}}});l("bz",["a","b"],function(c,e){return function(){var d=[];return{setCallback:function(a){c.isFunction(a)&&d.push(a)},done:function(a){e.each(d,function(b){b.apply(null,[a])});
d=[]}}}});l("k9","sk sl 31 he 7 t e7 1b".split(" "),function(c,e,d,a,b,g,f,h){var k=function(a){return a.result};return{blobTob64:function(a,b){var c=h.get(b,f.blobId());h.remove(b,f.blobId());a.get(c).each(function(a){h.remove(b,f.blobId());h.set(b,"src",k(a.data()))})},b64ToBlob:function(b,k){var l=h.get(k,"src"),r=function(a){console.warn("Unable to read Base64 image data: ",a,l);return g.none()};b.lookupByData(l).fold(function(){var f=c.toBlob(l);return e.cata(f,g.none,r,function(c){var e=a.createObjectURL(c),
f=d.generate("image");return g.some(b.add(f,c,e,{result:l}))})},g.some).each(function(a){h.set(k,f.blobId(),a.id());h.set(k,"src",a.objurl())})}}});l("c0",["b","k9","e7","d3"],function(c,e,d,a){return{configure:function(b,g){b.addSelector(b.output(),"img["+d.blobId()+"]",function(a){c.each(a,function(a){e.blobTob64(g,a)})});b.addSelector(b.input(),"img:not(["+d.blobId()+"])[src]",function(a){c.each(a,function(a){e.b64ToBlob(g,a)})});var f=a.removeClass(d.uploadInProgress());b.add(b.output(),d.uploadInProgress(),
f);b.add(b.history(),d.uploadInProgress(),f);b.add(b.internal(),d.uploadInProgress(),f)},blobId:d.blobId}});l("c5","b gz 7 t p e7 4o 2w 1b 2o 6v 33 o".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r){var q=h.immutable("image","blobInfo"),s=f.generate([{failure:["error"]},{success:["result","images","blob"]}]),t=function(a,b,d,e){c.each(b,function(a){k.set(a,"src",e.location);k.remove(a,g.blobId())});return w(a,d)},u=function(a,b,c,d,e,f){var h=a.lookupByData(e.result).getOrThunk(function(){return a.add(b,
c,d,e)});k.set(f,g.blobId(),h.id());return q(f,h)},v=function(a,c){var d=k.get(c,g.blobId());return a.get(d).fold(function(){return b.error(d)},function(a){return b.value(q(c,a))})},w=function(a,c){return a.get(c).fold(function(){return b.error("Internal error with blob cache")},function(d){a.remove(c);return b.value(d)})};return{prepareForUpload:function(b,c,d){var e=b.isActive(c);b.register(d,c);l.add(d,g.uploadInProgress());return e?a.none():a.some(c)},handleUpload:function(a,b,e,f,h,k,l){var m=
function(){r.error("Internal error with blob cache",h);l(s.failure({status:d.constant(666)}))};a.upload(k,h,function(a){var d=b.findById(f,h);c.each(d,n.removeClass(g.uploadInProgress()));a.fold(function(a){l(s.failure(a))},function(a){t(e,d,h,a).fold(m,function(b){l(s.success(a,d,b))})});b.report(h,d,a.isValue())})},registerAssets:function(a,f,g){return c.bind(g,function(c){return e.cata(c,function(c,d,e,g){return p.descendant(f,'img[src="'+e+'"]').fold(function(){return[b.error("Image that was just inserted could not be found: "+
e)]},function(f){return[b.value(u(a,c,d,e,g,f))]})},d.constant([]))})},registerBlob:u,findBlobs:function(a,b,d){d=a.findAll(d);return a.inProgress()?[]:c.map(d,function(a){return v(b,a)})}}});l("c1","gz hd 3v 9y hf hi a3 99 c5".split(" "),function(c,e,d,a,b,g,f,h,k){var l=function(l){var m=function(d){var m=d.image(),p=d.blobInfo(),t=g.changedBounds(m);return h.resampleAction(t,p.blob(),function(g){if(g===p.blob())return b.pure(d);var h=a.updater(a.keepResample,m),t=f.applyEdit(m);g=e.single(g).bind(t).map(h);
return b.map(g,function(a){return c.cata(a,function(a,b,c,d){return k.registerBlob(l,a,b,c,d,m)},function(a,b,c){return d})})})};return function(a){return d.mapM(a,m)}};return{instance:function(a,b){return!0===a.immediate?d.pure:l(b)}}});l("sm",["t","7e"],function(c,e){var d={400:"errors.http.400",401:"errors.http.401",403:"errors.http.403",404:"errors.http.404",407:"errors.http.407",409:"errors.http.409",413:"errors.http.413",415:"errors.http.415",500:"errors.http.500",501:"errors.http.501"};return{get:function(a,
b){return c.from(d[a]).map(function(a){return e.translate(a,b)})}}});l("ka",["a","7","s","9a","sm"],function(c,e,d,a,b){var g=function(b){return c.isString(b)&&""!==b.trim()?{description:e.constant(b),link:e.constant(null)}:a.get("error.imageupload.generic")},f=function(c,d){var f=d.status();return b.get(f,c).fold(function(){var b;b=0===f?"error.imageupload.cors":400<=f&&500>f?"error.code.images.not.found":"error.imageupload";return a.get(b,[c])},function(a){return{description:e.constant(a),link:e.constant(null)}})},
h=function(a,b){return{instance:function(){return d.cached(function(c){c=b(c);a.show(c)})}}};return{simple:function(a){return h(a,g)},url:function(a,b){return h(a,e.curry(f,b))}}});l("sn",["6","nu","w8","7"],function(c,e,d,a){return{json:function(){return{get:function(b,c,d,h){e.get(b,c,d||a.identity,h)},post:function(b,c,d,h){e.ajax(b,"POST",c,d||a.identity,h)},ajaxData:function(b,g,f,h,k,l){g=c.merge(l||{},{data:void 0!==g?d.stringify(g):""});e.ajax(b,f,h,k||a.identity,g)}}}}});l("z1",["2j"],function(c){return function(){return new (c.getOrDie("FormData"))}});
l("so",["a","b","z1","2w","w"],function(c,e,d,a,b){var g=["jpg","png","gif","jpeg"];return{failureObject:a.immutable("message","status","contents"),getFilename:function(a,d){var k;c.isString(a.name)&&!b.endsWith(a.name,".tmp")?k=a.name:c.isString(a.type)&&b.startsWith(a.type,"image/")?(k=a.type.substr(6),k=e.contains(g,k)?d+"."+k:d):k=d;return k},buildExtra:function(a,b,c){var e=d();e.append(a,b,c);return{data:e,contentType:!1,processData:!1}}}});l("sp","a 6 q7 w8 p so w it".split(" "),function(c,
e,d,a,b,g,f,h){return function(k){var l=function(){var a=k.url,b=a.lastIndexOf("/"),a=0<b?a.substr(0,b):a,a=void 0===k.basePath?a:k.basePath;return f.endsWith(a,"/")?a:a+"/"}();return{upload:function(f,p,r){f=f.blob();var q=function(a,c,d){r(b.error(g.failureObject(a,c,d)))},s=g.getFilename(f,p);p=e.merge(!0!==k.credentials?{}:{xhrFields:{withCredentials:!0}},g.buildExtra("image",f,s));d.post(k.url,{},function(d){var e;try{var f=a.parse(d);if(c.isString(f.location))e=f.location;else{q("JSON response did not contain a string location",
500,d);return}}catch(g){e=d}d=e.split(/\s+/);d=h.resolve(l,1===d.length&&""!==d[0]?d[0]:s);r(b.value({location:d}))},q,p)}}}});l("sq","a p so 2w o 3w".split(" "),function(c,e,d,a,b,g){var f=a.immutable("id","filename","blob","base64");return function(a){return{upload:function(k,l,n){var p=function(a){n(e.error(a))},r=function(a){c.isString(a)?n(e.value({location:a})):(b.error("Image upload result was not a string"),p(""))},q=d.getFilename(k.blob(),l),s=f(l,q,k.blob(),k.data().result);g(function(){a(s,
r,p)},0)}}}});l("kc",["so","sp","sq"],function(c,e,d){return{direct:function(a){return e(a)},custom:function(a){return d(a)},failureObject:function(a,b,d){return c.failureObject(a,b,d)},getFilename:function(a,b){return c.getFilename(a,b)},buildExtra:function(a,b,d){return c.buildExtra(a,b,d)}}});l("kb",["6","p","sn","kc"],function(c,e,d,a){return function(b,g){return{upload:function(f,h,k){f=f.blob();h=a.getFilename(f,h);h=c.merge(b.headers(),a.buildExtra("image",f,h));d.json().post(g,function(a){k(e.value(a))},
function(b,c,d){k(e.error(a.failureObject(b,c,d)))},h)}}}});l("c2","a 7 ka kb kc 2w".split(" "),function(c,e,d,a,b,g){var f=g.immutable("uploader","errors");return{choose:function(g,k,l){return!0!==g.bundled?f({upload:e.die},{instance:e.constant(e.die("Image Upload is disabled"))}):c.isString(g.service)?f(a(l,g.service),d.url(k,g.service)):c.isFunction(g.handler)?f(b.custom(g.handler),d.simple(k)):f(b.direct(g.direct),d.url(k,g.direct.url))}}});l("c3",["1q","he","t","2w"],function(c,e,d,a){var b=
a.immutable("id","blob","objurl","data");return function(){var a={},f=function(a){e.revokeObjectURL(a.objurl())};return{add:function(c,d,e,f){d=b(c,d,e,f);return a[c]=d},get:function(b){return d.from(a[b])},remove:function(b){var c=a[b];delete a[b];void 0!==c&&f(c)},lookupByData:function(b){return d.from(c.find(a,function(a){return a.data().result===b}))},destroy:function(){c.each(a,f);a={}}}}});l("c4","b kd e7 58 4a 1b 4h".split(" "),function(c,e,d,a,b,g,f){var h="data-"+e.resolve("image-upload"),
k=function(a,b){return f.descendants(a,"img["+h+'="'+b+'"]')},l=function(a){return f.descendants(a,"img:not(["+h+"])["+d.blobId()+"]")};return function(){var d=[],e=[],f=b.create({complete:a(["response"])}),q=function(a){d=c.filter(d,function(b,c){return b!==a});!1===s()&&(f.trigger.complete(e),e=[])},s=function(){return 0<d.length};return{findById:k,findAll:l,register:function(a,b){g.set(a,h,b);d.push(b)},report:function(a,b,d){c.each(b,function(a){g.remove(a,h);e.push({success:d,element:a.dom()})});
q(a)},inProgress:s,isActive:function(a){return c.contains(d,a)},events:f.registry}}});l("6j","a b t 93 bz af 6f c0 c1 c2 58 4a c3 c4 c5 o".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t){return function(u,v){var w=r(),z=b(),x=q(),y=a(u.ui),A=l.choose(v,y,u.communication()),B=A.uploader(),C=A.errors(),D=k.instance(v,w),F=p.create({begin:n([]),finish:n([])}),E=function(a){F.trigger.finish();z.done(a)};x.events.complete.bind(function(a){E(a.response())});var G=function(a,b,c,d){s.handleUpload(B,
x,w,a,b,c,function(a){a.fold(function(a){d(a)},L)})},H=function(a){u.content().body().each(function(b){var c=C.instance(),d=s.registerAssets(w,b,a.assets());e.each(d,function(a){a.fold(function(a){t.error(a)},function(a){!0===v.immediate&&I(b,a,c)})})})},L=function(a,b,c){u.undo().rewrite(c.objurl(),a.location)},I=function(a,b,c){!1!==v.bundled&&s.prepareForUpload(x,b.blobInfo().id(),b.image()).each(function(d){G(a,d,b.blobInfo(),c)})},J=function(a){e.each(a,function(a){x.report(a,d.none(),!1)})},
K=function(a,b){var c=g.partition(b),d=c.values;J(c.errors);var f=C.instance();D(d).get(function(b){b=g.partition(b);0<b.errors.length&&(y.showKey("imageedit.generic"),t.error("Image resample on upload errors: ",b.errors),J(b.errors));e.each(b.values,function(b){I(a,b,f)})})},N=function(a){c.isFunction(a)&&z.setCallback(a);!0!==v.bundled?E([]):u.content().body().fold(function(){E([])},function(a){F.trigger.begin();var b=s.findBlobs(x,w,a);0!==b.length||x.inProgress()?K(a,b):E([])})};return{init:function(a){f.goingToDesign(a)&&
(a=u.filter(),h.configure(a,w),u.uploader().events.uploadAssets.bind(H),u.uploader().events.pasteUpload.bind(function(){!0===v.immediate&&N()}),u.uploader().events.registerBlob.bind(function(a){var b=a.id(),c=a.blob(),d=a.bloburl();a=a.data();w.add(b,c,d,a)}));y.reset()},events:F.registry,reconstitute:N,destroy:function(){w.destroy()}}}});l("45","b 6f 3j 6g 6h 6i 6j".split(" "),function(c,e,d,a,b,g,f){return function(h,k,l,n){var p=g(h),r=f(k,l.imageupload),q=a(h,l.codeview),s=b(h,l.codeview),t=[p,
r,s],u=t.concat([q]);p.events.restore.bind(function(){n.restore();w(u,d.code())});p.events.maximize.bind(function(){n.save();w(t,d.code())});r.events.begin.bind(s.spin);r.events.finish.bind(s.stopSpin);q.events.change.bind(function(a){h.get().events.loaded.bind(function(){k.focus()});k.reconnect()});s.events.change.bind(function(a){v(a.type())});q.events.ready.bind(function(a){s.switchto(a.type())});var v=function(a){r.reconstitute(function(){h.get().getMode()!==a&&(s.spin(),q.setMode(a))})},w=function(a,
b){c.each(a,function(a){a.init(b)})};k.events.connected.bind(function(){w(u,e.alternate(k.getMode()))});return{setMode:v,uploadImages:r.reconstitute,destroy:function(){s.destroy();h.destroy();c.each(u,function(a){a.destroy()})}}}});l("47",["c","6"],function(c,e){return{settings:function(d){var a={ui:{toolbar:{display:!1}},spelling:{bundled:!1},highlighter:{bundled:!1},table:{bundled:!1},resize:{bundled:!1},codeview:{bundled:!1},imageEdit:{bundled:!1},imageupload:{immediate:!0},linkvalidator:{bundled:!1}},
a=c.detect().deviceType.isTouch()?a:{};return e.deepMerge(a,void 0===d.content||void 0===d.content.inline?{}:{fullscreen:{bundled:!1},codeview:{bundled:!1},plaincodeview:{bundled:!1}})}}});l("6k","b 7 t 1h 1b bx 21 2b w".split(" "),function(c,e,d,a,b,g,f,h,k){var l={isRtl:e.constant(!1)},n={isRtl:e.constant(!0)},p=function(a){return c.exists(["ar","fa","he"],function(b){return k.startsWith(a,b)})};return function(a){var c=p(a);return{directionAt:function(a){return"rtl"===(f.isText(a)?h.parent(a):
d.some(a)).map(g.getDirection).getOr("ltr")?n:l},uiDirection:function(){return c?n:l},updateUi:function(a){b.set(a,"dir",c?"rtl":"ltr")},destroy:e.noop}}});l("48","6 7 s 1h 6k 58 4a".split(" "),function(c,e,d,a,b,g,f){return function(h,k){var l=f.create({create:g(["instance"]),loaded:g([]),focus:g([]),dirty:g([]),change:g([]),internal:g(["command","data"])}),n=d.cached(function(){l.trigger.loaded()}),p=function(a){a.events.focus.bind(function(){l.trigger.focus()});a.events.dirty.bind(function(){l.trigger.dirty()});
a.events.change.bind(function(){l.trigger.change()});a.events.internal.bind(function(a){l.trigger.internal(a.command(),a.data())});a.events.loaded.bind(n)};p(h);var r=h,q=e.compose(b,a.get);return{get:function(){return r},swap:function(a,b){var d=r,f=c.deepMerge(k,b),g=d.state(),f=a(f,q(),g);p(f);l.trigger.create(f);r=f;return{old:e.constant(d),nu:e.constant(f),destroy:function(){d.destroy()}}},destroy:function(){r.destroy()},events:l.registry}}});l("2f","b 3p 6 u 40 41 42 43 44 45 46 47 48 49 4a 4b l o q 36".split(" "),
function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u,v,w,z){var x=function(a){return d.deepMerge(g.settings(a.resources),a,p.settings(a))};return function(p,A){var B=x(p);a.setLanguage(B.ui.locale.code);var C=d.deepMerge(g.state(),A),D=e.capture(u.fromDom(w),z),F=k(B,C),E=r(F,B),G=f(E),C=l(E,G,B,D),D=s.create({loaded:t([],E.events.loaded),focus:t([],E.events.focus),dirty:t([],E.events.dirty),change:t([],E.events.change),connected:t([],G.events.connected),internal:t(["command","data"],E.events.internal)});a.waitForLoad().get(function(d){d=
a.getFailures(d);0===d.length?(E.swap("code"===B.codeview.mode?b:h).destroy(),G.reconnect()):(c.each(d,function(a){v.error(a)}),v.error("Required resources are not available. Cancelling editor load."),F.failure())});return n.external({activateInline:G.activateInline,communication:q.communication,connect:G.connect,content:G.content,deactivateInline:G.deactivateInline,element:G.element,events:D.registry,filter:G.filter,focus:G.focus,getContent:G.getContent,getMode:G.getMode,insertHtmlAtCursor:G.insertHtmlAtCursor,
isDirty:G.isDirty,isPrettyPrinting:G.isPrettyPrinting,keyboard:G.keyboard,macros:G.macros,operations:G.operations,setContent:G.setContent,setDirty:G.setDirty,smartview:G.smartview,state:G.state,ui:G.ui,undo:G.undo,setMode:C.setMode,uploadImages:C.uploadImages,destroy:C.destroy})}});l("1n","2d 24 2e 7 2f 1b 2g".split(" "),function(c,e,d,a,b,g,f){var h=function(a,d,h){var l=c.withOptions(a,h);l.content&&l.content.tabindex&&(0,g.remove)(a,"tabindex",l.content.tabindex);h=b(l,{});var r=f.get(a),q=g.get(a,
"style");d(a);f.set(a,"");h.connect(a);e.set(h,r);return{polish:h,restore:function(b){f.set(a,b);null!==q&&void 0!==q&&0<q.length?g.set(a,"style",q):g.remove(a,"style");l.content&&l.content.tabindex&&(0,g.set)(a,"tabindex",l.content.tabindex);return a}}};return{replace:function(a,b){return h(a,b.content&&!0===b.content.autoresize?d.explicitAutoresize:d.explicit,b)},takeover:function(b,c){return h(b,a.noop,c)}}});l("1d",["1n","6"],function(c,e){return{replace:function(d,a){var b=e.deepMerge(a,{platform:{fillscreen:!0}}),
b=c.takeover(d,b);return{polish:b.polish,restore:b.restore}}}});l("1e","a b 1q 2h i 6 t w n".split(" "),function(c,e,d,a,b,g,f,h,k){var l=function(a,b){var d={};if(void 0===a)return d;e.each(b,function(b){var e=b.name(),e=a[e];void 0!==e&&(b.validate(e),d[b.output()]=c.isArray(b.contents)?l(e,b.contents):e)});return d},n=function(a){return e.map(void 0===a?[]:a,function(a){var c=l,d=b.string("prefix"),e=b.string("suffix"),f;f=[b.string("color"),b.string("background-color")];f=g.merge(b.object("style"),
{contents:f});return c(a,[d,e,f])})},p=function(a){if(void 0===a||void 0===a.url)return{service:!1};var b=u(a,"autocorrect",!0);if(c.isString(a.url))return{url:a.url,service:!0,autocorrect:b};throw new k("Spelling URL was not a string");},r=function(a){if(void 0===a||void 0===a.validation||void 0===a.validation.url)return{};if(c.isString(a.validation.url))return{url:a.validation.url,bundled:!0};throw new k("Link Validation URL was not a string");},q=function(a){if(void 0===a||void 0===a.embed||void 0===
a.embed.url)return{};if(c.isString(a.embed.url))return{url:a.embed.url,bundled:!0};throw new k("Link Embed URL was not a string");},s=function(a,d){var e=!1===d?!0:!1,f=(void 0===a?{}:a).upload;if(void 0!==f){if(void 0!==f.handler){if(!c.isFunction(f.handler))throw new k("Image Upload Handler was not a function");return{handler:f.handler,immediate:e,bundled:!0}}if(!c.isString(f.url))throw new k("Image Upload URL was not a string");return{direct:l(f,[b.string("url"),b.string("basePath"),b.bool("credentials")]),
immediate:e,bundled:!0}}return{}},t=function(a){a=l((void 0===a?{}:a).editing,[b.bool("enabled"),b.string("proxy"),b.number("preferredWidth"),b.number("preferredHeight")]);void 0!==a.enabled&&(a.bundled=a.enabled);return a},u=function(a,c,d){if(void 0===a[c])return d;b.bool(c).validate(a[c]);return a[c]},v=function(a){return l((void 0===a?{}:a).toolbar,[b.arrayOfToolbarGroups("items"),b.arrayOfStrings("contextual")])},w=function(a){if(void 0===a)return{};var d;if(void 0===a.toolbar)d={};else if(d=
a.toolbar,void 0!==d.offset){d=d.offset;if(!c.isObject(d)||void 0===d.top||void 0===d.left)throw new k("toolbar offset must be an object with left and top");if(!c.isNumber(d.top)&&!c.isNumber(d.left))throw new k("toolbar offset values must be numbers");d={draggable:!0,offset:{left:d.left,top:d.top}}}else d={};a=l(a.toolbar,[b.bool("visible"),b.bool("draggable")]);return g.deepMerge(d,a)},z=function(a){if(void 0!==a){if(!c.isString(a))throw new k("The basePath configuration value was not a string");
return h.removeTrailing(a,"/")}},x=function(a){if(void 0===a||void 0===a.fonts)return[];a=a.fonts;if(!c.isArray(a))throw new k("The fonts configuration was not an array");var b=function(a,b){console.error(a+" :",b);throw new k(a);};return e.map(a,function(a){if(c.isString(a))return{value:a,text:a};c.isObject(a)||b("The fonts array value was not a string or object",a);void 0!==a.value&&c.isString(a.value)||b("The fonts value configuration was not a string or is undefined",a);void 0===a.text||c.isString(a.text)||
b("The fonts text configuration was not a string",a);void 0!==a.text&&c.isString(a.text)&&0===a.text.length&&b("The fonts text configuration was an empty string",a);return{value:a.value,text:a.text&&0<a.text.length?a.text:a.value}})},y=function(a){a=l(void 0===a?{}:a,[b.bool("enabled"),b.bool("showButton")]);return{bundled:void 0===a.enabled||!0===a.enabled,showButton:void 0===a.showButton||!0===a.showButton}},A=function(a){a=g.merge({allowLocal:!0},void 0===a?{}:a);b.bool("allowLocal").validate(a.allowLocal);
return a.allowLocal},B=function(a){a=l(void 0===a?{}:a,[b.arrayOfStrings("languages")]);return void 0===a.languages?{}:{languages:e.map(a.languages,function(a){return a.toLowerCase()})}},C=function(a){return void 0===a.styles?{}:{styles:e.filter(a.styles,function(a){a=a.rule;return!(void 0===a||"."===a||0<=a.indexOf("..")||0<=a.indexOf("#"))})}},D=function(a,b,c){return"plain"===a?{forceText:!0}:{officeStyles:"retain"===a?"merge":void 0!==a?a:"prompt",htmlStyles:"retain"===a?"merge":void 0!==a?a:
"merge",allowLocalImages:c,enableFlashImport:!1===b?!1:!0}},F=function(a){var c=l(a,[b.arrayOfStrings("plugins")]),c=void 0===c.plugins?[]:c.plugins,d=l(a.ui,[b.string("locale","code")]),e=u(a,"autosubmit",!0),f=l(a.content,[b.arrayOfObjects("highlighters")]),h=l(a.paste,[b.string("style"),b.bool("enableFlashImport")]),k=function(){var c=l(a.css,[b.arrayOfStrings("stylesheets"),b.string("documentStyles")]),d=l(a.ui,[b.bool("autoresize")]);return g.merge(c,d)}(),E=l(a.css,[b.arrayOfObjects("styles")]),
F=l(a.ui,[b.bool("shortcuts","features")]),S=B(a.ui),P=y(a.codeview),U=p(a.spelling),Q=r(a.links),V=q(a.links),W=A(a.images),Y=t(a.images),X=W?s(a.images,Y.bundled):{},Z=v(a.ui),$=w(a.ui),aa=z(a.basePath),R=x(a.ui),ga=function(){var c=l(a.ui,[b.string("aria-label","editorName"),b.bool("autoresize")]);return g.merge(c,{locale:d,toolbar:$})}();return{resources:aa,plugins:c,spelling:U,linkvalidator:Q,embed:V,font:{faces:R},ui:ga,shortcuts:F,autosubmit:e,highlighter:{external:n(f.highlighters)},smartclipboard:{paste:D(h.style,
h.enableFlashImport,W)},parlance:S,content:k,imageEdit:Y,imageupload:X,blocktag:C(E),fileupload:{allowLocalImages:W},platform:{toolbar:Z,allowLocalImages:W},plaincodeview:{bundled:P.bundled},codeview:P}},E=function(c){var e=void 0===c.privateapi?{}:c.privateapi;c=l(e.ui,[b.func("bounds"),b.bool("showHelpHint"),b.domElement("bottomBar"),b.domElement("sideBar")]);var h=l(e.integration,[b.string("type"),b.string("version")]),n=void 0===e.content?{}:e.content,p=l(n.macros,[b.arrayOfStrings("whitelist")]),
n=l(n,[b.string("base")]);void 0!==p.whitelist&&(p.whitelist=f.some(p.whitelist));var r=a.paramList(),q=l(e.mentions,r),s=d.keys(q).length,e=l(e.output,[b.bool("prettyprint")]);if(0<s){if(s!==r.length)throw new k("Missing @mentions configuration. Expected "+r.length+" objects, was "+s);q.bundled=!0}return{ui:c,help:{integration:h},macros:p,content:g.merge(n,e),mentions:q}};return function(a){a=void 0!==a?a:{};return g.deepMerge(F(a),E(a))}});l("v",["b"],function(c){return{getPath:function(e){var d=
document.getElementsByTagName("script");return(d=c.find(d,function(a){return a.src.indexOf(e)===a.src.length-e.length}))?d.src.substring(0,d.src.indexOf(e)):void 0}}});l("5","67stuvw".split(""),function(c,e,d,a,b,g,f){var h=d.cached(function(){return a.from(g.getPath("textboxio.js")).map(function(a){return f.removeTrailing(a,"/")})}),k=function(a){return a+"/resources"};return{setupResources:function(d){return a.from(d.resources).orThunk(h).map(k).fold(e.die("basePath auto detection failed, please provide one in the editor configuration"),
function(a){a=b.load(a);return c.deepMerge(d,{resources:a})})},speculate:function(c){a.from(c).orThunk(h).map(k).each(b.load)}}});l("2x","4c c 7 t 2o 1c 3y l 30 37 q 3w".split(" "),function(c,e,d,a,b,g,f,h,k,l,n,p){var r=function(a,b,c){var d=function(){var a=h.fromDom(n.activeElement);b(a)&&c()};return f.bind(a,"blur",function(){p(d,200)})},q=function(a,b,c){return f.bind(a,"focusout",function(a){u(a,b)&&c()})},s=function(a,b,c){return f.bind(a,"blur",function(a){u(a,b)&&c()})},t=function(){var a=
e.detect();return a.browser.isFirefox()?r:a.browser.isIE()?q:s}(),u=function(b,c){var d=a.from(b.raw().relatedTarget).getOr(n.activeElement);return c(h.fromDom(d))};return{register:function(a,d,e,h){var n=f.bind(a,"focus",function(a){k.hasFocus(a.target())&&e()}),p=t(a,function(e){return!l.closest(e,function(e){return g.eq(a,e)||g.eq(d(),e)||b.has(e,c.magicBox())})},h);return{destroy:function(){n.unbind();p.unbind()}}}}});l("2y",["4d","1b","2o","4e","2p"],function(c,e,d,a,b){return function(g,f,h){d.add(f,
c.base());return{toolbarShow:function(){d.add(f,c.active());b.set(g(),"display","block")},toolbarHide:function(){d.remove(f,c.active());b.set(g(),"display","none")},isVisible:function(){return d.has(f,c.active())},restore:function(){a.remove(f,[c.base(),c.active()]);e.setAll(f,h)}}}});l("1o","24 2x 2y 6 2f 2z 1b 2n 1c 30 2g".split(" "),function(c,e,d,a,b,g,f,h,k,l,n){return{replace:function(p,r){var q=a.deepMerge(r,{content:{inline:p}}),s=f.clone(p),t=b(q),u=d(t.element,p,s),v=g(u.toolbarHide,u.toolbarShow,
!1),w=function(){var a=u.isVisible();v.on();!1===a&&t.activateInline()},z=function(){t.deactivateInline();v.off()},x=e.register(p,t.element,w,z),q=function(){l.active().each(function(a){k.eq(a,p)||z()})};q();t.events.connected.bind(q);t.events.loaded.bind(function(){t.content().getSelection().bind(w)});var y=t.focus,q={polish:a.merge(t,{focus:function(){w();y()}}),restore:function(a){x.destroy();u.restore();n.set(p,a);return p}};t.connect(h.body());c.set(t,n.get(p));return q}}});l("kf",[],function(){return{ATTRIBUTE:2,
CDATA_SECTION:4,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,ELEMENT:1,TEXT:3,PROCESSING_INSTRUCTION:7,ENTITY_REFERENCE:5,ENTITY:6,NOTATION:12}});l("c9",["kf"],function(c){var e=function(a){return a.dom().nodeName.toLowerCase()},d=function(a){return a.dom().nodeType},a=function(a){return function(b){return d(b)===a}},b=a(c.ELEMENT),g=a(c.TEXT),a=a(c.DOCUMENT);return{name:e,type:d,value:function(a){return a.dom().nodeValue},isElement:b,isText:g,isDocument:a,isComment:function(a){return d(a)===
c.COMMENT||"#comment"===e(a)}}});l("6m","c6 c7 c8 c9 n o".split(" "),function(c,e,d,a,b,g){var f=function(a,d,e){if(c.isString(e)||c.isBoolean(e)||c.isNumber(e))a.setAttribute(d,e+"");else throw g.error("Invalid call to Attr.set. Key ",d,":: Value ",e,":: Element ",a),new b("Attribute value was not simple");},h=function(a,b,c){f(a.dom(),b,c)},k=function(a,b){var c=a.dom().getAttribute(b);return null===c?void 0:c},l=function(a,b){var c=a.dom();return c&&c.hasAttribute?c.hasAttribute(b):!1};return{clone:function(a){return e.foldl(a.dom().attributes,
function(a,b){a[b.name]=b.value;return a},{})},set:h,setAll:function(a,b){var c=a.dom();d.each(b,function(a,b){f(c,b,a)})},get:k,has:l,remove:function(a,b){a.dom().removeAttribute(b)},hasNone:function(a){a=a.dom().attributes;return void 0===a||null===a||0===a.length},transfer:function(b,c,d){a.isElement(b)&&a.isElement(c)&&e.each(d,function(a){l(b,a)&&!l(c,a)&&h(c,a,k(b,a))})}}});l("6n",["9","n","o","q"],function(c,e,d,a){var b=function(a){if(null===a||void 0===a)throw new e("Node cannot be null or undefined");
return{dom:c.constant(a)}};return{fromHtml:function(c,e){var h=(e||a).createElement("div");h.innerHTML=c;if(!h.hasChildNodes()||1<h.childNodes.length)throw d.error("HTML does not have a single root node",c),"HTML must have a single root node";return b(h.childNodes[0])},fromTag:function(c,d){var e=(d||a).createElement(c);return b(e)},fromText:function(c,d){var e=(d||a).createTextNode(c);return b(e)},fromDom:b}});l("4f",["6m","6n"],function(c,e){return{attach:function(d,a,b,g){if(4!==arguments.length)throw"requires 4 parameters";
var f=function(a){return function(){var b=e.fromTag("input");c.setAll(b,{type:"hidden",name:a});d.append(b.dom());return function(a){b.val(a)}}},h=b.getOrThunk(f(a)),k=g.getOrThunk(f(a+"_styles"));return function(a){h(a.content);k(a.styles)}}}});l("4g",[],function(){return function(c){var e=!1;return{submit:function(){e=!0;c.submit[0]?c.submit[0].click():c.submit.click?c.submit.click():c.submit();e=!1},inprogress:function(){return e}}}});l("32",["4f","4g"],function(c,e){var d=function(a,b){var c=
a.onsubmit,d=e(a);a.onsubmit=function(e){if(d.inprogress())return!0;b(function(){c&&!1===c.apply(a)||setTimeout(d.submit,0)});return!1};return{unbind:function(){a.onsubmit=c}}};return{attachToFormSubmit:d,attachToParentFormSubmit:function(a,b,e,f,h){if(5!==arguments.length)throw"requires 5 parameters";var k=a.parents("form:first");if(0!==k.size()){var l=k.get(0),n=c.attach(k,b,f,h);d(l,function(a){n(e());a()})}}}});l("1p","31 2d 24 2e 32 t 2f 1b 2p l 2q 2s 33 2b 34".split(" "),function(c,e,d,a,b,
g,f,h,k,l,n,p,r,q,s){var t=function(a,b,c,h){k.set(b,"display","none");var l=f(e.withOptions(b,h)),m=s.get(b);l.connect(a);d.set(l,m);var n=!0===h.autosubmit?u(b,l):g.none();return{polish:l,restore:function(d){n.each(function(a){a.unbind()});s.set(b,d);c.fold(function(){k.remove(b,"display")},function(a){k.set(b,"display",a)});p.remove(a);return b}}},u=function(a,c){return r.closest(a,"form").map(function(e){return b.attachToFormSubmit(e.dom(),function(b){c.uploadImages(function(){s.set(a,d.get(c));
b()})})})};return{replace:function(b,d){var e=k.getRaw(b,"display");return q.parent(b).fold(function(){return null},function(){var f=h.get(b,"id"),f=f?"ephox_"+f:c.generate("ephox"),g=l.fromTag("div");h.set(g,"id",f);k.copy(b,g);(d.content&&!0===d.content.autoresize?a.copyFromAutoresize:a.copyFrom)(b,g);n.before(b,g);return t(g,b,e,d)})}}});l("e","1d 1e 5 1n 1o 1p 6 7 s".split(" "),function(c,e,d,a,b,g,f,h,k){var l={textarea:g,div:a,body:c},n={div:b,blockquote:b,article:b,aside:b,figure:b,figcaption:b,
footer:b,header:b,nav:b,section:b};return function(a){var b=function(b,c){var g=k.cached(function(){var b=f.deepMerge(e(c),a);return d.setupResources(b)});return{constructors:h.constant(b),options:g}};return{classic:function(a){return b(l,a)},inline:function(a){a=f.deepMerge({ui:{toolbar:{draggable:!0}}},a);return b(n,a)}}}});l("h",["i","7"],function(c,e){var d=function(a){return{name:a.name,required:e.constant(!1),validate:a.validate}};return{bool:e.compose(d,c.bool),func:e.compose(d,c.func),number:e.compose(d,
c.number),object:e.compose(d,c.object),string:e.compose(d,c.string)}});l("3","abcdef8ghij7klmno".split(""),function(c,e,d,a,b,g,f,h,k,l,n,p,r,q,s,t,u){return function(v){var w=a(),z=b(v),x=function(a,b){var d;d=c.isString(a)?s.one(a).getOrThunk(p.die("Selector did not match any elements: "+a)):q.fromDom(a);return w.getOrCreate(d,b)},y=function(a,b){c.isString(a)?u.error("Selector did not match a "+b+": ",a):u.error("Element was not a "+b+": ",a);throw new t("Unable to create textbox.io editor");},
A=d.detect(),B=function(a){c.isString(a)||n(a,[l.domElement("element")]);return c.isString(a)?s.all(a):e.map(a,q.fromDom)},C=function(a,b){var c=B(a),c=e.map(c,function(a){return w.getOrCreate(a,b)});return r.cat(c)};return g.makeReadOnly({replace:function(a,b){n(arguments,[l.stringOrDom("element"),k.object("options")]);return x(a,z.classic(b)).getOrThunk(p.curry(y,a,"div or textarea"))},replaceAll:function(a,b){n(arguments,[l.stringOrArray("elements"),k.object("options")]);return C(a,z.classic(b))},
inline:function(a,b){if(A.deviceType.isTouch())throw new t("Mobile does not not support inline editing");n(arguments,[l.stringOrDom("element"),k.object("options")]);return x(a,z.inline(b)).getOrThunk(p.curry(y,a,"supported tag for inline editing"))},inlineAll:function(a,b){if(A.deviceType.isTouch())throw new t("Mobile does not not support inline editing");n(arguments,[l.stringOrArray("elements"),k.object("options")]);return C(a,z.inline(b))},get:function(a){n(arguments,[l.string("selector")]);return w.get(a)},
getActiveEditor:function(){return w.getActiveEditor().getOr(null)},definePlugin:function(a,b){n(arguments,[l.string("namespace"),l.object("code")]);h.get(a).each(function(){throw new t("namespace "+a+" is already defined");});if(void 0===b.initialize||!c.isFunction(b.initialize))throw new t("plugin does not have an initialize function");return h.register(a,b)},version:f,isSupported:p.constant(!0)})}});l("4",["c","p","o","q"],function(c,e,d,a){var b=function(a){return e.error("ERROR: Textbox.io requires "+
a+" or above")},g=c.detect().os,f=c.detect().browser,h="CSS1Compat"===a.compatMode||"html"===a.doctype;return{supported:function(){if(f.isIE()&&11>f.version.major)return b("Internet Explorer 11");if(g.isOSX()&&f.isSafari()&&9>f.version.major)return b("Safari 9");if(g.isiOS()&&9>g.version.major)return b("iOS 9");if(!h&&f.isIE())return e.error("ERROR: Document is not in standards mode. Textbox.io requires standards mode on Internet Explorer.");h||void 0===d.warn||d.warn("WARNING: Document is not in standards mode. Textbox.io may experience user interface issues.");
return e.value()}}});l("0","1234567".split(""),function(c,e,d,a,b,g,f){var h=function(a){c.textboxio=a},k=f.compose(h,e);return function(){var e=c.install;c.install=function(f,l){c.install=e;a.supported().fold(k,function(){var a=null===l||void 0===l?{onprem:!0}:l,a=null===f||void 0===f?a:g.deepMerge(a,{resources:f});h(d(a));b.speculate(a.resources)})}}});pa("0")()})();
install();
